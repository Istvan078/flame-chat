"use strict";(self.webpackChunkProject=self.webpackChunkProject||[]).push([[466],{9466:(xt,C,r)=>{r.r(C),r.d(C,{ChatModule:()=>vt});var T=r(7398);class v{constructor(){this.participants=["user_id_1","user_id_2"],this.message={senderId:"user_id_1",message:"",timeStamp:"2024.01.27",displayName:"",profilePhoto:"",email:""}}}var x=r(8033),m=r(3305),t=r(5879),y=r(6487),b=r(4385),M=r(7506),u=r(6814),f=r(4190);const O=["spanAnchor"];function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"input",8),t.NdJ("ngModelChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.searchWord=s)}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngModel",e.searchWord)}}function I(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",18)(2,"mat-card-header",12)(3,"mat-card-title"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content",19),t._UZ(6,"img",20),t.qZA(),t.TgZ(7,"mat-card-footer")(8,"mat-card-content",12)(9,"mat-card-subtitle"),t._uU(10),t.qZA(),t.TgZ(11,"div",0)(12,"button",21)(13,"span",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,o=t.oxw(3);return t.KtG(o.removeFriend(s.friendKey))}),t.TgZ(14,"mat-icon"),t._uU(15,"person_remove"),t.qZA()()()()()()(),t.BQk()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",e.displayName," "),t.xp6(2),t.Q6J("src",e.profilePicture,t.LSH),t.xp6(4),t.hij(" ",e.email," ")}}function k(n,a){if(1&n&&(t.ynx(0),t.YNc(1,I,16,3,"ng-container",5),t.BQk()),2&n){const e=a.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.friendId===i.uid)}}function A(n,a){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,k,2,1,"ng-container",17),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.userFriends)}}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3).$implicit,o=t.oxw(2);return t.KtG(o.getMessageUser(s))}),t.TgZ(1,"span",31)(2,"mat-icon"),t._uU(3," chat "),t.qZA()()()}}function U(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",23)(2,"h5",24)(3,"h2"),t._uU(4),t.qZA()(),t.TgZ(5,"div",25),t._UZ(6,"img",26)(7,"p",27),t.qZA(),t.TgZ(8,"div",28),t.YNc(9,N,4,0,"button",29),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw().$implicit;t.xp6(4),t.Oqu(i.displayName),t.xp6(2),t.Q6J("src",i.profilePicture,t.LSH),t.xp6(3),t.Q6J("ngIf",e.friendId===i.uid)}}function J(n,a){if(1&n&&(t.ynx(0),t.YNc(1,U,10,3,"ng-container",5),t.BQk()),2&n){const e=a.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.friendId===i.uid)}}function Q(n,a){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,J,2,1,"ng-container",17),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.userFriends)}}function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"mat-accordion")(3,"mat-expansion-panel",11)(4,"mat-expansion-panel-header",12)(5,"mat-panel-title"),t._uU(6," Ismer\u0151s\xf6k "),t.TgZ(7,"mat-icon",13),t._uU(8,"groups"),t.qZA()()(),t.TgZ(9,"div",9),t.YNc(10,A,2,1,"div",14),t.qZA()(),t.TgZ(11,"mat-expansion-panel")(12,"mat-expansion-panel-header",12)(13,"mat-panel-title"),t._uU(14," \xdczenetek "),t.TgZ(15,"mat-icon",13),t._uU(16,"chat"),t.qZA()()(),t.TgZ(17,"div",9),t.YNc(18,Q,2,1,"div",14),t.qZA()(),t.TgZ(19,"mat-expansion-panel",15)(20,"mat-expansion-panel-header",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toUserProfile())}),t.TgZ(21,"mat-panel-title"),t._uU(22,"Profilom "),t.TgZ(23,"mat-icon",13),t._uU(24,"person"),t.qZA()()(),t.TgZ(25,"div",9)(26,"div",10),t._UZ(27,"app-user-profile"),t.qZA()()(),t.TgZ(28,"mat-expansion-panel",15)(29,"mat-expansion-panel-header",12)(30,"mat-panel-title"),t._uU(31,"Kezd\u0151lap "),t.TgZ(32,"mat-icon",13),t._uU(33,"feed"),t.qZA()()(),t.TgZ(34,"div",9)(35,"div",10),t._UZ(36,"app-news"),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.userProfiles),t.xp6(8),t.Q6J("ngForOf",e.userProfiles)}}function q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(5).$implicit,o=t.oxw(2);return t.KtG(o.signAsFirstFriend(s))}),t.TgZ(1,"span",31)(2,"mat-icon"),t._uU(3," person_add "),t.qZA()()()}}function D(n,a){if(1&n&&(t.ynx(0),t.YNc(1,q,4,0,"button",37),t.BQk()),2&n){const e=a.$implicit,i=t.oxw(4).$implicit;t.xp6(1),t.Q6J("ngIf",e.uid===i.uid)}}function j(n,a){if(1&n&&(t.ynx(0),t.YNc(1,D,2,1,"ng-container",17),t.BQk()),2&n){const e=t.oxw(5);t.xp6(1),t.Q6J("ngForOf",e.userNotFriends)}}function Y(n,a){if(1&n&&(t.TgZ(0,"ngb-toast",35),t._UZ(1,"img",36),t.TgZ(2,"div")(3,"small"),t._uU(4),t.qZA()(),t.YNc(5,j,2,1,"ng-container",5),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw().$implicit;t.Q6J("id",i.uid)("autohide",!1)("header",i.displayName),t.xp6(1),t.Q6J("src",i.profilePicture,t.LSH),t.xp6(3),t.Oqu(i.email),t.xp6(1),t.Q6J("ngIf",e.uid===i.uid)}}function E(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Y,6,6,"ngb-toast",34),t.BQk()),2&n){const e=a.$implicit,i=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.uid===i.uid&&s.userProfile[0].uid!==i.uid)}}function B(n,a){if(1&n&&(t.TgZ(0,"div",33),t.YNc(1,E,2,1,"ng-container",17),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.userNotFriends)}}function z(n,a){if(1&n&&(t.TgZ(0,"div",9),t.YNc(1,B,2,1,"div",32),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.userProfiles)}}function $(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.backToUsers())}),t.TgZ(1,"span",31)(2,"mat-icon"),t._uU(3," keyboard_backspace "),t.qZA()()()}}function G(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageButtonClicked=!0)}),t._uU(1,"\xdczenet \xedr\xe1sa"),t.qZA()}}function K(n,a){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,$,4,0,"button",40),t.YNc(2,G,2,0,"button",41),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.messageButtonClicked),t.xp6(1),t.Q6J("ngIf",!e.messageButtonClicked)}}function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.editMessage?s.updateMessage():s.addMessage())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.editMessage?"Uzenet Modositasa":"\xdczenet k\xfcld\xe9se"," ")}}function L(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.isSAdmin?s.deleteMessages():s.clearInput())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.isSAdmin?"\xdczenetek t\xf6rl\xe9se":"Mez\xf6 t\xf6rl\xe9se"," ")}}function R(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",46)(1,"mat-card-header",47)(2,"mat-card-title")(3,"button",48),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return s.backToUsers(),t.KtG(s.messageButtonClicked=!1)}),t.TgZ(4,"span",31)(5,"mat-icon"),t._uU(6," keyboard_backspace "),t.qZA()()(),t.TgZ(7,"mat-form-field",49)(8,"mat-label"),t._uU(9,"\xdczenet \xedr\xe1sa"),t.qZA(),t.TgZ(10,"textarea",50),t.NdJ("ngModelChange",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.message.message.message=s)}),t.qZA()()()(),t.TgZ(11,"mat-card-content",0),t.YNc(12,H,2,1,"button",51),t.YNc(13,L,2,1,"button",52),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(10),t.Q6J("ngModel",e.message.message.message),t.xp6(2),t.Q6J("ngIf",e.message.message),t.xp6(1),t.Q6J("ngIf",e.message.message)}}function W(n,a){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,R,14,3,"mat-card",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.messageButtonClicked)}}function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,o=t.oxw(2);return o.navigateToUpdateMessage(s),t.KtG(o.messageButtonClicked=!o.messageButtonClicked)}),t._uU(1," M\xf3dos\xedt\xe1s "),t.qZA()}if(2&n){const e=t.oxw(2).$implicit;t.Q6J("id",e.key)}}function V(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",71),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.deleteMessage(s))}),t.qZA()}}function tt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-title"),t._uU(4),t.qZA(),t._UZ(5,"img",58,59),t.qZA()(),t.TgZ(7,"div",60)(8,"mat-card-content")(9,"b"),t._uU(10),t.qZA()(),t.TgZ(11,"mat-card-content",61),t._UZ(12,"mat-card-subtitle"),t.qZA()(),t.TgZ(13,"mat-card-footer")(14,"mat-card-content",62),t._UZ(15,"hr"),t.TgZ(16,"mat-card-title-group",63)(17,"div",64)(18,"mat-card-subtitle",65),t._uU(19),t.qZA(),t.TgZ(20,"mat-card-subtitle",65),t._uU(21),t.qZA()()(),t.TgZ(22,"div",66)(23,"mat-card-actions",67),t.YNc(24,X,2,1,"button",68),t.YNc(25,V,1,0,"span",69),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",e.message.displayName," "),t.xp6(1),t.Q6J("id",i.message.key)("src",e.message.profilePhoto,t.LSH),t.xp6(5),t.Oqu(e.message.message),t.xp6(8),t.Q6J("ngClass",e.message.senderId===i.userProfile[0].uid?"grey":"right"),t.xp6(1),t.Oqu(e.message.email),t.xp6(1),t.Q6J("ngClass",e.message.senderId===i.userProfile[0].uid?"grey":"right"),t.xp6(1),t.Oqu(e.message.timeStamp),t.xp6(3),t.Q6J("ngIf",i.userProfile[0].uid===e.message.senderId),t.xp6(1),t.Q6J("ngIf",i.userProfile[0].uid===e.message.senderId)}}function et(n,a){if(1&n&&(t.TgZ(0,"div",56)(1,"mat-card",57),t.YNc(2,tt,26,10,"ng-container",5),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngClass",e.message.senderId===i.userProfile[0].uid?"justify-content-start mainDivUser":"justify-content-end mainDivUsers"),t.xp6(1),t.Q6J("ngClass",e.message.senderId===i.userProfile[0].uid?"left messagesCard":"right"),t.xp6(1),t.Q6J("ngIf",e.message.senderId===i.selectedFriend[0].friendId&&e.participants[1]===i.userProfile[0].uid||e.message.senderId==i.userProfile[0].uid&&e.participants[1]===i.selectedFriend[0].friendId)}}function nt(n,a){if(1&n&&(t.ynx(0),t.YNc(1,et,3,3,"div",55),t.ALo(2,"filter"),t.ALo(3,"sort"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.lcZ(3,4,e.allChatsArray),e.searchWord))}}let p=(()=>{class n{constructor(e,i,s,o,d){this.realTimeDatabase=e,this.auth=i,this.base=s,this.viewPortScroller=o,this.router=d,this.users=[],this.signAsFriend=new x.k,this.isSAdmin=!1,this.message=new v,this.updateUserMessage=new v,this.messages=[],this.editMessage=!1,this.friendsOn=!1,this.sendPrivateMessageOn=!1,this.updateMessageKey="",this.userProfiles=[],this.userProfile=[],this.count=0,this.searchWord="",this.isFriend=!1,this.messageButtonsOn=!1,this.messageButtonClicked=!1,this.userMessages=!1,this.userNotFriends=[],this.userFriends=[],this.signedFriend={friendId:""},this.selectedFriend=[]}ngOnInit(){setTimeout(()=>{this.userLoggedInSubscription=this.auth.userLoggedInSubject.subscribe(e=>{this.base.getUserProfiles().subscribe(i=>{this.userProfiles=i,this.userProfile=i.filter(s=>s.uid===e.uid),this.userProfile[0].key=this.userProfile[0].key,this.base.getFriends(this.userProfile[0].key).subscribe(s=>{this.friendsOn=!0,this.userProfile[0].friends=s;let d,o=[];d=this.userProfile[0].friends.map(l=>(o.push(l.friendId),d={friendKey:l.key,friendId:l.friendId})),this.userFriends=d;let h=this.userProfiles.map(l=>l).filter(l=>!o.includes(l.uid));this.userNotFriends=h}),this.getMessages().subscribe(s=>{console.log(s),this.allChatsArray=s})})})},2e3),this.isSuperAdminSubscription=this.auth.isSuperAdmin.subscribe(e=>this.isSAdmin=e)}randomIdGenerator(){const e="abcdefghijklmnopqrstuvwxyz0123456789";let i="chat_id_",s="friend_id_";for(let o=0;o<=7;o++)this.message.message.message?i+=e.charAt(Math.round(30*Math.random())):s+=e.charAt(Math.round(30*Math.random()));return this.message.message.message?i:s}toUserProfile(){this.router.navigate([`profile/${this.userProfile[0].uid}`])}addMessage(){let e=new Date,i=e.toLocaleDateString()+"  "+e.toLocaleTimeString();this.message.message.senderId=this.userProfile[0].uid,this.message.message.timeStamp=i,this.message.participants[0]=this.userProfile[0].uid,this.message.participants[1]=this.selectedFriend[0].friendId,this.message.message.displayName=this.userProfile[0].displayName,this.message.message.email=this.userProfile[0].email,this.message.message.profilePhoto=this.userProfile[0].profilePicture,this.base.updateMessage(this.randomIdGenerator(),this.message)}getMessageUser(e){let i=this.userProfile[0].friends.filter(s=>s.friendId==e.uid);this.selectedFriend=i,this.sendPrivateMessageOn=!0,this.userMessages=!0}clearInput(){this.message.message.message=""}deleteMessage(e){this.base.deleteMessage(e)}getMessages(){return this.base.refChats.snapshotChanges().pipe((0,T.U)(e=>e.map(i=>({key:i.payload.key,...i.payload.val()}))))}deleteMessages(){this.base.deleteMessages()}navigateToUpdateMessage(e){this.updateUserMessage=e,console.log(this.updateUserMessage),this.updateMessageKey=e.key,console.log(this.updateMessageKey),this.editMessage=!0,this.message.message.message=e.message.message,this.viewPortScroller.scrollToPosition([0,0])}updateMessage(){let e=new Date,i=e.toLocaleDateString()+"  "+e.toLocaleTimeString();this.updateUserMessage.message.timeStamp=i,this.updateUserMessage.message.message=this.message.message.message,this.base.updateMessage(this.updateMessageKey,this.updateUserMessage),this.viewPortScroller.scrollToAnchor(this.updateMessageKey),this.editMessage=!1}backToUsers(){this.sendPrivateMessageOn=!1,this.userMessages=!1}signAsFirstFriend(e){if(0===this.userProfile[0].friends.length){let i={friendId:e.uid};this.base.addFriends(this.randomIdGenerator(),i).then(()=>this.router.navigate(["chat"]))}else this.signAsAFriend(e)}signAsAFriend(e){let i={friendId:e.uid},s=this.userProfile[0].friends.filter(o=>o.friendId==e.uid);for(let o in s[0])this.signedFriend={friendId:s[0].friendId};0===s.length&&this.base.addFriends(this.randomIdGenerator(),i).then(()=>this.router.navigate(["chat"]))}removeFriend(e){this.base.removeFriend(e).then(()=>this.router.navigate(["chat"]))}ngOnDestroy(){this.userLoggedInSubscription&&this.userLoggedInSubscription.unsubscribe(),this.isSuperAdminSubscription&&this.isSuperAdminSubscription.unsubscribe(),this.usersSubscription&&this.usersSubscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.KQ),t.Y36(b.e),t.Y36(M.b),t.Y36(u.EM),t.Y36(f.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(i,s){if(1&i&&(t.Gf(O,5),t.Gf(m.pp,5)),2&i){let o;t.iGM(o=t.CRH())&&(s.toCreated=o.first),t.iGM(o=t.CRH())&&(s.accordion=o.first)}},decls:8,vars:6,consts:[[1,"text-center"],["class","text-center searchContainer",4,"ngIf"],["class","row",4,"ngIf"],["class","d-flex justify-content-center sendMessageOpenButton",4,"ngIf"],["class","messageCardDiv d-grid justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"text-center","searchContainer"],[1,"mb-2","w-50"],["type","text","id","floatingInput","name","search","placeholder","\xdczenet keres\xe9se",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col"],[1,"mb-2"],[1,"d-grid","justify-content-center"],[1,"ms-2"],["class","col",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"d-grid","justify-content-center",3,"click"],[4,"ngFor","ngForOf"],[1,"mb-3"],[1,"d-flex","justify-content-center"],["alt","","width","50px","height","50px",1,"rounded",3,"src"],["type","button",1,"btn","btn-sm","btn-danger"],[1,"icons","text-center",3,"click"],[1,"card","text-center","mt-2","text-white","bg-warning"],[1,"card-header"],[1,"card-body"],["width","50px","height","50px",1,"rounded-circle",3,"src"],[1,"card-text"],[1,"card-footer"],["mat-raised-button","","class","btn btn-sm btn-primary ms-2 blue","type","button",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"btn","btn-sm","btn-primary","ms-2","blue",3,"click"],[1,"icons"],["class","col-12 col-md-6 col-lg-3 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-3","mb-2"],["class","d-grid justify-content-center text-center mt-2",3,"id","autohide","header",4,"ngIf"],[1,"d-grid","justify-content-center","text-center","mt-2",3,"id","autohide","header"],["width","50px","height","50px","alt","",3,"src"],["mat-raised-button","","color","accent","type","button",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","type","button",3,"click"],[1,"d-flex","justify-content-center","sendMessageOpenButton"],["class","green ms-2 me-2","type","button","mat-raised-button","",3,"click",4,"ngIf"],["class","ms-2","mat-raised-button","","color","accent","type","button",3,"click",4,"ngIf"],["type","button","mat-raised-button","",1,"green","ms-2","me-2",3,"click"],["mat-raised-button","","color","accent","type","button",1,"ms-2",3,"click"],[1,"messageCardDiv","d-grid","justify-content-center"],["class","messageCard",4,"ngIf"],[1,"messageCard"],[1,"justify-content-center"],["type","button","mat-raised-button","",1,"green","ms-2","me-2","mb-2",3,"click"],[1,"messageInput"],["matInput","","rows","2",3,"ngModel","ngModelChange"],["class","me-2","color","accent","mat-raised-button","",3,"click",4,"ngIf"],["class","deleteButton","mat-raised-button","",3,"click",4,"ngIf"],["color","accent","mat-raised-button","",1,"me-2",3,"click"],["mat-raised-button","",1,"deleteButton",3,"click"],["class","d-grid mainDiv",3,"ngClass",4,"ngFor","ngForOf"],[1,"d-grid","mainDiv",3,"ngClass"],[1,"card",3,"ngClass"],["mat-card-sm-image","","alt","Profilk\xe9p",1,"ms-2","overflow-auto",2,"border-radius","10px",3,"id","src"],["spanAnchor",""],[1,"recipe-making-container"],[1,"card-content"],[1,"pad"],[1,"mat-card-title-group"],[1,"emailDateDiv","d-grid","justify-content-start"],[3,"ngClass"],[1,"buttonCont"],[1,"d-flex","flex-wrap","justify-content-end"],["class","me-2","class","updateButton me-2","mat-raised-button","","color","accent","type","button",3,"id","click",4,"ngIf"],["class","ms-2 mt-2 bi bi-trash3-fill h3 text-danger rounded",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","type","button",1,"updateButton","me-2",3,"id","click"],[1,"ms-2","mt-2","bi","bi-trash3-fill","h3","text-danger","rounded",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Flame Chat"),t.qZA(),t.YNc(2,F,3,1,"div",1),t.YNc(3,S,37,2,"div",2),t.YNc(4,z,2,1,"div",2),t.YNc(5,K,3,2,"div",3),t.YNc(6,W,2,1,"div",4),t.YNc(7,nt,4,6,"ng-container",5)),2&i&&(t.xp6(2),t.Q6J("ngIf",s.sendPrivateMessageOn),t.xp6(1),t.Q6J("ngIf",!s.sendPrivateMessageOn),t.xp6(1),t.Q6J("ngIf",!s.sendPrivateMessageOn&&s.friendsOn),t.xp6(1),t.Q6J("ngIf",s.sendPrivateMessageOn),t.xp6(1),t.Q6J("ngIf",s.sendPrivateMessageOn),t.xp6(1),t.Q6J("ngIf",s.userMessages))},styles:[".green[_ngcontent-%COMP%]{background-color:#15b315b3!important}mat-expansion-panel-header[_ngcontent-%COMP%]{grid-template-columns:auto auto;background-color:#d1e61266!important}mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background-color:#d1e612b3!important}.icons[_ngcontent-%COMP%]{position:relative;top:5px;margin-right:9px;margin-left:9px}.card[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.messageInput[_ngcontent-%COMP%]{width:80vw}.messageCard[_ngcontent-%COMP%]{width:80vw;height:30vh}.searchContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.searchContainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#7d20d44d;overflow:auto}.searchContainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#7d20d480}.left[_ngcontent-%COMP%]{background-color:#17178f80;color:#fff;width:50vw}.right[_ngcontent-%COMP%]{width:100vw}.buttonCont[_ngcontent-%COMP%]{text-align:center;width:100%;display:inline-flex;justify-content:end}.pad[_ngcontent-%COMP%]{padding:0}.emailDateDiv[_ngcontent-%COMP%]{text-align:left;width:-moz-fit-content;width:fit-content;overflow:auto;justify-content:start}.emailDateDiv[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.mat-card-title-group[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap;justify-content:end}.messageCardDiv[_ngcontent-%COMP%]{position:fixed;bottom:0%;left:50%;z-index:2;transform:translate(-50%,40%);height:45vh}.grey[_ngcontent-%COMP%]{color:#201f1f}.mainDiv[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.mainDivUser[_ngcontent-%COMP%], .mainDivUsers[_ngcontent-%COMP%]{margin-bottom:10px}@media screen and (max-width: 400px){.right[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.left[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;justify-content:start}.mainDiv[_ngcontent-%COMP%]{width:85%}.messageCardDiv[_ngcontent-%COMP%]{height:55vh}.messageInput[_ngcontent-%COMP%]{width:80vw}.messageCard[_ngcontent-%COMP%]{width:100vw;height:35vh}}@media screen and (max-height: 614px){.right[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.left[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;justify-content:start}.mainDiv[_ngcontent-%COMP%]{width:85%}.messageCardDiv[_ngcontent-%COMP%]{height:70vh}.messageInput[_ngcontent-%COMP%]{width:80vw}.messageCard[_ngcontent-%COMP%]{width:100vw;height:45vh}}@media screen and (min-width: 400px) and (max-width: 800px){.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:50vw}.mainDiv[_ngcontent-%COMP%]{width:85%}.messageCardDiv[_ngcontent-%COMP%]{height:55vh}.messageInput[_ngcontent-%COMP%]{width:80vw}.messageCard[_ngcontent-%COMP%]{width:100vw;height:60vh}}@media screen and (min-width: 800px) and (max-width: 1250px){.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:50vw}.mainDiv[_ngcontent-%COMP%]{width:85%}.messageCardDiv[_ngcontent-%COMP%]{height:35vh}.messageInput[_ngcontent-%COMP%]{width:80vw}.messageCard[_ngcontent-%COMP%]{width:100vw;height:60vh}}@media screen and (min-width: 1250px) and (max-width: 1900px){.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:50vw}.mainDiv[_ngcontent-%COMP%]{width:85%}.messageCardDiv[_ngcontent-%COMP%]{height:40vh}.messageInput[_ngcontent-%COMP%]{width:80vw;height:15vh}.messageCard[_ngcontent-%COMP%]{width:100vw;height:60vh}}@media screen and (min-width: 1900px){.right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{width:50vw}.mainDiv[_ngcontent-%COMP%]{width:85%}.messageCardDiv[_ngcontent-%COMP%]{height:30vh}.messageInput[_ngcontent-%COMP%]{width:80vw;height:12vh}.messageCard[_ngcontent-%COMP%]{width:100vw;height:30vh}}.deleteButton[_ngcontent-%COMP%]{background-color:red!important;color:#f5f5f5!important}.matHeader[_ngcontent-%COMP%]{width:max-content!important}.delCont[_ngcontent-%COMP%]{margin-left:100px;padding-left:20px}.updateButton[_ngcontent-%COMP%], .blue[_ngcontent-%COMP%]{background-color:#2121b6b3!important}.sendMessageOpenButton[_ngcontent-%COMP%]{margin-bottom:0!important;position:fixed;bottom:0;left:50%;z-index:2;transform:translate(-50%,-50%)}"]})}return n})();var it=r(5983),st=r(3969),c=r(6223),ot=r(4716),at=r(9027),rt=r(4186);let ct=(()=>{class n{constructor(e,i){this.fireStore=e,this.fireStorage=i,this.fireStrorageRef="/users"}addPicturesUrls(e,i,s){this.fireStore.collection(`/users/${e}/pictures/`).add({url:i,name:s})}getPictures(e){return this.fireStore.collection(`/users/${e}/pictures/`).valueChanges()}addPictures(e,i){const s=`${this.fireStrorageRef}/${i}/pictures/${e.name}`,o=this.fireStorage.ref(s),d=this.fireStorage.upload(s,e);return d.snapshotChanges().pipe((0,ot.x)(()=>{o.getDownloadURL().subscribe(h=>{console.log(h),this.addPicturesUrls(i,h,e.name)})})).subscribe(),d.percentageChanges()}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(at.ST),t.LFG(rt.Q1))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _=r(4170),P=r(2296),Z=r(617),w=r(2032),dt=r(8525),gt=r(3680);function ut(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Nem v\xe1ltoztathatja meg a nevet!"),t.qZA())}function lt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",17),t.NdJ("change",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectedFiles(s))}),t.qZA()}if(2&n){const e=t.oxw().index;t.Q6J("formControlName",e)}}function mt(n,a){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,lt,1,1,"input",16),t.qZA()),2&n){const e=a.index;t.xp6(1),t.Q6J("ngIf",e<1)}}function _t(n,a){if(1&n&&(t.TgZ(0,"div",18)(1,"div",19),t._UZ(2,"img",20),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.Q6J("src",e.url,t.LSH)("alt",e.name)}}let pt=(()=>{class n{onSubmit(){console.log(this.publishForm.value)}constructor(e,i,s,o){this.fBuilder=e,this.firestoreService=i,this.base=s,this.auth=o,this.sharedPictures=[],this.userProfile=new x.k}ngOnInit(){this.auth.getUserSubject().then(e=>{this.base.getUserProfiles().subscribe(i=>{let s=i.filter(o=>o.uid===e.uid);Object.assign(this.userProfile,...s),console.log(this.userProfile)})}),this.publishForm=this.fBuilder.group({name:[{value:this.userProfile.displayName,disabled:!0}],message:["",[c.kI.required,c.kI.minLength(5)]],pictures:this.fBuilder.array([]),sharing:["yes"]})}ngAfterViewInit(){setTimeout(()=>{this.firestoreService.getPictures(this.userProfile.key).subscribe(e=>this.sharedPictures=e),this.publishForm.patchValue({name:this.userProfile.displayName})},1e3)}addPictures(){const e=this.fBuilder.control(null);this.publishForm.get("pictures").controls.push(e)}forFormArray(){return this.publishForm.get("pictures").controls}selectedFiles(e){this.publishForm.get("pictures").clear(),this.chosenFiles=this.fBuilder.control(e.target.files),this.publishForm.get("pictures").push(this.chosenFiles)}uploadFiles(){let e=Array.from(this.publishForm.get("pictures")?.value[0]);console.log(e),e.forEach(i=>{this.firestoreService.addPictures(i,this.userProfile.key)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c.qu),t.Y36(ct),t.Y36(M.b),t.Y36(b.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-news"]],decls:34,vars:4,consts:[[1,"mt-3","d-grid",3,"formGroup","ngSubmit"],["matSuffix",""],["formControlName","name","matInput","","type","text",1,"text-center"],[4,"ngIf"],["formControlName","message","matInput","","rows","5"],["formArrayName","pictures",1,"text-center"],["color","accent","mat-raised-button","","type","button",3,"click"],["class","input-group mb-2",4,"ngFor","ngForOf"],[1,"select-container"],["formControlName","sharing","id","sharing"],["ngClass","green","value","yes"],["ngClass","yellow","value","no"],["mat-raised-button","","type","button",1,"mb-3","blueButton",3,"click"],["color","accent","mat-raised-button","","type","submit",1,"shareButton"],["class","row mt-3",4,"ngFor","ngForOf"],[1,"input-group","mb-2"],["type","file","multiple","","class","form-control",3,"formControlName","change",4,"ngIf"],["type","file","multiple","",1,"form-control",3,"formControlName","change"],[1,"row","mt-3"],[1,"col-12","d-flex","justify-content-center"],["width","75%","height","100%",1,"rounded",3,"src","alt"]],template:function(i,s){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(1,"mat-form-field")(2,"mat-label"),t._uU(3,"N\xe9v"),t.qZA(),t.TgZ(4,"mat-icon",1),t._uU(5,"person"),t.qZA(),t._UZ(6,"input",2),t.YNc(7,ut,2,0,"span",3),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"\xdczenet sz\xf6vege"),t.qZA(),t._UZ(11,"textarea",4),t.qZA(),t.TgZ(12,"div",5)(13,"button",6),t.NdJ("click",function(){return s.addPictures()}),t._uU(14," F\xe9nyk\xe9pek hozz\xe1ad\xe1sa "),t.TgZ(15,"mat-icon",1),t._uU(16,"photo"),t.qZA()(),t.ynx(17),t.YNc(18,mt,2,1,"div",7),t.BQk(),t.qZA(),t.TgZ(19,"mat-form-field",8)(20,"mat-icon",1),t._uU(21,"sentiment_very_satisfied"),t.qZA(),t.TgZ(22,"mat-label"),t._uU(23,"L\xe1that\xf3 m\xe1sok sz\xe1m\xe1ra is"),t.qZA(),t.TgZ(24,"mat-select",9)(25,"mat-option",10),t._uU(26,"Igen"),t.qZA(),t.TgZ(27,"mat-option",11),t._uU(28,"Csak nekem"),t.qZA()()(),t.TgZ(29,"button",12),t.NdJ("click",function(){return s.uploadFiles()}),t._uU(30,"F\xe1jlok felt\xf6lt\xe9se"),t.qZA(),t.TgZ(31,"button",13),t._uU(32,"Megoszt\xe1s"),t.qZA()(),t.YNc(33,_t,3,2,"div",14)),2&i){let o;t.Q6J("formGroup",s.publishForm),t.xp6(7),t.Q6J("ngIf",null==(o=s.publishForm.get("name"))?null:o.touched),t.xp6(11),t.Q6J("ngForOf",s.forFormArray()),t.xp6(15),t.Q6J("ngForOf",s.sharedPictures)}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.CE,u.mk,u.sg,u.O5,_.KE,_.hX,_.R9,P.lW,Z.Hw,w.Nt,dt.gD,gt.ey],styles:["#mat-input-3.ng-touched[_ngcontent-%COMP%]{border:2px solid red;background-color:#e90b0bb3}.blueButton[_ngcontent-%COMP%]{background-color:#0505e4b3!important}.shareButton[_ngcontent-%COMP%]{background-color:#008000b3!important}"]})}return n})();var ht=r(3637),g=r(5195),ft=r(23);let Ct=(()=>{class n{transform(e){return e.sort((i,s)=>i.message.timeStamp>s.message.timeStamp?-1:1)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275pipe=t.Yjl({name:"sort",type:n,pure:!0})}return n})(),vt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[it.m,f.Bz.forChild([{path:"",component:p},{path:":uid",component:p},{path:"**",component:p}]),f.Bz]})}return n})();t.B6R(p,function(){return[ht.Iv,c.Fj,c.JJ,c.On,u.mk,u.sg,u.O5,_.KE,_.hX,g.a8,g.hq,g.dn,g.rt,g.dk,g.vP,g.$j,g.n5,g.C1,P.lW,Z.Hw,w.Nt,m.pp,m.ib,m.yz,m.yK,st.t,pt]},function(){return[ft.g,Ct]})}}]);