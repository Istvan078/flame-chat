"use strict";(self.webpackChunkProject=self.webpackChunkProject||[]).push([[179],{560:($r,hi,et)=>{et.d(hi,{$:()=>zs,A:()=>Ee,E:()=>en,J:()=>eI,K:()=>Wl,M:()=>Us,P:()=>bs,Q:()=>oe,R:()=>ab,U:()=>be,V:()=>sI,W:()=>aI,X:()=>lI,Y:()=>js,Z:()=>co,_:()=>ln,a:()=>mh,a0:()=>ch,a1:()=>zy,a2:()=>Gy,a3:()=>cI,a4:()=>qy,a5:()=>Dr,a6:()=>Xi,a7:()=>ul,a8:()=>Ky,a9:()=>fh,aA:()=>Ft,aB:()=>ve,aC:()=>Sh,aD:()=>E,aE:()=>Fe,aF:()=>Vi,aG:()=>pb,aH:()=>YO,aI:()=>rn,aM:()=>gh,aP:()=>$s,aa:()=>uI,ab:()=>mi,ac:()=>Et,ad:()=>Yn,ae:()=>Yl,af:()=>ba,ag:()=>pt,aj:()=>bi,ak:()=>Ql,al:()=>ys,ao:()=>Hy,ap:()=>Yy,ar:()=>dI,as:()=>BO,at:()=>Cn,au:()=>F,av:()=>Li,aw:()=>xt,ax:()=>Rh,ay:()=>pr,az:()=>Te,b:()=>pI,c:()=>rc,d:()=>DI,e:()=>xI,f:()=>_b,g:()=>NI,h:()=>AI,i:()=>gI,j:()=>Yt,k:()=>xu,l:()=>cb,m:()=>Nb,o:()=>Su,p:()=>Tn,r:()=>II,s:()=>CI,u:()=>Hm});var D=et(861),ee=et(58),U=et(534),Ge=et(879),yt=et(582),jn=et(537);const Tn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const en=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Hn=function ft(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pt=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new Ge.Yd("@firebase/auth");function $n(p,...d){ut.logLevel<=Ge.in.ERROR&&ut.error(`Auth (${U.SDK_VERSION}): ${p}`,...d)}function xt(p,...d){throw _t(p,...d)}function Ft(p,...d){return _t(p,...d)}function ur(p,d,h){const m=Object.assign(Object.assign({},Hn()),{[d]:h});return new ee.LL("auth","Firebase",m).create(d,{appName:p.name})}function pi(p,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&xt(p,"argument-error"),ur(p,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _t(p,...d){if("string"!=typeof p){const h=d[0],m=[...d.slice(1)];return m[0]&&(m[0].appName=p.name),p._errorFactory.create(h,...m)}return Pt.create(p,...d)}function ve(p,d,...h){if(!p)throw _t(d,...h)}function Vt(p){const d="INTERNAL ASSERTION FAILED: "+p;throw $n(d),new Error(d)}function Cn(p,d){p||Vt(d)}function Kn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function zn(){return"http:"===ro()||"https:"===ro()}function ro(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class dr{constructor(d,h){this.shortDelay=d,this.longDelay=h,Cn(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function oo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zn()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function so(p,d){Cn(p.emulator,"Emulator should always be set here");const{url:h}=p.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class q{static initialize(d,h,m){this.fetchImpl=d,h&&(this.headersImpl=h),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const X={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$=new dr(3e4,6e4);function K(p,d){return p.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:p.tenantId}):d}function pe(p,d,h,m){return se.apply(this,arguments)}function se(){return(se=(0,D.Z)(function*(p,d,h,m,v={}){return De(p,v,(0,D.Z)(function*(){let T={},L={};m&&("GET"===d?L=m:T={body:JSON.stringify(m)});const Y=(0,ee.xO)(Object.assign({key:p.config.apiKey},L)).slice(1),fe=yield p._getAdditionalHeaders();return fe["Content-Type"]="application/json",p.languageCode&&(fe["X-Firebase-Locale"]=p.languageCode),q.fetch()(Wt(p,p.config.apiHost,h,Y),Object.assign({method:d,headers:fe,referrerPolicy:"no-referrer"},T))}))})).apply(this,arguments)}function De(p,d,h){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,D.Z)(function*(p,d,h){p._canInitEmulator=!1;const m=Object.assign(Object.assign({},X),d);try{const v=new pn(p),T=yield Promise.race([h(),v.promise]);v.clearNetworkTimeout();const L=yield T.json();if("needConfirmation"in L)throw Ln(p,"account-exists-with-different-credential",L);if(T.ok&&!("errorMessage"in L))return L;{const Y=T.ok?L.errorMessage:L.error.message,[fe,je]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===fe)throw Ln(p,"credential-already-in-use",L);if("EMAIL_EXISTS"===fe)throw Ln(p,"email-already-in-use",L);if("USER_DISABLED"===fe)throw Ln(p,"user-disabled",L);const Ye=m[fe]||fe.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw ur(p,Ye,je);xt(p,Ye)}}catch(v){if(v instanceof ee.ZR)throw v;xt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Ce(p,d,h,m){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,D.Z)(function*(p,d,h,m,v={}){const T=yield pe(p,d,h,m,v);return"mfaPendingCredential"in T&&xt(p,"multi-factor-auth-required",{_serverResponse:T}),T})).apply(this,arguments)}function Wt(p,d,h,m){const v=`${d}${h}?${m}`;return p.config.emulator?so(p.config,v):`${p.config.apiScheme}://${v}`}function Fn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,m)=>{this.timer=setTimeout(()=>m(Ft(this.auth,"network-request-failed")),$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(p,d,h){const m={appName:p.name};h.email&&(m.email=h.email),h.phoneNumber&&(m.phoneNumber=h.phoneNumber);const v=Ft(p,d,m);return v.customData._tokenResponse=h,v}function oi(p){return void 0!==p&&void 0!==p.getResponse}function j(p){return void 0!==p&&void 0!==p.enterprise}class B{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===d)return Fn(h.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function ue(){return(ue=(0,D.Z)(function*(p){return(yield pe(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ae(p,d){return ye.apply(this,arguments)}function ye(){return(ye=(0,D.Z)(function*(p,d){return pe(p,"GET","/v2/recaptchaConfig",K(p,d))})).apply(this,arguments)}function Bt(){return(Bt=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function xn(){return(xn=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Pi(){return(Pi=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function zi(p){if(p)try{const d=new Date(Number(p));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function qt(){return(qt=(0,D.Z)(function*(p,d=!1){const h=(0,ee.m9)(p),m=yield h.getIdToken(d),v=mn(m);ve(v&&v.exp&&v.auth_time&&v.iat,h.auth,"internal-error");const T="object"==typeof v.firebase?v.firebase:void 0,L=T?.sign_in_provider;return{claims:v,token:m,authTime:zi(an(v.auth_time)),issuedAtTime:zi(an(v.iat)),expirationTime:zi(an(v.exp)),signInProvider:L||null,signInSecondFactor:T?.sign_in_second_factor||null}})).apply(this,arguments)}function an(p){return 1e3*Number(p)}function mn(p){const[d,h,m]=p.split(".");if(void 0===d||void 0===h||void 0===m)return $n("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,ee.tV)(h);return v?JSON.parse(v):($n("Failed to decode base64 JWT payload"),null)}catch(v){return $n("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Vn(p,d){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,D.Z)(function*(p,d,h=!1){if(h)return d;try{return yield d}catch(m){throw m instanceof ee.ZR&&function qo({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(m)&&p.auth.currentUser===p&&(yield p.auth.signOut()),m}})).apply(this,arguments)}class ao{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const v=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const m=this.getInterval(d);this.timerId=setTimeout((0,D.Z)(function*(){yield h.iteration()}),m)}iteration(){var d=this;return(0,D.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class Ko{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=zi(this.lastLoginAt),this.creationTime=zi(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fi(p){return xi.apply(this,arguments)}function xi(){return xi=(0,D.Z)(function*(p){var d;const h=p.auth,m=yield p.getIdToken(),v=yield Vn(p,function Zn(p,d){return Pi.apply(this,arguments)}(h,{idToken:m}));ve(v?.users.length,h,"internal-error");const T=v.users[0];p._notifyReloadListener(T);const L=null!==(d=T.providerUserInfo)&&void 0!==d&&d.length?function pa(p){return p.map(d=>{var{providerId:h}=d,m=(0,yt._T)(d,["providerId"]);return{providerId:h,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}(T.providerUserInfo):[],Y=function Gl(p,d){return[...p.filter(m=>!d.some(v=>v.providerId===m.providerId)),...d]}(p.providerData,L),Ye=!!p.isAnonymous&&!(p.email&&T.passwordHash||Y?.length),Ht={uid:T.localId,displayName:T.displayName||null,photoURL:T.photoUrl||null,email:T.email||null,emailVerified:T.emailVerified||!1,phoneNumber:T.phoneNumber||null,tenantId:T.tenantId||null,providerData:Y,metadata:new Ko(T.createdAt,T.lastLoginAt),isAnonymous:Ye};Object.assign(p,Ht)}),xi.apply(this,arguments)}function lo(){return(lo=(0,D.Z)(function*(p){const d=(0,ee.m9)(p);yield Fi(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function vs(){return(vs=(0,D.Z)(function*(p,d){const h=yield De(p,{},(0,D.Z)(function*(){const m=(0,ee.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:v,apiKey:T}=p.config,L=Wt(p,v,"/v1/token",`key=${T}`),Y=yield p._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(L,{method:"POST",headers:Y,body:m})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class k{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ve(d.idToken,"internal-error"),ve(typeof d.idToken<"u","internal-error"),ve(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function tl(p){const d=mn(p);return ve(d,"internal-error"),ve(typeof d.exp<"u","internal-error"),ve(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}getToken(d,h=!1){var m=this;return(0,D.Z)(function*(){return ve(!m.accessToken||m.refreshToken,d,"user-token-expired"),h||!m.accessToken||m.isExpired?m.refreshToken?(yield m.refresh(d,m.refreshToken),m.accessToken):null:m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var m=this;return(0,D.Z)(function*(){const{accessToken:v,refreshToken:T,expiresIn:L}=yield function nl(p,d){return vs.apply(this,arguments)}(d,h);m.updateTokensAndExpiration(v,T,Number(L))})()}updateTokensAndExpiration(d,h,m){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(d,h){const{refreshToken:m,accessToken:v,expirationTime:T}=h,L=new k;return m&&(ve("string"==typeof m,"internal-error",{appName:d}),L.refreshToken=m),v&&(ve("string"==typeof v,"internal-error",{appName:d}),L.accessToken=v),T&&(ve("number"==typeof T,"internal-error",{appName:d}),L.expirationTime=T),L}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new k,this.toJSON())}_performRefresh(){return Vt("not implemented")}}function R(p,d){ve("string"==typeof p||typeof p>"u","internal-error",{appName:d})}class w{constructor(d){var{uid:h,auth:m,stsTokenManager:v}=d,T=(0,yt._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ao(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=m,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=T.displayName||null,this.email=T.email||null,this.emailVerified=T.emailVerified||!1,this.phoneNumber=T.phoneNumber||null,this.photoURL=T.photoURL||null,this.isAnonymous=T.isAnonymous||!1,this.tenantId=T.tenantId||null,this.providerData=T.providerData?[...T.providerData]:[],this.metadata=new Ko(T.createdAt||void 0,T.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,D.Z)(function*(){const m=yield Vn(h,h.stsTokenManager.getToken(h.auth,d));return ve(m,h.auth,"internal-error"),h.accessToken!==m&&(h.accessToken=m,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),m})()}getIdTokenResult(d){return function yn(p){return qt.apply(this,arguments)}(this,d)}reload(){return function hr(p){return lo.apply(this,arguments)}(this)}_assign(d){this!==d&&(ve(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new w(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var m=this;return(0,D.Z)(function*(){let v=!1;d.idToken&&d.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(d),v=!0),h&&(yield Fi(m)),yield m.auth._persistUserIfCurrent(m),v&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var d=this;return(0,D.Z)(function*(){const h=yield d.getIdToken();return yield Vn(d,function In(p,d){return Bt.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var m,v,T,L,Y,fe,je,Ye;const Ht=null!==(m=h.displayName)&&void 0!==m?m:void 0,Nr=null!==(v=h.email)&&void 0!==v?v:void 0,Yo=null!==(T=h.phoneNumber)&&void 0!==T?T:void 0,dc=null!==(L=h.photoURL)&&void 0!==L?L:void 0,kb=null!==(Y=h.tenantId)&&void 0!==Y?Y:void 0,kh=null!==(fe=h._redirectEventId)&&void 0!==fe?fe:void 0,og=null!==(je=h.createdAt)&&void 0!==je?je:void 0,sg=null!==(Ye=h.lastLoginAt)&&void 0!==Ye?Ye:void 0,{uid:Oh,emailVerified:Ob,isAnonymous:Au,providerData:Ks,stsTokenManager:Pb}=h;ve(Oh&&Pb,d,"internal-error");const Fb=k.fromJSON(this.name,Pb);ve("string"==typeof Oh,d,"internal-error"),R(Ht,d.name),R(Nr,d.name),ve("boolean"==typeof Ob,d,"internal-error"),ve("boolean"==typeof Au,d,"internal-error"),R(Yo,d.name),R(dc,d.name),R(kb,d.name),R(kh,d.name),R(og,d.name),R(sg,d.name);const Ph=new w({uid:Oh,auth:d,email:Nr,emailVerified:Ob,displayName:Ht,isAnonymous:Au,photoURL:dc,phoneNumber:Yo,tenantId:kb,stsTokenManager:Fb,createdAt:og,lastLoginAt:sg});return Ks&&Array.isArray(Ks)&&(Ph.providerData=Ks.map(Ru=>Object.assign({},Ru))),kh&&(Ph._redirectEventId=kh),Ph}static _fromIdTokenResponse(d,h,m=!1){return(0,D.Z)(function*(){const v=new k;v.updateFromServerResponse(h);const T=new w({uid:h.localId,auth:d,stsTokenManager:v,isAnonymous:m});return yield Fi(T),T})()}}const I=new Map;function E(p){Cn(p instanceof Function,"Expected a class definition");let d=I.get(p);return d?(Cn(d instanceof p,"Instance stored in cache mismatched with class"),d):(d=new p,I.set(p,d),d)}const oe=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(h,m){var v=this;return(0,D.Z)(function*(){v.storage[h]=m})()}_get(h){var m=this;return(0,D.Z)(function*(){const v=m.storage[h];return void 0===v?null:v})()}_remove(h){var m=this;return(0,D.Z)(function*(){delete m.storage[h]})()}_addListener(h,m){}_removeListener(h,m){}}return p.type="NONE",p})();function Fe(p,d,h){return`firebase:${p}:${d}:${h}`}class Le{constructor(d,h,m){this.persistence=d,this.auth=h,this.userKey=m;const{config:v,name:T}=this.auth;this.fullUserKey=Fe(this.userKey,v.apiKey,T),this.fullPersistenceKey=Fe("persistence",v.apiKey,T),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?w._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,D.Z)(function*(){if(h.persistence===d)return;const m=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,m?h.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,m="authUser"){return(0,D.Z)(function*(){if(!h.length)return new Le(E(oe),d,m);const v=(yield Promise.all(h.map(function(){var je=(0,D.Z)(function*(Ye){if(yield Ye._isAvailable())return Ye});return function(Ye){return je.apply(this,arguments)}}()))).filter(je=>je);let T=v[0]||E(oe);const L=Fe(m,d.config.apiKey,d.name);let Y=null;for(const je of h)try{const Ye=yield je._get(L);if(Ye){const Ht=w._fromJSON(d,Ye);je!==T&&(Y=Ht),T=je;break}}catch{}const fe=v.filter(je=>je._shouldAllowMigration);return T._shouldAllowMigration&&fe.length?(T=fe[0],Y&&(yield T._set(L,Y.toJSON())),yield Promise.all(h.map(function(){var je=(0,D.Z)(function*(Ye){if(Ye!==T)try{yield Ye._remove(L)}catch{}});return function(Ye){return je.apply(this,arguments)}}())),new Le(T,d,m)):new Le(T,d,m)})()}}function dt(p){const d=p.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Ze(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(_n(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(il(d))return"Blackberry";if(H(d))return"Webos";if(Me(d))return"Safari";if((d.includes("chrome/")||Dn(d))&&!d.includes("edge/"))return"Chrome";if(Li(d))return"Android";{const m=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function _n(p=(0,ee.z$)()){return/firefox\//i.test(p)}function Me(p=(0,ee.z$)()){const d=p.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Dn(p=(0,ee.z$)()){return/crios\//i.test(p)}function Ze(p=(0,ee.z$)()){return/iemobile/i.test(p)}function Li(p=(0,ee.z$)()){return/android/i.test(p)}function il(p=(0,ee.z$)()){return/blackberry/i.test(p)}function H(p=(0,ee.z$)()){return/webos/i.test(p)}function F(p=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Te(p=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Mt(p=(0,ee.z$)()){return F(p)||Li(p)||H(p)||il(p)||/windows phone/i.test(p)||Ze(p)}function Di(p,d=[]){let h;switch(p){case"Browser":h=dt((0,ee.z$)());break;case"Worker":h=`${dt((0,ee.z$)())}-${p}`;break;default:h=p}const m=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${U.SDK_VERSION}/${m}`}class $e{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const m=T=>new Promise((L,Y)=>{try{L(d(T))}catch(fe){Y(fe)}});m.onAbort=h,this.queue.push(m);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,D.Z)(function*(){if(h.auth.currentUser===d)return;const m=[];try{for(const v of h.queue)yield v(d),v.onAbort&&m.push(v.onAbort)}catch(v){m.reverse();for(const T of m)try{T()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function rl(){return(rl=(0,D.Z)(function*(p,d={}){return pe(p,"GET","/v2/passwordPolicy",K(p,d))})).apply(this,arguments)}class YC{constructor(d){var h,m,v,T;const L=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=L.minPasswordLength)&&void 0!==h?h:6,L.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=L.maxPasswordLength),void 0!==L.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=L.containsLowercaseCharacter),void 0!==L.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=L.containsUppercaseCharacter),void 0!==L.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=L.containsNumericCharacter),void 0!==L.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=L.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(m=d.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(T=d.forceUpgradeOnSignin)&&void 0!==T&&T,this.schemaVersion=d.schemaVersion}validatePassword(d){var h,m,v,T,L,Y;const fe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,fe),this.validatePasswordCharacterOptions(d,fe),fe.isValid&&(fe.isValid=null===(h=fe.meetsMinPasswordLength)||void 0===h||h),fe.isValid&&(fe.isValid=null===(m=fe.meetsMaxPasswordLength)||void 0===m||m),fe.isValid&&(fe.isValid=null===(v=fe.containsLowercaseLetter)||void 0===v||v),fe.isValid&&(fe.isValid=null===(T=fe.containsUppercaseLetter)||void 0===T||T),fe.isValid&&(fe.isValid=null===(L=fe.containsNumericCharacter)||void 0===L||L),fe.isValid&&(fe.isValid=null===(Y=fe.containsNonAlphanumericCharacter)||void 0===Y||Y),fe}validatePasswordLengthOptions(d,h){const m=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;m&&(h.meetsMinPasswordLength=d.length>=m),v&&(h.meetsMaxPasswordLength=d.length<=v)}validatePasswordCharacterOptions(d,h){let m;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let v=0;v<d.length;v++)m=d.charAt(v),this.updatePasswordCharacterOptionsStatuses(h,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(d,h,m,v,T){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=T))}}class sm{constructor(d,h,m,v){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=m,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QC(this),this.idTokenSubscription=new QC(this),this.beforeStateQueue=new $e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(d,h){var m=this;return h&&(this._popupRedirectResolver=E(h)),this._initializationPromise=this.queue((0,D.Z)(function*(){var v,T;if(!m._deleted&&(m.persistenceManager=yield Le.create(m,d),!m._deleted)){if(null!==(v=m._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(h),m.lastNotifiedUid=(null===(T=m.currentUser)||void 0===T?void 0:T.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUser(d){var h=this;return(0,D.Z)(function*(){var m;const v=yield h.assertedPersistence.getCurrentUser();let T=v,L=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Y=null===(m=h.redirectUser)||void 0===m?void 0:m._redirectEventId,fe=T?._redirectEventId,je=yield h.tryRedirectSignIn(d);(!Y||Y===fe)&&je?.user&&(T=je.user,L=!0)}if(!T)return h.directlySetCurrentUser(null);if(!T._redirectEventId){if(L)try{yield h.beforeStateQueue.runMiddleware(T)}catch(Y){T=v,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Y))}return T?h.reloadAndSetCurrentUserOrClear(T):h.directlySetCurrentUser(null)}return ve(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===T._redirectEventId?h.directlySetCurrentUser(T):h.reloadAndSetCurrentUserOrClear(T)})()}tryRedirectSignIn(d){var h=this;return(0,D.Z)(function*(){let m=null;try{m=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,D.Z)(function*(){try{yield Fi(d)}catch(m){if("auth/network-request-failed"!==m?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function it(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var d=this;return(0,D.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,D.Z)(function*(){const m=d?(0,ee.m9)(d):null;return m&&ve(m.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(m&&m._clone(h))})()}_updateCurrentUser(d,h=!1){var m=this;return(0,D.Z)(function*(){if(!m._deleted)return d&&ve(m.tenantId===d.tenantId,m,"tenant-id-mismatch"),h||(yield m.beforeStateQueue.runMiddleware(d)),m.queue((0,D.Z)(function*(){yield m.directlySetCurrentUser(d),m.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var h=this;return this.queue((0,D.Z)(function*(){yield h.assertedPersistence.setPersistence(E(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var h=this;return(0,D.Z)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const m=h._getPasswordPolicyInternal();return m.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,D.Z)(function*(){const h=yield function Ut(p){return rl.apply(this,arguments)}(d),m=new YC(h);null===d.tenantId?d._projectPasswordPolicy=m:d._tenantPasswordPolicies[d.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new ee.LL("auth","Firebase",d())}onAuthStateChanged(d,h,m){return this.registerStateListener(this.authStateSubscription,d,h,m)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,m){return this.registerStateListener(this.idTokenSubscription,d,h,m)}authStateReady(){return new Promise((d,h)=>{if(this.currentUser)d();else{const m=this.onAuthStateChanged(()=>{m(),d()},h)}})}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var m=this;return(0,D.Z)(function*(){const v=yield m.getOrInitRedirectPersistenceManager(h);return null===d?v.removeCurrentUser():v.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,D.Z)(function*(){if(!h.redirectPersistenceManager){const m=d&&E(d)||h._popupRedirectResolver;ve(m,h,"argument-error"),h.redirectPersistenceManager=yield Le.create(h,[E(m._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,D.Z)(function*(){var m,v;return h._isInitialized&&(yield h.queue((0,D.Z)(function*(){}))),(null===(m=h._currentUser)||void 0===m?void 0:m._redirectEventId)===d?h._currentUser:(null===(v=h.redirectUser)||void 0===v?void 0:v._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,D.Z)(function*(){if(d===h.currentUser)return h.queue((0,D.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,m,v){if(this._deleted)return()=>{};const T="function"==typeof h?h:h.next.bind(h);let L=!1;const Y=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(Y,this,"internal-error"),Y.then(()=>{L||T(this.currentUser)}),"function"==typeof h){const fe=d.addObserver(h,m,v);return()=>{L=!0,fe()}}{const fe=d.addObserver(h);return()=>{L=!0,fe()}}}directlySetCurrentUser(d){var h=this;return(0,D.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.Z)(function*(){var h;const m={"X-Client-Version":d.clientVersion};d.app.options.appId&&(m["X-Firebase-gmpid"]=d.app.options.appId);const v=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();v&&(m["X-Firebase-Client"]=v);const T=yield d._getAppCheckToken();return T&&(m["X-Firebase-AppCheck"]=T),m})()}_getAppCheckToken(){var d=this;return(0,D.Z)(function*(){var h;const m=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return m?.error&&function fi(p,...d){ut.logLevel<=Ge.in.WARN&&ut.warn(`Auth (${U.SDK_VERSION}): ${p}`,...d)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function rn(p){return(0,ee.m9)(p)}class QC{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,ee.ne)(h=>this.observer=h)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Py(p){return new Promise((d,h)=>{const m=document.createElement("script");m.setAttribute("src",p),m.onload=d,m.onerror=v=>{const T=Ft("internal-error");T.customData=v,h(T)},m.type="text/javascript",m.charset="UTF-8",function JC(){var p,d;return null!==(d=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==d?d:document}().appendChild(m)})}function ma(p){return`__${p}${Math.floor(1e6*Math.random())}`}class XC{constructor(d){this.type="recaptcha-enterprise",this.auth=rn(d)}verify(d="verify",h=!1){var m=this;return(0,D.Z)(function*(){function T(){return T=(0,D.Z)(function*(Y){if(!h){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var fe=(0,D.Z)(function*(je,Ye){Ae(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ht=>{if(void 0!==Ht.recaptchaKey){const Nr=new B(Ht);return null==Y.tenantId?Y._agentRecaptchaConfig=Nr:Y._tenantRecaptchaConfigs[Y.tenantId]=Nr,je(Nr.siteKey)}Ye(new Error("recaptcha Enterprise site key undefined"))}).catch(Ht=>{Ye(Ht)})});return function(je,Ye){return fe.apply(this,arguments)}}())}),T.apply(this,arguments)}function L(Y,fe,je){const Ye=window.grecaptcha;j(Ye)?Ye.enterprise.ready(()=>{Ye.enterprise.execute(Y,{action:d}).then(Ht=>{fe(Ht)}).catch(()=>{fe("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,fe)=>{(function v(Y){return T.apply(this,arguments)})(m.auth).then(je=>{if(!h&&j(window.grecaptcha))L(je,Y,fe);else{if(typeof window>"u")return void fe(new Error("RecaptchaVerifier is only supported in browser"));Py("https://www.google.com/recaptcha/enterprise.js?render="+je).then(()=>{L(je,Y,fe)}).catch(Ye=>{fe(Ye)})}}).catch(je=>{fe(je)})})})()}}function Fy(p,d,h){return Ly.apply(this,arguments)}function Ly(){return(Ly=(0,D.Z)(function*(p,d,h,m=!1){const v=new XC(p);let T;try{T=yield v.verify(h)}catch{T=yield v.verify(h,!0)}const L=Object.assign({},d);return Object.assign(L,m?{captchaResp:T}:{captchaResponse:T}),Object.assign(L,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(L,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),L})).apply(this,arguments)}function eh(p,d,h,m){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,D.Z)(function*(p,d,h,m){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const T=yield Fy(p,d,h,"getOobCode"===h);return m(p,T)}return m(p,d).catch(function(){var T=(0,D.Z)(function*(L){if("auth/missing-recaptcha-token"===L.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Y=yield Fy(p,d,h,"getOobCode"===h);return m(p,Y)}return Promise.reject(L)});return function(L){return T.apply(this,arguments)}}())}),Vy.apply(this,arguments)}function eI(p,d,h){const m=rn(p);ve(m._canInitEmulator,m,"emulator-config-failed"),ve(/^https?:\/\//.test(d),m,"invalid-emulator-scheme");const v=!!h?.disableWarnings,T=he(d),{host:L,port:Y}=function SO(p){const d=he(p),h=/(\/\/)?([^?#/]+)/.exec(p.substr(d.length));if(!h)return{host:"",port:null};const m=h[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(m);if(v){const T=v[1];return{host:T,port:tt(m.substr(T.length+1))}}{const[T,L]=m.split(":");return{host:T,port:tt(L)}}}(d);m.config.emulator={url:`${T}//${L}${null===Y?"":`:${Y}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:L,port:Y,protocol:T.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function th(){function p(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function he(p){const d=p.indexOf(":");return d<0?"":p.substr(0,d+1)}function tt(p){if(!p)return null;const d=Number(p);return isNaN(d)?null:d}class Wl{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return Vt("not implemented")}_getIdTokenResponse(d){return Vt("not implemented")}_linkToIdToken(d,h){return Vt("not implemented")}_getReauthenticationResolver(d){return Vt("not implemented")}}function am(p,d){return lm.apply(this,arguments)}function lm(){return(lm=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:resetPassword",K(p,d))})).apply(this,arguments)}function mu(p,d){return ql.apply(this,arguments)}function ql(){return(ql=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function nh(){return(nh=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:update",K(p,d))})).apply(this,arguments)}function tI(p,d){return kt.apply(this,arguments)}function kt(){return(kt=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithPassword",K(p,d))})).apply(this,arguments)}function Kl(p,d){return ih.apply(this,arguments)}function ih(){return(ih=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:sendOobCode",K(p,d))})).apply(this,arguments)}function rh(){return(rh=(0,D.Z)(function*(p,d){return Kl(p,d)})).apply(this,arguments)}function AO(p,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,D.Z)(function*(p,d){return Kl(p,d)})).apply(this,arguments)}function RO(p,d){return By.apply(this,arguments)}function By(){return(By=(0,D.Z)(function*(p,d){return Kl(p,d)})).apply(this,arguments)}function gu(){return(gu=(0,D.Z)(function*(p,d){return Kl(p,d)})).apply(this,arguments)}function oh(){return(oh=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithEmailLink",K(p,d))})).apply(this,arguments)}function hm(){return(hm=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithEmailLink",K(p,d))})).apply(this,arguments)}class ol extends Wl{constructor(d,h,m,v=null){super("password",m),this._email=d,this._password=h,this._tenantId=v}static _fromEmailAndPassword(d,h){return new ol(d,h,"password")}static _fromEmailAndCode(d,h,m=null){return new ol(d,h,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,D.Z)(function*(){switch(h.signInMethod){case"password":return eh(d,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tI);case"emailLink":return function um(p,d){return oh.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:xt(d,"internal-error")}})()}_linkToIdToken(d,h){var m=this;return(0,D.Z)(function*(){switch(m.signInMethod){case"password":return mu(d,{idToken:h,returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function dm(p,d){return hm.apply(this,arguments)}(d,{idToken:h,email:m._email,oobCode:m._password});default:xt(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ga(p,d){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithIdp",K(p,d))})).apply(this,arguments)}class Us extends Wl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Us(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):xt("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:m,signInMethod:v}=h,T=(0,yt._T)(h,["providerId","signInMethod"]);if(!m||!v)return null;const L=new Us(m,v);return L.idToken=T.idToken||void 0,L.accessToken=T.accessToken||void 0,L.secret=T.secret,L.nonce=T.nonce,L.pendingToken=T.pendingToken||null,L}_getIdTokenResponse(d){return ga(d,this.buildRequest())}_linkToIdToken(d,h){const m=this.buildRequest();return m.idToken=h,ga(d,m)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,ga(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,ee.xO)(h)}return d}}function sl(){return(sl=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:sendVerificationCode",K(p,d))})).apply(this,arguments)}function Zl(){return(Zl=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithPhoneNumber",K(p,d))})).apply(this,arguments)}function pm(){return(pm=(0,D.Z)(function*(p,d){const h=yield Ce(p,"POST","/v1/accounts:signInWithPhoneNumber",K(p,d));if(h.temporaryProof)throw Ln(p,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const iI={USER_NOT_FOUND:"user-not-found"};function _a(){return(_a=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithPhoneNumber",K(p,Object.assign(Object.assign({},d),{operation:"REAUTH"})),iI)})).apply(this,arguments)}class al extends Wl{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new al({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new al({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function fm(p,d){return Zl.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function nI(p,d){return pm.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function jy(p,d){return _a.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:m,verificationCode:v}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:m,code:v}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:m,phoneNumber:v,temporaryProof:T}=d;return m||h||v||T?new al({verificationId:h,verificationCode:m,phoneNumber:v,temporaryProof:T}):null}}class P{constructor(d){var h,m,v,T,L,Y;const fe=(0,ee.zd)((0,ee.pd)(d)),je=null!==(h=fe.apiKey)&&void 0!==h?h:null,Ye=null!==(m=fe.oobCode)&&void 0!==m?m:null,Ht=function va(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=fe.mode)&&void 0!==v?v:null);ve(je&&Ye&&Ht,"argument-error"),this.apiKey=je,this.operation=Ht,this.code=Ye,this.continueUrl=null!==(T=fe.continueUrl)&&void 0!==T?T:null,this.languageCode=null!==(L=fe.languageCode)&&void 0!==L?L:null,this.tenantId=null!==(Y=fe.tenantId)&&void 0!==Y?Y:null}static parseLink(d){const h=function rI(p){const d=(0,ee.zd)((0,ee.pd)(p)).link,h=d?(0,ee.zd)((0,ee.pd)(d)).deep_link_id:null,m=(0,ee.zd)((0,ee.pd)(p)).deep_link_id;return(m?(0,ee.zd)((0,ee.pd)(m)).link:null)||m||h||d||p}(d);try{return new P(h)}catch{return null}}}let be=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(h,m){return ol._fromEmailAndPassword(h,m)}static credentialWithLink(h,m){const v=P.parseLink(m);return ve(v,"argument-error"),ol._fromEmailAndCode(h,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Ao{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ya extends Ao{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class js extends ya{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return ve("providerId"in h&&"signInMethod"in h,"argument-error"),Us._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ve(d.idToken||d.accessToken,"argument-error"),Us._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return js.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return js.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:m,oauthTokenSecret:v,pendingToken:T,nonce:L,providerId:Y}=d;if(!m&&!v&&!h&&!T||!Y)return null;try{return new js(Y)._credential({idToken:h,accessToken:m,nonce:L,pendingToken:T})}catch{return null}}}let sI=(()=>{class p extends ya{constructor(){super("facebook.com")}static credential(h){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),aI=(()=>{class p extends ya{constructor(){super("google.com"),this.addScope("profile")}static credential(h,m){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:m})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:v}=h;if(!m&&!v)return null;try{return p.credential(m,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),lI=(()=>{class p extends ya{constructor(){super("github.com")}static credential(h){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class $s extends Wl{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return ga(d,this.buildRequest())}_linkToIdToken(d,h){const m=this.buildRequest();return m.idToken=h,ga(d,m)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,ga(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:m,signInMethod:v,pendingToken:T}=h;return m&&v&&T&&m===v?new $s(m,T):null}static _create(d,h){return new $s(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class co extends Ao{constructor(d){ve(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return co.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return co.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=$s.fromJSON(d);return ve(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:m}=d;if(!h||!m)return null;try{return $s._create(m,h)}catch{return null}}}let ln=(()=>{class p extends ya{constructor(){super("twitter.com")}static credential(h,m){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:m})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:m,oauthTokenSecret:v}=h;if(!m||!v)return null;try{return p.credential(m,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function _u(p,d){return vu.apply(this,arguments)}function vu(){return(vu=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signUp",K(p,d))})).apply(this,arguments)}class Gr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,m,v=!1){return(0,D.Z)(function*(){const T=yield w._fromIdTokenResponse(d,m,v),L=mm(m);return new Gr({user:T,providerId:L,_tokenResponse:m,operationType:h})})()}static _forOperation(d,h,m){return(0,D.Z)(function*(){yield d._updateTokensIfNecessary(m,!0);const v=mm(m);return new Gr({user:d,providerId:v,_tokenResponse:m,operationType:h})})()}}function mm(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function zs(p){return ll.apply(this,arguments)}function ll(){return(ll=(0,D.Z)(function*(p){var d;const h=rn(p);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new Gr({user:h.currentUser,providerId:null,operationType:"signIn"});const m=yield _u(h,{returnSecureToken:!0}),v=yield Gr._fromIdTokenResponse(h,"signIn",m,!0);return yield h._updateCurrentUser(v.user),v})).apply(this,arguments)}class yu extends ee.ZR{constructor(d,h,m,v){var T;super(h.code,h.message),this.operationType=m,this.user=v,Object.setPrototypeOf(this,yu.prototype),this.customData={appName:d.name,tenantId:null!==(T=d.tenantId)&&void 0!==T?T:void 0,_serverResponse:h.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(d,h,m,v){return new yu(d,h,m,v)}}function gm(p,d,h,m){return("reauthenticate"===d?h._getReauthenticationResolver(p):h._getIdTokenResponse(p)).catch(T=>{throw"auth/multi-factor-auth-required"===T.code?yu._fromErrorAndOperation(p,T,d,m):T})}function sh(p){return new Set(p.map(({providerId:d})=>d).filter(d=>!!d))}function Hy(p,d){return ah.apply(this,arguments)}function ah(){return ah=(0,D.Z)(function*(p,d){const h=(0,ee.m9)(p);yield bu(!0,h,d);const{providerUserInfo:m}=yield function Nt(p,d){return xn.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),v=sh(m||[]);return h.providerData=h.providerData.filter(T=>v.has(T.providerId)),v.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),ah.apply(this,arguments)}function cl(p,d){return lh.apply(this,arguments)}function lh(){return(lh=(0,D.Z)(function*(p,d,h=!1){const m=yield Vn(p,d._linkToIdToken(p.auth,yield p.getIdToken()),h);return Gr._forOperation(p,"link",m)})).apply(this,arguments)}function bu(p,d,h){return _m.apply(this,arguments)}function _m(){return(_m=(0,D.Z)(function*(p,d,h){yield Fi(d);const v=!1===p?"provider-already-linked":"no-such-provider";ve(sh(d.providerData).has(h)===p,d.auth,v)})).apply(this,arguments)}function vm(p,d){return ym.apply(this,arguments)}function ym(){return(ym=(0,D.Z)(function*(p,d,h=!1){const{auth:m}=p,v="reauthenticate";try{const T=yield Vn(p,gm(m,v,d,p),h);ve(T.idToken,m,"internal-error");const L=mn(T.idToken);ve(L,m,"internal-error");const{sub:Y}=L;return ve(p.uid===Y,m,"user-mismatch"),Gr._forOperation(p,v,T)}catch(T){throw"auth/user-not-found"===T?.code&&xt(m,"user-mismatch"),T}})).apply(this,arguments)}function $y(p,d){return uo.apply(this,arguments)}function uo(){return(uo=(0,D.Z)(function*(p,d,h=!1){const m="signIn",v=yield gm(p,m,d),T=yield Gr._fromIdTokenResponse(p,m,v);return h||(yield p._updateCurrentUser(T.user)),T})).apply(this,arguments)}function ch(p,d){return uh.apply(this,arguments)}function uh(){return(uh=(0,D.Z)(function*(p,d){return $y(rn(p),d)})).apply(this,arguments)}function zy(p,d){return bm.apply(this,arguments)}function bm(){return(bm=(0,D.Z)(function*(p,d){const h=(0,ee.m9)(p);return yield bu(!1,h,d.providerId),cl(h,d)})).apply(this,arguments)}function Gy(p,d){return Em.apply(this,arguments)}function Em(){return(Em=(0,D.Z)(function*(p,d){return vm((0,ee.m9)(p),d)})).apply(this,arguments)}function wm(){return(wm=(0,D.Z)(function*(p,d){return Ce(p,"POST","/v1/accounts:signInWithCustomToken",K(p,d))})).apply(this,arguments)}function cI(p,d){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,D.Z)(function*(p,d){const h=rn(p),m=yield function Wy(p,d){return wm.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),v=yield Gr._fromIdTokenResponse(h,"signIn",m);return yield h._updateCurrentUser(v.user),v}),Tm.apply(this,arguments)}class cn{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?Cm._fromServerResponse(d,h):"totpInfo"in h?Im._fromServerResponse(d,h):xt(d,"internal-error")}}class Cm extends cn{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new Cm(h)}}class Im extends cn{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new Im(h)}}function dh(p,d,h){var m;ve((null===(m=h.url)||void 0===m?void 0:m.length)>0,p,"invalid-continue-uri"),ve(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(ve(h.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(ve(h.android.packageName.length>0,p,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function nt(p){return xm.apply(this,arguments)}function xm(){return(xm=(0,D.Z)(function*(p){const d=rn(p);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function qy(p,d,h){return me.apply(this,arguments)}function me(){return(me=(0,D.Z)(function*(p,d,h){const m=rn(p),v={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};h&&dh(m,v,h),yield eh(m,v,"getOobCode",AO)})).apply(this,arguments)}function Dr(p,d,h){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,D.Z)(function*(p,d,h){yield am((0,ee.m9)(p),{oobCode:d,newPassword:h}).catch(function(){var m=(0,D.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&nt(p),v});return function(v){return m.apply(this,arguments)}}())}),Kt.apply(this,arguments)}function Xi(p,d){return er.apply(this,arguments)}function er(){return er=(0,D.Z)(function*(p,d){yield function cm(p,d){return nh.apply(this,arguments)}((0,ee.m9)(p),{oobCode:d})}),er.apply(this,arguments)}function ul(p,d){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,D.Z)(function*(p,d){const h=(0,ee.m9)(p),m=yield am(h,{oobCode:d}),v=m.requestType;switch(ve(v,h,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(m.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(m.mfaInfo,h,"internal-error");default:ve(m.email,h,"internal-error")}let T=null;return m.mfaInfo&&(T=cn._fromServerResponse(rn(h),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:T},operation:v}})).apply(this,arguments)}function Ky(p,d){return hh.apply(this,arguments)}function hh(){return(hh=(0,D.Z)(function*(p,d){const{data:h}=yield ul((0,ee.m9)(p),d);return h.email})).apply(this,arguments)}function fh(p,d,h){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,D.Z)(function*(p,d,h){const m=rn(p),L=yield eh(m,{returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_u).catch(fe=>{throw"auth/password-does-not-meet-requirements"===fe.code&&nt(p),fe}),Y=yield Gr._fromIdTokenResponse(m,"signIn",L);return yield m._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function uI(p,d,h){return ch((0,ee.m9)(p),be.credential(d,h)).catch(function(){var m=(0,D.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&nt(p),v});return function(v){return m.apply(this,arguments)}}())}function mi(p,d,h){return ke.apply(this,arguments)}function ke(){return(ke=(0,D.Z)(function*(p,d,h){const m=rn(p),v={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function T(L,Y){ve(Y.handleCodeInApp,m,"argument-error"),Y&&dh(m,L,Y)})(v,h),yield eh(m,v,"getOobCode",RO)})).apply(this,arguments)}function Et(p,d){const h=P.parseLink(d);return"EMAIL_SIGNIN"===h?.operation}function Yn(p,d,h){return ho.apply(this,arguments)}function ho(){return(ho=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p),v=be.credentialWithLink(d,h||Kn());return ve(v._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),ch(m,v)})).apply(this,arguments)}function Gi(){return(Gi=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:createAuthUri",K(p,d))})).apply(this,arguments)}function Yl(p,d){return si.apply(this,arguments)}function si(){return si=(0,D.Z)(function*(p,d){const m={identifier:d,continueUri:zn()?Kn():"http://localhost"},{signinMethods:v}=yield function Eu(p,d){return Gi.apply(this,arguments)}((0,ee.m9)(p),m);return v||[]}),si.apply(this,arguments)}function ba(p,d){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,D.Z)(function*(p,d){const h=(0,ee.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};d&&dh(h.auth,v,d);const{email:T}=yield function zr(p,d){return rh.apply(this,arguments)}(h.auth,v);T!==p.email&&(yield p.reload())}),Ea.apply(this,arguments)}function pt(p,d,h){return dl.apply(this,arguments)}function dl(){return dl=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p),T={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:d};h&&dh(m.auth,T,h);const{email:L}=yield function de(p,d){return gu.apply(this,arguments)}(m.auth,T);L!==p.email&&(yield p.reload())}),dl.apply(this,arguments)}function wa(){return(wa=(0,D.Z)(function*(p,d){return pe(p,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function bi(p,d){return hl.apply(this,arguments)}function hl(){return hl=(0,D.Z)(function*(p,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const m=(0,ee.m9)(p),T={idToken:yield m.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},L=yield Vn(m,function Zy(p,d){return wa.apply(this,arguments)}(m.auth,T));m.displayName=L.displayName||null,m.photoURL=L.photoUrl||null;const Y=m.providerData.find(({providerId:fe})=>"password"===fe);Y&&(Y.displayName=m.displayName,Y.photoURL=m.photoURL),yield m._updateTokensIfNecessary(L)}),hl.apply(this,arguments)}function Ql(p,d){return Jl((0,ee.m9)(p),d,null)}function ys(p,d){return Jl((0,ee.m9)(p),null,d)}function Jl(p,d,h){return ph.apply(this,arguments)}function ph(){return(ph=(0,D.Z)(function*(p,d,h){const{auth:m}=p,T={idToken:yield p.getIdToken(),returnSecureToken:!0};d&&(T.email=d),h&&(T.password=h);const L=yield Vn(p,mu(m,T));yield p._updateTokensIfNecessary(L,!0)})).apply(this,arguments)}class Wr{constructor(d,h,m={}){this.isNewUser=d,this.providerId=h,this.profile=m}}class Xl extends Wr{constructor(d,h,m,v){super(d,h,m),this.username=v}}class wu extends Wr{constructor(d,h){super(d,"facebook.com",h)}}class jt extends Xl{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class kO extends Wr{constructor(d,h){super(d,"google.com",h)}}class Sm extends Xl{constructor(d,h,m){super(d,"twitter.com",h,m)}}function Yy(p){const{user:d,_tokenResponse:h}=p;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Ta(p){var d,h;if(!p)return null;const{providerId:m}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},T=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!m&&p?.idToken){const L=null===(h=null===(d=mn(p.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(L)return new Wr(T,"anonymous"!==L&&"custom"!==L?L:null)}if(!m)return null;switch(m){case"facebook.com":return new wu(T,v);case"github.com":return new jt(T,v);case"google.com":return new kO(T,v);case"twitter.com":return new Sm(T,v,p.screenName||null);case"custom":case"anonymous":return new Wr(T,null);default:return new Wr(T,m,v)}}(h)}class Ws{constructor(d,h,m){this.type=d,this.credential=h,this.user=m}static _fromIdtoken(d,h){return new Ws("enroll",d,h)}static _fromMfaPendingCredential(d){return new Ws("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,m;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Ws._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(m=d.multiFactorSession)&&void 0!==m&&m.idToken)return Ws._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Nm{constructor(d,h,m){this.session=d,this.hints=h,this.signInResolver=m}static _fromError(d,h){const m=rn(d),v=h.customData._serverResponse,T=(v.mfaInfo||[]).map(Y=>cn._fromServerResponse(m,Y));ve(v.mfaPendingCredential,m,"internal-error");const L=Ws._fromMfaPendingCredential(v.mfaPendingCredential);return new Nm(L,T,function(){var Y=(0,D.Z)(function*(fe){const je=yield fe._process(m,L);delete v.mfaInfo,delete v.mfaPendingCredential;const Ye=Object.assign(Object.assign({},v),{idToken:je.idToken,refreshToken:je.refreshToken});switch(h.operationType){case"signIn":const Ht=yield Gr._fromIdTokenResponse(m,h.operationType,Ye);return yield m._updateCurrentUser(Ht.user),Ht;case"reauthenticate":return ve(h.user,m,"internal-error"),Gr._forOperation(h.user,h.operationType,Ye);default:xt(m,"internal-error")}});return function(fe){return Y.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,D.Z)(function*(){return h.signInResolver(d)})()}}function dI(p,d){var h;const m=(0,ee.m9)(p),v=d;return ve(d.customData.operationType,m,"argument-error"),ve(null===(h=v.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,m,"argument-error"),Nm._fromError(m,v)}class Jy{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(m=>cn._fromServerResponse(d.auth,m)))})}static _fromUser(d){return new Jy(d)}getSession(){var d=this;return(0,D.Z)(function*(){return Ws._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,h){var m=this;return(0,D.Z)(function*(){const v=d,T=yield m.getSession(),L=yield Vn(m.user,v._process(m.user.auth,T,h));return yield m.user._updateTokensIfNecessary(L),m.user.reload()})()}unenroll(d){var h=this;return(0,D.Z)(function*(){const m="string"==typeof d?d:d.uid,v=yield h.user.getIdToken();try{const T=yield Vn(h.user,function VO(p,d){return pe(p,"POST","/v2/accounts/mfaEnrollment:withdraw",K(p,d))}(h.user.auth,{idToken:v,mfaEnrollmentId:m}));h.enrolledFactors=h.enrolledFactors.filter(({uid:L})=>L!==m),yield h.user._updateTokensIfNecessary(T),yield h.user.reload()}catch(T){throw T}})()}}const Xy=new WeakMap;function BO(p){const d=(0,ee.m9)(p);return Xy.has(d)||Xy.set(d,Jy._fromUser(d)),Xy.get(d)}const Mm="__sak";class fI{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Mm,"1"),this.storage.removeItem(Mm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const pI=(()=>{class p extends fI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,m)=>this.onStorageEvent(h,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function UO(){const p=(0,ee.z$)();return Me(p)||F(p)}()&&function z(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const m of Object.keys(this.listeners)){const v=this.storage.getItem(m),T=this.localCache[m];v!==T&&h(m,T,v)}}onStorageEvent(h,m=!1){if(!h.key)return void this.forAllChangedKeys((Y,fe,je)=>{this.notifyListeners(Y,je)});const v=h.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(v);if(h.newValue!==Y)null!==h.newValue?this.storage.setItem(v,h.newValue):this.storage.removeItem(v);else if(this.localCache[v]===h.newValue&&!m)return}const T=()=>{const Y=this.storage.getItem(v);!m&&this.localCache[v]===Y||this.notifyListeners(v,Y)},L=this.storage.getItem(v);!function bt(){return(0,ee.w1)()&&10===document.documentMode}()||L===h.newValue||h.newValue===h.oldValue?T():setTimeout(T,10)}notifyListeners(h,m){this.localCache[h]=m;const v=this.listeners[h];if(v)for(const T of Array.from(v))T(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,m,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:m,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,m){var v=()=>super._set,T=this;return(0,D.Z)(function*(){yield v().call(T,h,m),T.localCache[h]=JSON.stringify(m)})()}_get(h){var m=()=>super._get,v=this;return(0,D.Z)(function*(){const T=yield m().call(v,h);return v.localCache[h]=JSON.stringify(T),T})()}_remove(h){var m=()=>super._remove,v=this;return(0,D.Z)(function*(){yield m().call(v,h),delete v.localCache[h]})()}}return p.type="LOCAL",p})(),mh=(()=>{class p extends fI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,m){}_removeListener(h,m){}}return p.type="SESSION",p})();let zO=(()=>{class p{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const m=this.receivers.find(T=>T.isListeningto(h));if(m)return m;const v=new p(h);return this.receivers.push(v),v}isListeningto(h){return this.eventTarget===h}handleEvent(h){var m=this;return(0,D.Z)(function*(){const v=h,{eventId:T,eventType:L,data:Y}=v.data,fe=m.handlersMap[L];if(!fe?.size)return;v.ports[0].postMessage({status:"ack",eventId:T,eventType:L});const je=Array.from(fe).map(function(){var Ht=(0,D.Z)(function*(Nr){return Nr(v.origin,Y)});return function(Nr){return Ht.apply(this,arguments)}}()),Ye=yield function $O(p){return Promise.all(p.map(function(){var d=(0,D.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(m){return{fulfilled:!1,reason:m}}});return function(h){return d.apply(this,arguments)}}()))}(je);v.ports[0].postMessage({status:"done",eventId:T,eventType:L,response:Ye})})()}_subscribe(h,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(m)}_unsubscribe(h,m){this.handlersMap[h]&&m&&this.handlersMap[h].delete(m),(!m||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function gh(p="",d=10){let h="";for(let m=0;m<d;m++)h+=Math.floor(10*Math.random());return p+h}class pl{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,m=50){var v=this;return(0,D.Z)(function*(){const T=typeof MessageChannel<"u"?new MessageChannel:null;if(!T)throw new Error("connection_unavailable");let L,Y;return new Promise((fe,je)=>{const Ye=gh("",20);T.port1.start();const Ht=setTimeout(()=>{je(new Error("unsupported_event"))},m);Y={messageChannel:T,onMessage(Nr){const Yo=Nr;if(Yo.data.eventId===Ye)switch(Yo.data.status){case"ack":clearTimeout(Ht),L=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(L),fe(Yo.data.response);break;default:clearTimeout(Ht),clearTimeout(L),je(new Error("invalid_response"))}}},v.handlers.add(Y),T.port1.addEventListener("message",Y.onMessage),v.target.postMessage({eventType:d,eventId:Ye,data:h},[T.port2])}).finally(()=>{Y&&v.removeMessageHandler(Y)})})()}}function Mn(){return window}function eb(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function tc(){return(tc=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const km="firebaseLocalStorageDb",Cu="firebaseLocalStorage",_h="fbase_key";class nc{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function ic(p,d){return p.transaction([Cu],d?"readwrite":"readonly").objectStore(Cu)}function vh(){const p=indexedDB.open(km,1);return new Promise((d,h)=>{p.addEventListener("error",()=>{h(p.error)}),p.addEventListener("upgradeneeded",()=>{const m=p.result;try{m.createObjectStore(Cu,{keyPath:_h})}catch(v){h(v)}}),p.addEventListener("success",(0,D.Z)(function*(){const m=p.result;m.objectStoreNames.contains(Cu)?d(m):(m.close(),yield function Om(){const p=indexedDB.deleteDatabase(km);return new nc(p).toPromise()}(),d(yield vh()))}))})}function Pm(p,d,h){return yh.apply(this,arguments)}function yh(){return(yh=(0,D.Z)(function*(p,d,h){const m=ic(p,!0).put({[_h]:d,value:h});return new nc(m).toPromise()})).apply(this,arguments)}function ml(){return(ml=(0,D.Z)(function*(p,d){const h=ic(p,!1).get(d),m=yield new nc(h).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function gl(p,d){const h=ic(p,!0).delete(d);return new nc(h).toPromise()}const gI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,D.Z)(function*(){return h.db||(h.db=yield vh()),h.db})()}_withRetries(h){var m=this;return(0,D.Z)(function*(){let v=0;for(;;)try{const T=yield m._openDb();return yield h(T)}catch(T){if(v++>3)throw T;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,D.Z)(function*(){return eb()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,D.Z)(function*(){h.receiver=zO._getInstance(function tb(){return eb()?self:null}()),h.receiver._subscribe("keyChanged",function(){var m=(0,D.Z)(function*(v,T){return{keyProcessed:(yield h._poll()).includes(T.key)}});return function(v,T){return m.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var m=(0,D.Z)(function*(v,T){return["keyChanged"]});return function(v,T){return m.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,D.Z)(function*(){var m,v;if(h.activeServiceWorker=yield function nr(){return tc.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new pl(h.activeServiceWorker);const T=yield h.sender._send("ping",{},800);T&&null!==(m=T[0])&&void 0!==m&&m.fulfilled&&null!==(v=T[0])&&void 0!==v&&v.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var m=this;return(0,D.Z)(function*(){if(m.sender&&m.activeServiceWorker&&function No(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:h},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const h=yield vh();return yield Pm(h,Mm,"1"),yield gl(h,Mm),!0}catch{}return!1})()}_withPendingWrite(h){var m=this;return(0,D.Z)(function*(){m.pendingWrites++;try{yield h()}finally{m.pendingWrites--}})()}_set(h,m){var v=this;return(0,D.Z)(function*(){return v._withPendingWrite((0,D.Z)(function*(){return yield v._withRetries(T=>Pm(T,h,m)),v.localCache[h]=m,v.notifyServiceWorker(h)}))})()}_get(h){var m=this;return(0,D.Z)(function*(){const v=yield m._withRetries(T=>function bh(p,d){return ml.apply(this,arguments)}(T,h));return m.localCache[h]=v,v})()}_remove(h){var m=this;return(0,D.Z)(function*(){return m._withPendingWrite((0,D.Z)(function*(){return yield m._withRetries(v=>gl(v,h)),delete m.localCache[h],m.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,D.Z)(function*(){const m=yield h._withRetries(L=>{const Y=ic(L,!1).getAll();return new nc(Y).toPromise()});if(!m)return[];if(0!==h.pendingWrites)return[];const v=[],T=new Set;for(const{fbase_key:L,value:Y}of m)T.add(L),JSON.stringify(h.localCache[L])!==JSON.stringify(Y)&&(h.notifyListeners(L,Y),v.push(L));for(const L of Object.keys(h.localCache))h.localCache[L]&&!T.has(L)&&(h.notifyListeners(L,null),v.push(L));return v})()}notifyListeners(h,m){this.localCache[h]=m;const v=this.listeners[h];if(v)for(const T of Array.from(v))T(m)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Eh=1e12;class Lm{constructor(d){this.auth=d,this.counter=Eh,this._widgets=new Map}render(d,h){const m=this.counter;return this._widgets.set(m,new KO(d,this.auth.name,h||{})),this.counter++,m}reset(d){var h;const m=d||Eh;null===(h=this._widgets.get(m))||void 0===h||h.delete(),this._widgets.delete(m)}getResponse(d){var h;return(null===(h=this._widgets.get(d||Eh))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,D.Z)(function*(){var m;return null===(m=h._widgets.get(d||Eh))||void 0===m||m.execute(),""})()}}class KO{constructor(d,h,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof d?document.getElementById(d):d;ve(v,"argument-error",{appName:h}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ZO(p){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<p;m++)d.push(h.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vm=ma("rcb"),ob=new dr(3e4,6e4);class yI{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Mn().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return ve(function bI(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&oi(Mn().grecaptcha)?Promise.resolve(Mn().grecaptcha):new Promise((m,v)=>{const T=Mn().setTimeout(()=>{v(Ft(d,"network-request-failed"))},ob.get());Mn()[Vm]=()=>{Mn().clearTimeout(T),delete Mn()[Vm];const Y=Mn().grecaptcha;if(!Y||!oi(Y))return void v(Ft(d,"internal-error"));const fe=Y.render;Y.render=(je,Ye)=>{const Ht=fe(je,Ye);return this.counter++,Ht},this.hostLanguage=h,m(Y)},Py(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Vm,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(T),v(Ft(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=Mn().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class EI{load(d){return(0,D.Z)(function*(){return new Lm(d)})()}clearedOneInstance(){}}const Bm="recaptcha",wI={theme:"light",type:"image"};class ab{constructor(d,h,m=Object.assign({},wI)){this.parameters=m,this.type=Bm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rn(d),this.isInvisible="invisible"===this.parameters.size,ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof h?document.getElementById(h):h;ve(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new EI:new yI,this.validateStartingState()}verify(){var d=this;return(0,D.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),m=d.getAssertedRecaptcha();return m.getResponse(h)||new Promise(T=>{const L=Y=>{Y&&(d.tokenChangeListeners.delete(L),T(Y))};d.tokenChangeListeners.add(L),d.isInvisible&&m.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(m=>m(h)),"function"==typeof d)d(h);else if("string"==typeof d){const m=Mn()[d];"function"==typeof m&&m(h)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const m=document.createElement("div");h.appendChild(m),h=m}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.Z)(function*(){ve(zn()&&!eb(),d.auth,"internal-error"),yield function TI(){let p=null;return new Promise(d=>{"complete"!==document.readyState?(p=()=>d(),window.addEventListener("load",p)):d()}).catch(d=>{throw p&&window.removeEventListener("load",p),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function Q(p){return ue.apply(this,arguments)}(d.auth);ve(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class lb{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=al._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function CI(p,d,h){return Si.apply(this,arguments)}function Si(){return(Si=(0,D.Z)(function*(p,d,h){const m=rn(p),v=yield Iu(m,d,(0,ee.m9)(h));return new lb(v,T=>ch(m,T))})).apply(this,arguments)}function cb(p,d,h){return Um.apply(this,arguments)}function Um(){return(Um=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p);yield bu(!1,m,"phone");const v=yield Iu(m.auth,d,(0,ee.m9)(h));return new lb(v,T=>zy(m,T))})).apply(this,arguments)}function II(p,d,h){return wh.apply(this,arguments)}function wh(){return(wh=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p),v=yield Iu(m.auth,d,(0,ee.m9)(h));return new lb(v,T=>Gy(m,T))})).apply(this,arguments)}function Iu(p,d,h){return jm.apply(this,arguments)}function jm(){return jm=(0,D.Z)(function*(p,d,h){var m;const v=yield h.verify();try{let T;if(ve("string"==typeof v,p,"argument-error"),ve(h.type===Bm,p,"argument-error"),T="string"==typeof d?{phoneNumber:d}:d,"session"in T){const L=T.session;if("phoneNumber"in T)return ve("enroll"===L.type,p,"internal-error"),(yield function PO(p,d){return pe(p,"POST","/v2/accounts/mfaEnrollment:start",K(p,d))}(p,{idToken:L.credential,phoneEnrollmentInfo:{phoneNumber:T.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{ve("signin"===L.type,p,"internal-error");const Y=(null===(m=T.multiFactorHint)||void 0===m?void 0:m.uid)||T.multiFactorUid;return ve(Y,p,"missing-multi-factor-info"),(yield function _I(p,d){return pe(p,"POST","/v2/accounts/mfaSignIn:start",K(p,d))}(p,{mfaPendingCredential:L.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:L}=yield function MO(p,d){return sl.apply(this,arguments)}(p,{phoneNumber:T.phoneNumber,recaptchaToken:v});return L}}finally{h._reset()}}),jm.apply(this,arguments)}function Hm(p,d){return $m.apply(this,arguments)}function $m(){return($m=(0,D.Z)(function*(p,d){yield cl((0,ee.m9)(p),d)})).apply(this,arguments)}let bs=(()=>{class p{constructor(h){this.providerId=p.PROVIDER_ID,this.auth=rn(h)}verifyPhoneNumber(h,m){return Iu(this.auth,h,(0,ee.m9)(m))}static credential(h,m){return al._fromVerification(h,m)}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:m,temporaryProof:v}=h;return m&&v?al._fromTokenResponse(m,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Ca(p,d){return d?E(d):(ve(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Th extends Wl{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ga(d,this._buildIdpRequest())}_linkToIdToken(d,h){return ga(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return ga(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function Bn(p){return $y(p.auth,new Th(p),p.bypassAuthState)}function zm(p){const{auth:d,user:h}=p;return ve(h,d,"internal-error"),vm(h,new Th(p),p.bypassAuthState)}function Ch(p){return fr.apply(this,arguments)}function fr(){return(fr=(0,D.Z)(function*(p){const{auth:d,user:h}=p;return ve(h,d,"internal-error"),cl(h,new Th(p),p.bypassAuthState)})).apply(this,arguments)}class ub{constructor(d,h,m,v,T=!1){this.auth=d,this.resolver=m,this.user=v,this.bypassAuthState=T,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,D.Z)(function*(m,v){d.pendingPromise={resolve:m,reject:v};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(T){d.reject(T)}});return function(m,v){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,D.Z)(function*(){const{urlResponse:m,sessionId:v,postBody:T,tenantId:L,error:Y,type:fe}=d;if(Y)return void h.reject(Y);const je={auth:h.auth,requestUri:m,sessionId:v,tenantId:L||void 0,postBody:T||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(fe)(je))}catch(Ye){h.reject(Ye)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Bn;case"linkViaPopup":case"linkViaRedirect":return Ch;case"reauthViaPopup":case"reauthViaRedirect":return zm;default:xt(this.auth,"internal-error")}}resolve(d){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const db=new dr(2e3,1e4);function rc(p,d,h){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,D.Z)(function*(p,d,h){const m=rn(p);pi(p,d,Ao);const v=Ca(m,h);return new Ih(m,"signInViaPopup",d,v).executeNotNull()})).apply(this,arguments)}function xI(p,d,h){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p);pi(m.auth,d,Ao);const v=Ca(m.auth,h);return new Ih(m.auth,"reauthViaPopup",d,v,m).executeNotNull()})).apply(this,arguments)}function DI(p,d,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p);pi(m.auth,d,Ao);const v=Ca(m.auth,h);return new Ih(m.auth,"linkViaPopup",d,v,m).executeNotNull()})).apply(this,arguments)}let Ih=(()=>{class p extends ub{constructor(h,m,v,T,L){super(h,m,T,L),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var h=this;return(0,D.Z)(function*(){const m=yield h.execute();return ve(m,h.auth,"internal-error"),m})()}onExecution(){var h=this;return(0,D.Z)(function*(){Cn(1===h.filter.length,"Popup operations only handle one event");const m=gh();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],m),h.authWindow.associatedEvent=m,h.resolver._originValidation(h.auth).catch(v=>{h.reject(v)}),h.resolver._isIframeWebStorageSupported(h.auth,v=>{v||h.reject(Ft(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const h=()=>{var m,v;this.pollId=null!==(v=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,db.get())};h()}}return p.currentPopupAction=null,p})();const SI="pendingRedirect",oc=new Map;class hb extends ub{constructor(d,h,m=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,m),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,D.Z)(function*(){let m=oc.get(h.auth._key());if(!m){try{const T=(yield function fb(p,d){return Wm.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;m=()=>Promise.resolve(T)}catch(v){m=()=>Promise.reject(v)}oc.set(h.auth._key(),m)}return h.bypassAuthState||oc.set(h.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,m=this;return(0,D.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(m,d);if("unknown"!==d.type){if(d.eventId){const v=yield m.auth._redirectUserForId(d.eventId);if(v)return m.user=v,h().call(m,d);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function Wm(){return(Wm=(0,D.Z)(function*(p,d){const h=gb(d),m=mb(p);if(!(yield m._isAvailable()))return!1;const v="true"===(yield m._get(h));return yield m._remove(h),v})).apply(this,arguments)}function lt(p,d){return xh.apply(this,arguments)}function xh(){return(xh=(0,D.Z)(function*(p,d){return mb(p)._set(gb(d),"true")})).apply(this,arguments)}function YO(){oc.clear()}function pb(p,d){oc.set(p._key(),d)}function mb(p){return E(p._redirectPersistence)}function gb(p){return Fe(SI,p.config.apiKey,p.name)}function _b(p,d,h){return function sc(p,d,h){return qm.apply(this,arguments)}(p,d,h)}function qm(){return(qm=(0,D.Z)(function*(p,d,h){const m=rn(p);pi(p,d,Ao),yield m._initializationPromise;const v=Ca(m,h);return yield lt(v,m),v._openRedirect(m,d,"signInViaRedirect")})).apply(this,arguments)}function AI(p,d,h){return function RI(p,d,h){return Km.apply(this,arguments)}(p,d,h)}function Km(){return(Km=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p);pi(m.auth,d,Ao),yield m.auth._initializationPromise;const v=Ca(m.auth,h);yield lt(v,m.auth);const T=yield ac(m);return v._openRedirect(m.auth,d,"reauthViaRedirect",T)})).apply(this,arguments)}function NI(p,d,h){return function ge(p,d,h){return Zt.apply(this,arguments)}(p,d,h)}function Zt(){return(Zt=(0,D.Z)(function*(p,d,h){const m=(0,ee.m9)(p);pi(m.auth,d,Ao),yield m.auth._initializationPromise;const v=Ca(m.auth,h);yield bu(!1,m,d.providerId),yield lt(v,m.auth);const T=yield ac(m);return v._openRedirect(m.auth,d,"linkViaRedirect",T)})).apply(this,arguments)}function Yt(p,d){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,D.Z)(function*(p,d){return yield rn(p)._initializationPromise,Vi(p,d,!1)})).apply(this,arguments)}function Vi(p,d){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,D.Z)(function*(p,d,h=!1){const m=rn(p),v=Ca(m,d),L=yield new hb(m,v,h).execute();return L&&!h&&(delete L.user._redirectEventId,yield m._persistUserIfCurrent(L.user),yield m._setRedirectUser(null,d)),L})).apply(this,arguments)}function ac(p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,D.Z)(function*(p){const d=gh(`${p.uid}:::`);return p._redirectEventId=d,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),d})).apply(this,arguments)}class Sh{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(d,m)&&(h=!0,this.sendToConsumer(d,m),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function yb(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MI(p);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var m;if(d.error&&!MI(d)){const v=(null===(m=d.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";h.onError(Ft(this.auth,v))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const m=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&m}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vb(d))}saveEventToCache(d){this.cachedEventUids.add(vb(d)),this.lastProcessedEventTime=Date.now()}}function vb(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(d=>d).join("-")}function MI({type:p,error:d}){return"unknown"===p&&"auth/no-auth-event"===d?.code}function pr(p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,D.Z)(function*(p,d={}){return pe(p,"GET","/v1/projects",d)})).apply(this,arguments)}const bb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lc=/^https?/;function Ym(){return(Ym=(0,D.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:d}=yield pr(p);for(const h of d)try{if(Eb(h))return}catch{}xt(p,"unauthorized-domain")})).apply(this,arguments)}function Eb(p){const d=Kn(),{protocol:h,hostname:m}=new URL(d);if(p.startsWith("chrome-extension://")){const L=new URL(p);return""===L.hostname&&""===m?"chrome-extension:"===h&&p.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&L.hostname===m}if(!lc.test(h))return!1;if(bb.test(p))return m===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(m)}const kI=new dr(3e4,6e4);function wb(){const p=Mn().___jsl;if(p?.H)for(const d of Object.keys(p.H))if(p.H[d].r=p.H[d].r||[],p.H[d].L=p.H[d].L||[],p.H[d].r=[...p.H[d].L],p.CP)for(let h=0;h<p.CP.length;h++)p.CP[h]=null}let cc=null;const Jm=new dr(5e3,15e3),OI="__/auth/iframe",Cb="emulator/auth/iframe",Xm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ib=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xb(p){const d=p.config;ve(d.authDomain,p,"auth-domain-config-required");const h=d.emulator?so(d,Cb):`https://${p.config.authDomain}/${OI}`,m={apiKey:d.apiKey,appName:p.name,v:U.SDK_VERSION},v=Ib.get(p.config.apiHost);v&&(m.eid=v);const T=p._getFrameworks();return T.length&&(m.fw=T.join(",")),`${h}?${(0,ee.xO)(m).slice(1)}`}function Ah(){return Ah=(0,D.Z)(function*(p){const d=yield function Tb(p){return cc=cc||function Qm(p){return new Promise((d,h)=>{var m,v,T;function L(){wb(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{wb(),h(Ft(p,"network-request-failed"))},timeout:kI.get()})}if(null!==(v=null===(m=Mn().gapi)||void 0===m?void 0:m.iframes)&&void 0!==v&&v.Iframe)d(gapi.iframes.getContext());else{if(null===(T=Mn().gapi)||void 0===T||!T.load){const Y=ma("iframefcb");return Mn()[Y]=()=>{gapi.load?L():h(Ft(p,"network-request-failed"))},Py(`https://apis.google.com/js/api.js?onload=${Y}`).catch(fe=>h(fe))}L()}}).catch(d=>{throw cc=null,d})}(p),cc}(p),h=Mn().gapi;return ve(h,p,"internal-error"),d.open({where:document.body,url:xb(p),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xm,dontclear:!0},m=>new Promise(function(){var v=(0,D.Z)(function*(T,L){yield m.restyle({setHideOnLeave:!1});const Y=Ft(p,"network-request-failed"),fe=Mn().setTimeout(()=>{L(Y)},Jm.get());function je(){Mn().clearTimeout(fe),T(m)}m.ping(je).then(je,()=>{L(Y)})});return function(T,L){return v.apply(this,arguments)}}()))}),Ah.apply(this,arguments)}const eg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qn{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ab="__/auth/handler",VI="emulator/auth/handler",Rb=encodeURIComponent("fac");function Rh(p,d,h,m,v,T){return uc.apply(this,arguments)}function uc(){return(uc=(0,D.Z)(function*(p,d,h,m,v,T){ve(p.config.authDomain,p,"auth-domain-config-required"),ve(p.config.apiKey,p,"invalid-api-key");const L={apiKey:p.config.apiKey,appName:p.name,authType:h,redirectUrl:m,v:U.SDK_VERSION,eventId:v};if(d instanceof Ao){d.setDefaultLanguage(p.languageCode),L.providerId=d.providerId||"",(0,ee.xb)(d.getCustomParameters())||(L.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ye,Ht]of Object.entries(T||{}))L[Ye]=Ht}if(d instanceof ya){const Ye=d.getScopes().filter(Ht=>""!==Ht);Ye.length>0&&(L.scopes=Ye.join(","))}p.tenantId&&(L.tid=p.tenantId);const Y=L;for(const Ye of Object.keys(Y))void 0===Y[Ye]&&delete Y[Ye];const fe=yield p._getAppCheckToken(),je=fe?`#${Rb}=${encodeURIComponent(fe)}`:"";return`${function Ia({config:p}){return p.emulator?so(p,VI):`https://${p.authDomain}/${Ab}`}(p)}?${(0,ee.xO)(Y).slice(1)}${je}`})).apply(this,arguments)}const tg="webStorageSupport",xu=class Nh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mh,this._completeRedirectFn=Vi,this._overrideRedirectResult=pb}_openPopup(d,h,m,v){var T=this;return(0,D.Z)(function*(){var L;Cn(null===(L=T.eventManagers[d._key()])||void 0===L?void 0:L.manager,"_initialize() not called before _openPopup()");const Y=yield Rh(d,h,m,Kn(),v);return function Sb(p,d,h,m=500,v=600){const T=Math.max((window.screen.availHeight-v)/2,0).toString(),L=Math.max((window.screen.availWidth-m)/2,0).toString();let Y="";const fe=Object.assign(Object.assign({},eg),{width:m.toString(),height:v.toString(),top:T,left:L}),je=(0,ee.z$)().toLowerCase();h&&(Y=Dn(je)?"_blank":h),_n(je)&&(d=d||"http://localhost",fe.scrollbars="yes");const Ye=Object.entries(fe).reduce((Nr,[Yo,dc])=>`${Nr}${Yo}=${dc},`,"");if(function qe(p=(0,ee.z$)()){var d;return F(p)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(je)&&"_self"!==Y)return function LI(p,d){const h=document.createElement("a");h.href=p,h.target=d;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(m)}(d||"",Y),new Qn(null);const Ht=window.open(d||"",Y,Ye);ve(Ht,p,"popup-blocked");try{Ht.focus()}catch{}return new Qn(Ht)}(d,Y,gh())})()}_openRedirect(d,h,m,v){var T=this;return(0,D.Z)(function*(){return yield T._originValidation(d),function GO(p){Mn().location.href=p}(yield Rh(d,h,m,Kn(),v)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:v,promise:T}=this.eventManagers[h];return v?Promise.resolve(v):(Cn(T,"If manager is not set, promise should be"),T)}const m=this.initAndGetManager(d);return this.eventManagers[h]={promise:m},m.catch(()=>{delete this.eventManagers[h]}),m}initAndGetManager(d){var h=this;return(0,D.Z)(function*(){const m=yield function Db(p){return Ah.apply(this,arguments)}(d),v=new Sh(d);return m.register("authEvent",T=>(ve(T?.authEvent,d,"invalid-auth-event"),{status:v.onEvent(T.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:v},h.iframes[d._key()]=m,v})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(tg,{type:tg},v=>{var T;const L=null===(T=v?.[0])||void 0===T?void 0:T[tg];void 0!==L&&h(!!L),xt(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function qs(p){return Ym.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return Mt()||Me()||F()}};class Mh{constructor(d){this.factorId=d}_process(d,h,m){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,m);case"signin":return this._finalizeSignIn(d,h.credential);default:return Vt("unexpected MultiFactorSessionType")}}}class Du extends Mh{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Du(d)}_finalizeEnroll(d,h,m){return function hI(p,d){return pe(p,"POST","/v2/accounts/mfaEnrollment:finalize",K(p,d))}(d,{idToken:h,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function vI(p,d){return pe(p,"POST","/v2/accounts/mfaSignIn:finalize",K(p,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nb=(()=>{class p{constructor(){}static assertion(h){return Du._fromCredential(h)}}return p.FACTOR_ID="phone",p})();var Mb="@firebase/auth";class ig{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,D.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(m=>{d(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const JO=(0,ee.Pz)("authIdTokenMaxAge")||300;let $I=null;const rg=p=>function(){var d=(0,D.Z)(function*(h){const m=h&&(yield h.getIdTokenResult()),v=m&&((new Date).getTime()-Date.parse(m.issuedAtTime))/1e3;if(v&&v>JO)return;const T=m?.token;$I!==T&&($I=T,yield fetch(p,{method:T?"POST":"DELETE",headers:T?{Authorization:`Bearer ${T}`}:{}}))});return function(h){return d.apply(this,arguments)}}();function Su(p=(0,U.getApp)()){const d=(0,U._getProvider)(p,"auth");if(d.isInitialized())return d.getImmediate();const h=function xO(p,d){const h=(0,U._getProvider)(p,"auth");if(h.isInitialized()){const v=h.getImmediate(),T=h.getOptions();if((0,ee.vZ)(T,d??{}))return v;xt(v,"already-initialized")}return h.initialize({options:d})}(p,{popupRedirectResolver:xu,persistence:[gI,pI,mh]}),m=(0,ee.Pz)("authTokenSyncURL");if(m){const T=rg(m);(function OO(p,d,h){(0,ee.m9)(p).beforeAuthStateChanged(d,h)})(h,T,()=>T(h.currentUser)),function tr(p,d,h,m){(0,ee.m9)(p).onIdTokenChanged(d,h,m)}(h,L=>T(L))}const v=(0,ee.q4)("auth");return v&&eI(h,`http://${v}`),h}!function jI(p){(0,U._registerComponent)(new jn.wA("auth",(d,{options:h})=>{const m=d.getProvider("app").getImmediate(),v=d.getProvider("heartbeat"),T=d.getProvider("app-check-internal"),{apiKey:L,authDomain:Y}=m.options;ve(L&&!L.includes(":"),"invalid-api-key",{appName:m.name});const fe={apiKey:L,authDomain:Y,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Di(p)},je=new sm(m,v,T,fe);return function DO(p,d){const h=d?.persistence||[],m=(Array.isArray(h)?h:[h]).map(E);d?.errorMap&&p._updateErrorMap(d.errorMap),p._initializeWithPersistence(m,d?.popupRedirectResolver)}(je,h),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,m)=>{d.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new jn.wA("auth-internal",d=>{const h=rn(d.getProvider("auth").getImmediate());return new ig(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(Mb,"1.3.2",function QO(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(p)),(0,U.registerVersion)(Mb,"1.3.2","esm2017")}("Browser")},58:($r,hi,et)=>{et.d(hi,{BH:()=>ur,DV:()=>B,Dv:()=>an,G6:()=>so,GJ:()=>oi,L:()=>Gt,LL:()=>se,Pz:()=>Ft,Sg:()=>pi,UG:()=>Vt,UI:()=>ue,US:()=>jn,Wj:()=>Vn,Wl:()=>Ke,Yr:()=>dr,ZB:()=>He,ZR:()=>pe,aH:()=>xt,b$:()=>zn,cI:()=>Ce,dS:()=>qo,eu:()=>X,g5:()=>U,gK:()=>mn,gQ:()=>Zn,h$:()=>Tn,hl:()=>q,hu:()=>ee,jU:()=>Cn,lb:()=>Gn,m9:()=>vs,ne:()=>Pi,p$:()=>Ee,pd:()=>xn,q4:()=>fi,r3:()=>j,ru:()=>Kn,tV:()=>ce,uI:()=>ve,ug:()=>ao,vZ:()=>Ae,w1:()=>oo,w9:()=>Ln,xO:()=>Bt,xb:()=>Q,z$:()=>_t,zd:()=>Nt});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ee=function(k,R){if(!k)throw U(R)},U=function(k){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+k)},Ge=function(k){const R=[];let w=0;for(let I=0;I<k.length;I++){let E=k.charCodeAt(I);E<128?R[w++]=E:E<2048?(R[w++]=E>>6|192,R[w++]=63&E|128):55296==(64512&E)&&I+1<k.length&&56320==(64512&k.charCodeAt(I+1))?(E=65536+((1023&E)<<10)+(1023&k.charCodeAt(++I)),R[w++]=E>>18|240,R[w++]=E>>12&63|128,R[w++]=E>>6&63|128,R[w++]=63&E|128):(R[w++]=E>>12|224,R[w++]=E>>6&63|128,R[w++]=63&E|128)}return R},jn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(k,R){if(!Array.isArray(k))throw Error("encodeByteArray takes an array as a parameter");this.init_();const w=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,I=[];for(let E=0;E<k.length;E+=3){const M=k[E],oe=E+1<k.length,Fe=oe?k[E+1]:0,Le=E+2<k.length,dt=Le?k[E+2]:0;let Dn=(15&Fe)<<2|dt>>6,Ze=63&dt;Le||(Ze=64,oe||(Dn=64)),I.push(w[M>>2],w[(3&M)<<4|Fe>>4],w[Dn],w[Ze])}return I.join("")},encodeString(k,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(k):this.encodeByteArray(Ge(k),R)},decodeString(k,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(k):function(k){const R=[];let w=0,I=0;for(;w<k.length;){const E=k[w++];if(E<128)R[I++]=String.fromCharCode(E);else if(E>191&&E<224){const M=k[w++];R[I++]=String.fromCharCode((31&E)<<6|63&M)}else if(E>239&&E<365){const Le=((7&E)<<18|(63&k[w++])<<12|(63&k[w++])<<6|63&k[w++])-65536;R[I++]=String.fromCharCode(55296+(Le>>10)),R[I++]=String.fromCharCode(56320+(1023&Le))}else{const M=k[w++],oe=k[w++];R[I++]=String.fromCharCode((15&E)<<12|(63&M)<<6|63&oe)}}return R.join("")}(this.decodeStringToByteArray(k,R))},decodeStringToByteArray(k,R){this.init_();const w=R?this.charToByteMapWebSafe_:this.charToByteMap_,I=[];for(let E=0;E<k.length;){const M=w[k.charAt(E++)],Fe=E<k.length?w[k.charAt(E)]:0;++E;const dt=E<k.length?w[k.charAt(E)]:64;++E;const Me=E<k.length?w[k.charAt(E)]:64;if(++E,null==M||null==Fe||null==dt||null==Me)throw new ri;I.push(M<<2|Fe>>4),64!==dt&&(I.push(Fe<<4&240|dt>>2),64!==Me&&I.push(dt<<6&192|Me))}return I},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let k=0;k<this.ENCODED_VALS.length;k++)this.byteToCharMap_[k]=this.ENCODED_VALS.charAt(k),this.charToByteMap_[this.byteToCharMap_[k]]=k,this.byteToCharMapWebSafe_[k]=this.ENCODED_VALS_WEBSAFE.charAt(k),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[k]]=k,k>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(k)]=k,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(k)]=k)}}};class ri extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tn=function(k){const R=Ge(k);return jn.encodeByteArray(R,!0)},Gt=function(k){return Tn(k).replace(/\./g,"")},ce=function(k){try{return jn.decodeString(k,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function Ee(k){return He(void 0,k)}function He(k,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===k&&(k={});break;case Array:k=[];break;default:return R}for(const w in R)!R.hasOwnProperty(w)||!ft(w)||(k[w]=He(k[w],R[w]));return k}function ft(k){return"__proto__"!==k}const ut=()=>{try{return function en(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const k=process.env.__FIREBASE_DEFAULTS__;return k?JSON.parse(k):void 0})()||(()=>{if(typeof document>"u")return;let k;try{k=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=k&&ce(k[1]);return R&&JSON.parse(R)})()}catch(k){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${k}`)}},fi=k=>{var R,w;return null===(w=null===(R=ut())||void 0===R?void 0:R.emulatorHosts)||void 0===w?void 0:w[k]},xt=()=>{var k;return null===(k=ut())||void 0===k?void 0:k.config},Ft=k=>{var R;return null===(R=ut())||void 0===R?void 0:R[`_${k}`]};class ur{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,w)=>{this.resolve=R,this.reject=w})}wrapCallback(R){return(w,I)=>{w?this.reject(w):this.resolve(I),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(w):R(w,I))}}}function pi(k,R){if(k.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const I=R||"demo-project",E=k.iat||0,M=k.sub||k.user_id;if(!M)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const oe=Object.assign({iss:`https://securetoken.google.com/${I}`,aud:I,iat:E,exp:E+3600,auth_time:E,sub:M,user_id:M,firebase:{sign_in_provider:"custom",identities:{}}},k);return[Gt(JSON.stringify({alg:"none",type:"JWT"})),Gt(JSON.stringify(oe)),""].join(".")}function _t(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function Vt(){var k;const R=null===(k=ut())||void 0===k?void 0:k.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Cn(){return"object"==typeof self&&self.self===self}function Kn(){const k="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof k&&void 0!==k.id}function zn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function oo(){const k=_t();return k.indexOf("MSIE ")>=0||k.indexOf("Trident/")>=0}function dr(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function so(){return!Vt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){try{return"object"==typeof indexedDB}catch{return!1}}function X(){return new Promise((k,R)=>{try{let w=!0;const I="validate-browser-context-for-indexeddb-analytics-module",E=self.indexedDB.open(I);E.onsuccess=()=>{E.result.close(),w||self.indexedDB.deleteDatabase(I),k(!0)},E.onupgradeneeded=()=>{w=!1},E.onerror=()=>{var M;R((null===(M=E.error)||void 0===M?void 0:M.message)||"")}}catch(w){R(w)}})}class pe extends Error{constructor(R,w,I){super(w),this.code=R,this.customData=I,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(R,w,I){this.service=R,this.serviceName=w,this.errors=I}create(R,...w){const I=w[0]||{},E=`${this.service}/${R}`,M=this.errors[R],oe=M?function De(k,R){return k.replace(Dt,(w,I)=>{const E=R[I];return null!=E?String(E):`<${I}?>`})}(M,I):"Error";return new pe(E,`${this.serviceName}: ${oe} (${E}).`,I)}}const Dt=/\{\$([^}]+)}/g;function Ce(k){return JSON.parse(k)}function Ke(k){return JSON.stringify(k)}const Wt=function(k){let R={},w={},I={},E="";try{const M=k.split(".");R=Ce(ce(M[0])||""),w=Ce(ce(M[1])||""),E=M[2],I=w.d||{},delete w.d}catch{}return{header:R,claims:w,data:I,signature:E}},Ln=function(k){const w=Wt(k).claims;return!!w&&"object"==typeof w&&w.hasOwnProperty("iat")},oi=function(k){const R=Wt(k).claims;return"object"==typeof R&&!0===R.admin};function j(k,R){return Object.prototype.hasOwnProperty.call(k,R)}function B(k,R){if(Object.prototype.hasOwnProperty.call(k,R))return k[R]}function Q(k){for(const R in k)if(Object.prototype.hasOwnProperty.call(k,R))return!1;return!0}function ue(k,R,w){const I={};for(const E in k)Object.prototype.hasOwnProperty.call(k,E)&&(I[E]=R.call(w,k[E],E,k));return I}function Ae(k,R){if(k===R)return!0;const w=Object.keys(k),I=Object.keys(R);for(const E of w){if(!I.includes(E))return!1;const M=k[E],oe=R[E];if(ye(M)&&ye(oe)){if(!Ae(M,oe))return!1}else if(M!==oe)return!1}for(const E of I)if(!w.includes(E))return!1;return!0}function ye(k){return null!==k&&"object"==typeof k}function Bt(k){const R=[];for(const[w,I]of Object.entries(k))Array.isArray(I)?I.forEach(E=>{R.push(encodeURIComponent(w)+"="+encodeURIComponent(E))}):R.push(encodeURIComponent(w)+"="+encodeURIComponent(I));return R.length?"&"+R.join("&"):""}function Nt(k){const R={};return k.replace(/^\?/,"").split("&").forEach(I=>{if(I){const[E,M]=I.split("=");R[decodeURIComponent(E)]=decodeURIComponent(M)}}),R}function xn(k){const R=k.indexOf("?");if(!R)return"";const w=k.indexOf("#",R);return k.substring(R,w>0?w:void 0)}class Zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let R=1;R<this.blockSize;++R)this.pad_[R]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(R,w){w||(w=0);const I=this.W_;if("string"==typeof R)for(let Me=0;Me<16;Me++)I[Me]=R.charCodeAt(w)<<24|R.charCodeAt(w+1)<<16|R.charCodeAt(w+2)<<8|R.charCodeAt(w+3),w+=4;else for(let Me=0;Me<16;Me++)I[Me]=R[w]<<24|R[w+1]<<16|R[w+2]<<8|R[w+3],w+=4;for(let Me=16;Me<80;Me++){const Dn=I[Me-3]^I[Me-8]^I[Me-14]^I[Me-16];I[Me]=4294967295&(Dn<<1|Dn>>>31)}let dt,_n,E=this.chain_[0],M=this.chain_[1],oe=this.chain_[2],Fe=this.chain_[3],Le=this.chain_[4];for(let Me=0;Me<80;Me++){Me<40?Me<20?(dt=Fe^M&(oe^Fe),_n=1518500249):(dt=M^oe^Fe,_n=1859775393):Me<60?(dt=M&oe|Fe&(M|oe),_n=2400959708):(dt=M^oe^Fe,_n=3395469782);const Dn=(E<<5|E>>>27)+dt+Le+_n+I[Me]&4294967295;Le=Fe,Fe=oe,oe=4294967295&(M<<30|M>>>2),M=E,E=Dn}this.chain_[0]=this.chain_[0]+E&4294967295,this.chain_[1]=this.chain_[1]+M&4294967295,this.chain_[2]=this.chain_[2]+oe&4294967295,this.chain_[3]=this.chain_[3]+Fe&4294967295,this.chain_[4]=this.chain_[4]+Le&4294967295}update(R,w){if(null==R)return;void 0===w&&(w=R.length);const I=w-this.blockSize;let E=0;const M=this.buf_;let oe=this.inbuf_;for(;E<w;){if(0===oe)for(;E<=I;)this.compress_(R,E),E+=this.blockSize;if("string"==typeof R){for(;E<w;)if(M[oe]=R.charCodeAt(E),++oe,++E,oe===this.blockSize){this.compress_(M),oe=0;break}}else for(;E<w;)if(M[oe]=R[E],++oe,++E,oe===this.blockSize){this.compress_(M),oe=0;break}}this.inbuf_=oe,this.total_+=w}digest(){const R=[];let w=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let E=this.blockSize-1;E>=56;E--)this.buf_[E]=255&w,w/=256;this.compress_(this.buf_);let I=0;for(let E=0;E<5;E++)for(let M=24;M>=0;M-=8)R[I]=this.chain_[E]>>M&255,++I;return R}}function Pi(k,R){const w=new zi(k,R);return w.subscribe.bind(w)}class zi{constructor(R,w){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=w,this.task.then(()=>{R(this)}).catch(I=>{this.error(I)})}next(R){this.forEachObserver(w=>{w.next(R)})}error(R){this.forEachObserver(w=>{w.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,w,I){let E;if(void 0===R&&void 0===w&&void 0===I)throw new Error("Missing Observer.");E=function yn(k,R){if("object"!=typeof k||null===k)return!1;for(const w of R)if(w in k&&"function"==typeof k[w])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:w,complete:I},void 0===E.next&&(E.next=qt),void 0===E.error&&(E.error=qt),void 0===E.complete&&(E.complete=qt);const M=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?E.error(this.finalError):E.complete()}catch{}}),this.observers.push(E),M}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let w=0;w<this.observers.length;w++)this.sendOne(w,R)}sendOne(R,w){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{w(this.observers[R])}catch(I){typeof console<"u"&&console.error&&console.error(I)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qt(){}const an=function(k,R,w,I){let E;if(I<R?E="at least "+R:I>w&&(E=0===w?"none":"no more than "+w),E)throw new Error(k+" failed: Was called with "+I+(1===I?" argument.":" arguments.")+" Expects "+E+".")};function mn(k,R){return`${k} failed: ${R} argument `}function Vn(k,R,w,I){if((!I||w)&&"function"!=typeof w)throw new Error(mn(k,R)+"must be a valid function.")}function Gn(k,R,w,I){if((!I||w)&&("object"!=typeof w||null===w))throw new Error(mn(k,R)+"must be a valid context object.")}const qo=function(k){const R=[];let w=0;for(let I=0;I<k.length;I++){let E=k.charCodeAt(I);if(E>=55296&&E<=56319){const M=E-55296;I++,ee(I<k.length,"Surrogate pair missing trail surrogate."),E=65536+(M<<10)+(k.charCodeAt(I)-56320)}E<128?R[w++]=E:E<2048?(R[w++]=E>>6|192,R[w++]=63&E|128):E<65536?(R[w++]=E>>12|224,R[w++]=E>>6&63|128,R[w++]=63&E|128):(R[w++]=E>>18|240,R[w++]=E>>12&63|128,R[w++]=E>>6&63|128,R[w++]=63&E|128)}return R},ao=function(k){let R=0;for(let w=0;w<k.length;w++){const I=k.charCodeAt(w);I<128?R++:I<2048?R+=2:I>=55296&&I<=56319?(R+=4,w++):R+=3}return R};function vs(k){return k&&k._delegate?k._delegate:k}},682:($r,hi,et)=>{function D(n){return"function"==typeof n}function ee(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const U=ee(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Ge(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class yt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(D(i))try{i()}catch(o){t=o instanceof U?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Tn(o)}catch(s){t=t??[],s instanceof U?t=[...t,...s.errors]:t.push(s)}}if(t)throw new U(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Tn(t);else{if(t instanceof yt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ge(e,t)}remove(t){const{_finalizers:e}=this;e&&Ge(e,t),t instanceof yt&&t._removeParent(this)}}yt.EMPTY=(()=>{const n=new yt;return n.closed=!0,n})();const jn=yt.EMPTY;function ri(n){return n instanceof yt||n&&"closed"in n&&D(n.remove)&&D(n.add)&&D(n.unsubscribe)}function Tn(n){D(n)?n():n.unsubscribe()}const Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ce={setTimeout(n,t,...e){const{delegate:i}=ce;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=ce;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ee(n){ce.setTimeout(()=>{const{onUnhandledError:t}=Gt;if(!t)throw n;t(n)})}function He(){}const ft=Pt("C",void 0,void 0);function Pt(n,t,e){return{kind:n,value:t,error:e}}let ct=null;function ut(n){if(Gt.useDeprecatedSynchronousErrorHandling){const t=!ct;if(t&&(ct={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=ct;if(ct=null,e)throw i}}else n()}class $n extends yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ri(t)&&t.add(this)):this.destination=Cn}static create(t,e,i){return new pi(t,e,i)}next(t){this.isStopped?Vt(function Hn(n){return Pt("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Vt(function en(n){return Pt("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Vt(ft,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xt=Function.prototype.bind;function Ft(n,t){return xt.call(n,t)}class ur{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){_t(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){_t(i)}else _t(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){_t(e)}}}class pi extends $n{constructor(t,e,i){let r;if(super(),D(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Ft(t.next,o),error:t.error&&Ft(t.error,o),complete:t.complete&&Ft(t.complete,o)}):r=t}this.destination=new ur(r)}}function _t(n){Gt.useDeprecatedSynchronousErrorHandling?function fi(n){Gt.useDeprecatedSynchronousErrorHandling&&ct&&(ct.errorThrown=!0,ct.error=n)}(n):Ee(n)}function Vt(n,t){const{onStoppedNotification:e}=Gt;e&&ce.setTimeout(()=>e(n,t))}const Cn={closed:!0,next:He,error:function ve(n){throw n},complete:He},Kn="function"==typeof Symbol&&Symbol.observable||"@@observable";function zn(n){return n}function oo(n){return 0===n.length?zn:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let it=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const o=function q(n){return n&&n instanceof $n||function so(n){return n&&D(n.next)&&D(n.error)&&D(n.complete)}(n)&&ri(n)}(e)?e:new pi(e,i,r);return ut(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=dr(i))((r,o)=>{const s=new pi({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Kn](){return this}pipe(...e){return oo(e)(this)}toPromise(e){return new(e=dr(e))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function dr(n){var t;return null!==(t=n??Gt.Promise)&&void 0!==t?t:Promise}const X=ee(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class n extends it{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new K(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new X}next(e){ut(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){ut(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){ut(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:o}=this;return i||r?jn:(this.currentObservers=null,o.push(e),new yt(()=>{this.currentObservers=null,Ge(o,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){const e=new it;return e.source=this,e}}return n.create=(t,e)=>new K(t,e),n})();class K extends ${constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:jn}}function pe(n){return D(n?.lift)}function se(n){return t=>{if(pe(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,t,e,i,r){return new Dt(n,t,e,i,r)}class Dt extends $n{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ce(n,t){return se((e,i)=>{let r=0;e.subscribe(De(i,o=>{i.next(n.call(t,o,r++))}))})}var Ke=et(582);const Wt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Fn(n){return D(n?.then)}function pn(n){return D(n[Kn])}function Ln(n){return Symbol.asyncIterator&&D(n?.[Symbol.asyncIterator])}function oi(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const B=function j(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Q(n){return D(n?.[B])}function ue(n){return(0,Ke.FC)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,Ke.qq)(e.read());if(r)return yield(0,Ke.qq)(void 0);yield yield(0,Ke.qq)(i)}}finally{e.releaseLock()}})}function Ae(n){return D(n?.getReader)}function ye(n){if(n instanceof it)return n;if(null!=n){if(pn(n))return function In(n){return new it(t=>{const e=n[Kn]();if(D(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Wt(n))return function Bt(n){return new it(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(Fn(n))return function Nt(n){return new it(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Ee)})}(n);if(Ln(n))return Zn(n);if(Q(n))return function xn(n){return new it(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(Ae(n))return function Pi(n){return Zn(ue(n))}(n)}throw oi(n)}function Zn(n){return new it(t=>{(function zi(n,t){var e,i,r,o;return(0,Ke.mG)(this,void 0,void 0,function*(){try{for(e=(0,Ke.KL)(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Ji(n,t,e,i=0,r=!1){const o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function qt(n,t,e=1/0){return D(t)?qt((i,r)=>Ce((o,s)=>t(i,o,r,s))(ye(n(i,r))),e):("number"==typeof t&&(e=t),se((i,r)=>function yn(n,t,e,i,r,o,s,a){const l=[];let c=0,u=0,f=!1;const g=()=>{f&&!l.length&&!c&&t.complete()},_=b=>c<i?y(b):l.push(b),y=b=>{o&&t.next(b),c++;let C=!1;ye(e(b,u++)).subscribe(De(t,O=>{r?.(O),o?_(O):t.next(O)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){const O=l.shift();s?Ji(t,s,()=>y(O)):y(O)}g()}catch(O){t.error(O)}}))};return n.subscribe(De(t,_,()=>{f=!0,g()})),()=>{a?.()}}(i,r,n,e)))}function an(n=1/0){return qt(zn,n)}const mn=new it(n=>n.complete());function Gn(n){return n&&D(n.schedule)}function qo(n){return n[n.length-1]}function ao(n){return D(qo(n))?n.pop():void 0}function Ko(n){return Gn(qo(n))?n.pop():void 0}function xi(n,t=0){return se((e,i)=>{e.subscribe(De(i,r=>Ji(i,n,()=>i.next(r),t),()=>Ji(i,n,()=>i.complete(),t),r=>Ji(i,n,()=>i.error(r),t)))})}function hr(n,t=0){return se((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function vs(n,t){if(!n)throw new Error("Iterable cannot be null");return new it(e=>{Ji(e,t,()=>{const i=n[Symbol.asyncIterator]();Ji(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function w(n,t){return t?function R(n,t){if(null!=n){if(pn(n))return function lo(n,t){return ye(n).pipe(hr(t),xi(t))}(n,t);if(Wt(n))return function pa(n,t){return new it(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(Fn(n))return function Gl(n,t){return ye(n).pipe(hr(t),xi(t))}(n,t);if(Ln(n))return vs(n,t);if(Q(n))return function nl(n,t){return new it(e=>{let i;return Ji(e,t,()=>{i=n[B](),Ji(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void e.error(s)}o?e.complete():e.next(r)},0,!0)}),()=>D(i?.return)&&i.return()})}(n,t);if(Ae(n))return function k(n,t){return vs(ue(n),t)}(n,t)}throw oi(n)}(n,t):ye(n)}function I(...n){const t=Ko(n),e=function Fi(n,t){return"number"==typeof qo(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?ye(i[0]):an(e)(w(i,t)):mn}class E extends ${constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function M(...n){return w(n,Ko(n))}function oe(n={}){const{connector:t=(()=>new $),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,u=!1,f=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),s=l=void 0,u=f=!1},y=()=>{const b=s;_(),b?.unsubscribe()};return se((b,C)=>{c++,!f&&!u&&g();const O=l=l??t();C.add(()=>{c--,0===c&&!f&&!u&&(a=Fe(y,r))}),O.subscribe(C),!s&&c>0&&(s=new pi({next:S=>O.next(S),error:S=>{f=!0,g(),a=Fe(_,e,S),O.error(S)},complete:()=>{u=!0,g(),a=Fe(_,i),O.complete()}}),ye(b).subscribe(s))})(o)}}function Fe(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new pi({next:()=>{i.unsubscribe(),n()}});return ye(t(...e)).subscribe(i)}function Le(n,t){return se((e,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();e.subscribe(De(i,l=>{r?.unsubscribe();let c=0;const u=o++;ye(n(l,u)).subscribe(r=De(i,f=>i.next(t?t(l,f,u,c++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function dt(n,t=zn){return n=n??_n,se((e,i)=>{let r,o=!0;e.subscribe(De(i,s=>{const a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function _n(n,t){return n===t}function Me(n){for(let t in n)if(n[t]===Me)return t;throw Error("Could not find renamed property on target object.")}function Dn(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Ze(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ze).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Li(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const il=Me({__forward_ref__:Me});function H(n){return n.__forward_ref__=H,n.toString=function(){return Ze(this())},n}function F(n){return Te(n)?n():n}function Te(n){return"function"==typeof n&&n.hasOwnProperty(il)&&n.__forward_ref__===H}function qe(n){return n&&!!n.\u0275providers}const Mt="https://g.co/ng/security#xss";class z extends Error{constructor(t,e){super(function Di(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function $e(n){return"string"==typeof n?n:null==n?"":String(n)}function sm(n,t){throw new z(-201,!1)}function So(n,t){null==n&&function at(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function th(n){return am(n,ql)||am(n,nh)}function am(n,t){return n.hasOwnProperty(t)?n[t]:null}function mu(n){return n&&(n.hasOwnProperty(cm)||n.hasOwnProperty(tI))?n[cm]:null}const ql=Me({\u0275prov:Me}),cm=Me({\u0275inj:Me}),nh=Me({ngInjectableDef:Me}),tI=Me({ngInjectorDef:Me});var kt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(kt||{});let Kl;function zr(n){const t=Kl;return Kl=n,t}function rh(n,t,e){const i=th(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&kt.Optional?null:void 0!==t?t:void sm(Ze(n))}const Sn=globalThis;class de{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=he({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const sl={},fm="__NG_DI_FLAG__",Zl="ngTempTokenPath",pm=/\n/gm,jy="__source";let _a;function va(n){const t=_a;return _a=n,t}function rI(n,t=kt.Default){if(void 0===_a)throw new z(-203,!1);return null===_a?rh(n,void 0,t):_a.get(n,t&kt.Optional?null:void 0,t)}function P(n,t=kt.Default){return(function ih(){return Kl}()||rI)(F(n),t)}function be(n,t=kt.Default){return P(n,Ao(t))}function Ao(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ya(n){const t=[];for(let e=0;e<n.length;e++){const i=F(n[e]);if(Array.isArray(i)){if(0===i.length)throw new z(900,!1);let r,o=kt.Default;for(let s=0;s<i.length;s++){const a=i[s],l=sI(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(P(r,o))}else t.push(P(i))}return t}function js(n,t){return n[fm]=t,n.prototype[fm]=t,n}function sI(n){return n[fm]}function Hs(n){return{toString:n}.toString()}var $s=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($s||{}),Ro=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ro||{});const co={},ln=[],_u=Me({\u0275cmp:Me}),vu=Me({\u0275dir:Me}),Gr=Me({\u0275pipe:Me}),mm=Me({\u0275mod:Me}),zs=Me({\u0275fac:Me}),ll=Me({__NG_ELEMENT_ID__:Me}),yu=Me({__NG_ENV_ID__:Me});function gm(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function sh(n,t,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{const o=r,s=e[++i];ah(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function Hy(n){return 3===n||4===n||6===n}function ah(n){return 64===n.charCodeAt(0)}function cl(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||lh(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function lh(n,t,e,i,r){let o=0,s=n.length;if(-1===t)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const bu="ng-template";function _m(n,t,e){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(e&&"class"===o&&-1!==gm(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function vm(n){return 4===n.type&&n.value!==bu}function ym(n,t,e){return t===(4!==n.type||e?n.value:bu)}function $y(n,t,e){let i=4;const r=n.attrs||[],o=function bm(n){for(let t=0;t<n.length;t++)if(Hy(n[t]))return t;return n.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!ym(n,l,e)||""===l&&1===t.length){if(uo(i))return!1;s=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!_m(n.attrs,c,e)){if(uo(i))return!1;s=!0}continue}const f=ch(8&i?"class":l,r,vm(n),e);if(-1===f){if(uo(i))return!1;s=!0;continue}if(""!==c){let g;g=f>o?"":r[f+1].toLowerCase();const _=8&i?g:null;if(_&&-1!==gm(_,c,0)||2&i&&c!==g){if(uo(i))return!1;s=!0}}}}else{if(!s&&!uo(i)&&!uo(l))return!1;if(s&&uo(l))continue;s=!1,i=l|1&i}}return uo(i)||s}function uo(n){return 0==(1&n)}function ch(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){const s=t[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Gy(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function uh(n,t,e=!1){for(let i=0;i<t.length;i++)if($y(n,t[i],e))return!0;return!1}function Em(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Wy(n,t){return n?":not("+t.trim()+")":t}function wm(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&i){const a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!uo(s)&&(t+=Wy(o,r),r=""),i=s,o=o||!uo(i);e++}return""!==r&&(t+=Wy(o,r)),t}function cn(n){return Hs(()=>{const t=Ky(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$s.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ro.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""};hh(e);const i=n.dependencies;return e.directiveDefs=fh(i,!1),e.pipeDefs=fh(i,!0),e.id=function uI(n){let t=0;const e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(e),e})}function Im(n){return Kt(n)||Xi(n)}function dh(n){return null!==n}function nt(n){return Hs(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function qy(n,t){if(null==n)return co;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),e[r]=i,t&&(t[r]=o)}return e}function me(n){return Hs(()=>{const t=Ky(n);return hh(t),t})}function Dr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Kt(n){return n[_u]||null}function Xi(n){return n[vu]||null}function er(n){return n[Gr]||null}function Sr(n,t){const e=n[mm]||null;if(!e&&!0===t)throw new Error(`Type ${Ze(n)} does not have '\u0275mod' property.`);return e}function Ky(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||co,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qy(n.inputs,t),outputs:qy(n.outputs)}}function hh(n){n.features?.forEach(t=>t(n))}function fh(n,t){if(!n)return null;const e=t?er:Im;return()=>("function"==typeof n?n():n).map(i=>e(i)).filter(dh)}const mi=0,ke=1,Et=2,Yn=3,ho=4,Eu=5,Gi=6,Yl=7,si=8,ba=9,Ea=10,pt=11,dl=12,Zy=13,wa=14,bi=15,hl=16,Ql=17,ys=18,Jl=19,ph=20,Ta=21,Wr=22,Xl=23,wu=24,jt=25,Sm=1,Yy=2,Gs=7,Tu=9,tr=11;function fo(n){return Array.isArray(n)&&"object"==typeof n[Sm]}function qr(n){return Array.isArray(n)&&!0===n[Sm]}function Qy(n){return 0!=(4&n.flags)}function ec(n){return n.componentOffset>-1}function Rm(n){return 1==(1&n.flags)}function po(n){return!!n.template}function Ws(n){return 0!=(512&n[Et])}function pl(n,t){return n.hasOwnProperty(zs)?n[zs]:null}let nr=null,tc=!1;function No(n){const t=nr;return nr=n,t}const tb={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function nb(n){if(!ml(n)||n.dirty){if(!n.producerMustRecompute(n)&&!vh(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function nc(n){n.dirty=!0,function Cu(n){if(void 0===n.liveConsumerNode)return;const t=tc;tc=!0;try{for(const e of n.liveConsumerNode)e.dirty||nc(e)}finally{tc=t}}(n),n.consumerMarkedDirty?.(n)}function ic(n){return n&&(n.nextProducerIndex=0),No(n)}function Om(n,t){if(No(t),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ml(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)bh(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vh(n){gl(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(nb(e),i!==e.version))return!0}return!1}function Pm(n){if(gl(n),ml(n))for(let t=0;t<n.producerNode.length;t++)bh(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function bh(n,t){if(function ib(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),gl(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)bh(n.producerNode[i],n.producerIndexOfThis[i]);const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];gl(r),r.producerIndexOfThis[i]=t}}function ml(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function gl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let rb=null;const ab=()=>{},TI=(()=>({...tb,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:ab}))();class CI{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Si(){return cb}function cb(n){return n.type.prototype.ngOnChanges&&(n.setInput=II),Um}function Um(){const n=Iu(this),t=n?.current;if(t){const e=n.previous;if(e===co)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function II(n,t,e,i){const r=this.declaredInputs[e],o=Iu(n)||function jm(n,t){return n[wh]=t}(n,{previous:co,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new CI(l&&l.currentValue,t,a===co),n[i]=t}Si.ngInherit=!0;const wh="__ngSimpleChanges__";function Iu(n){return n[wh]||null}const bs=function(n,t,e){};function Bn(n){for(;Array.isArray(n);)n=n[mi];return n}function Ch(n,t){return Bn(t[n])}function fr(n,t){return Bn(t[n.index])}function db(n,t){return n.data[t]}function rc(n,t){return n[t]}function Ar(n,t){const e=t[n];return fo(e)?e:e[mi]}function Es(n,t){return null==t?null:n[t]}function Ih(n){n[Ql]=0}function SI(n){1024&n[Et]||(n[Et]|=1024,hb(n,1))}function oc(n){1024&n[Et]&&(n[Et]&=-1025,hb(n,-1))}function hb(n,t){let e=n[Yn];if(null===e)return;e[Eu]+=t;let i=e;for(e=e[Yn];null!==e&&(1===t&&1===i[Eu]||-1===t&&0===i[Eu]);)e[Eu]+=t,i=e,e=e[Yn]}const lt={lFrame:xb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _b(){return lt.bindingsEnabled}function sc(){return null!==lt.skipHydrationRootTNode}function ge(){return lt.lFrame.lView}function Zt(){return lt.lFrame.tView}function Yt(n){return lt.lFrame.contextLView=n,n[si]}function Lt(n){return lt.lFrame.contextLView=null,n}function Vi(){let n=Dh();for(;null!==n&&64===n.type;)n=n.parent;return n}function Dh(){return lt.lFrame.currentTNode}function Mo(n,t){const e=lt.lFrame;e.currentTNode=n,e.isParent=t}function Zm(){return lt.lFrame.isParent}function Sh(){lt.lFrame.isParent=!1}function pr(){const n=lt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function lc(){return lt.lFrame.bindingIndex++}function qs(n){const t=lt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function kI(n,t){const e=lt.lFrame;e.bindingIndex=e.bindingRootIndex=n,Qm(t)}function Qm(n){lt.lFrame.currentDirectiveIndex=n}function Tb(){return lt.lFrame.currentQueryIndex}function Jm(n){lt.lFrame.currentQueryIndex=n}function OI(n){const t=n[ke];return 2===t.type?t.declTNode:1===t.type?n[Gi]:null}function Cb(n,t,e){if(e&kt.SkipSelf){let r=t,o=n;for(;!(r=r.parent,null!==r||e&kt.Host||(r=OI(o),null===r||(o=o[wa],10&r.type))););if(null===r)return!1;t=r,n=o}const i=lt.lFrame=Ib();return i.currentTNode=t,i.lView=n,!0}function Xm(n){const t=Ib(),e=n[ke];lt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ib(){const n=lt.lFrame,t=null===n?null:n.child;return null===t?xb(n):t}function xb(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Db(){const n=lt.lFrame;return lt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ah=Db;function eg(){const n=Db();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rr(){return lt.lFrame.selectedIndex}function _l(n){lt.lFrame.selectedIndex=n}function Qn(){const n=lt.lFrame;return db(n.tView,n.selectedIndex)}let Rh=!0;function uc(){return Rh}function Ia(n){Rh=n}function Nh(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),null!=u&&(n.destroyHooks??=[]).push(e,u)}}function xu(n,t,e){Nb(n,t,3,e)}function Mh(n,t,e,i){(3&n[Et])===e&&Nb(n,t,e,i)}function Du(n,t){let e=n[Et];(3&e)===t&&(e&=8191,e+=1,n[Et]=e)}function Nb(n,t,e,i){const o=i??-1,s=t.length-1;let a=0;for(let l=void 0!==i?65535&n[Ql]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[Ql]+=65536),(a<o||-1==o)&&(ng(n,e,t,l),n[Ql]=(4294901760&n[Ql])+l+2),l++}function BI(n,t){bs(4,n,t);const e=No(null);try{t.call(n)}finally{No(e),bs(5,n,t)}}function ng(n,t,e,i){const r=e[i]<0,o=e[i+1],a=n[r?-e[i]:e[i]];r?n[Et]>>13<n[Ql]>>16&&(3&n[Et])===t&&(n[Et]+=8192,BI(a,o)):BI(a,o)}const vl=-1;class xa{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function rg(n){return n!==vl}function Su(n){return 32767&n}function d(n,t){let e=function p(n){return n>>16}(n),i=t;for(;e>0;)i=i[wa],e--;return i}let h=!0;function m(n){const t=h;return h=n,t}const T=255,L=5;let Y=0;const fe={};function Ye(n,t){const e=Nr(n,t);if(-1!==e)return e;const i=t[ke];i.firstCreatePass&&(n.injectorIndex=t.length,Ht(i.data,n),Ht(t,null),Ht(i.blueprint,null));const r=Yo(n,t),o=n.injectorIndex;if(rg(r)){const s=Su(r),a=d(r,t),l=a[ke].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function Ht(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Nr(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Yo(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){if(i=XO(r),null===i)return vl;if(e++,r=r[wa],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return vl}function dc(n,t,e){!function je(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(ll)&&(i=e[ll]),null==i&&(i=e[ll]=Y++);const r=i&T;t.data[n+(r>>L)]|=1<<r}(n,t,e)}function kh(n,t,e){if(e&kt.Optional||void 0!==n)return n;sm()}function og(n,t,e,i){if(e&kt.Optional&&void 0===i&&(i=null),!(e&(kt.Self|kt.Host))){const r=n[ba],o=zr(void 0);try{return r?r.get(t,i,e&kt.Optional):rh(t,i,e&kt.Optional)}finally{zr(o)}}return kh(i,0,e)}function sg(n,t,e,i=kt.Default,r){if(null!==n){if(2048&t[Et]&&!(i&kt.Self)){const s=function mK(n,t,e,i,r){let o=n,s=t;for(;null!==o&&null!==s&&2048&s[Et]&&!(512&s[Et]);){const a=Oh(o,s,e,i|kt.Self,fe);if(a!==fe)return a;let l=o.parent;if(!l){const c=s[ph];if(c){const u=c.get(e,fe,i);if(u!==fe)return u}l=XO(s),s=s[wa]}o=l}return r}(n,t,e,i,fe);if(s!==fe)return s}const o=Oh(n,t,e,i,fe);if(o!==fe)return o}return og(t,e,i,r)}function Oh(n,t,e,i,r){const o=function Pb(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(ll)?n[ll]:void 0;return"number"==typeof t?t>=0?t&T:pK:t}(e);if("function"==typeof o){if(!Cb(t,n,i))return i&kt.Host?kh(r,0,i):og(t,e,i,r);try{let s;if(s=o(i),null!=s||i&kt.Optional)return s;sm()}finally{Ah()}}else if("number"==typeof o){let s=null,a=Nr(n,t),l=vl,c=i&kt.Host?t[bi][Gi]:null;for((-1===a||i&kt.SkipSelf)&&(l=-1===a?Yo(n,t):t[a+8],l!==vl&&Ph(i,!1)?(s=t[ke],a=Su(l),t=d(l,t)):a=-1);-1!==a;){const u=t[ke];if(Fb(o,a,u.data)){const f=Ob(a,t,e,s,i,c);if(f!==fe)return f}l=t[a+8],l!==vl&&Ph(i,t[ke].data[a+8]===c)&&Fb(o,a,t)?(s=u,a=Su(l),t=d(l,t)):a=-1}}return r}function Ob(n,t,e,i,r,o){const s=t[ke],a=s.data[n+8],u=Au(a,s,e,null==i?ec(a)&&h:i!=s&&0!=(3&a.type),r&kt.Host&&o===a);return null!==u?Ks(t,s,u,a):fe}function Au(n,t,e,i,r){const o=n.providerIndexes,s=t.data,a=1048575&o,l=n.directiveStart,u=o>>20,g=r?a+u:n.directiveEnd;for(let _=i?a:a+u;_<g;_++){const y=s[_];if(_<l&&e===y||_>=l&&y.type===e)return _}if(r){const _=s[l];if(_&&po(_)&&_.type===e)return l}return null}function Ks(n,t,e,i){let r=n[e];const o=t.data;if(function Mb(n){return n instanceof xa}(r)){const s=r;s.resolving&&function rl(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new z(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Ut(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$e(n)}(o[e]));const a=m(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?zr(s.injectImpl):null;Cb(n,i,kt.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&function tg(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=cb(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}(e,o[e],t)}finally{null!==c&&zr(c),m(a),s.resolving=!1,Ah()}}return r}function Fb(n,t,e){return!!(e[t+(n>>L)]&1<<n)}function Ph(n,t){return!(n&kt.Self||n&kt.Host&&t)}class mo{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return sg(this._tNode,this._lView,t,Ao(i),e)}}function pK(){return new mo(Vi(),ge())}function Ai(n){return Hs(()=>{const t=n.prototype.constructor,e=t[zs]||zI(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[zs]||zI(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function zI(n){return Te(n)?()=>{const t=zI(F(n));return t&&t()}:pl(n)}function XO(n){const t=n[ke],e=t.type;return 2===e?t.declTNode:1===e?n[Gi]:null}const Lh="__parameters__";function Bh(n,t,e){return Hs(()=>{const i=function GI(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,u){const f=l.hasOwnProperty(Lh)?l[Lh]:Object.defineProperty(l,Lh,{value:[]})[Lh];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function jh(n,t){n.forEach(e=>Array.isArray(e)?jh(e,t):t(e))}function tP(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Lb(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function lg(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function Qo(n,t,e){let i=Hh(n,t);return i>=0?n[1|i]=e:(i=~i,function wK(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function WI(n,t){const e=Hh(n,t);if(e>=0)return n[1|e]}function Hh(n,t){return function nP(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}(n,t,1)}const Ts=js(Bh("Optional"),8),cg=js(Bh("SkipSelf"),4);function $b(n){return 128==(128&n.flags)}var fc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fc||{});const $K=/^>|^->|<!--|-->|--!>|<!-$/g,zK=/(<|>)/g,GK="\u200b$1\u200b";const QI=new Map;let WK=0;const XI="__ngContext__";function Kr(n,t){fo(t)?(n[XI]=t[Jl],function KK(n){QI.set(n[Jl],n)}(t)):n[XI]=t}let ex;function tx(n,t){return ex(n,t)}function hg(n){const t=n[Yn];return qr(t)?t[Yn]:t}function wP(n){return CP(n[dl])}function TP(n){return CP(n[ho])}function CP(n){for(;null!==n&&!qr(n);)n=n[ho];return n}function Gh(n,t,e,i,r){if(null!=i){let o,s=!1;qr(i)?o=i:fo(i)&&(s=!0,i=i[mi]);const a=Bn(i);0===n&&null!==e?null==r?SP(t,e,a):Nu(t,e,a,r||null,!0):1===n&&null!==e?Nu(t,e,a,r||null,!0):2===n?function Yb(n,t,e){const i=Kb(n,t);i&&function fZ(n,t,e,i){n.removeChild(t,e,i)}(n,i,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=o&&function gZ(n,t,e,i,r){const o=e[Gs];o!==Bn(e)&&Gh(t,n,i,o,r);for(let a=tr;a<e.length;a++){const l=e[a];pg(l[ke],l,n,t,i,o)}}(t,n,o,e,r)}}function nx(n,t){return n.createComment(function pP(n){return n.replace($K,t=>t.replace(zK,GK))}(t))}function Wb(n,t,e){return n.createElement(t,e)}function xP(n,t){const e=n[Tu],i=e.indexOf(t);oc(t),e.splice(i,1)}function qb(n,t){if(n.length<=tr)return;const e=tr+t,i=n[e];if(i){const r=i[hl];null!==r&&r!==n&&xP(r,i),t>0&&(n[e-1][ho]=i[ho]);const o=Lb(n,tr+t);!function oZ(n,t){pg(n,t,t[pt],2,null,null),t[mi]=null,t[Gi]=null}(i[ke],i);const s=o[ys];null!==s&&s.detachView(o[ke]),i[Yn]=null,i[ho]=null,i[Et]&=-129}return i}function ix(n,t){if(!(256&t[Et])){const e=t[pt];t[Xl]&&Pm(t[Xl]),t[wu]&&Pm(t[wu]),e.destroyNode&&pg(n,t,e,3,null,null),function lZ(n){let t=n[dl];if(!t)return rx(n[ke],n);for(;t;){let e=null;if(fo(t))e=t[dl];else{const i=t[tr];i&&(e=i)}if(!e){for(;t&&!t[ho]&&t!==n;)fo(t)&&rx(t[ke],t),t=t[Yn];null===t&&(t=n),fo(t)&&rx(t[ke],t),e=t&&t[ho]}t=e}}(t)}}function rx(n,t){if(!(256&t[Et])){t[Et]&=-129,t[Et]|=256,function hZ(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof xa)){const o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];bs(4,a,l);try{l.call(a)}finally{bs(5,a,l)}}else{bs(4,r,o);try{o.call(r)}finally{bs(5,r,o)}}}}}(n,t),function dZ(n,t){const e=n.cleanup,i=t[Yl];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else e[o].call(i[e[o+1]]);null!==i&&(t[Yl]=null);const r=t[Ta];if(null!==r){t[Ta]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,t),1===t[ke].type&&t[pt].destroy();const e=t[hl];if(null!==e&&qr(t[Yn])){e!==t[Yn]&&xP(e,t);const i=t[ys];null!==i&&i.detachView(n)}!function ZK(n){QI.delete(n[Jl])}(t)}}function ox(n,t,e){return function DP(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[mi];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Ro.None||o===Ro.Emulated)return null}return fr(i,e)}}(n,t.parent,e)}function Nu(n,t,e,i,r){n.insertBefore(t,e,i,r)}function SP(n,t,e){n.appendChild(t,e)}function AP(n,t,e,i,r){null!==i?Nu(n,t,e,i,r):SP(n,t,e)}function Kb(n,t){return n.parentNode(t)}function RP(n,t,e){return MP(n,t,e)}let sx,ux,Jb,MP=function NP(n,t,e){return 40&n.type?fr(n,e):null};function Zb(n,t,e,i){const r=ox(n,i,t),o=t[pt],a=RP(i.parent||t[Gi],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)AP(o,r,e[l],a,!1);else AP(o,r,e,a,!1);void 0!==sx&&sx(o,i,t,e,r)}function fg(n,t){if(null!==t){const e=t.type;if(3&e)return fr(t,n);if(4&e)return ax(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return fg(n,i);{const r=n[t.index];return qr(r)?ax(-1,r):Bn(r)}}if(32&e)return tx(t,n)()||Bn(n[t.index]);{const i=OP(n,t);return null!==i?Array.isArray(i)?i[0]:fg(hg(n[bi]),i):fg(n,t.next)}}return null}function OP(n,t){return null!==t?n[bi][Gi].projection[t.projection]:null}function ax(n,t){const e=tr+n+1;if(e<t.length){const i=t[e],r=i[ke].firstChild;if(null!==r)return fg(i,r)}return t[Gs]}function lx(n,t,e,i,r,o,s){for(;null!=e;){const a=i[e.index],l=e.type;if(s&&0===t&&(a&&Kr(Bn(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)lx(n,t,e.child,i,r,o,!1),Gh(t,n,r,a,o);else if(32&l){const c=tx(e,i);let u;for(;u=c();)Gh(t,n,r,u,o);Gh(t,n,r,a,o)}else 16&l?FP(n,t,i,e,r,o):Gh(t,n,r,a,o);e=s?e.projectionNext:e.next}}function pg(n,t,e,i,r,o){lx(e,i,n.firstChild,t,r,o,!1)}function FP(n,t,e,i,r,o){const s=e[bi],l=s[Gi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Gh(t,n,r,l[c],o);else{let c=l;const u=s[Yn];$b(i)&&(c.flags|=128),lx(n,t,c,u,r,o,!0)}}function LP(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function VP(n,t,e){const{mergedAttrs:i,classes:r,styles:o}=e;null!==i&&sh(n,t,i),null!==r&&LP(n,t,r),null!==o&&function vZ(n,t,e){n.setAttribute(t,"style",e)}(n,t,o)}function jP(n){return function dx(){if(void 0===Jb&&(Jb=null,Sn.trustedTypes))try{Jb=Sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Jb}()?.createScriptURL(n)||n}class Mu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mt})`}}function Jo(n){return n instanceof Mu?n.changingThisBreaksApplicationSecurity:n}function Da(n,t){const e=function SZ(n){return n instanceof Mu&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Mt})`)}return e===t}const LZ=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Mr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Mr||{});function mx(n){const t=gg();return t?t.sanitize(Mr.URL,n)||"":Da(n,"URL")?Jo(n):function Xb(n){return(n=String(n)).match(LZ)?n:"unsafe:"+n}($e(n))}function ZP(n){const t=gg();if(t)return jP(t.sanitize(Mr.RESOURCE_URL,n)||"");if(Da(n,"ResourceURL"))return jP(Jo(n));throw new z(904,!1)}function gg(){const n=ge();return n&&n[Ea].sanitizer}const _g=new de("ENVIRONMENT_INITIALIZER"),QP=new de("INJECTOR",-1),JP=new de("INJECTOR_DEF_TYPES");class gx{get(t,e=sl){if(e===sl){const i=new Error(`NullInjectorError: No provider for ${Ze(t)}!`);throw i.name="NullInjectorError",i}return e}}function ZZ(...n){return{\u0275providers:XP(0,n),\u0275fromNgModule:!0}}function XP(n,...t){const e=[],i=new Set;let r;const o=s=>{e.push(s)};return jh(t,s=>{const a=s;t0(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&eF(r,o),e}function eF(n,t){for(let e=0;e<n.length;e++){const{ngModule:i,providers:r}=n[e];vx(r,o=>{t(o,i)})}}function t0(n,t,e,i){if(!(n=F(n)))return!1;let r=null,o=mu(n);const s=!o&&Kt(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=mu(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)t0(c,t,e,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{jh(o.imports,u=>{t0(u,t,e,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&eF(c,t)}if(!a){const c=pl(r)||(()=>new r);t({provide:r,useFactory:c,deps:ln},r),t({provide:JP,useValue:r,multi:!0},r),t({provide:_g,useValue:()=>P(r),multi:!0},r)}const l=o.providers;if(null!=l&&!a){const c=n;vx(l,u=>{t(u,c)})}}}return r!==n&&void 0!==n.providers}function vx(n,t){for(let e of n)qe(e)&&(e=e.\u0275providers),Array.isArray(e)?vx(e,t):t(e)}const YZ=Me({provide:String,useValue:Me});function yx(n){return null!==n&&"object"==typeof n&&YZ in n}function ku(n){return"function"==typeof n}const bx=new de("Set Injector scope."),n0={},JZ={};let Ex;function r0(){return void 0===Ex&&(Ex=new gx),Ex}class go{}class Kh extends go{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tx(t,s=>this.processProvider(s)),this.records.set(QP,Zh(void 0,this)),r.has("environment")&&this.records.set(go,Zh(void 0,this));const o=this.records.get(bx);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(JP.multi,ln,kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=va(this),i=zr(void 0);try{return t()}finally{va(e),zr(i)}}get(t,e=sl,i=kt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(yu))return t[yu](this);i=Ao(i);const o=va(this),s=zr(void 0);try{if(!(i&kt.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function i7(n){return"function"==typeof n||"object"==typeof n&&n instanceof de}(t)&&th(t);l=c&&this.injectableDefInScope(c)?Zh(wx(t),n0):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(i&kt.Self?r0():this.parent).get(t,e=i&kt.Optional&&e===sl?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Zl]=a[Zl]||[]).unshift(Ze(t)),o)throw a;return function aI(n,t,e,i){const r=n[Zl];throw t[jy]&&r.unshift(t[jy]),n.message=function lI(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ze(t);if(Array.isArray(t))r=t.map(Ze).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ze(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(pm,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[Zl]=null,n}(a,t,"R3InjectorError",this.source)}throw a}finally{zr(s),va(o)}}resolveInjectorInitializers(){const t=va(this),e=zr(void 0);try{const r=this.get(_g.multi,ln,kt.Self);for(const o of r)o()}finally{va(t),zr(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(Ze(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(t){let e=ku(t=F(t))?t:F(t&&t.provide);const i=function e7(n){return yx(n)?Zh(void 0,n.useValue):Zh(iF(n),n0)}(t);if(ku(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Zh(void 0,n0,!0),r.factory=()=>ya(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===n0&&(e.value=JZ,e.value=e.factory()),"object"==typeof e.value&&e.value&&function n7(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=F(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function wx(n){const t=th(n),e=null!==t?t.factory:pl(n);if(null!==e)return e;if(n instanceof de)throw new z(204,!1);if(n instanceof Function)return function XZ(n){const t=n.length;if(t>0)throw lg(t,"?"),new z(204,!1);const e=function lm(n){return n&&(n[ql]||n[nh])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new z(204,!1)}function iF(n,t,e){let i;if(ku(n)){const r=F(n);return pl(r)||wx(r)}if(yx(n))i=()=>F(n.useValue);else if(function nF(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...ya(n.deps||[]));else if(function tF(n){return!(!n||!n.useExisting)}(n))i=()=>P(F(n.useExisting));else{const r=F(n&&(n.useClass||n.provide));if(!function t7(n){return!!n.deps}(n))return pl(r)||wx(r);i=()=>new r(...ya(n.deps))}return i}function Zh(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Tx(n,t){for(const e of n)Array.isArray(e)?Tx(e,t):e&&qe(e)?Tx(e.\u0275providers,t):t(e)}const vg=new de("AppId",{providedIn:"root",factory:()=>r7}),r7="ng",rF=new de("Platform Initializer"),Cs=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Sa=new de("AnimationModuleType"),Cx=new de("CSP nonce",{providedIn:"root",factory:()=>function qh(){if(void 0!==ux)return ux;if(typeof document<"u")return document;throw new z(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let oF=(n,t,e)=>null;function Mx(n,t,e=!1){return oF(n,t,e)}class p7{}class lF{}class g7{resolveComponentFactory(t){throw function m7(n){const t=Error(`No component factory found for ${Ze(n)}.`);return t.ngComponent=n,t}(t)}}let Eg=(()=>{class n{static#e=this.NULL=new g7}return n})();function _7(){return Jh(Vi(),ge())}function Jh(n,t){return new wt(fr(n,t))}let wt=(()=>{class n{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=_7}return n})();function v7(n){return n instanceof wt?n.nativeElement:n}class Xh{}let Xo=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function y7(){const n=ge(),e=Ar(Vi().index,n);return(fo(e)?e:n)[pt]}()}return n})(),b7=(()=>{class n{static#e=this.\u0275prov=he({token:n,providedIn:"root",factory:()=>null})}return n})();class pc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const uF=new pc("16.2.12"),Px={};function pF(n,t=null,e=null,i){const r=mF(n,t,e,i);return r.resolveInjectorInitializers(),r}function mF(n,t=null,e=null,i,r=new Set){const o=[e||ln,ZZ(n)];return i=i||("object"==typeof n?void 0:Ze(n)),new Kh(o,t||r0(),i||null,r)}let Wi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=sl;static#t=this.NULL=new gx;static create(e,i){if(Array.isArray(e))return pF({name:""},i,e,"");{const r=e.name??"";return pF({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=he({token:n,providedIn:"any",factory:()=>P(QP)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function Fx(n){return n.ngOriginalError}class Zs{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Fx(t);for(;e&&Fx(e);)e=Fx(e);return e||null}}function Lx(n){return t=>{setTimeout(n,void 0,t)}}const Qe=class S7 extends ${constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Lx(o),r&&(r=Lx(r)),s&&(s=Lx(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof yt&&t.add(a),a}};function _F(...n){}class We{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function A7(){const n="function"==typeof Sn.requestAnimationFrame;let t=Sn[n?"requestAnimationFrame":"setTimeout"],e=Sn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function M7(n){const t=()=>{!function N7(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Bx(n),n.isCheckStableRunning=!0,Vx(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Bx(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,s,a)=>{if(function O7(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,o,s,a);try{return vF(n),e.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),yF(n)}},onInvoke:(e,i,r,o,s,a,l)=>{try{return vF(n),e.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),yF(n)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Bx(n),Vx(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!We.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(We.isInAngularZone())throw new z(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,R7,_F,_F);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const R7={};function Vx(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Bx(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function vF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yF(n){n._nesting--,Vx(n)}class k7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}}const bF=new de("",{providedIn:"root",factory:EF});function EF(){const n=be(We);let t=!0;return I(new it(r=>{t=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(t),r.complete()})}),new it(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(t=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{We.assertInAngularZone(),t&&(t=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(oe()))}function bl(n){return n instanceof Function?n():n}let Ux=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();function wg(n){for(;n;){n[Et]|=64;const t=hg(n);if(Ws(n)&&!t)return n;n=t}return null}const xF=new de("",{providedIn:"root",factory:()=>!1});let h0=null;function RF(n,t){return n[t]??kF()}function NF(n,t){const e=kF();e.producerNode?.length&&(n[t]=h0,e.lView=n,h0=MF())}const z7={...tb,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wg(n.lView)},lView:null};function MF(){return Object.create(z7)}function kF(){return h0??=MF(),h0}const It={};function re(n){OF(Zt(),ge(),Rr()+n,!1)}function OF(n,t,e,i){if(!i)if(3==(3&t[Et])){const o=n.preOrderCheckHooks;null!==o&&xu(t,o,e)}else{const o=n.preOrderHooks;null!==o&&Mh(t,o,0,e)}_l(e)}function N(n,t=kt.Default){const e=ge();return null===e?P(n,t):sg(Vi(),e,F(n),t)}function Tg(){throw new Error("invalid")}function f0(n,t,e,i,r,o,s,a,l,c,u){const f=t.blueprint.slice();return f[mi]=r,f[Et]=140|i,(null!==c||n&&2048&n[Et])&&(f[Et]|=2048),Ih(f),f[Yn]=f[wa]=n,f[si]=e,f[Ea]=s||n&&n[Ea],f[pt]=a||n&&n[pt],f[ba]=l||n&&n[ba]||null,f[Gi]=o,f[Jl]=function qK(){return WK++}(),f[Wr]=u,f[ph]=c,f[bi]=2==t.type?n[bi]:f,f}function rf(n,t,e,i,r){let o=n.data[t];if(null===o)o=function jx(n,t,e,i,r){const o=Dh(),s=Zm(),l=n.data[t]=function J7(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return sc()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,t,e,i,r),function Ym(){return lt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=i,o.attrs=r;const s=function ac(){const n=lt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Mo(o,!0),o}function Cg(n,t,e,i){if(0===e)return-1;const r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function PF(n,t,e,i,r){const o=RF(t,Xl),s=Rr(),a=2&i;try{_l(-1),a&&t.length>jt&&OF(n,t,jt,!1),bs(a?2:0,r);const c=a?o:null,u=ic(c);try{null!==c&&(c.dirty=!1),e(i,r)}finally{Om(c,u)}}finally{a&&null===t[Xl]&&NF(t,Xl),_l(s),bs(a?3:1,r)}}function Hx(n,t,e){if(Qy(t)){const i=No(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}finally{No(i)}}}function $x(n,t,e){_b()&&(function oY(n,t,e,i){const r=e.directiveStart,o=e.directiveEnd;ec(e)&&function hY(n,t,e){const i=fr(t,n),r=FF(e);let s=16;e.signals?s=4096:e.onPush&&(s=64);const a=p0(n,f0(n,r,null,s,i,t,null,n[Ea].rendererFactory.createRenderer(i,e),null,null,null));n[t.index]=a}(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Ye(e,t),Kr(i,t);const s=e.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=Ks(t,n,a,e);Kr(c,t),null!==s&&fY(0,a-r,c,l,0,s),po(l)&&(Ar(e.index,t)[si]=Ks(t,n,a,e))}}(n,t,e,fr(e,t)),64==(64&e.flags)&&jF(n,t,e))}function zx(n,t,e=fr){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?e(t,n):n[s];n[r++]=a}}}function FF(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Gx(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Gx(n,t,e,i,r,o,s,a,l,c,u){const f=jt+i,g=f+r,_=function W7(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:It);return e}(f,g),y="function"==typeof c?c():c;return _[ke]={type:n,blueprint:_,template:e,queries:null,viewQuery:a,declTNode:t,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:u}}let LF=n=>null;function VF(n,t,e,i){for(let r in n)if(n.hasOwnProperty(r)){e=null===e?{}:e;const o=n[r];null===i?BF(e,t,r,o):i.hasOwnProperty(r)&&BF(e,t,i[r],o)}return e}function BF(n,t,e,i){n.hasOwnProperty(e)?n[e].push(t,i):n[e]=[t,i]}function es(n,t,e,i,r,o,s,a){const l=fr(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(Yx(n,e,u,i,r),ec(t)&&function tY(n,t){const e=Ar(t,n);16&e[Et]||(e[Et]|=64)}(e,t.index)):3&t.type&&(i=function eY(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,t.value||"",i):r,o.setProperty(l,i,r))}function Wx(n,t,e,i){if(_b()){const r=null===i?null:{"":-1},o=function aY(n,t){const e=n.directiveRegistry;let i=null,r=null;if(e)for(let o=0;o<e.length;o++){const s=e[o];if(uh(t,s.selectors,!1))if(i||(i=[]),po(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),qx(n,t,a.length)}else i.unshift(s),qx(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,e);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&UF(n,t,e,s,r,a),r&&function lY(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const o=e[t[r+1]];if(null==o)throw new z(-301,!1);i.push(t[r],o)}}}(e,i,r)}e.mergedAttrs=cl(e.mergedAttrs,e.attrs)}function UF(n,t,e,i,r,o){for(let c=0;c<i.length;c++)dc(Ye(e,t),n,i[c].type);!function uY(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Cg(n,t,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=cl(e.mergedAttrs,u.hostAttrs),dY(n,e,t,l,u),cY(l,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const f=u.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function X7(n,t,e){const r=t.directiveEnd,o=n.data,s=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<r;u++){const f=o[u],g=e?e.get(f):null,y=g?g.outputs:null;l=VF(f.inputs,u,l,g?g.inputs:null),c=VF(f.outputs,u,c,y);const b=null===l||null===s||vm(t)?null:pY(l,u,s);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,o)}function jF(n,t,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function wb(){return lt.lFrame.currentDirectiveIndex}();try{_l(o);for(let a=i;a<r;a++){const l=n.data[a],c=t[a];Qm(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&sY(l,c)}}finally{_l(-1),Qm(s)}}function sY(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function qx(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function cY(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;po(t)&&(e[""]=n)}}function dY(n,t,e,i,r){n.data[i]=r;const o=r.factory||(r.factory=pl(r.type)),s=new xa(o,po(r),N);n.blueprint[i]=s,e[i]=s,function iY(n,t,e,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~t.index;(function rY(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,i,o)}}(n,t,i,Cg(n,e,r.hostVars,It),r)}function Aa(n,t,e,i,r,o){const s=fr(n,t);!function Kx(n,t,e,i,r,o,s){if(null==o)n.removeAttribute(t,r,e);else{const a=null==s?$e(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}(t[pt],s,o,n.value,e,i,r)}function fY(n,t,e,i,r,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)HF(i,e,s[a++],s[a++],s[a++])}function HF(n,t,e,i,r){const o=No(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(t,r)),null!==n.setInput?n.setInput(t,r,e,i):t[i]=r}finally{No(o)}}function pY(n,t,e){let i=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){i.push(o,s[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function $F(n,t,e,i){return[n,!0,!1,t,null,0,i,e,null,null,null]}function zF(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const o=e[i+1];if(-1!==o){const s=n.data[o];Jm(e[i]),s.contentQueries(2,t[o],o)}}}function p0(n,t){return n[dl]?n[Zy][ho]=t:n[dl]=t,n[Zy]=t,t}function Zx(n,t,e){Jm(0);const i=No(null);try{t(n,e)}finally{No(i)}}function GF(n){return n[Yl]||(n[Yl]=[])}function WF(n){return n.cleanup||(n.cleanup=[])}function KF(n,t){const e=n[ba],i=e?e.get(Zs,null):null;i&&i.handleError(t)}function Yx(n,t,e,i,r){for(let o=0;o<e.length;){const s=e[o++],a=e[o++];HF(n.data[s],t[s],i,a,r)}}function mY(n,t){const e=Ar(t,n),i=e[ke];!function gY(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}(i,e);const r=e[mi];null!==r&&null===e[Wr]&&(e[Wr]=Mx(r,e[ba])),Qx(i,e,e[si])}function Qx(n,t,e){Xm(t);try{const i=n.viewQuery;null!==i&&Zx(1,i,e);const r=n.template;null!==r&&PF(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zF(n,t),n.staticViewQueries&&Zx(2,n.viewQuery,e);const o=n.components;null!==o&&function _Y(n,t){for(let e=0;e<t.length;e++)mY(n,t[e])}(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Et]&=-5,eg()}}let ZF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function wI(n,t,e){const i=Object.create(TI);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>nc(i),run:()=>{if(i.dirty=!1,i.hasRun&&!vh(i))return;i.hasRun=!0;const s=ic(i);try{i.cleanupFn(),i.cleanupFn=ab,i.fn(r)}finally{Om(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(e,c=>{this.all.has(c)&&this.queue.set(c,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();function m0(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=Li(r,a):2==o&&(i=Li(i,a+": "+t[++s]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function Ig(n,t,e,i,r=!1){for(;null!==e;){const o=t[e.index];null!==o&&i.push(Bn(o)),qr(o)&&YF(o,i);const s=e.type;if(8&s)Ig(n,t,e.child,i);else if(32&s){const a=tx(e,t);let l;for(;l=a();)i.push(l)}else if(16&s){const a=OP(t,e);if(Array.isArray(a))i.push(...a);else{const l=hg(t[bi]);Ig(l[ke],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function YF(n,t){for(let e=tr;e<n.length;e++){const i=n[e],r=i[ke].firstChild;null!==r&&Ig(i[ke],i,r,t)}n[Gs]!==n[mi]&&t.push(n[Gs])}function g0(n,t,e,i=!0){const r=t[Ea],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{QF(n,t,n.template,e)}catch(l){throw i&&KF(t,l),l}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function QF(n,t,e,i){const r=t[Et];if(256!=(256&r)){t[Ea].effectManager?.flush(),Xm(t);try{Ih(t),function bb(n){return lt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&PF(n,t,e,2,i);const s=3==(3&r);if(s){const c=n.preOrderCheckHooks;null!==c&&xu(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Mh(t,c,0,null),Du(t,0)}if(function bY(n){for(let t=wP(n);null!==t;t=TP(t)){if(!t[Yy])continue;const e=t[Tu];for(let i=0;i<e.length;i++){SI(e[i])}}}(t),JF(t,2),null!==n.contentQueries&&zF(n,t),s){const c=n.contentCheckHooks;null!==c&&xu(t,c)}else{const c=n.contentHooks;null!==c&&Mh(t,c,1),Du(t,1)}!function G7(n,t){const e=n.hostBindingOpCodes;if(null===e)return;const i=RF(t,wu);try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)_l(~o);else{const s=o,a=e[++r],l=e[++r];kI(a,s),i.dirty=!1;const c=ic(i);try{l(2,t[s])}finally{Om(i,c)}}}}finally{null===t[wu]&&NF(t,wu),_l(-1)}}(n,t);const a=n.components;null!==a&&eL(t,a,0);const l=n.viewQuery;if(null!==l&&Zx(2,l,i),s){const c=n.viewCheckHooks;null!==c&&xu(t,c)}else{const c=n.viewHooks;null!==c&&Mh(t,c,2),Du(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[Et]&=-73,oc(t)}finally{eg()}}}function JF(n,t){for(let e=wP(n);null!==e;e=TP(e))for(let i=tr;i<e.length;i++)XF(e[i],t)}function EY(n,t,e){XF(Ar(t,n),e)}function XF(n,t){if(!function Gm(n){return 128==(128&n[Et])}(n))return;const e=n[ke],i=n[Et];if(80&i&&0===t||1024&i||2===t)QF(e,n,e.template,n[si]);else if(n[Eu]>0){JF(n,1);const r=e.components;null!==r&&eL(n,r,1)}}function eL(n,t,e){for(let i=0;i<t.length;i++)EY(n,t[i],e)}class xg{get rootNodes(){const t=this._lView,e=t[ke];return Ig(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[si]}set context(t){this._lView[si]=t}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Yn];if(qr(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(qb(t,i),Lb(e,i))}this._attachedToViewContainer=!1}ix(this._lView[ke],this._lView)}onDestroy(t){!function fb(n,t){if(256==(256&n[Et]))throw new z(911,!1);null===n[Ta]&&(n[Ta]=[]),n[Ta].push(t)}(this._lView,t)}markForCheck(){wg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){g0(this._lView[ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aZ(n,t){pg(n,t,t[pt],2,null,null)}(this._lView[ke],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=t}}class wY extends xg{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;g0(t[ke],t,t[si],!1)}checkNoChanges(){}get context(){return null}}class tL extends Eg{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Kt(t);return new Dg(e,this.ngModule)}}function nL(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class CY{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Ao(i);const r=this.injector.get(t,Px,i);return r!==Px||e===Px?r:this.parentInjector.get(t,e,i)}}class Dg extends lF{get inputs(){const t=this.componentDef,e=t.inputTransforms,i=nL(t.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return nL(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function cI(n){return n.map(wm).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=(r=r||this.ngModule)instanceof go?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new CY(t,o):t,a=s.get(Xh,null);if(null===a)throw new z(407,!1);const f={rendererFactory:a,sanitizer:s.get(b7,null),effectManager:s.get(ZF,null),afterRenderEventManager:s.get(Ux,null)},g=a.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",y=i?function q7(n,t,e,i){const o=i.get(xF,!1)||e===Ro.ShadowDom,s=n.selectRootElement(t,o);return function K7(n){LF(n)}(s),s}(g,i,this.componentDef.encapsulation,s):Wb(g,_,function TY(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(_)),O=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let S=null;null!==y&&(S=Mx(y,s,!0));const V=Gx(0,null,null,1,0,null,null,null,null,null,null),W=f0(null,V,null,O,null,null,f,g,s,null,S);let ae,Ie;Xm(W);try{const Ve=this.componentDef;let rt,hn=null;Ve.findHostDirectiveDefs?(rt=[],hn=new Map,Ve.findHostDirectiveDefs(Ve,rt,hn),rt.push(Ve)):rt=[Ve];const fn=function xY(n,t){const e=n[ke],i=jt;return n[i]=t,rf(e,i,2,"#host",null)}(W,y),Hi=function DY(n,t,e,i,r,o,s){const a=r[ke];!function SY(n,t,e,i){for(const r of n)t.mergedAttrs=cl(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(m0(t,t.mergedAttrs,!0),null!==e&&VP(i,e,t))}(i,n,t,s);let l=null;null!==t&&(l=Mx(t,r[ba]));const c=o.rendererFactory.createRenderer(t,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const f=f0(r,FF(e),null,u,r[n.index],n,o,c,null,null,l);return a.firstCreatePass&&qx(a,n,i.length-1),p0(r,f),r[n.index]=f}(fn,y,Ve,rt,W,f,g);Ie=db(V,jt),y&&function RY(n,t,e,i){if(i)sh(n,e,["ng-version",uF.full]);else{const{attrs:r,classes:o}=function Tm(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&t.push(o,n[++i]):8===r&&e.push(o);else{if(!uo(r))break;r=o}i++}return{attrs:t,classes:e}}(t.selectors[0]);r&&sh(n,e,r),o&&o.length>0&&LP(n,e,o.join(" "))}}(g,Ve,y,i),void 0!==e&&function NY(n,t,e){const i=n.projection=[];for(let r=0;r<t.length;r++){const o=e[r];i.push(null!=o?Array.from(o):null)}}(Ie,this.ngContentSelectors,e),ae=function AY(n,t,e,i,r,o){const s=Vi(),a=r[ke],l=fr(s,r);UF(a,r,s,e,null,i);for(let u=0;u<e.length;u++)Kr(Ks(r,a,s.directiveStart+u,s),r);jF(a,r,s),l&&Kr(l,r);const c=Ks(r,a,s.directiveStart+s.componentOffset,s);if(n[si]=r[si]=c,null!==o)for(const u of o)u(c,t);return Hx(a,s,n),c}(Hi,Ve,rt,hn,W,[MY]),Qx(V,W,null)}finally{eg()}return new IY(this.componentType,ae,Jh(Ie,W),W,Ie)}}class IY extends p7{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new wY(r),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const o=this._rootLView;Yx(o[ke],o,r,t,e),this.previousInputValues.set(t,e),wg(Ar(this._tNode.index,o))}}get injector(){return new mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function MY(){const n=Vi();Nh(ge()[ke],n)}function Qt(n){let t=function iL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(po(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new z(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);const s=n;s.inputs=_0(n.inputs),s.inputTransforms=_0(n.inputTransforms),s.declaredInputs=_0(n.declaredInputs),s.outputs=_0(n.outputs);const a=r.hostBindings;a&&FY(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&OY(n,l),c&&PY(n,c),Dn(n.inputs,r.inputs),Dn(n.declaredInputs,r.declaredInputs),Dn(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Dn(s.inputTransforms,r.inputTransforms)),po(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Qt&&(e=!1)}}t=Object.getPrototypeOf(t)}!function kY(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=cl(r.hostAttrs,e=cl(e,r.hostAttrs))}}(i)}function _0(n){return n===co?{}:n===ln?[]:n}function OY(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function PY(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,o)=>{t(i,r,o),e(i,r,o)}:t}function FY(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}function aL(n){const t=n.inputConfig,e={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];Array.isArray(r)&&r[2]&&(e[i]=r[2])}n.inputTransforms=e}function v0(n){return!!Jx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Jx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ra(n,t,e){return n[t]=e}function Zr(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Ou(n,t,e,i){const r=Zr(n,t,e);return Zr(n,t+1,i)||r}function on(n,t,e,i){const r=ge();return Zr(r,lc(),t)&&(Zt(),Aa(Qn(),r,n,t,e,i)),on}function af(n,t,e,i){return Zr(n,lc(),e)?t+$e(e)+i:It}function xe(n,t,e,i,r,o,s,a){const l=ge(),c=Zt(),u=n+jt,f=c.firstCreatePass?function sQ(n,t,e,i,r,o,s,a,l){const c=t.consts,u=rf(t,n,4,s||null,Es(c,a));Wx(t,e,u,Es(c,l)),Nh(t,u);const f=u.tView=Gx(2,u,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,o,s):c.data[u];Mo(f,!1);const g=bL(c,l,f,n);uc()&&Zb(c,l,g,f),Kr(g,l),p0(l,l[u]=$F(g,l,g,f)),Rm(f)&&$x(c,l,f),null!=s&&zx(l,f,a)}let bL=function EL(n,t,e,i){return Ia(!0),t[pt].createComment("")};function ts(n){return rc(function vb(){return lt.lFrame.contextLView}(),jt+n)}function ie(n,t,e){const i=ge();return Zr(i,lc(),t)&&es(Zt(),Qn(),i,n,t,i[pt],e,!1),ie}function rD(n,t,e,i,r){const s=r?"class":"style";Yx(n,e,t.inputs[s],s,i)}function te(n,t,e,i){const r=ge(),o=Zt(),s=jt+n,a=r[pt],l=o.firstCreatePass?function uQ(n,t,e,i,r,o){const s=t.consts,l=rf(t,n,2,i,Es(s,r));return Wx(t,e,l,Es(s,o)),null!==l.attrs&&m0(l,l.attrs,!1),null!==l.mergedAttrs&&m0(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,o,r,t,e,i):o.data[s],c=wL(o,r,l,a,t,n);r[s]=c;const u=Rm(l);return Mo(l,!0),VP(a,c,l),32!=(32&l.flags)&&uc()&&Zb(o,r,c,l),0===function pb(){return lt.lFrame.elementDepthCount}()&&Kr(c,r),function mb(){lt.lFrame.elementDepthCount++}(),u&&($x(o,r,l),Hx(o,l,r)),null!==i&&zx(r,l),te}function ne(){let n=Vi();Zm()?Sh():(n=n.parent,Mo(n,!1));const t=n;(function qm(n){return lt.skipHydrationRootTNode===n})(t)&&function NI(){lt.skipHydrationRootTNode=null}(),function gb(){lt.lFrame.elementDepthCount--}();const e=Zt();return e.firstCreatePass&&(Nh(e,n),Qy(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function jI(n){return 0!=(8&n.flags)}(t)&&rD(e,t,ge(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function HI(n){return 0!=(16&n.flags)}(t)&&rD(e,t,ge(),t.stylesWithoutHost,!1),ne}function Jt(n,t,e,i){return te(n,t,e,i),ne(),Jt}let wL=(n,t,e,i,r,o)=>(Ia(!0),Wb(i,r,function Rb(){return lt.lFrame.currentNamespace}()));function mc(n,t,e){const i=ge(),r=Zt(),o=n+jt,s=r.firstCreatePass?function fQ(n,t,e,i,r){const o=t.consts,s=Es(o,i),a=rf(t,n,8,"ng-container",s);return null!==s&&m0(a,s,!0),Wx(t,e,a,Es(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,i,t,e):r.data[o];Mo(s,!0);const a=CL(r,i,s,n);return i[o]=a,uc()&&Zb(r,i,a,s),Kr(a,i),Rm(s)&&($x(r,i,s),Hx(r,s,i)),null!=e&&zx(i,s),mc}function gc(){let n=Vi();const t=Zt();return Zm()?Sh():(n=n.parent,Mo(n,!1)),t.firstCreatePass&&(Nh(t,n),Qy(n)&&t.queries.elementEnd(n)),gc}let CL=(n,t,e,i)=>(Ia(!0),nx(t[pt],""));function qi(){return ge()}function kg(n){return!!n&&"function"==typeof n.then}function IL(n){return!!n&&"function"==typeof n.subscribe}function Be(n,t,e,i){const r=ge(),o=Zt(),s=Vi();return function DL(n,t,e,i,r,o,s){const a=Rm(i),c=n.firstCreatePass&&WF(n),u=t[si],f=GF(t);let g=!0;if(3&i.type||s){const b=fr(i,t),C=s?s(b):b,O=f.length,S=s?W=>s(Bn(W[i.index])):i.index;let V=null;if(!s&&a&&(V=function gQ(n,t,e,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===e&&r[o+1]===i){const a=t[Yl],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,t,r,i.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,g=!1;else{o=AL(i,t,u,o,!1);const W=e.listen(C,r,o);f.push(o,W),c&&c.push(r,S,O,O+1)}}else o=AL(i,t,u,o,!1);const _=i.outputs;let y;if(g&&null!==_&&(y=_[r])){const b=y.length;if(b)for(let C=0;C<b;C+=2){const ae=t[y[C]][y[C+1]].subscribe(o),Ie=f.length;f.push(o,ae),c&&c.push(r,i.index,Ie,-(Ie+1))}}}(o,r,r[pt],s,n,t,i),Be}function SL(n,t,e,i){try{return bs(6,t,e),!1!==e(i)}catch(r){return KF(n,r),!1}finally{bs(7,t,e)}}function AL(n,t,e,i,r){return function o(s){if(s===Function)return i;wg(n.componentOffset>-1?Ar(n.index,t):t);let l=SL(t,e,i,s),c=o.__ngNextListenerFn__;for(;c;)l=SL(t,e,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function Se(n=1){return function PI(n){return(lt.lFrame.contextLView=function FI(n,t){for(;n>0;)t=t[wa],n--;return t}(n,lt.lFrame.contextLView))[si]}(n)}function _Q(n,t){let e=null;const i=function zy(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?uh(n,o,!0):Em(i,o))return r}else e=r}return e}function wl(n){const t=ge()[bi][Gi];if(!t.projection){const i=t.projection=lg(n?n.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=n?_Q(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Ei(n,t=0,e){const i=ge(),r=Zt(),o=rf(r,jt+n,16,null,e||null);null===o.projection&&(o.projection=t),Sh(),(!i[Wr]||sc())&&32!=(32&o.flags)&&function mZ(n,t,e){FP(t[pt],0,t,e,ox(n,e,t),RP(e.parent||t[Gi],e,t))}(r,i,o)}function T0(n,t,e){return C0(n,"",t,"",e),T0}function C0(n,t,e,i,r){const o=ge(),s=af(o,t,e,i);return s!==It&&es(Zt(),Qn(),o,n,s,o[pt],r,!1),C0}function I0(n,t){return n<<17|t<<2}function _c(n){return n>>17&32767}function oD(n){return 2|n}function Pu(n){return(131068&n)>>2}function sD(n,t){return-131069&n|t<<2}function aD(n){return 1|n}function VL(n,t,e,i,r){const o=n[e+1],s=null===t;let a=i?_c(o):Pu(o),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];TQ(n[a],t)&&(l=!0,n[a+1]=i?aD(u):oD(u)),a=i?_c(u):Pu(u)}l&&(n[e+1]=i?oD(o):aD(o))}function TQ(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Hh(n,t)>=0}const rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function BL(n){return n.substring(rr.key,rr.keyEnd)}function UL(n,t){const e=rr.textEnd;return e===t?-1:(t=rr.keyEnd=function DQ(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,rr.key=t,e),mf(n,t,e))}function mf(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function lD(n,t,e){return Ys(n,t,e,!1),lD}function ht(n,t){return Ys(n,t,null,!0),ht}function Fu(n){!function Qs(n,t,e,i){const r=Zt(),o=qs(2);r.firstUpdatePass&&WL(r,null,o,i);const s=ge();if(e!==It&&Zr(s,o,e)){const a=r.data[Rr()];if(YL(a,i)&&!GL(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Li(l,e||"")),rD(r,a,s,e,i)}else!function LQ(n,t,e,i,r,o,s,a){r===It&&(r=ln);let l=0,c=0,u=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;null!==u||null!==f;){const g=l<r.length?r[l+1]:void 0,_=c<o.length?o[c+1]:void 0;let b,y=null;u===f?(l+=2,c+=2,g!==_&&(y=f,b=_)):null===f||null!==u&&u<f?(l+=2,y=u):(c+=2,y=f,b=_),null!==y&&KL(n,t,e,i,y,b,s,a),u=l<r.length?r[l]:null,f=c<o.length?o[c]:null}}(r,a,s,s[pt],s[o+1],s[o+1]=function PQ(n,t,e){if(null==e||""===e)return ln;const i=[],r=Jo(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&t(i,r);return i}(n,t,e),i,o)}}(FQ,Ma,n,!0)}function Ma(n,t){for(let e=function IQ(n){return function HL(n){rr.key=0,rr.keyEnd=0,rr.value=0,rr.valueEnd=0,rr.textEnd=n.length}(n),UL(n,mf(n,0,rr.textEnd))}(t);e>=0;e=UL(t,e))Qo(n,BL(t),!0)}function Ys(n,t,e,i){const r=ge(),o=Zt(),s=qs(2);o.firstUpdatePass&&WL(o,n,s,i),t!==It&&Zr(r,s,t)&&KL(o,o.data[Rr()],r,r[pt],n,r[s+1]=function VQ(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Ze(Jo(n)))),n}(t,e),i,s)}function GL(n,t){return t>=n.expandoStartIndex}function WL(n,t,e,i){const r=n.data;if(null===r[e+1]){const o=r[Rr()],s=GL(n,e);YL(o,i)&&null===t&&!s&&(t=!1),t=function NQ(n,t,e,i){const r=function cc(n){const t=lt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=Og(e=cD(null,n,t,e,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==r)if(e=cD(r,n,t,e,i),null===o){let l=function MQ(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Pu(i))return n[_c(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=cD(null,n,t,l[1],i),l=Og(l,t.attrs,i),function kQ(n,t,e,i){n[_c(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else o=function OQ(n,t,e){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=Og(i,n[o].hostAttrs,e);return Og(i,t.attrs,e)}(n,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),e}(r,o,t,i),function EQ(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=_c(s),l=Pu(s);n[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Hh(e,u)>0)&&(c=!0)):u=e,r)if(0!==l){const g=_c(n[a+1]);n[i+1]=I0(g,a),0!==g&&(n[g+1]=sD(n[g+1],i)),n[a+1]=function yQ(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=I0(a,0),0!==a&&(n[a+1]=sD(n[a+1],i)),a=i;else n[i+1]=I0(l,0),0===a?a=i:n[l+1]=sD(n[l+1],i),l=i;c&&(n[i+1]=oD(n[i+1])),VL(n,u,i,!0),VL(n,u,i,!1),function wQ(n,t,e,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof t&&Hh(o,t)>=0&&(e[i+1]=aD(e[i+1]))}(t,u,n,i,o),s=I0(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,e,s,i)}}function cD(n,t,e,i,r){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],i=Og(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function Og(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qo(n,s,!!e||t[++o]))}return void 0===n?null:n}function FQ(n,t,e){const i=String(t);""!==i&&!i.includes(" ")&&Qo(n,i,e)}function KL(n,t,e,i,r,o,s,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function bQ(n){return 1==(1&n)}(c)?ZL(l,t,e,r,Pu(c),s):void 0;x0(u)||(x0(o)||function vQ(n){return 2==(2&n)}(c)&&(o=ZL(l,null,e,r,a,s)),function _Z(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=-1===i.indexOf("-")?void 0:fc.DashCase;null==r?n.removeStyle(e,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=fc.Important),n.setStyle(e,i,r,o))}}(i,s,Ch(Rr(),e),r,o))}function ZL(n,t,e,i,r,o){const s=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,f=null===u;let g=e[r+1];g===It&&(g=f?ln:void 0);let _=f?WI(g,i):u===i?g:void 0;if(c&&!x0(_)&&(_=WI(l,i)),x0(_)&&(a=_,s))return a;const y=n[r+1];r=s?_c(y):Pu(y)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=WI(l,i))}return a}function x0(n){return void 0!==n}function YL(n,t){return 0!=(n.flags&(t?8:16))}function ot(n,t=""){const e=ge(),i=Zt(),r=n+jt,o=i.firstCreatePass?rf(i,r,1,t,null):i.data[r],s=QL(i,e,o,t,n);e[r]=s,uc()&&Zb(i,e,s,o),Mo(o,!1)}let QL=(n,t,e,i,r)=>(Ia(!0),function Gb(n,t){return n.createText(t)}(t[pt],i));function mr(n){return vc("",n,""),mr}function vc(n,t,e){const i=ge(),r=af(i,n,t,e);return r!==It&&function El(n,t,e){const i=Ch(t,n);!function IP(n,t,e){n.setValue(t,e)}(n[pt],i,e)}(i,Rr(),r),vc}function _o(n,t,e){const i=ge();return Zr(i,lc(),t)&&es(Zt(),Qn(),i,n,t,i[pt],e,!0),_o}const _f="en-US";let y2=_f;function hD(n,t,e,i,r){if(n=F(n),Array.isArray(n))for(let o=0;o<n.length;o++)hD(n[o],t,e,i,r);else{const o=Zt(),s=ge(),a=Vi();let l=ku(n)?n:F(n.provide);const c=iF(n),u=1048575&a.providerIndexes,f=a.directiveStart,g=a.providerIndexes>>20;if(ku(n)||!n.multi){const _=new xa(c,r,N),y=pD(l,t,r?u:u+g,f);-1===y?(dc(Ye(a,s),o,l),fD(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(_),s.push(_)):(e[y]=_,s[y]=_)}else{const _=pD(l,t,u+g,f),y=pD(l,t,u,u+g),C=y>=0&&e[y];if(r&&!C||!r&&!(_>=0&&e[_])){dc(Ye(a,s),o,l);const O=function rX(n,t,e,i,r){const o=new xa(n,e,N);return o.multi=[],o.index=t,o.componentProviders=0,z2(o,r,i&&!e),o}(r?iX:nX,e.length,r,i,c);!r&&C&&(e[y].providerFactory=O),fD(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(O),s.push(O)}else fD(o,n,_>-1?_:y,z2(e[r?y:_],c,!r&&i));!r&&i&&C&&e[y].componentProviders++}}}function fD(n,t,e,i){const r=ku(t),o=function QZ(n){return!!n.useClass}(t);if(r||o){const l=(o?F(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function z2(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function pD(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function nX(n,t,e,i){return mD(this.multi,[])}function iX(n,t,e,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ks(e,e[ke],this.providerFactory.index,i);o=a.slice(0,s),mD(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],mD(r,o);return o}function mD(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function bn(n,t=[]){return e=>{e.providersResolver=(i,r)=>function tX(n,t,e){const i=Zt();if(i.firstCreatePass){const r=po(n);hD(e,i.data,i.blueprint,r,!0),hD(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class Vu{}class G2{}class gD extends Vu{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tL(this);const r=Sr(t);this._bootstrapComponents=bl(r.bootstrap),this._r3Injector=mF(t,e,[{provide:Vu,useValue:this},{provide:Eg,useValue:this.componentFactoryResolver},...i],Ze(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class _D extends G2{constructor(t){super(),this.moduleType=t}create(t){return new gD(this.moduleType,t,[])}}class W2 extends Vu{constructor(t){super(),this.componentFactoryResolver=new tL(this),this.instance=null;const e=new Kh([...t.providers,{provide:Vu,useValue:this},{provide:Eg,useValue:this.componentFactoryResolver}],t.parent||r0(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function vD(n,t,e=null){return new W2({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}let aX=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=XP(0,e.type),r=i.length>0?vD([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=he({token:n,providedIn:"environment",factory:()=>new n(P(go))})}return n})();function xs(n){n.getStandaloneInjector=t=>t.get(aX).getOrCreateStandaloneInjector(n)}function bD(n,t,e){const i=pr()+n,r=ge();return r[i]===It?Ra(r,i,e?t.call(e):t()):function Ag(n,t){return n[t]}(r,i)}function Bu(n,t,e,i,r){return eV(ge(),pr(),n,t,e,i,r)}function N0(n,t,e,i,r,o){return function tV(n,t,e,i,r,o,s,a){const l=t+e;return function y0(n,t,e,i,r){const o=Ou(n,t,e,i);return Zr(n,t+2,r)||o}(n,l,r,o,s)?Ra(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):Hg(n,l+3)}(ge(),pr(),n,t,e,i,r,o)}function Hg(n,t){const e=n[t];return e===It?void 0:e}function eV(n,t,e,i,r,o,s){const a=t+e;return Ou(n,a,r,o)?Ra(n,a+2,s?i.call(s,r,o):i(r,o)):Hg(n,a+2)}function ED(n,t){const e=Zt();let i;const r=n+jt;e.firstCreatePass?(i=function wX(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];const o=i.factory||(i.factory=pl(i.type)),a=zr(N);try{const l=m(!1),c=o();return m(l),function cQ(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,ge(),r,c),c}finally{zr(a)}}function rV(n,t,e){const i=n+jt,r=ge(),o=rc(r,i);return $g(r,i)?function X2(n,t,e,i,r,o){const s=t+e;return Zr(n,s,r)?Ra(n,s+1,o?i.call(o,r):i(r)):Hg(n,s+1)}(r,pr(),t,o.transform,e,o):o.transform(e)}function $g(n,t){return n[ke].data[t].pure}function xX(){return this._results[Symbol.iterator]()}class wD{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Qe)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=wD.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=xX)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=function ws(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function bK(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function SX(n,t,e,i=!0){const r=t[ke];if(function cZ(n,t,e,i){const r=tr+i,o=e.length;i>0&&(e[r-1][ho]=t),i<o-tr?(t[ho]=e[r],tP(e,tr+i,t)):(e.push(t),t[ho]=null),t[Yn]=e;const s=t[hl];null!==s&&e!==s&&function uZ(n,t){const e=n[Tu];t[bi]!==t[Yn][Yn][bi]&&(n[Yy]=!0),null===e?n[Tu]=[t]:e.push(t)}(s,t);const a=t[ys];null!==a&&a.insertView(n),t[Et]|=128}(r,t,n,e),i){const o=ax(e,n),s=t[pt],a=Kb(s,n[Gs]);null!==a&&function sZ(n,t,e,i,r,o){i[mi]=r,i[Gi]=t,pg(n,i,e,1,r,o)}(r,n[Gi],s,t,a,o)}}let wi=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=NX}return n})();const AX=wi,RX=class extends AX{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){const r=function DX(n,t,e,i){const r=t.tView,a=f0(n,r,e,4096&n[Et]?4096:16,null,t,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[hl]=n[t.index];const c=n[ys];return null!==c&&(a[ys]=c.createEmbeddedView(r)),Qx(r,a,e),a}(this._declarationLView,this._declarationTContainer,t,{injector:e,hydrationInfo:i});return new xg(r)}};function NX(){return M0(Vi(),ge())}function M0(n,t){return 4&n.type?new RX(t,n,Jh(n,t)):null}let ns=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=LX}return n})();function LX(){return hV(Vi(),ge())}const VX=ns,uV=class extends VX{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Jh(this._hostTNode,this._hostLView)}get injector(){return new mo(this._hostTNode,this._hostLView)}get parentInjector(){const t=Yo(this._hostTNode,this._hostLView);if(rg(t)){const e=d(t,this._hostLView),i=Su(t);return new mo(e[ke].data[i+8],e)}return new mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=dV(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(t,e,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=t.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(a,r,false),a}createComponent(t,e,i,r,o){const s=t&&!function ag(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const b=e||{};a=b.index,i=b.injector,r=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const l=s?t:new Dg(Kt(t)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const C=(s?c:this.parentInjector).get(go,null);C&&(o=C)}Kt(l.componentType??{});const _=l.create(c,r,null,o);return this.insertImpl(_.hostView,a,false),_}insert(t,e){return this.insertImpl(t,e,!1)}insertImpl(t,e,i){const r=t._lView;if(function DI(n){return qr(n[Yn])}(r)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const c=r[Yn],u=new uV(c,c[Gi],c[Yn]);u.detach(u.indexOf(t))}}const s=this._adjustIndex(e),a=this._lContainer;return SX(a,r,s,!i),t.attachToViewContainerRef(),tP(TD(a),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=dV(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=qb(this._lContainer,e);i&&(Lb(TD(this._lContainer),e),ix(i[ke],i))}detach(t){const e=this._adjustIndex(t,-1),i=qb(this._lContainer,e);return i&&null!=Lb(TD(this._lContainer),e)?new xg(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function dV(n){return n[8]}function TD(n){return n[8]||(n[8]=[])}function hV(n,t){let e;const i=t[n.index];return qr(i)?e=i:(e=$F(i,t,null,n),t[n.index]=e,p0(t,e)),fV(e,t,n,i),new uV(e,n,t)}let fV=function pV(n,t,e,i){if(n[Gs])return;let r;r=8&e.type?Bn(i):function BX(n,t){const e=n[pt],i=e.createComment(""),r=fr(t,n);return Nu(e,Kb(e,r),i,function pZ(n,t){return n.nextSibling(t)}(e,r),!1),i}(t,e),n[Gs]=r};class CD{constructor(t){this.queryList=t,this.matches=null}clone(){return new CD(this.queryList)}setDirty(){this.queryList.setDirty()}}class ID{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){const s=e.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new ID(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==yV(t,e).matches&&this.queries[e].setDirty()}}class mV{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class xD{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==e?e.push(o):e=[o])}return null!==e?new xD(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class DD{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new DD(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,e,HX(e,o)),this.matchTNodeWithReadOption(t,e,Au(e,t,o,!1,!1))}else i===wi?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Au(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===wt||r===ns||r===wi&&4&e.type)this.addMatch(e.index,-2);else{const o=Au(e,t,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function HX(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function zX(n,t,e,i){return-1===e?function $X(n,t){return 11&n.type?Jh(n,t):4&n.type?M0(n,t):null}(t,n):-2===e?function GX(n,t,e){return e===wt?Jh(t,n):e===wi?M0(t,n):e===ns?hV(t,n):void 0}(n,t,i):Ks(n,n[ke],e,t)}function gV(n,t,e,i){const r=t[ys].queries[i];if(null===r.matches){const o=n.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:zX(t,o[c],s[l+1],e.metadata.read))}r.matches=a}return r.matches}function SD(n,t,e,i){const r=n.queries.getByIndex(e),o=r.matches;if(null!==o){const s=gV(n,t,r,e);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],u=t[-l];for(let f=tr;f<u.length;f++){const g=u[f];g[hl]===g[Yn]&&SD(g[ke],g,c,i)}if(null!==u[Tu]){const f=u[Tu];for(let g=0;g<f.length;g++){const _=f[g];SD(_[ke],_,c,i)}}}}}return i}function mt(n){const t=ge(),e=Zt(),i=Tb();Jm(i+1);const r=yV(e,i);if(n.dirty&&function xI(n){return 4==(4&n[Et])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?SD(e,t,i,[]):gV(e,t,r,i);n.reset(o,v7),n.notifyOnChanges()}return!0}return!1}function gr(n,t,e){const i=Zt();i.firstCreatePass&&(vV(i,new mV(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),_V(i,ge(),t)}function An(n,t,e,i){const r=Zt();if(r.firstCreatePass){const o=Vi();vV(r,new mV(t,e,i),o.index),function qX(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(r,n),2==(2&e)&&(r.staticContentQueries=!0)}_V(r,ge(),e)}function gt(){return function WX(n,t){return n[ys].queries[t].queryList}(ge(),Tb())}function _V(n,t,e){const i=new wD(4==(4&e));(function Q7(n,t,e,i){const r=GF(t);r.push(e),n.firstCreatePass&&WF(n).push(i,r.length-1)})(n,t,i,i.destroy),null===t[ys]&&(t[ys]=new ID),t[ys].queries.push(new CD(i))}function vV(n,t,e){null===n.queries&&(n.queries=new xD),n.queries.track(new DD(t,e))}function yV(n,t){return n.queries.getByIndex(t)}function Ds(n,t){return M0(n,t)}const OD=new de("Application Initializer");let PD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=be(OD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const o=r();if(kg(o))e.push(o);else if(IL(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FV=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ss=new de("LocaleId",{providedIn:"root",factory:()=>be(Ss,kt.Optional|kt.SkipSelf)||function pee(){return typeof $localize<"u"&&$localize.locale||_f}()});let P0=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new E(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _ee{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let LV=(()=>{class n{compileModuleSync(e){return new _D(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),o=bl(Sr(e).declarations).reduce((s,a)=>{const l=Kt(a);return l&&s.push(new Dg(l)),s},[]);return new _ee(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jV=new de(""),L0=new de("");let UD,VD=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,UD||(function Bee(n){UD=n}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(P(We),P(BD),P(L0))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),BD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return UD?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),yc=null;const HV=new de("AllowMultipleToken"),jD=new de("PlatformDestroyListeners"),HD=new de("appBootstrapListener");class zV{constructor(t,e){this.name=t,this.token=e}}function WV(n,t,e=[]){const i=`Platform: ${t}`,r=new de(i);return(o=[])=>{let s=$D();if(!s||s.injector.get(HV,!1)){const a=[...e,...o,{provide:r,useValue:!0}];n?n(a):function Hee(n){if(yc&&!yc.get(HV,!1))throw new z(400,!1);(function $V(){!function Eh(n){rb=n}(()=>{throw new z(600,!1)})})(),yc=n;const t=n.get(KV);(function GV(n){n.get(rF,null)?.forEach(e=>e())})(n)}(function qV(n=[],t){return Wi.create({name:t,providers:[{provide:bx,useValue:"platform"},{provide:jD,useValue:new Set([()=>yc=null])},...n]})}(a,i))}return function zee(n){const t=$D();if(!t)throw new z(401,!1);return t}()}}function $D(){return yc?.get(KV)??null}let KV=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function Gee(n="zone.js",t){return"noop"===n?new k7:"zone.js"===n?new We(t):n}(i?.ngZone,function ZV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function sX(n,t,e){return new gD(n,t,e)}(e.moduleType,this.injector,function eB(n){return[{provide:We,useFactory:n},{provide:_g,multi:!0,useFactory:()=>{const t=be(qee,{optional:!0});return()=>t.initialize()}},{provide:XV,useFactory:Wee},{provide:bF,useFactory:EF}]}(()=>r)),s=o.injector.get(Zs,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{V0(this._modules,o),a.unsubscribe()})}),function YV(n,t,e){try{const i=e();return kg(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(PD);return a.runInitializers(),a.donePromise.then(()=>(function b2(n){So(n,"Expected localeId to be defined"),"string"==typeof n&&(y2=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ss,_f)||_f),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,i=[]){const r=QV({},i);return function Uee(n,t,e){const i=new _D(e);return Promise.resolve(i)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const i=e.injector.get(ka);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new z(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(jD,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(P(Wi))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function QV(n,t){return Array.isArray(t)?t.reduce(QV,n):{...n,...t}}let ka=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(XV),this.zoneIsStable=be(bF),this.componentTypes=[],this.components=[],this.isStable=be(P0).hasPendingTasks.pipe(Le(e=>e?M(!1):this.zoneIsStable),dt(),oe()),this._injector=be(go)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof lF;if(!this._injector.get(PD).done)throw!r&&function ul(n){const t=Kt(n)||Xi(n)||er(n);return null!==t&&t.standalone}(e),new z(405,!1);let s;s=r?e:this._injector.get(Eg).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function jee(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Vu),c=s.create(Wi.NULL,[],i||s.selector,a),u=c.location.nativeElement,f=c.injector.get(jV,null);return f?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),V0(this.components,c),f?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new z(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;V0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(HD,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>V0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new z(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const XV=new de("",{providedIn:"root",factory:()=>be(Zs).handleError.bind(void 0)});function Wee(){const n=be(We),t=be(Zs);return e=>n.runOutsideAngular(()=>t.handleError(e))}let qee=(()=>{class n{constructor(){this.zone=be(We),this.applicationRef=be(ka)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let bo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Zee}return n})();function Zee(n){return function Yee(n,t,e){if(ec(n)&&!e){const i=Ar(n.index,t);return new xg(i,i)}return 47&n.type?new xg(t[bi],t):null}(Vi(),ge(),16==(16&n))}class oB{constructor(){}supports(t){return v0(t)}create(t){return new nte(t)}}const tte=(n,t)=>t;class nte{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||tte}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){const s=!i||e&&e.currentIndex<aB(i,r,o)?e:i,a=aB(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,u=l-r;if(c!=u){for(let g=0;g<c;g++){const _=g<o.length?o[g]:o[g]=0,y=_+g;u<=y&&y<c&&(o[g]=_+1)}o[s.previousIndex]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!v0(t))throw new z(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),i=!0),e=e._next}else r=0,function HY(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new ite(e,i),o,r),t}_verifyReinsertion(t,e,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new sB),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sB),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ite{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rte{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class sB{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new rte,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aB(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class lB{constructor(){}supports(t){return t instanceof Map||Jx(t)}create(){return new ote}}class ote{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Jx(t)))throw new z(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new ste(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class ste{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cB(){return new j0([new oB])}let j0=(()=>{class n{static#e=this.\u0275prov=he({token:n,providedIn:"root",factory:cB});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||cB()),deps:[[n,new cg,new Ts]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new z(901,!1)}}return n})();function uB(){return new Wg([new lB])}let Wg=(()=>{class n{static#e=this.\u0275prov=he({token:n,providedIn:"root",factory:uB});constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||uB()),deps:[[n,new cg,new Ts]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new z(901,!1)}}return n})();const cte=WV(null,"core",[]);let ute=(()=>{class n{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||n)(P(ka))};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();function bf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function ZD(n,t){const e=Kt(n),i=t.elementInjector||r0();return new Dg(e).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}let YD=null;function bc(){return YD}class Cte{}const Tt=new de("DocumentToken");let QD=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return be(xte)},providedIn:"platform"})}return n})();const Ite=new de("Location Initialized");let xte=(()=>{class n extends QD{constructor(){super(),this._doc=be(Tt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bc().getBaseHref(this._doc)}onPopState(e){const i=bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function JD(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function yB(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Tl(n){return n&&"?"!==n[0]?"?"+n:n}let ju=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return be(EB)},providedIn:"root"})}return n})();const bB=new de("appBaseHref");let EB=(()=>{class n extends ju{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??be(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return JD(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Tl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const s=this.prepareExternalUrl(r+Tl(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){const s=this.prepareExternalUrl(r+Tl(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(P(QD),P(bB,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dte=(()=>{class n extends ju{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=JD(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+Tl(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+Tl(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(P(QD),P(bB,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),$0=(()=>{class n{constructor(e){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function Rte(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(yB(wB(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Tl(i))}normalize(e){return n.stripTrailingSlash(function Ate(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,wB(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Tl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Tl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=Tl;static#t=this.joinWithSlash=JD;static#n=this.stripTrailingSlash=yB;static#i=this.\u0275fac=function(i){return new(i||n)(P(ju))};static#r=this.\u0275prov=he({token:n,factory:function(){return function Ste(){return new $0(P(ju))}()},providedIn:"root"})}return n})();function wB(n){return n.replace(/\/index.html$/,"")}function kB(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}const cS=/\s+/,OB=[];let eE=(()=>{class n{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=OB,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(cS):OB}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(cS):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(cS).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(N(j0),N(Wg),N(wt),N(Xo))};static#t=this.\u0275dir=me({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class hne{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oa=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new hne(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),FB(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{FB(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(N(ns),N(wi),N(j0))};static#t=this.\u0275dir=me({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function FB(n,t){n.context.$implicit=t.item}let rs=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new fne,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){LB("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){LB("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(N(ns),N(wi))};static#t=this.\u0275dir=me({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class fne{constructor(){this.$implicit=null,this.ngIf=null}}function LB(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ze(t)}'.`)}class uS{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let tE=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),VB=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new uS(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(N(ns),N(wi),N(tE,9))};static#t=this.\u0275dir=me({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),Hu=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(N(ns))};static#t=this.\u0275dir=me({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Si]})}return n})();let UB=(()=>{class n{transform(e){if(null==e)return null;if("string"!=typeof e)throw function Xs(n,t){return new z(2100,!1)}();return e.toUpperCase()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Dr({name:"uppercase",type:n,pure:!0,standalone:!0})}return n})(),nE=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();const HB="browser";function iE(n){return"server"===n}let Hne=(()=>{class n{static#e=this.\u0275prov=he({token:n,providedIn:"root",factory:()=>new $ne(P(Tt),window)})}return n})();class $ne{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function zne(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class $B{}class fie extends Cte{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mS extends fie{static makeCurrent(){!function Tte(n){YD||(YD=n)}(new mS)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function pie(){return Yg=Yg||document.querySelector("base"),Yg?Yg.getAttribute("href"):null}();return null==e?null:function mie(n){sE=sE||document.createElement("a"),sE.setAttribute("href",n);const t=sE.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Yg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return kB(document.cookie,t)}}let sE,Yg=null,_ie=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const gS=new de("EventManagerPlugins");let KB=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new z(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(P(gS),P(We))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();class ZB{constructor(t){this._doc=t}}const _S="ng-app-id";let YB=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iE(o),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${_S}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(_S),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(_S,this.appId),s}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(vg),P(Cx,8),P(Cs))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const vS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yS=/%COMP%/g,Eie=new de("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function JB(n,t){return t.map(e=>e.replace(yS,n))}let bS=(()=>{class n{constructor(e,i,r,o,s,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=iE(a),this.defaultRenderer=new ES(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ro.ShadowDom&&(i={...i,encapsulation:Ro.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof eU?r.applyToHost(e):r instanceof wS&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Ro.Emulated:o=new eU(l,c,i,this.appId,u,s,a,f);break;case Ro.ShadowDom:return new Iie(l,c,e,i,s,a,this.nonce,f);default:o=new wS(l,c,i,u,s,a,f)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(P(KB),P(YB),P(vg),P(Eie),P(Tt),P(Cs),P(We),P(Cx))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();class ES{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(vS[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(XB(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(XB(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new z(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const o=vS[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=vS[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(fc.DashCase|fc.Important)?t.style.setProperty(e,i,r&fc.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&fc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=bc().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function XB(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Iie extends ES{constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=JB(r.id,r.styles);for(const u of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wS extends ES{constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?JB(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class eU extends wS{constructor(t,e,i,r,o,s,a,l){const c=r+"-"+i.id;super(t,e,i,o,s,a,l,c),this.contentAttr=function wie(n){return"_ngcontent-%COMP%".replace(yS,n)}(c),this.hostAttr=function Tie(n){return"_nghost-%COMP%".replace(yS,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let xie=(()=>{class n extends ZB{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const tU=["alt","control","meta","shift"],Die={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sie={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Aie=(()=>{class n extends ZB{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bc().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),tU.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=Die[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),tU.forEach(s=>{s!==r&&(0,Sie[s])(e)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const iU=[{provide:Cs,useValue:HB},{provide:rF,useValue:function Rie(){mS.makeCurrent()},multi:!0},{provide:Tt,useFactory:function Mie(){return function wZ(n){ux=n}(document),document},deps:[]}],kie=WV(cte,"browser",iU),Oie=new de(""),rU=[{provide:L0,useClass:class gie{addToWindow(t){Sn.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new z(5103,!1);return o},Sn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Sn.getAllAngularRootElements=()=>t.getAllRootElements(),Sn.frameworkStabilizers||(Sn.frameworkStabilizers=[]),Sn.frameworkStabilizers.push(i=>{const r=Sn.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?bc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:jV,useClass:VD,deps:[We,BD,L0]},{provide:VD,useClass:VD,deps:[We,BD,L0]}],oU=[{provide:bx,useValue:"root"},{provide:Zs,useFactory:function Nie(){return new Zs},deps:[]},{provide:gS,useClass:xie,multi:!0,deps:[Tt,We,Cs]},{provide:gS,useClass:Aie,multi:!0,deps:[Tt]},bS,YB,KB,{provide:Xh,useExisting:bS},{provide:$B,useClass:_ie,deps:[]},[]];let sU=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:vg,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(P(Oie,12))};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:[...oU,...rU],imports:[nE,ute]})}return n})(),aU=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt))};static#t=this.\u0275prov=he({token:n,factory:function(i){let r=null;return r=i?new i:function Fie(){return new aU(P(Tt))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:jie}=Array,{getPrototypeOf:Hie,prototype:$ie,keys:zie}=Object;function hU(n){if(1===n.length){const t=n[0];if(jie(t))return{args:t,keys:null};if(function Gie(n){return n&&"object"==typeof n&&Hie(n)===$ie}(t)){const e=zie(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:Wie}=Array;function IS(n){return Ce(t=>function qie(n,t){return Wie(t)?n(...t):n(t)}(n,t))}function fU(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}let mU=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(N(Xo),N(wt))};static#t=this.\u0275dir=me({type:n})}return n})(),$u=(()=>{class n extends mU{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ai(n)))(r||n)}}();static#t=this.\u0275dir=me({type:n,features:[Qt]})}return n})();const os=new de("NgValueAccessor"),Kie={provide:os,useExisting:H(()=>xS),multi:!0};let xS=(()=>{class n extends $u{writeValue(e){this.setProperty("checked",e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ai(n)))(r||n)}}();static#t=this.\u0275dir=me({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&Be("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[bn([Kie]),Qt]})}return n})();const Zie={provide:os,useExisting:H(()=>zu),multi:!0},Qie=new de("CompositionEventMode");let zu=(()=>{class n extends mU{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Yie(){const n=bc()?bc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(N(Xo),N(wt),N(Qie,8))};static#t=this.\u0275dir=me({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Be("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[bn([Zie]),Qt]})}return n})();function wc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function gU(n){return null!=n&&"number"==typeof n.length}const vr=new de("NgValidators"),Tc=new de("NgAsyncValidators"),Jie=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xie{static min(t){return function _U(n){return t=>{if(wc(t.value)||wc(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function vU(n){return t=>{if(wc(t.value)||wc(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function yU(n){return wc(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function bU(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function EU(n){return wc(n.value)||Jie.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function wU(n){return t=>wc(t.value)||!gU(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function TU(n){return t=>gU(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function CU(n){if(!n)return aE;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(wc(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return RU(t)}static composeAsync(t){return NU(t)}}function aE(n){return null}function IU(n){return null!=n}function xU(n){return kg(n)?w(n):n}function DU(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function SU(n,t){return t.map(e=>e(n))}function AU(n){return n.map(t=>function ere(n){return!n.validate}(t)?t:e=>t.validate(e))}function RU(n){if(!n)return null;const t=n.filter(IU);return 0==t.length?null:function(e){return DU(SU(e,t))}}function DS(n){return null!=n?RU(AU(n)):null}function NU(n){if(!n)return null;const t=n.filter(IU);return 0==t.length?null:function(e){return function pU(...n){const t=ao(n),{args:e,keys:i}=hU(n),r=new it(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let f=!1;ye(e[u]).subscribe(De(o,g=>{f||(f=!0,c--),a[u]=g},()=>l--,void 0,()=>{(!l||!f)&&(c||o.next(i?fU(i,a):a),o.complete())}))}});return t?r.pipe(IS(t)):r}(SU(e,t).map(xU)).pipe(Ce(DU))}}function SS(n){return null!=n?NU(AU(n)):null}function MU(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function kU(n){return n._rawValidators}function OU(n){return n._rawAsyncValidators}function AS(n){return n?Array.isArray(n)?n:[n]:[]}function lE(n,t){return Array.isArray(n)?n.includes(t):n===t}function PU(n,t){const e=AS(t);return AS(n).forEach(r=>{lE(e,r)||e.push(r)}),e}function FU(n,t){return AS(t).filter(e=>!lE(n,e))}class LU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=DS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=SS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Eo extends LU{get formDirective(){return null}get path(){return null}}class xl extends LU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VU{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wf=(()=>{class n extends VU{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(N(xl,2))};static#t=this.\u0275dir=me({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&ht("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Qt]})}return n})(),cE=(()=>{class n extends VU{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(N(Eo,10))};static#t=this.\u0275dir=me({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&ht("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Qt]})}return n})();const Qg="VALID",dE="INVALID",Tf="PENDING",Jg="DISABLED";function MS(n){return(hE(n)?n.validators:n)||null}function kS(n,t){return(hE(t)?t.asyncValidators:n)||null}function hE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HU{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Qg}get invalid(){return this.status===dE}get pending(){return this.status==Tf}get disabled(){return this.status===Jg}get enabled(){return this.status!==Jg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(PU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(PU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(FU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(FU(t,this._rawAsyncValidators))}hasValidator(t){return lE(this._rawValidators,t)}hasAsyncValidator(t){return lE(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Tf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Jg,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qg,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qg||this.status===Tf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jg:Qg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Tf,this._hasOwnPendingAsyncValidator=!0;const e=xU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?Jg:this.errors?dE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tf)?Tf:this._anyControlsHaveStatus(dE)?dE:Qg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hE(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function rre(n){return Array.isArray(n)?DS(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function ore(n){return Array.isArray(n)?SS(n):n||null}(this._rawAsyncValidators)}}class OS extends HU{constructor(t,e,i){super(MS(e),kS(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function jU(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new z(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function UU(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new z(1e3,"");if(!i[e])throw new z(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Cf=new de("CallSetDisabledState",{providedIn:"root",factory:()=>fE}),fE="always";function Xg(n,t,e=fE){PS(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function lre(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$U(n,t)})}(n,t),function ure(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function cre(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$U(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function are(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function mE(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),_E(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function gE(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function PS(n,t){const e=kU(n);null!==t.validator?n.setValidators(MU(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=OU(n);null!==t.asyncValidator?n.setAsyncValidators(MU(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();gE(t._rawValidators,r),gE(t._rawAsyncValidators,r)}function _E(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=kU(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const r=OU(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}const i=()=>{};return gE(t._rawValidators,i),gE(t._rawAsyncValidators,i),e}function $U(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zU(n,t){PS(n,t)}function GU(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const mre={provide:Eo,useExisting:H(()=>Gu)},e_=(()=>Promise.resolve())();let Gu=(()=>{class n extends Eo{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Qe,this.form=new OS({},DS(e),SS(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){e_.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Xg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){e_.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){e_.then(()=>{const i=this._findContainer(e.path),r=new OS({});zU(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){e_.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){e_.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,GU(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(N(vr,10),N(Tc,10),N(Cf,8))};static#t=this.\u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Be("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([mre]),Qt]})}return n})();function WU(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function qU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const KU=class extends HU{constructor(t=null,e,i){super(MS(e),kS(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hE(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=qU(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){WU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){WU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){qU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},vre={provide:xl,useExisting:H(()=>Wu)},QU=(()=>Promise.resolve())();let Wu=(()=>{class n extends xl{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new KU,this._registered=!1,this.name="",this.update=new Qe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function VS(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===zu?e=o:function fre(n){return Object.getPrototypeOf(n.constructor)===$u}(o)?i=o:r=o}),r||i||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function LS(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){QU.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&bf(i);QU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function pE(n,t){return[...t.path,n]}(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||n)(N(Eo,9),N(vr,10),N(Tc,10),N(os,10),N(bo,8),N(Cf,8))};static#t=this.\u0275dir=me({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bn([vre]),Qt,Si]})}return n})(),vE=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),XU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();const Cre={provide:Eo,useExisting:H(()=>yE)};let yE=(()=>{class n extends Eo{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Qe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_E(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Xg(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){mE(e.control||null,e,!1),function pre(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,GU(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(mE(i||null,e),(n=>n instanceof KU)(r)&&(Xg(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);zU(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function dre(n,t){return _E(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PS(this.form,this),this._oldForm&&_E(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(N(vr,10),N(Tc,10),N(Cf,8))};static#t=this.\u0275dir=me({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&Be("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([Cre]),Qt,Si]})}return n})(),Hre=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[XU]})}return n})(),zre=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Cf,useValue:e.callSetDisabledState??fE}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Hre]})}return n})();function bE(...n){const t=Ko(n),e=ao(n),{args:i,keys:r}=hU(n);if(0===i.length)return w([],t);const o=new it(function Wre(n,t,e=zn){return i=>{gj(t,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)gj(t,()=>{const c=w(n[l],t);let u=!1;c.subscribe(De(i,f=>{o[l]=f,u||(u=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,t,r?s=>fU(r,s):zn));return e?o.pipe(IS(e)):o}function gj(n,t,e){n?Ji(e,n,t):t()}const EE=ee(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function If(...n){return function qre(){return an(1)}()(w(n,Ko(n)))}function _j(n){return new it(t=>{ye(n()).subscribe(t)})}function xf(n,t){const e=D(n)?n:()=>n,i=r=>r.error(e());return new it(t?r=>t.schedule(i,0,r):i)}function GS(){return se((n,t)=>{let e=null;n._refCount++;const i=De(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class vj extends it{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,pe(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new yt;const e=this.getSubject();t.add(this.source.subscribe(De(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=yt.EMPTY)}return t}refCount(){return GS()(this)}}function Zi(n){return n<=0?()=>mn:se((t,e)=>{let i=0;t.subscribe(De(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Df(...n){const t=Ko(n);return se((e,i)=>{(t?If(n,e,t):If(n,e)).subscribe(i)})}function ai(n,t){return se((e,i)=>{let r=0;e.subscribe(De(i,o=>n.call(t,o,r++)&&i.next(o)))})}function wE(n){return se((t,e)=>{let i=!1;t.subscribe(De(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function yj(n=Kre){return se((t,e)=>{let i=!1;t.subscribe(De(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Kre(){return new EE}function Cc(n,t){const e=arguments.length>=2;return i=>i.pipe(n?ai((r,o)=>n(r,o,i)):zn,Zi(1),e?wE(t):yj(()=>new EE))}function Sf(n,t){return D(t)?qt(n,t,1):qt(n,1)}function Ni(n,t,e){const i=D(n)||t||e?{next:n,error:t,complete:e}:n;return i?se((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(De(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):zn}function Ic(n){return se((t,e)=>{let o,i=null,r=!1;i=t.subscribe(De(e,void 0,void 0,s=>{o=ye(n(s,Ic(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function Af(n,t){return se(function Zre(n,t,e,i,r){return(o,s)=>{let a=e,l=t,c=0;o.subscribe(De(s,u=>{const f=c++;l=a?n(l,u,f):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(n,t,arguments.length>=2,!0))}function WS(n){return n<=0?()=>mn:se((t,e)=>{let i=[];t.subscribe(De(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Rf(n){return se((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function tn(n){return se((t,e)=>{ye(n).subscribe(De(e,()=>e.complete(),He)),!e.closed&&t.subscribe(e)})}const At="primary",t_=Symbol("RouteTitle");class Qre{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Nf(n){return new Qre(n)}function Jre(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Pa(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!Ej(n[r],t[r]))return!1;return!0}function Ej(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}return n===t}function wj(n){return n.length>0?n[n.length-1]:null}function xc(n){return function Gre(n){return!!n&&(n instanceof it||D(n.lift)&&D(n.subscribe))}(n)?n:kg(n)?w(Promise.resolve(n)):M(n)}const eoe={exact:function Ij(n,t,e){if(!Ku(n.segments,t.segments)||!TE(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Ij(n.children[i],t.children[i],e))return!1;return!0},subset:xj},Tj={exact:function toe(n,t){return Pa(n,t)},subset:function noe(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Ej(n[e],t[e]))},ignored:()=>!0};function Cj(n,t,e){return eoe[e.paths](n.root,t.root,e.matrixParams)&&Tj[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function xj(n,t,e){return Dj(n,t,t.segments,e)}function Dj(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Ku(r,e)||t.hasChildren()||!TE(r,e,i))}if(n.segments.length===e.length){if(!Ku(n.segments,e)||!TE(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!xj(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(Ku(n.segments,r)&&TE(n.segments,r,i)&&n.children[At])&&Dj(n.children[At],t,o,i)}}function TE(n,t,e){return t.every((i,r)=>Tj[e](n[r].parameters,i.parameters))}class Mf{constructor(t=new kn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nf(this.queryParams)),this._queryParamMap}toString(){return ooe.serialize(this)}}class kn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return CE(this)}}class n_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Nf(this.parameters)),this._parameterMap}toString(){return Rj(this)}}function Ku(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let i_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return new qS},providedIn:"root"})}return n})();class qS{parse(t){const e=new goe(t);return new Mf(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${r_(t.root,!0)}`,i=function loe(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${IE(e)}=${IE(r)}`).join("&"):`${IE(e)}=${IE(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function soe(n){return encodeURI(n)}(t.fragment)}`:""}`}}const ooe=new qS;function CE(n){return n.segments.map(t=>Rj(t)).join("/")}function r_(n,t){if(!n.hasChildren())return CE(n);if(t){const e=n.children[At]?r_(n.children[At],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==At&&i.push(`${r}:${r_(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function roe(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===At&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==At&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===At?[r_(n.children[At],!1)]:[`${r}:${r_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${CE(n)}/${e[0]}`:`${CE(n)}/(${e.join("//")})`}}function Sj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function IE(n){return Sj(n).replace(/%3B/gi,";")}function KS(n){return Sj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xE(n){return decodeURIComponent(n)}function Aj(n){return xE(n.replace(/\+/g,"%20"))}function Rj(n){return`${KS(n.path)}${function aoe(n){return Object.keys(n).map(t=>`;${KS(t)}=${KS(n[t])}`).join("")}(n.parameters)}`}const coe=/^[^\/()?;#]+/;function ZS(n){const t=n.match(coe);return t?t[0]:""}const uoe=/^[^\/()?;=#]+/,hoe=/^[^=?&#]+/,poe=/^[^&#]+/;class goe{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kn([],{}):new kn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[At]=new kn(t,e)),i}parseSegment(){const t=ZS(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(t),new n_(xE(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function doe(n){const t=n.match(uoe);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=ZS(this.remaining);r&&(i=r,this.capture(i))}t[xE(e)]=xE(i)}parseQueryParam(t){const e=function foe(n){const t=n.match(hoe);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=function moe(n){const t=n.match(poe);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=Aj(e),o=Aj(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ZS(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new z(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=At);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[At]:new kn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new z(4011,!1)}}function Nj(n){return n.segments.length>0?new kn([],{[At]:n}):n}function Mj(n){const t={};for(const i of Object.keys(n.children)){const o=Mj(n.children[i]);if(i===At&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function _oe(n){if(1===n.numberOfChildren&&n.children[At]){const t=n.children[At];return new kn(n.segments.concat(t.segments),t.children)}return n}(new kn(n.segments,t))}function Zu(n){return n instanceof Mf}function kj(n){let t;const r=Nj(function e(o){const s={};for(const l of o.children){const c=e(l);s[l.outlet]=c}const a=new kn(o.url,s);return o===n&&(t=a),a}(n.root));return t??r}function Oj(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return YS(r,r,r,e,i);const o=function yoe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Fj(!0,0,n);let t=0,e=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new Fj(e,t,i)}(t);if(o.toRoot())return YS(r,r,new kn([],{}),e,i);const s=function boe(n,t,e){if(n.isAbsolute)return new SE(t,!0,0);if(!e)return new SE(t,!1,NaN);if(null===e.parent)return new SE(e,!0,0);const i=DE(n.commands[0])?0:1;return function Eoe(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new z(4005,!1);r=i.segments.length}return new SE(i,!1,r-o)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?s_(s.segmentGroup,s.index,o.commands):Lj(s.segmentGroup,s.index,o.commands);return YS(r,s.segmentGroup,a,e,i)}function DE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function o_(n){return"object"==typeof n&&null!=n&&n.outlets}function YS(n,t,e,i,r){let s,o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),s=n===t?e:Pj(n,t,e);const a=Nj(Mj(s));return new Mf(a,o,r)}function Pj(n,t,e){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===t?e:Pj(o,t,e)}),new kn(n.segments,i)}class Fj{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&DE(i[0]))throw new z(4003,!1);const r=i.find(o_);if(r&&r!==wj(i))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class SE{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Lj(n,t,e){if(n||(n=new kn([],{})),0===n.segments.length&&n.hasChildren())return s_(n,t,e);const i=function Toe(n,t,e){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;const s=n.segments[r],a=e[i];if(o_(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Bj(l,c,s))return o;i+=2}else{if(!Bj(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new kn(n.segments.slice(0,i.pathIndex),{});return o.children[At]=new kn(n.segments.slice(i.pathIndex),n.children),s_(o,0,r)}return i.match&&0===r.length?new kn(n.segments,{}):i.match&&!n.hasChildren()?QS(n,t,e):i.match?s_(n,0,r):QS(n,t,e)}function s_(n,t,e){if(0===e.length)return new kn(n.segments,{});{const i=function woe(n){return o_(n[0])?n[0].outlets:{[At]:n}}(e),r={};if(Object.keys(i).some(o=>o!==At)&&n.children[At]&&1===n.numberOfChildren&&0===n.children[At].segments.length){const o=s_(n.children[At],t,e);return new kn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Lj(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new kn(n.segments,r)}}function QS(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const o=e[r];if(o_(o)){const l=Coe(o.outlets);return new kn(i,l)}if(0===r&&DE(e[0])){i.push(new n_(n.segments[t].path,Vj(e[0]))),r++;continue}const s=o_(o)?o.outlets[At]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&DE(a)?(i.push(new n_(s,Vj(a))),r+=2):(i.push(new n_(s,{})),r++)}return new kn(i,{})}function Coe(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=QS(new kn([],{}),0,i))}),t}function Vj(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Bj(n,t,e){return n==e.path&&Pa(t,e.parameters)}const a_="imperative";class Fa{constructor(t,e){this.id=t,this.url=e}}class AE extends Fa{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dc extends Fa{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class l_ extends Fa{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kf extends Fa{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class RE extends Fa{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Uj extends Fa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ioe extends Fa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xoe extends Fa{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Doe extends Fa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Soe extends Fa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Aoe{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Roe{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Noe{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Moe{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class koe{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ooe{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jj{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class JS{}class XS{constructor(t){this.url=t}}class Poe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new c_,this.attachRef=null}}let c_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Poe,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Hj{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=e1(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=e1(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=t1(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return t1(t,this._root).map(e=>e.value)}}function e1(n,t){if(n===t.value)return t;for(const e of t.children){const i=e1(n,e);if(i)return i}return null}function t1(n,t){if(n===t.value)return[t];for(const e of t.children){const i=t1(n,e);if(i.length)return i.unshift(t),i}return[]}class Dl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Of(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class $j extends Hj{constructor(t,e){super(t),this.snapshot=e,n1(this,t)}toString(){return this.snapshot.toString()}}function zj(n,t){const e=function Foe(n,t){const s=new NE([],{},{},"",{},At,t,null,{});return new Wj("",new Dl(s,[]))}(0,t),i=new E([new n_("",{})]),r=new E({}),o=new E({}),s=new E({}),a=new E(""),l=new Pf(i,r,s,a,o,At,t,e.root);return l.snapshot=e.root,new $j(new Dl(l,[]),e)}class Pf{constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(c=>c[t_]))??M(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(t=>Nf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(t=>Nf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gj(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function Loe(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class NE{get title(){return this.data?.[t_]}constructor(t,e,i,r,o,s,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wj extends Hj{constructor(t,e){super(e),this.url=t,n1(this,e)}toString(){return qj(this._root)}}function n1(n,t){t.value._routerState=n,t.children.forEach(e=>n1(n,e))}function qj(n){const t=n.children.length>0?` { ${n.children.map(qj).join(", ")} } `:"";return`${n.value}${t}`}function r1(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Pa(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Pa(t.params,e.params)||n.paramsSubject.next(e.params),function Xre(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Pa(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),Pa(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function o1(n,t){const e=Pa(n.params,t.params)&&function ioe(n,t){return Ku(n,t)&&n.every((e,i)=>Pa(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||o1(n.parent,t.parent))}let s1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=At,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=be(c_),this.location=be(ns),this.changeDetector=be(bo),this.environmentInjector=be(go),this.inputBinder=be(ME,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=e;const r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Voe(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Si]})}return n})();class Voe{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Pf?this.route:t===c_?this.childContexts:this.parent.get(t,e)}}const ME=new de("");let Kj=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=bE([i.queryParams,i.params,i.data]).pipe(Le(([o,s,a],l)=>(a={...o,...s,...a},0===l?M(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const s=function wte(n){const t=Kt(n);if(!t)return null;const e=new Dg(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function u_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Uoe(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return u_(n,i,r);return u_(n,i)})}(n,t,e);return new Dl(i,r)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>u_(n,a)),s}}const i=function joe(n){return new Pf(new E(n.url),new E(n.params),new E(n.queryParams),new E(n.fragment),new E(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(o=>u_(n,o));return new Dl(i,r)}}const a1="ngNavigationCancelingError";function Zj(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Zu(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Yj(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function Yj(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[a1]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Qj(n){return n&&n[a1]}let Jj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["ng-component"]],standalone:!0,features:[xs],decls:1,vars:0,template:function(i,r){1&i&&Jt(0,"router-outlet")},dependencies:[s1],encapsulation:2})}return n})();function l1(n){const t=n.children&&n.children.map(l1),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==At&&(e.component=Jj),e}function ea(n){return n.outlet||At}function d_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Zoe{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),r1(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Of(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=Of(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=Of(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=Of(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Ooe(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Moe(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(r1(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),r1(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=d_(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class Xj{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kE{constructor(t,e){this.component=t,this.route=e}}function Yoe(n,t,e){const i=n._root;return h_(i,t?t._root:null,e,[i.value])}function Ff(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||function Wl(n){return null!==th(n)}(n)?t.get(n):n:i}function h_(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Of(t);return n.children.forEach(s=>{(function Joe(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function Xoe(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ku(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ku(n.url,t.url)||!Pa(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!o1(n,t)||!Pa(n.queryParams,t.queryParams);default:return!o1(n,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Xj(i)):(o.data=s.data,o._resolvedData=s._resolvedData),h_(n,t,o.component?a?a.children:null:e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new kE(a.outlet.component,s))}else s&&f_(t,a,r),r.canActivateChecks.push(new Xj(i)),h_(n,null,o.component?a?a.children:null:e,i,r)})(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>f_(a,e.getContext(s),r)),r}function f_(n,t,e){const i=Of(n),r=n.value;Object.entries(i).forEach(([o,s])=>{f_(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new kE(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function p_(n){return"function"==typeof n}function eH(n){return n instanceof EE||"EmptyError"===n?.name}const OE=Symbol("INITIAL_VALUE");function Lf(){return Le(n=>bE(n.map(t=>t.pipe(Zi(1),Df(OE)))).pipe(Ce(t=>{for(const e of t)if(!0!==e){if(e===OE)return OE;if(!1===e||e instanceof Mf)return e}return!0}),ai(t=>t!==OE),Zi(1)))}function tH(n){return function ro(...n){return oo(n)}(Ni(t=>{if(Zu(t))throw Zj(0,t)}),Ce(t=>!0===t))}class PE{constructor(t){this.segmentGroup=t||null}}class nH{constructor(t){this.urlTree=t}}function Vf(n){return xf(new PE(n))}function iH(n){return xf(new nH(n))}class yse{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new z(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return M(i);if(r.numberOfChildren>1||!r.children[At])return xf(new z(4e3,!1));r=r.children[At]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const o=this.createSegmentGroup(t,e.root,i,r);return new Mf(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){const o=this.createSegments(t,e.segments,i,r);let s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new kn(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new z(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const c1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bse(n,t,e,i,r){const o=u1(n,t,e);return o.matched?(i=function $oe(n,t){return n.providers&&!n._injector&&(n._injector=vD(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function gse(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?M(r.map(s=>{const a=Ff(s,n);return xc(function ose(n){return n&&p_(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(Lf(),tH()):M(!0)}(i,t,e).pipe(Ce(s=>!0===s?o:{...c1}))):M(o)}function u1(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...c1}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Jre)(e,n,t);if(!r)return{...c1};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function rH(n,t,e,i){return e.length>0&&function Tse(n,t,e){return e.some(i=>FE(n,t,i)&&ea(i)!==At)}(n,e,i)?{segmentGroup:new kn(t,wse(i,new kn(e,n.children))),slicedSegments:[]}:0===e.length&&function Cse(n,t,e){return e.some(i=>FE(n,t,i))}(n,e,i)?{segmentGroup:new kn(n.segments,Ese(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new kn(n.segments,n.children),slicedSegments:e}}function Ese(n,t,e,i,r){const o={};for(const s of i)if(FE(n,e,s)&&!r[ea(s)]){const a=new kn([],{});o[ea(s)]=a}return{...r,...o}}function wse(n,t){const e={};e[At]=t;for(const i of n)if(""===i.path&&ea(i)!==At){const r=new kn([],{});e[ea(i)]=r}return e}function FE(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class Sse{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new yse(this.urlSerializer,this.urlTree)}noMatchError(t){return new z(4002,!1)}recognize(){const t=rH(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,At).pipe(Ic(e=>{if(e instanceof nH)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof PE?this.noMatchError(e):e}),Ce(e=>{const i=new NE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},At,this.rootComponentType,null,{}),r=new Dl(i,e),o=new Wj("",r),s=function voe(n,t,e=null,i=null){return Oj(kj(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,At).pipe(Ic(i=>{throw i instanceof PE?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=Gj(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return w(r).pipe(Sf(o=>{const s=i.children[o],a=function qoe(n,t){const e=n.filter(i=>ea(i)===t);return e.push(...n.filter(i=>ea(i)!==t)),e}(e,o);return this.processSegmentGroup(t,a,s,o)}),Af((o,s)=>(o.push(...s),o)),wE(null),function Yre(n,t){const e=arguments.length>=2;return i=>i.pipe(n?ai((r,o)=>n(r,o,i)):zn,WS(1),e?wE(t):yj(()=>new EE))}(),qt(o=>{if(null===o)return Vf(i);const s=oH(o);return function Ase(n){n.sort((t,e)=>t.value.outlet===At?-1:e.value.outlet===At?1:t.value.outlet.localeCompare(e.value.outlet))}(s),M(s)}))}processSegment(t,e,i,r,o,s){return w(e).pipe(Sf(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,o,s).pipe(Ic(l=>{if(l instanceof PE)return M(null);throw l}))),Cc(a=>!!a),Ic(a=>{if(eH(a))return function xse(n,t,e){return 0===t.length&&!n.children[e]}(i,r,o)?M([]):Vf(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,o,s,a){return function Ise(n,t,e,i){return!!(ea(n)===i||i!==At&&FE(t,e,n))&&("**"===n.path||u1(t,n,e).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s):Vf(r):Vf(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?iH(o):this.applyRedirects.lineralizeSegments(i,o).pipe(qt(s=>{const a=new kn(s,{});return this.processSegment(t,e,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=u1(e,r,o);if(!a)return Vf(e);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?iH(f):this.applyRedirects.lineralizeSegments(r,f).pipe(qt(g=>this.processSegment(t,i,e,g.concat(c),s,!1)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a;if("**"===i.path){const l=r.length>0?wj(r).parameters:{};a=M({snapshot:new NE(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sH(i),ea(i),i.component??i._loadedComponent??null,i,aH(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=bse(e,i,r,t).pipe(Ce(({matched:l,consumedSegments:c,remainingSegments:u,parameters:f})=>l?{snapshot:new NE(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sH(i),ea(i),i.component??i._loadedComponent??null,i,aH(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Le(l=>null===l?Vf(e):this.getChildConfig(t=i._injector??t,i,r).pipe(Le(({routes:c})=>{const u=i._loadedInjector??t,{snapshot:f,consumedSegments:g,remainingSegments:_}=l,{segmentGroup:y,slicedSegments:b}=rH(e,g,_,c);if(0===b.length&&y.hasChildren())return this.processChildren(u,c,y).pipe(Ce(O=>null===O?null:[new Dl(f,O)]));if(0===c.length&&0===b.length)return M([new Dl(f,[])]);const C=ea(i)===o;return this.processSegment(u,c,y,b,C?At:o,!0).pipe(Ce(O=>[new Dl(f,O)]))}))))}getChildConfig(t,e,i){return e.children?M({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?M({routes:e._loadedRoutes,injector:e._loadedInjector}):function mse(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?M(!0):M(r.map(s=>{const a=Ff(s,n);return xc(function tse(n){return n&&p_(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(Lf(),tH())}(t,e,i).pipe(qt(r=>r?this.configLoader.loadChildren(t,e).pipe(Ni(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function vse(n){return xf(Yj(!1,3))}())):M({routes:[],injector:t})}}function Rse(n){const t=n.value.routeConfig;return t&&""===t.path}function oH(n){const t=[],e=new Set;for(const i of n){if(!Rse(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=oH(i.children);t.push(new Dl(i.value,r))}return t.filter(i=>!e.has(i))}function sH(n){return n.data||{}}function aH(n){return n.resolve||{}}function Mse(n,t){return qt(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return M(e);let o=0;return w(r).pipe(Sf(s=>function kse(n,t,e,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!lH(r)&&(o[t_]=r.title),function Ose(n,t,e,i){const r=function Pse(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return M({});const o={};return w(r).pipe(qt(s=>function Fse(n,t,e,i){const r=d_(t)??i,o=Ff(n,r);return xc(o.resolve?o.resolve(t,e):r.runInContext(()=>o(t,e)))}(n[s],t,e,i).pipe(Cc(),Ni(a=>{o[s]=a}))),WS(1),function bj(n){return Ce(()=>n)}(o),Ic(s=>eH(s)?mn:xf(s)))}(o,n,t,i).pipe(Ce(s=>(n._resolvedData=s,n.data=Gj(n,e).resolve,r&&lH(r)&&(n.data[t_]=r.title),null)))}(s.route,i,n,t)),Ni(()=>o++),WS(1),qt(s=>o===r.length?M(e):mn))})}function lH(n){return"string"==typeof n.title||null===n.title}function d1(n){return Le(t=>{const e=n(t);return e?w(e).pipe(Ce(()=>t)):M(t)})}const Bf=new de("ROUTES");let h1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(LV)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return M(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=xc(e.loadComponent()).pipe(Ce(cH),Ni(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Rf(()=>{this.componentLoaders.delete(e)})),r=new vj(i,()=>new $).pipe(GS());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return M({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function Lse(n,t,e,i){return xc(n.loadChildren()).pipe(Ce(cH),qt(r=>r instanceof G2||Array.isArray(r)?M(r):w(t.compileModuleAsync(r))),Ce(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(e).injector,s=o.get(Bf,[],{optional:!0,self:!0}).flat()),{routes:s.map(l1),injector:o}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(Rf(()=>{this.childrenLoaders.delete(i)})),s=new vj(o,()=>new $).pipe(GS());return this.childrenLoaders.set(i,s),s}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cH(n){return function Vse(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let LE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=be(h1),this.environmentInjector=be(go),this.urlSerializer=be(i_),this.rootContexts=be(c_),this.inputBindingEnabled=null!==be(ME,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>M(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Roe(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Aoe(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new E({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:a_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ai(o=>0!==o.id),Ce(o=>({...o,extractedUrl:e.urlHandlingStrategy.extract(o.rawUrl)})),Le(o=>{this.currentTransition=o;let s=!1,a=!1;return M(o).pipe(Ni(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Le(l=>{const c=l.currentBrowserUrl.toString(),u=!e.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const g="";return this.events.next(new kf(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),mn}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return M(l).pipe(Le(g=>{const _=this.transitions?.getValue();return this.events.next(new AE(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?mn:Promise.resolve(g)}),function Nse(n,t,e,i,r,o){return qt(s=>function Dse(n,t,e,i,r,o,s="emptyOnly"){return new Sse(n,t,e,i,r,s,o).recognize()}(n,t,e,i,s.extractedUrl,r,o).pipe(Ce(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),Ni(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new Uj(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(u&&e.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:_,source:y,restoredState:b,extras:C}=l,O=new AE(g,this.urlSerializer.serialize(_),y,b);this.events.next(O);const S=zj(0,this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:S,urlAfterRedirects:_,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},M(o)}{const g="";return this.events.next(new kf(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),mn}}),Ni(l=>{const c=new Ioe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ce(l=>(this.currentTransition=o={...l,guards:Yoe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function ase(n,t){return qt(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?M({...e,guardsResult:!0}):function lse(n,t,e,i){return w(n).pipe(qt(r=>function pse(n,t,e,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?M(o.map(a=>{const l=d_(t)??r,c=Ff(a,l);return xc(function rse(n){return n&&p_(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,i):l.runInContext(()=>c(n,t,e,i))).pipe(Cc())})).pipe(Lf()):M(!0)}(r.component,r.route,e,t,i)),Cc(r=>!0!==r,!0))}(s,i,r,n).pipe(qt(a=>a&&function ese(n){return"boolean"==typeof n}(a)?function cse(n,t,e,i){return w(t).pipe(Sf(r=>If(function dse(n,t){return null!==n&&t&&t(new Noe(n)),M(!0)}(r.route.parent,i),function use(n,t){return null!==n&&t&&t(new koe(n)),M(!0)}(r.route,i),function fse(n,t,e){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function Qoe(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>_j(()=>M(s.guards.map(l=>{const c=d_(s.node)??e,u=Ff(l,c);return xc(function ise(n){return n&&p_(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Cc())})).pipe(Lf())));return M(o).pipe(Lf())}(n,r.path,e),function hse(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return M(!0);const r=i.map(o=>_j(()=>{const s=d_(t)??e,a=Ff(o,s);return xc(function nse(n){return n&&p_(n.canActivate)}(a)?a.canActivate(t,n):s.runInContext(()=>a(t,n))).pipe(Cc())}));return M(r).pipe(Lf())}(n,r.route,e))),Cc(r=>!0!==r,!0))}(i,o,n,t):M(a)),Ce(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ni(l=>{if(o.guardsResult=l.guardsResult,Zu(l.guardsResult))throw Zj(0,l.guardsResult);const c=new xoe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ai(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),d1(l=>{if(l.guards.canActivateChecks.length)return M(l).pipe(Ni(c=>{const u=new Doe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Le(c=>{let u=!1;return M(c).pipe(Mse(e.paramsInheritanceStrategy,this.environmentInjector),Ni({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),Ni(c=>{const u=new Soe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),d1(l=>{const c=u=>{const f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ni(g=>{u.component=g}),Ce(()=>{})));for(const g of u.children)f.push(...c(g));return f};return bE(c(l.targetSnapshot.root)).pipe(wE(),Zi(1))}),d1(()=>this.afterPreactivation()),Ce(l=>{const c=function Boe(n,t,e){const i=u_(n,t._root,e?e._root:void 0);return new $j(i,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:c},o}),Ni(()=>{this.events.next(new JS)}),((n,t,e,i)=>Ce(r=>(new Zoe(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Zi(1),Ni({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),tn(this.transitionAbortSubject.pipe(Ni(l=>{throw l}))),Rf(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ic(l=>{if(a=!0,Qj(l))this.events.next(new l_(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function Hoe(n){return Qj(n)&&Zu(n.url)}(l)?this.events.next(new XS(l.url)):o.resolve(!1);else{this.events.next(new RE(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(l))}catch(c){o.reject(c)}}return mn}))}))}cancelNavigationTransition(e,i,r){const o=new l_(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uH(n){return n!==a_}let dH=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===At);return i}getResolvedTitleForRoute(e){return e.data[t_]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return be(Bse)},providedIn:"root"})}return n})(),Bse=(()=>{class n extends dH{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(P(aU))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Use=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return be(Hse)},providedIn:"root"})}return n})();class jse{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Hse=(()=>{class n extends jse{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ai(n)))(r||n)}}();static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const VE=new de("",{providedIn:"root",factory:()=>({})});let $se=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:function(){return be(zse)},providedIn:"root"})}return n})(),zse=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var m_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(m_||{});function hH(n,t){n.events.pipe(ai(e=>e instanceof Dc||e instanceof l_||e instanceof RE||e instanceof kf),Ce(e=>e instanceof Dc||e instanceof kf?m_.COMPLETE:e instanceof l_&&(0===e.code||1===e.code)?m_.REDIRECTING:m_.FAILED),ai(e=>e!==m_.REDIRECTING),Zi(1)).subscribe(()=>{t()})}function Gse(n){throw n}function Wse(n,t,e){return t.parse("/")}const qse={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kse={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(FV),this.isNgZoneEnabled=!1,this._events=new $,this.options=be(VE,{optional:!0})||{},this.pendingTasks=be(P0),this.errorHandler=this.options.errorHandler||Gse,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Wse,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be($se),this.routeReuseStrategy=be(Use),this.titleStrategy=be(dH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(Bf,{optional:!0})?.flat()??[],this.navigationTransitions=be(LE),this.urlSerializer=be(i_),this.location=be($0),this.componentInputBindingEnabled=!!be(ME,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=be(We)instanceof We&&We.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zj(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(fH(i)&&this._events.next(i));if(i instanceof AE)uH(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof kf)this.rawUrlTree=r.rawUrl;else if(i instanceof Uj){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof JS)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof l_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof XS){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uH(r.source)};this.scheduleNavigation(o,a_,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof RE&&this.restoreHistory(r,!0),i instanceof Dc&&(this.navigated=!0),fH(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),a_,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(l1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s;let f,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...o};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}null!==u&&(u=this.removeEmptyProps(u));try{f=kj(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return Oj(f,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Zu(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,a_,null,i)}navigate(e,i={skipLocationChange:!1}){return function Zse(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new z(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...qse}:!1===i?{...Kse}:i,Zu(e))return Cj(this.currentUrlTree,e,r);const o=this.parseUrl(e);return Cj(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((f,g)=>{a=f,l=g});const u=this.pendingTasks.add();return hH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fH(n){return!(n instanceof JS||n instanceof XS)}let BE=(()=>{class n{constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Dc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function YP(n,t,e){return function KZ(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?ZP:mx}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(N(Fo),N(Pf),function hc(n){return function kb(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const o=e[r];if(Hy(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(o===t)return e[r+1];r+=2}}}return null}(Vi(),n)}("tabindex"),N(Xo),N(wt),N(ju))};static#t=this.\u0275dir=me({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&Be("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&i&&on("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",bf],skipLocationChange:["skipLocationChange","skipLocationChange",bf],replaceUrl:["replaceUrl","replaceUrl",bf],routerLink:"routerLink"},standalone:!0,features:[aL,Si]})}return n})(),pH=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,o,s){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Qe,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Dc&&this.update()})}ngAfterContentInit(){M(this.links.changes,M(null)).pipe(an()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=w(e).pipe(an()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function Yse(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static#e=this.\u0275fac=function(i){return new(i||n)(N(Fo),N(wt),N(Xo),N(bo),N(BE,8))};static#t=this.\u0275dir=me({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(1&i&&An(o,BE,5),2&i){let s;mt(s=gt())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Si]})}return n})();class mH{}let Qse=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ai(e=>e instanceof Dc),Sf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=vD(o.providers,e,`Route: ${o.path}`));const s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return w(r).pipe(an())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):M(null);const o=r.pipe(qt(s=>null===s?M(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return i.loadComponent&&!i._loadedComponent?w([o,this.loader.loadComponent(i)]).pipe(an()):o})}static#e=this.\u0275fac=function(i){return new(i||n)(P(Fo),P(LV),P(go),P(mH),P(h1))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const f1=new de("");let gH=(()=>{class n{constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof AE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Dc?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof kf&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof jj&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jj(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){Tg()};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function Sl(n,t){return{\u0275kind:n,\u0275providers:t}}function vH(){const n=be(Wi);return t=>{const e=n.get(ka);if(t!==e.components[0])return;const i=n.get(Fo),r=n.get(yH);1===n.get(p1)&&i.initialNavigation(),n.get(bH,null,kt.Optional)?.setUpPreloading(),n.get(f1,null,kt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const yH=new de("",{factory:()=>new $}),p1=new de("",{providedIn:"root",factory:()=>1}),bH=new de("");function tae(n){return Sl(0,[{provide:bH,useExisting:Qse},{provide:mH,useExisting:n}])}const EH=new de("ROUTER_FORROOT_GUARD"),iae=[$0,{provide:i_,useClass:qS},Fo,c_,{provide:Pf,useFactory:function _H(n){return n.routerState.root},deps:[Fo]},h1,[]];function rae(){return new zV("Router",Fo)}let wH=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[iae,[],{provide:Bf,multi:!0,useValue:e},{provide:EH,useFactory:lae,deps:[[Fo,new Ts,new cg]]},{provide:VE,useValue:i||{}},i?.useHash?{provide:ju,useClass:Dte}:{provide:ju,useClass:EB},{provide:f1,useFactory:()=>{const n=be(Hne),t=be(We),e=be(VE),i=be(LE),r=be(i_);return e.scrollOffset&&n.setOffset(e.scrollOffset),new gH(r,i,n,t,e)}},i?.preloadingStrategy?tae(i.preloadingStrategy).\u0275providers:[],{provide:zV,multi:!0,useFactory:rae},i?.initialNavigation?cae(i):[],i?.bindToComponentInputs?Sl(8,[Kj,{provide:ME,useExisting:Kj}]).\u0275providers:[],[{provide:TH,useFactory:vH},{provide:HD,multi:!0,useExisting:TH}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Bf,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(P(EH,8))};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();function lae(n){return"guarded"}function cae(n){return["disabled"===n.initialNavigation?Sl(3,[{provide:OD,multi:!0,useFactory:()=>{const t=be(Fo);return()=>{t.setUpLocationChangeListener()}}},{provide:p1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Sl(2,[{provide:p1,useValue:0},{provide:OD,multi:!0,deps:[Wi],useFactory:t=>{const e=t.get(Ite,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(Fo),o=t.get(yH);hH(r,()=>{i(!0)}),t.get(LE).afterPreactivation=()=>(i(!0),o.closed?M(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const TH=new de("");let dae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-home"]],decls:0,vars:0,template:function(i,r){}})}return n})();var Ns=et(534);(0,Ns.registerVersion)("firebase","10.5.2","app");class pae extends yt{constructor(t,e){super()}schedule(t,e=0){return this}}const UE={setInterval(n,t,...e){const{delegate:i}=UE;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=UE;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class jE extends pae{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return UE.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&UE.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Ge(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const m1={now:()=>(m1.delegate||Date).now(),delegate:void 0};class g_{constructor(t,e=g_.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}g_.now=m1.now;class HE extends g_{constructor(t,e=g_.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const _ae=new class gae extends HE{}(class mae extends jE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(t,e,i):(t.flush(this),0)}}),Yu=new HE(jE),vae=Yu,__=new pc("ANGULARFIRE2_VERSION");class g1{constructor(){return((n,t)=>{const e=t?[t]:(0,Ns.getApps)(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i})(bae)}}const bae="app-check";function Uf(){}class IH{zone;delegate;constructor(t,e=_ae){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){const r=this.zone;return this.delegate.schedule(function(s){r.runGuarded(()=>{t.apply(this,[s])})},e,i)}}class Eae{zone;task=null;constructor(t){this.zone=t}call(t,e){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uf,{},Uf,Uf)),e.pipe(Ni({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _1=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new IH(Zone.current)),this.insideAngular=e.run(()=>new IH(Zone.current,Yu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(P(We))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Qu(n){return jf().ngZone.run(()=>n())}function or(n){return function Tae(n){return function(e){return(e=e.lift(new Eae(n.ngZone))).pipe(hr(n.outsideAngular),xi(n.insideAngular))}}(jf())(n)}const Cae=(n,t)=>function(){const i=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),Qu(()=>n.apply(void 0,i))},Iae=(n,t)=>function(){let e;const i=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof i[o]&&(t&&(e||=Qu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uf,{},Uf,Uf))),i[o]=Cae(i[o],e));const r=function wae(n){return jf().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,i));if(!t){if(r instanceof it){const o=jf();return r.pipe(hr(o.outsideAngular),xi(o.insideAngular))}return Qu(()=>r)}return r instanceof it?r.pipe(or):r instanceof Promise?Qu(()=>new Promise((o,s)=>r.then(a=>Qu(()=>o(a)),a=>Qu(()=>s(a))))):"function"==typeof r&&e?function(){return setTimeout(()=>{e&&"scheduled"===e.state&&e.invoke()},10),r.apply(this,arguments)}:Qu(()=>r)};var ta=et(106);ta.Z.registerVersion("firebase","10.5.2","app-compat");const Sae=["ngOnDestroy"];class xH{constructor(t){return t}}const v_=new de("angularfire2.app.options"),y_=new de("angularfire2.app.name");function $E(n,t,e){const r="object"==typeof e&&e||{};r.name=r.name||"string"==typeof e&&e||"[DEFAULT]";const s=ta.Z.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>ta.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;Nae("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new xH(s)}const Nae=(n,...t)=>{},Mae={provide:xH,useFactory:$E,deps:[v_,We,[new Ts,y_]]};let kae=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:v_,useValue:e},{provide:y_,useValue:i}]}}constructor(e){ta.Z.registerVersion("angularfire",__.full,"core"),ta.Z.registerVersion("angularfire",__.full,"app-compat"),ta.Z.registerVersion("angular",uF.full,e.toString())}static \u0275fac=function(i){return new(i||n)(P(Cs))};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[Mae]})}return n})();function v1(n,t,e,i,r){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function Oae(n,t){try{return n.toString()===t.toString()}catch{return n===t}}(r,s)||(DH("error",`${t} was already initialized on the ${e} Firebase App with different settings.${Pae?" You may need to reload as Firebase is not HMR aware.":""}`),DH("warn",{is:r,was:s})),o;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const Pae=typeof module<"u"&&!!module.hot,DH=(n,...t)=>{};globalThis.\u0275AngularfireInstanceCache||=[],et(365);class Fae extends ${constructor(t=1/0,e=1/0,i=m1){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}}function y1(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,oe({connector:()=>new Fae(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function SH(n,t){return D(t)?Le(()=>n,t):Le(()=>n)}const b1=new de("angularfire2.auth.use-emulator"),E1=new de("angularfire2.auth.settings"),w1=new de("angularfire2.auth.tenant-id"),T1=new de("angularfire2.auth.langugage-code"),C1=new de("angularfire2.auth.use-device-language"),I1=new de("angularfire.auth.persistence"),x1=(n,t,e,i,r,o,s,a)=>v1(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(const[c,u]of Object.entries(s))l.settings[c]=u;return a&&l.setPersistence(a),l},[e,i,r,o,s,a]);let b_=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,o,s,a,l,c,u,f,g,_){const y=new $,b=M(void 0).pipe(xi(s.outsideAngular),Le(()=>o.runOutsideAngular(()=>Promise.resolve().then(et.bind(et,365)))),Ce(()=>$E(e,o,i)),Ce(C=>x1(C,o,a,c,u,f,l,g)),y1({bufferSize:1,refCount:!1}));if(iE(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=M(null);else{b.pipe(Cc()).subscribe();const C=b.pipe(Le(V=>V.getRedirectResult().then(W=>W,()=>null)),or,y1({bufferSize:1,refCount:!1})),O=b.pipe(Le(V=>new it(W=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(ae=>W.next(ae),ae=>W.error(ae),()=>W.complete()))})))),S=b.pipe(Le(V=>new it(W=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(ae=>W.next(ae),ae=>W.error(ae),()=>W.complete()))}))));this.authState=C.pipe(SH(O),hr(s.outsideAngular),xi(s.insideAngular)),this.user=C.pipe(SH(S),hr(s.outsideAngular),xi(s.insideAngular)),this.idToken=this.user.pipe(Le(V=>V?w(V.getIdToken()):M(null))),this.idTokenResult=this.user.pipe(Le(V=>V?w(V.getIdTokenResult()):M(null))),this.credential=I(C,y,this.authState.pipe(ai(V=>!V))).pipe(Ce(V=>V?.user?V:null),hr(s.outsideAngular),xi(s.insideAngular))}return((n,t,e,i={})=>new Proxy(n,{get:(r,o)=>e.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(Sae.indexOf(o)>-1)return()=>{};const s=t.toPromise().then(a=>{const l=a?.[o];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>e.run(()=>c)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(u=>{const f=u?.(...c);return i?.spy?.apply&&i.spy.apply(o,c,f),f})})})}))(this,b,o,{spy:{apply:(C,O,S)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&S.then(V=>y.next(V))}}})}static \u0275fac=function(i){return new(i||n)(P(v_),P(y_,8),P(Cs),P(We),P(_1),P(b1,8),P(E1,8),P(w1,8),P(T1,8),P(C1,8),P(I1,8),P(g1,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Vae=(()=>{class n{constructor(){ta.Z.registerVersion("angularfire",__.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[b_]})}return n})();function zE(...n){const t=ao(n);return se((e,i)=>{const r=n.length,o=new Array(r);let s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)ye(n[l]).subscribe(De(i,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(zn))&&(s=null))},He));e.subscribe(De(i,l=>{if(a){const c=[l,...o];i.next(t?t(...c):c)}}))})}var Al=et(537),le=et(861),x=et(58),ss=et(879);const AH="@firebase/database";let D1="";function S1(n){D1=n}class Uae{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,x.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,x.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class jae{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,x.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const NH=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Uae(t)}}catch{}return new jae},Ju=NH("localStorage"),A1=NH("sessionStorage"),Hf=new ss.Yd("@firebase/database"),MH=function(){let n=1;return function(){return n++}}(),kH=function(n){const t=(0,x.dS)(n),e=new x.gQ;e.update(t);const i=e.digest();return x.US.encodeByteArray(i)},E_=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=E_.apply(null,i):t+="object"==typeof i?(0,x.Wl)(i):i,t+=" "}return t};let Xu=null,OH=!0;const PH=function(n,t){(0,x.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hf.logLevel=ss.in.VERBOSE,Xu=Hf.log.bind(Hf),t&&A1.set("logging_enabled",!0)):"function"==typeof n?Xu=n:(Xu=null,A1.remove("logging_enabled"))},yr=function(...n){if(!0===OH&&(OH=!1,null===Xu&&!0===A1.get("logging_enabled")&&PH(!0)),Xu){const t=E_.apply(null,n);Xu(t)}},w_=function(n){return function(...t){yr(n,...t)}},R1=function(...n){const t="FIREBASE INTERNAL ERROR: "+E_(...n);Hf.error(t)},La=function(...n){const t=`FIREBASE FATAL ERROR: ${E_(...n)}`;throw Hf.error(t),new Error(t)},Yr=function(...n){const t="FIREBASE WARNING: "+E_(...n);Hf.warn(t)},GE=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Sc="[MIN_NAME]",Rl="[MAX_NAME]",ed=function(n,t){if(n===t)return 0;if(n===Sc||t===Rl)return-1;if(t===Sc||n===Rl)return 1;{const e=VH(n),i=VH(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},zae=function(n,t){return n===t?0:n<t?-1:1},T_=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,x.Wl)(t))},N1=function(n){if("object"!=typeof n||null===n)return(0,x.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,x.Wl)(t[i]),e+=":",e+=N1(n[t[i]]);return e+="}",e},FH=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function br(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const LH=function(n){(0,x.hu)(!GE(n),"Invalid JSON number");const i=1023;let r,o,s,a,l;0===n?(o=0,s=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=a+i,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();const u=c.join("");let f="";for(l=0;l<64;l+=8){let g=parseInt(u.substr(l,8),2).toString(16);1===g.length&&(g="0"+g),f+=g}return f.toLowerCase()},Kae=new RegExp("^-?(0*)\\d{1,10}$"),VH=function(n){if(Kae.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},$f=function(n){try{n()}catch(t){setTimeout(()=>{throw Yr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},C_=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Jae{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Yr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Xae{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(yr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yr(t)}}let I_=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WH="websocket",qH="long_polling";class k1{constructor(t,e,i,r,o=!1,s="",a=!1,l=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ju.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ju.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function KH(n,t,e){let i;if((0,x.hu)("string"==typeof t,"typeof type must == string"),(0,x.hu)("object"==typeof e,"typeof params must == object"),t===WH)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==qH)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ele(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return br(e,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}class tle{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,x.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,x.p$)(this.counters_)}}const O1={},P1={};function F1(n){const t=n.toString();return O1[t]||(O1[t]=new tle),O1[t]}class ile{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&$f(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ac{constructor(t,e,i,r,o,s,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w_(t),this.stats_=F1(e),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),KH(e,qH,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ile(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,x.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new L1((...o)=>{const[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&$H.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ac.forceAllow_=!0}static forceDisallow(){Ac.forceDisallow_=!0}static isAvailable(){return!((0,x.Yr)()||!Ac.forceAllow_&&(Ac.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,x.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,x.h$)(e),r=FH(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,x.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,x.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class L1{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,x.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=MH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=L1.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){yr("frame writing exception"),a.stack&&yr(a.stack),yr(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||yr("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const s=this.pendingSegs.shift();i=i+"&seg"+r+"="+s.seg+"&ts"+r+"="+s.ts+"&d"+r+"="+s.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,x.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{yr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let qE=null;typeof MozWebSocket<"u"?qE=MozWebSocket:typeof WebSocket<"u"&&(qE=WebSocket);let zf=(()=>{class n{constructor(e,i,r,o,s,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w_(this.connId),this.stats_=F1(i),this.connURL=n.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,o,s){const a={v:"5"};return!(0,x.Yr)()&&typeof location<"u"&&location.hostname&&$H.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),o&&(a.ac=o),s&&(a.p=s),KH(e,WH,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ju.set("previous_websocket_failure",!0);try{let r;if((0,x.Yr)()){r={headers:{"User-Agent":`Firebase/5/${D1}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new qE(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==qE&&!n.forceDisallow_}static previouslyFailed(){return Ju.isInMemoryStorage||!0===Ju.get("previous_websocket_failure")}markConnectionHealthy(){Ju.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,x.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,x.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,x.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=FH(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),t$=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ac,zf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=zf&&zf.isAvailable();let r=i&&!zf.previouslyFailed();if(e.webSocketOnly&&(i||Yr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[zf];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class l${constructor(t,e,i,r,o,s,a,l,c,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w_("c:"+this.id+":"),this.transportManager_=new t$(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=C_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=T_("t",t),i=T_("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=T_("t",t),i=T_("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=T_("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?R1("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):R1("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Yr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),C_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):C_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ju.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class c${put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class u${constructor(t){this.allowedEvents_=t,this.listeners_={},(0,x.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===e&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(t){(0,x.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class KE extends u${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,x.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new KE}getInitialEvent(t){return(0,x.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function vn(){return new Rn("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Rc(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Rn(n.pieces_,t)}function B1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function x_(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function f$(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Rn(t,0)}function gi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Rn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Rn(e,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function wo(n,t){const e=$t(n),i=$t(t);if(null===e)return t;if(e===i)return wo(Wn(n),Wn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Ile(n,t){const e=x_(n,0),i=x_(t,0);for(let r=0;r<e.length&&r<i.length;r++){const o=ed(e[r],i[r]);if(0!==o)return o}return e.length===i.length?0:e.length<i.length?-1:1}function U1(n,t){if(Rc(n)!==Rc(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ms(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Rc(n)>Rc(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class xle{constructor(t,e){this.errorPrefix_=e,this.parts_=x_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,x.ug)(this.parts_[i]);p$(this)}}function p$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+td(n))}function td(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class j1 extends u${constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new j1}getInitialEvent(t){return(0,x.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const D_=1e3;let YE,nd=(()=>{class n extends c${constructor(e,i,r,o,s,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=w_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=D_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,x.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");j1.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&KE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const o=++this.requestNumber_,s={r:o,a:e,b:i};this.log_((0,x.Wl)(s)),(0,x.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const i=new x.BH,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,o){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,x.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,x.hu)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:i,query:e,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const s={p:r};e.tag&&(s.q=i._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,o),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,x.r3)(e,"w")){const r=(0,x.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();Yr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,x.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,x.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const s=o.s,a=o.d||"error";this.authToken_===e&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,x.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,i)}sendUnlisten_(e,i,r,o){this.log_("Unlisten on "+e+" for "+i);const s={p:e};o&&(s.q=r,s.t=o),this.sendRequest("n",s)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,o){const s={p:i,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(e,i,r,o){this.putInternal("p",e,i,r,o)}merge(e,i,r,o){this.putInternal("m",e,i,r,o)}putInternal(e,i,r,o,s){this.initConnection_();const a={p:i,d:r};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,x.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):R1("Unrecognized action received from server: "+(0,x.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,x.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=D_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=D_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=D_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,le.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),s=e.id+":"+n.nextConnectionId_++,a=e.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,o())};e.realtime_={close:u,sendRequest:function(_){(0,x.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)}};const g=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[_,y]=yield Promise.all([e.authTokenProvider_.getToken(g),e.appCheckTokenProvider_.getToken(g)]);l?yr("getToken() completed but was canceled"):(yr("getToken() completed. Creating connection."),e.authToken_=_&&_.accessToken,e.appCheckToken_=y&&y.token,c=new l$(s,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,o,b=>{Yr(b+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(_){e.log_("Failed to get token: "+_),l||(e.repoInfo_.nodeAdmin&&Yr(_),u())}}})()}interrupt(e){yr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,x.xb)(this.interruptReasons_)&&(this.reconnectDelay_=D_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(s=>N1(s)).join("$"):"default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,i){const r=new Rn(e).toString();let o;if(this.listens.has(r)){const s=this.listens.get(r);o=s.get(i),s.delete(i),0===s.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,i){yr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){yr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,x.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+D1.replace(/\./g,"-")]=1,(0,x.uI)()?e["framework.cordova"]=1:(0,x.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=KE.getInstance().currentlyOnline();return(0,x.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Xt(t,e)}}class ZE{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Xt(Sc,t),r=new Xt(Sc,e);return 0!==this.compare(i,r)}minPost(){return Xt.MIN}}class _$ extends ZE{static get __EMPTY_NODE(){return YE}static set __EMPTY_NODE(t){YE=t}compare(t,e){return ed(t.name,e.name)}isDefinedOn(t){throw(0,x.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt(Rl,YE)}makePost(t,e){return(0,x.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Xt(t,YE)}toString(){return".key"}}const Va=new _$;class QE{constructor(t,e,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,r&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let $1,na=(()=>{class n{constructor(e,i,r,o,s){this.key=e,this.value=i,this.color=r??n.RED,this.left=o??Lo.EMPTY_NODE,this.right=s??Lo.EMPTY_NODE}copy(e,i,r,o,s){return new n(e??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this;const s=r(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,i,r),null):0===s?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Lo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,o;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Lo.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Lo{constructor(t,e=Lo.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Lo(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,na.BLACK,null,null))}remove(t){return new Lo(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,na.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new QE(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new QE(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new QE(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new QE(this.root_,null,this.comparator_,!0,t)}}function Ole(n,t){return ed(n.name,t.name)}function H1(n,t){return ed(n,t)}Lo.EMPTY_NODE=new class kle{copy(t,e,i,r,o){return this}insert(t,e,i){return new na(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const v$=function(n){return"number"==typeof n?"number:"+LH(n):"string:"+n},y$=function(n){if(n.isLeafNode()){const t=n.val();(0,x.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,x.r3)(t,".sv"),"Priority must be a string or number.")}else(0,x.hu)(n===$1||n.isEmpty(),"priority of unexpected type.");(0,x.hu)(n===$1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let b$,E$,w$,Gf=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,x.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),y$(this.priorityNode_)}static set __childrenNodeConstructor(e){b$=e}static get __childrenNodeConstructor(){return b$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return zt(e)?this:".priority"===$t(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=$t(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,x.hu)(".priority"!==r||1===Rc(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+v$(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?LH(this.value_):this.value_,this.lazyHash_=kH(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,x.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),s=n.VALUE_TYPE_ORDER.indexOf(r);return(0,x.hu)(o>=0,"Unknown leaf type: "+i),(0,x.hu)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ei=new class Vle extends ZE{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),o=i.compareTo(r);return 0===o?ed(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt(Rl,new Gf("[PRIORITY-POST]",w$))}makePost(t,e){const i=E$(t);return new Xt(e,new Gf("[PRIORITY-POST]",i))}toString(){return".priority"}},Ble=Math.log(2);class Ule{constructor(t){this.count=parseInt(Math.log(t+1)/Ble,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const JE=function(n,t,e,i){n.sort(t);const r=function(l,c){const u=c-l;let f,g;if(0===u)return null;if(1===u)return f=n[l],g=e?e(f):f,new na(g,f.node,na.BLACK,null,null);{const _=parseInt(u/2,10)+l,y=r(l,_),b=r(_+1,c);return f=n[_],g=e?e(f):f,new na(g,f.node,na.BLACK,y,b)}},a=function(l){let c=null,u=null,f=n.length;const g=function(y,b){const C=f-y,O=f;f-=y;const S=r(C+1,O),V=n[C],W=e?e(V):V;_(new na(W,V.node,b,null,S))},_=function(y){c?(c.left=y,c=y):(u=y,c=y)};for(let y=0;y<l.count;++y){const b=l.nextBitIsOne(),C=Math.pow(2,l.count-(y+1));b?g(C,na.BLACK):(g(C,na.BLACK),g(C,na.RED))}return u}(new Ule(n.length));return new Lo(i||t,a)};let z1;const Wf={};class Nl{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,x.hu)(Wf&&ei,"ChildrenNode.ts has not been loaded"),z1=z1||new Nl({".priority":Wf},{".priority":ei}),z1}get(t){const e=(0,x.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Lo?e:null}hasIndex(t){return(0,x.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,x.hu)(t!==Va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=e.getIterator(Xt.Wrap);let a,s=o.getNext();for(;s;)r=r||t.isDefinedOn(s.node),i.push(s),s=o.getNext();a=r?JE(i,t.getCompare()):Wf;const l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;const u=Object.assign({},this.indexes_);return u[l]=a,new Nl(u,c)}addToIndexes(t,e){const i=(0,x.UI)(this.indexes_,(r,o)=>{const s=(0,x.DV)(this.indexSet_,o);if((0,x.hu)(s,"Missing index implementation for "+o),r===Wf){if(s.isDefinedOn(t.node)){const a=[],l=e.getIterator(Xt.Wrap);let c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),JE(a,s.getCompare())}return Wf}{const a=e.get(t.name);let l=r;return a&&(l=l.remove(new Xt(t.name,a))),l.insert(t,t.node)}});return new Nl(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,x.UI)(this.indexes_,r=>{if(r===Wf)return r;{const o=e.get(t.name);return o?r.remove(new Xt(t.name,o)):r}});return new Nl(i,this.indexSet_)}}let S_,St=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&y$(this.priorityNode_),this.children_.isEmpty()&&(0,x.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return S_||(S_=new n(new Lo(H1),null,Nl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||S_}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?S_:i}}getChild(e){const i=$t(e);return null===i?this:this.getImmediateChild(i).getChild(Wn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,x.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new Xt(e,i);let o,s;i.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,i),s=this.indexMap_.addToIndexes(r,this.children_));const a=o.isEmpty()?S_:this.priorityNode_;return new n(o,a,s)}}updateChild(e,i){const r=$t(e);if(null===r)return i;{(0,x.hu)(".priority"!==$t(e)||1===Rc(e),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Wn(e),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,o=0,s=!0;if(this.forEachChild(ei,(a,l)=>{i[a]=l.val(e),r++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!e&&s&&o<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+v$(this.getPriority().val())+":"),this.forEachChild(ei,(i,r)=>{const o=r.hash();""!==o&&(e+=":"+i+":"+o)}),this.lazyHash_=""===e?"":kH(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const o=this.resolveIndex_(r);if(o){const s=o.getPredecessorKey(new Xt(e,i));return s?s.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Xt(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Xt(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Xt.Wrap);let s=o.peek();for(;null!=s&&i.compare(s,e)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Xt.Wrap);let s=o.peek();for(;null!=s&&i.compare(s,e)>0;)o.getNext(),s=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===A_?-1:0}withIndex(e){if(e===Va||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Va||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ei),o=i.getIterator(ei);let s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(e){return e===Va?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const A_=new class jle extends St{constructor(){super(new Lo(H1),St.EMPTY_NODE,Nl.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return St.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Xt,{MIN:{value:new Xt(Sc,St.EMPTY_NODE)},MAX:{value:new Xt(Rl,A_)}}),_$.__EMPTY_NODE=St.EMPTY_NODE,Gf.__childrenNodeConstructor=St,function Ple(n){$1=n}(A_),function Lle(n){w$=n}(A_);const Hle=!0;function Ti(n,t=null){if(null===n)return St.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,x.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gf(n,Ti(t));if(n instanceof Array||!Hle){let e=St.EMPTY_NODE;return br(n,(i,r)=>{if((0,x.r3)(n,i)&&"."!==i.substring(0,1)){const o=Ti(r);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(i,o))}}),e.updatePriority(Ti(t))}{const e=[];let i=!1;if(br(n,(s,a)=>{if("."!==s.substring(0,1)){const l=Ti(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),e.push(new Xt(s,l)))}}),0===e.length)return St.EMPTY_NODE;const o=JE(e,Ole,s=>s.name,H1);if(i){const s=JE(e,ei.getCompare());return new St(o,Ti(t),new Nl({".priority":s},{".priority":ei}))}return new St(o,Ti(t),Nl.Default)}}!function Fle(n){E$=n}(Ti);class G1 extends ZE{constructor(t){super(),this.indexPath_=t,(0,x.hu)(!zt(t)&&".priority"!==$t(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),o=i.compareTo(r);return 0===o?ed(t.name,e.name):o}makePost(t,e){const i=Ti(t),r=St.EMPTY_NODE.updateChild(this.indexPath_,i);return new Xt(e,r)}maxPost(){const t=St.EMPTY_NODE.updateChild(this.indexPath_,A_);return new Xt(Rl,t)}toString(){return x_(this.indexPath_,0).join("/")}}const W1=new class $le extends ZE{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?ed(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(t,e){const i=Ti(t);return new Xt(e,i)}toString(){return".value"}};function T$(n){return{type:"value",snapshotNode:n}}function qf(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function R_(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function N_(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class q1{constructor(t){this.index_=t}updateChild(t,e,i,r,o,s){(0,x.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=s&&(i.isEmpty()?t.hasChild(e)?s.trackChildChange(R_(e,a)):(0,x.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(qf(e,i)):s.trackChildChange(N_(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(ei,(r,o)=>{e.hasChild(r)||i.trackChildChange(R_(r,o))}),e.isLeafNode()||e.forEachChild(ei,(r,o)=>{if(t.hasChild(r)){const s=t.getImmediateChild(r);s.equals(o)||i.trackChildChange(N_(r,o,s))}else i.trackChildChange(qf(r,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?St.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class M_{constructor(t){this.indexedFilter_=new q1(t.getIndex()),this.index_=t.getIndex(),this.startPost_=M_.getStartPost_(t),this.endPost_=M_.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,o,s){return this.matches(new Xt(e,i))||(i=St.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,o,s)}updateFullNode(t,e,i){e.isLeafNode()&&(e=St.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(St.EMPTY_NODE);const o=this;return e.forEachChild(ei,(s,a)=>{o.matches(new Xt(s,a))||(r=r.updateImmediateChild(s,St.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Gle{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new M_(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,o,s){return this.rangedFilter_.matches(new Xt(e,i))||(i=St.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,o,s):this.fullLimitUpdateChild_(t,e,i,o,s)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=St.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;r=St.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),s++}}}else{let o;r=e.withIndex(this.index_),r=r.updatePriority(St.EMPTY_NODE),o=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:r=r.updateImmediateChild(a.name,St.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,o){let s;if(this.reverse_){const f=this.index_.getCompare();s=(g,_)=>f(_,g)}else s=this.index_.getCompare();const a=t;(0,x.hu)(a.numChildren()===this.limit_,"");const l=new Xt(e,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(e)){const f=a.getImmediateChild(e);let g=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=g&&(g.name===e||a.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);const _=null==g?1:s(g,l);if(u&&!i.isEmpty()&&_>=0)return o?.trackChildChange(N_(e,i,f)),a.updateImmediateChild(e,i);{o?.trackChildChange(R_(e,f));const b=a.updateImmediateChild(e,St.EMPTY_NODE);return null!=g&&this.rangedFilter_.matches(g)?(o?.trackChildChange(qf(g.name,g.node)),b.updateImmediateChild(g.name,g.node)):b}}return i.isEmpty()?t:u&&s(c,l)>=0?(null!=o&&(o.trackChildChange(R_(c.name,c.node)),o.trackChildChange(qf(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(c.name,St.EMPTY_NODE)):t}}class XE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ei}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,x.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,x.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,x.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,x.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,x.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ei}copy(){const t=new XE;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function K1(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function Z1(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function ew(n,t){const e=n.copy();return e.index_=t,e}function C$(n){const t={};if(n.isDefault())return t;let e;if(n.index_===ei?e="$priority":n.index_===W1?e="$value":n.index_===Va?e="$key":((0,x.hu)(n.index_ instanceof G1,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,x.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,x.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,x.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,x.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,x.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function I$(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==ei&&(t.i=n.index_.toString()),t}class tw extends c${constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=w_("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,x.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const s=tw.getListenId_(t,i),a={};this.listens_[s]=a;const l=C$(t._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let f=u;if(404===c&&(f=null,c=null),null===c&&this.onDataUpdate_(o,f,!1,i),(0,x.DV)(this.listens_,s)===a){let g;g=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(g,null)}})}unlisten(t,e){const i=tw.getListenId_(t,e);delete this.listens_[i]}get(t){const e=C$(t._queryParams),i=t._path.toString(),r=new x.BH;return this.restRequest_(i+".json",e,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(e.auth=r.accessToken),o&&o.token&&(e.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,x.xO)(e);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,x.cI)(a.responseText)}catch{Yr("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Yr("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}}class Qle{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function nw(){return{value:null,children:new Map}}function Kf(n,t,e){if(zt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=$t(t);n.children.has(i)||n.children.set(i,nw()),Kf(n.children.get(i),t=Wn(t),e)}}function Y1(n,t){if(zt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(ei,(i,r)=>{Kf(n,new Rn(i),r)}),Y1(n,t)}}if(n.children.size>0){const e=$t(t);return t=Wn(t),n.children.has(e)&&Y1(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function Q1(n,t,e){null!==n.value?e(t,n.value):function Jle(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{Q1(r,new Rn(t.toString()+"/"+i),e)})}class Xle{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&br(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class nce{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Xle(t);const i=1e4+2e4*Math.random();C_(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;br(t,(r,o)=>{o>0&&(0,x.r3)(this.statsToReport_,r)&&(e[r]=o,i=!0)}),i&&this.server_.reportStats(e),C_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ba=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ba||{});function eA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iw{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Ba.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,x.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Rn(t));return new iw(vn(),e,this.revert)}}return(0,x.hu)($t(this.path)===t,"operationForChild called for unrelated child."),new iw(Wn(this.path),this.affectedTree,this.revert)}}class k_{constructor(t,e){this.source=t,this.path=e,this.type=Ba.LISTEN_COMPLETE}operationForChild(t){return zt(this.path)?new k_(this.source,vn()):new k_(this.source,Wn(this.path))}}class id{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Ba.OVERWRITE}operationForChild(t){return zt(this.path)?new id(this.source,vn(),this.snap.getImmediateChild(t)):new id(this.source,Wn(this.path),this.snap)}}class Zf{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Ba.MERGE}operationForChild(t){if(zt(this.path)){const e=this.children.subtree(new Rn(t));return e.isEmpty()?null:e.value?new id(this.source,vn(),e.value):new Zf(this.source,vn(),e)}return(0,x.hu)($t(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Zf(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nc{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(zt(t))return this.isFullyInitialized()&&!this.filtered_;const e=$t(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ice{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function O_(n,t,e,i,r,o){const s=i.filter(a=>a.type===e);s.sort((a,l)=>function sce(n,t,e){if(null==t.childName||null==e.childName)throw(0,x.g5)("Should only compare child_ events.");const i=new Xt(t.childName,t.snapshotNode),r=new Xt(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),s.forEach(a=>{const l=function oce(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,a,o);r.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,n.query_))})})}function rw(n,t){return{eventCache:n,serverCache:t}}function P_(n,t,e,i){return rw(new Nc(t,e,i),n.serverCache)}function D$(n,t,e,i){return rw(n.eventCache,new Nc(t,e,i))}function ow(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function rd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let tA;class ti{constructor(t,e=(()=>(tA||(tA=new Lo(zae)),tA))()){this.value=t,this.children=e}static fromObject(t){let e=new ti(null);return br(t,(i,r)=>{e=e.set(new Rn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:vn(),value:this.value};if(zt(t))return null;{const i=$t(t),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(Wn(t),e);return null!=o?{path:gi(new Rn(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(zt(t))return this;{const e=$t(t),i=this.children.get(e);return null!==i?i.subtree(Wn(t)):new ti(null)}}set(t,e){if(zt(t))return new ti(e,this.children);{const i=$t(t),o=(this.children.get(i)||new ti(null)).set(Wn(t),e),s=this.children.insert(i,o);return new ti(this.value,s)}}remove(t){if(zt(t))return this.children.isEmpty()?new ti(null):new ti(null,this.children);{const e=$t(t),i=this.children.get(e);if(i){const r=i.remove(Wn(t));let o;return o=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&o.isEmpty()?new ti(null):new ti(this.value,o)}return this}}get(t){if(zt(t))return this.value;{const e=$t(t),i=this.children.get(e);return i?i.get(Wn(t)):null}}setTree(t,e){if(zt(t))return e;{const i=$t(t),o=(this.children.get(i)||new ti(null)).setTree(Wn(t),e);let s;return s=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new ti(this.value,s)}}fold(t){return this.fold_(vn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(gi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,vn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(zt(t))return null;{const o=$t(t),s=this.children.get(o);return s?s.findOnPath_(Wn(t),gi(e,o),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,vn(),e)}foreachOnPath_(t,e,i){if(zt(t))return this;{this.value&&i(e,this.value);const r=$t(t),o=this.children.get(r);return o?o.foreachOnPath_(Wn(t),gi(e,r),i):new ti(null)}}foreach(t){this.foreach_(vn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(gi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class ia{constructor(t){this.writeTree_=t}static empty(){return new ia(new ti(null))}}function F_(n,t,e){if(zt(t))return new ia(new ti(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let o=i.value;const s=wo(r,t);return o=o.updateChild(s,e),new ia(n.writeTree_.set(r,o))}{const r=new ti(e),o=n.writeTree_.setTree(t,r);return new ia(o)}}}function nA(n,t,e){let i=n;return br(e,(r,o)=>{i=F_(i,gi(t,r),o)}),i}function S$(n,t){if(zt(t))return ia.empty();{const e=n.writeTree_.setTree(t,new ti(null));return new ia(e)}}function iA(n,t){return null!=od(n,t)}function od(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(wo(e.path,t)):null}function A$(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ei,(i,r)=>{t.push(new Xt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new Xt(i,r.value))}),t}function Mc(n,t){if(zt(t))return n;{const e=od(n,t);return new ia(null!=e?new ti(e):n.writeTree_.subtree(t))}}function rA(n){return n.writeTree_.isEmpty()}function Yf(n,t){return R$(vn(),n.writeTree_,t)}function R$(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{".priority"===r?((0,x.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):e=R$(gi(n,r),o,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(gi(n,".priority"),i)),e}}function sw(n,t){return P$(t,n)}function hce(n,t){if(n.snap)return Ms(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ms(gi(n.path,e),t))return!0;return!1}function pce(n){return n.visible}function N$(n,t,e){let i=ia.empty();for(let r=0;r<n.length;++r){const o=n[r];if(t(o)){const s=o.path;let a;if(o.snap)Ms(e,s)?(a=wo(e,s),i=F_(i,a,o.snap)):Ms(s,e)&&(a=wo(s,e),i=F_(i,vn(),o.snap.getChild(a)));else{if(!o.children)throw(0,x.g5)("WriteRecord should have .snap or .children");if(Ms(e,s))a=wo(e,s),i=nA(i,a,o.children);else if(Ms(s,e))if(a=wo(s,e),zt(a))i=nA(i,vn(),o.children);else{const l=(0,x.DV)(o.children,$t(a));if(l){const c=l.getChild(Wn(a));i=F_(i,vn(),c)}}}}}return i}function M$(n,t,e,i,r){if(i||r){const o=Mc(n.visibleWrites,t);return!r&&rA(o)?e:r||null!=e||iA(o,vn())?Yf(N$(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Ms(c.path,t)||Ms(t,c.path))},t),e||St.EMPTY_NODE):null}{const o=od(n.visibleWrites,t);if(null!=o)return o;{const s=Mc(n.visibleWrites,t);return rA(s)?e:null!=e||iA(s,vn())?Yf(s,e||St.EMPTY_NODE):null}}}function aw(n,t,e,i){return M$(n.writeTree,n.treePath,t,e,i)}function oA(n,t){return function mce(n,t,e){let i=St.EMPTY_NODE;const r=od(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ei,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(e){const o=Mc(n.visibleWrites,t);return e.forEachChild(ei,(s,a)=>{const l=Yf(Mc(o,new Rn(s)),a);i=i.updateImmediateChild(s,l)}),A$(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}return A$(Mc(n.visibleWrites,t)).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}(n.writeTree,n.treePath,t)}function k$(n,t,e,i){return function gce(n,t,e,i,r){(0,x.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=gi(t,e);if(iA(n.visibleWrites,o))return null;{const s=Mc(n.visibleWrites,o);return rA(s)?r.getChild(e):Yf(s,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function lw(n,t){return function vce(n,t){return od(n.visibleWrites,t)}(n.writeTree,gi(n.treePath,t))}function sA(n,t,e){return function _ce(n,t,e,i){const r=gi(t,e),o=od(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(e)?Yf(Mc(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function O$(n,t){return P$(gi(n.treePath,t),n.writeTree)}function P$(n,t){return{treePath:n,writeTree:t}}class wce{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,x.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,x.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(i,N_(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(i,R_(i,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(i,qf(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,x.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,N_(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const F$=new class Tce{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class aA{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Nc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sA(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rd(this.viewCache_),o=function Ece(n,t,e,i,r,o){return function yce(n,t,e,i,r,o,s){let a;const l=Mc(n.visibleWrites,t),c=od(l,vn());if(null!=c)a=c;else{if(null==e)return[];a=Yf(l,e)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const u=[],f=s.getCompare(),g=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s);let _=g.getNext();for(;_&&u.length<r;)0!==f(_,i)&&u.push(_),_=g.getNext();return u}}(n.writeTree,n.treePath,t,e,i,r,o)}(this.writes_,r,e,1,i,t);return 0===o.length?null:o[0]}}function L$(n,t,e,i,r,o){const s=t.eventCache;if(null!=lw(i,e))return t;{let a,l;if(zt(e))if((0,x.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const c=rd(t),f=oA(i,c instanceof St?c:St.EMPTY_NODE);a=n.filter.updateFullNode(t.eventCache.getNode(),f,o)}else{const c=aw(i,rd(t));a=n.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{const c=$t(e);if(".priority"===c){(0,x.hu)(1===Rc(e),"Can't have a priority with additional path components");const u=s.getNode();l=t.serverCache.getNode();const f=k$(i,e,u,l);a=null!=f?n.filter.updatePriority(u,f):s.getNode()}else{const u=Wn(e);let f;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const g=k$(i,e,s.getNode(),l);f=null!=g?s.getNode().getImmediateChild(c).updateChild(u,g):s.getNode().getImmediateChild(c)}else f=sA(i,c,t.serverCache);a=null!=f?n.filter.updateChild(s.getNode(),c,f,u,r,o):s.getNode()}}return P_(t,a,s.isFullyInitialized()||zt(e),n.filter.filtersNodes())}}function cw(n,t,e,i,r,o,s,a){const l=t.serverCache;let c;const u=s?n.filter:n.filter.getIndexedFilter();if(zt(e))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(e,i);c=u.updateFullNode(l.getNode(),_,null)}else{const _=$t(e);if(!l.isCompleteForPath(e)&&Rc(e)>1)return t;const y=Wn(e),C=l.getNode().getImmediateChild(_).updateChild(y,i);c=".priority"===_?u.updatePriority(l.getNode(),C):u.updateChild(l.getNode(),_,C,y,F$,null)}const f=D$(t,c,l.isFullyInitialized()||zt(e),u.filtersNodes());return L$(n,f,e,r,new aA(r,f,o),a)}function lA(n,t,e,i,r,o,s){const a=t.eventCache;let l,c;const u=new aA(r,t,o);if(zt(e))c=n.filter.updateFullNode(t.eventCache.getNode(),i,s),l=P_(t,c,!0,n.filter.filtersNodes());else{const f=$t(e);if(".priority"===f)c=n.filter.updatePriority(t.eventCache.getNode(),i),l=P_(t,c,a.isFullyInitialized(),a.isFiltered());else{const g=Wn(e),_=a.getNode().getImmediateChild(f);let y;if(zt(g))y=i;else{const b=u.getCompleteChild(f);y=null!=b?".priority"===B1(g)&&b.getChild(f$(g)).isEmpty()?b:b.updateChild(g,i):St.EMPTY_NODE}l=_.equals(y)?t:P_(t,n.filter.updateChild(a.getNode(),f,y,g,u,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function V$(n,t){return n.eventCache.isCompleteForChild(t)}function B$(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function cA(n,t,e,i,r,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=zt(e)?i:new ti(null).setTree(e,i);const u=t.serverCache.getNode();return c.children.inorderTraversal((f,g)=>{if(u.hasChild(f)){const y=B$(0,t.serverCache.getNode().getImmediateChild(f),g);l=cw(n,l,new Rn(f),y,r,o,s,a)}}),c.children.inorderTraversal((f,g)=>{const _=!t.serverCache.isCompleteForChild(f)&&null===g.value;if(!u.hasChild(f)&&!_){const b=B$(0,t.serverCache.getNode().getImmediateChild(f),g);l=cw(n,l,new Rn(f),b,r,o,s,a)}}),l}class Mce{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new q1(i.getIndex()),o=function Wle(n){return n.loadsAllData()?new q1(n.getIndex()):n.hasLimit()?new Gle(n):new M_(n)}(i);this.processor_=function Cce(n){return{filter:n}}(o);const s=e.serverCache,a=e.eventCache,l=r.updateFullNode(St.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(St.EMPTY_NODE,a.getNode(),null),u=new Nc(l,s.isFullyInitialized(),r.filtersNodes()),f=new Nc(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=rw(f,u),this.eventGenerator_=new ice(this.query_)}get query(){return this.query_}}function Pce(n,t){const e=rd(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!zt(t)&&!e.getImmediateChild($t(t)).isEmpty())?e.getChild(t):null}function U$(n){return 0===n.eventRegistrations_.length}function j$(n,t,e){const i=[];if(e){(0,x.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(e,r);s&&i.push(s)})}if(t){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const s=n.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(s)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function H$(n,t,e,i){t.type===Ba.MERGE&&null!==t.source.queryId&&((0,x.hu)(rd(n.viewCache_),"We should always have a full cache before handling merges"),(0,x.hu)(ow(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function xce(n,t,e,i,r){const o=new wce;let s,a;if(e.type===Ba.OVERWRITE){const c=e;c.source.fromUser?s=lA(n,t,c.path,c.snap,i,r,o):((0,x.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!zt(c.path),s=cw(n,t,c.path,c.snap,i,r,a,o))}else if(e.type===Ba.MERGE){const c=e;c.source.fromUser?s=function Sce(n,t,e,i,r,o,s){let a=t;return i.foreach((l,c)=>{const u=gi(e,l);V$(t,$t(u))&&(a=lA(n,a,u,c,r,o,s))}),i.foreach((l,c)=>{const u=gi(e,l);V$(t,$t(u))||(a=lA(n,a,u,c,r,o,s))}),a}(n,t,c.path,c.children,i,r,o):((0,x.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),s=cA(n,t,c.path,c.children,i,r,a,o))}else if(e.type===Ba.ACK_USER_WRITE){const c=e;s=c.revert?function Nce(n,t,e,i,r,o){let s;if(null!=lw(i,e))return t;{const a=new aA(i,t,r),l=t.eventCache.getNode();let c;if(zt(e)||".priority"===$t(e)){let u;if(t.serverCache.isFullyInitialized())u=aw(i,rd(t));else{const f=t.serverCache.getNode();(0,x.hu)(f instanceof St,"serverChildren would be complete if leaf node"),u=oA(i,f)}c=n.filter.updateFullNode(l,u,o)}else{const u=$t(e);let f=sA(i,u,t.serverCache);null==f&&t.serverCache.isCompleteForChild(u)&&(f=l.getImmediateChild(u)),c=null!=f?n.filter.updateChild(l,u,f,Wn(e),a,o):t.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,St.EMPTY_NODE,Wn(e),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=aw(i,rd(t)),s.isLeafNode()&&(c=n.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=lw(i,vn()),P_(t,c,s,n.filter.filtersNodes())}}(n,t,c.path,i,r,o):function Ace(n,t,e,i,r,o,s){if(null!=lw(r,e))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(zt(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return cw(n,t,e,l.getNode().getChild(e),r,o,a,s);if(zt(e)){let c=new ti(null);return l.getNode().forEachChild(Va,(u,f)=>{c=c.set(new Rn(u),f)}),cA(n,t,e,c,r,o,a,s)}return t}{let c=new ti(null);return i.foreach((u,f)=>{const g=gi(e,u);l.isCompleteForPath(g)&&(c=c.set(u,l.getNode().getChild(g)))}),cA(n,t,e,c,r,o,a,s)}}(n,t,c.path,c.affectedTree,i,r,o)}else{if(e.type!==Ba.LISTEN_COMPLETE)throw(0,x.g5)("Unknown operation type: "+e.type);s=function Rce(n,t,e,i,r){const o=t.serverCache;return L$(n,D$(t,o.getNode(),o.isFullyInitialized()||zt(e),o.isFiltered()),e,i,F$,r)}(n,t,e.path,i,o)}const l=o.getChanges();return function Dce(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=ow(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&e.push(T$(ow(t)))}}(t,s,l),{viewCache:s,changes:l}}(n.processor_,r,t,e,i);return function Ice(n,t){(0,x.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,x.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,x.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,$$(n,o.changes,o.viewCache.eventCache.getNode(),null)}function $$(n,t,e,i){return function rce(n,t,e,i){const r=[],o=[];return t.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function zle(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(s.childName,s.snapshotNode))}),O_(n,r,"child_removed",t,i,e),O_(n,r,"child_added",t,i,e),O_(n,r,"child_moved",o,i,e),O_(n,r,"child_changed",t,i,e),O_(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let uw,hw;class z${constructor(){this.views=new Map}}function uA(n,t,e,i){const r=t.source.queryId;if(null!==r){const o=n.views.get(r);return(0,x.hu)(null!=o,"SyncTree gave us an op for an invalid query."),H$(o,t,e,i)}{let o=[];for(const s of n.views.values())o=o.concat(H$(s,t,e,i));return o}}function G$(n,t,e,i,r){const s=n.views.get(t._queryIdentifier);if(!s){let a=aw(e,r?i:null),l=!1;a?l=!0:i instanceof St?(a=oA(e,i),l=!1):(a=St.EMPTY_NODE,l=!1);const c=rw(new Nc(a,l,!1),new Nc(i,r,!1));return new Mce(t,c)}return s}function W$(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function kc(n,t){let e=null;for(const i of n.views.values())e=e||Pce(i,t);return e}function q$(n,t){return t._queryParams.loadsAllData()?dw(n):n.views.get(t._queryIdentifier)}function K$(n,t){return null!=q$(n,t)}function Oc(n){return null!=dw(n)}function dw(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Gce=1;class Z${constructor(t){this.listenProvider_=t,this.syncPointTree_=new ti(null),this.pendingWriteTree_=function bce(){return{visibleWrites:ia.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dA(n,t,e,i,r){return function lce(n,t,e,i,r){(0,x.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=F_(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Qf(n,new id({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Pc(n,t,e=!1){const i=function uce(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function dce(n,t){const e=n.allWrites.findIndex(a=>a.writeId===t);(0,x.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,o=!1,s=n.allWrites.length-1;for(;r&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=e&&hce(a,i.path)?r=!1:Ms(i.path,a.path)&&(o=!0)),s--}return!!r&&(o?(function fce(n){n.visibleWrites=N$(n.allWrites,pce,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=S$(n.visibleWrites,i.path):br(i.children,l=>{n.visibleWrites=S$(n.visibleWrites,gi(i.path,l))}),!0))}(n.pendingWriteTree_,t)){let o=new ti(null);return null!=i.snap?o=o.set(vn(),!0):br(i.children,s=>{o=o.set(new Rn(s),!0)}),Qf(n,new iw(i.path,o,e))}return[]}function L_(n,t,e){return Qf(n,new id({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function fw(n,t,e,i,r=!1){const o=t._path,s=n.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||K$(s,t))){const l=function Hce(n,t,e,i){const r=t._queryIdentifier,o=[];let s=[];const a=Oc(n);if("default"===r)for(const[l,c]of n.views.entries())s=s.concat(j$(c,e,i)),U$(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=n.views.get(r);l&&(s=s.concat(j$(l,e,i)),U$(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Oc(n)&&o.push(new(function Bce(){return(0,x.hu)(uw,"Reference.ts has not been loaded"),uw}())(t._repo,t._path)),{removed:o,events:s}}(s,t,e,i);(function Uce(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!r){const u=-1!==c.findIndex(g=>g._queryParams.loadsAllData()),f=n.syncPointTree_.findOnPath(o,(g,_)=>Oc(_));if(u&&!f){const g=n.syncPointTree_.subtree(o);if(!g.isEmpty()){const _=function Jce(n){return n.fold((t,e,i)=>{if(e&&Oc(e))return[dw(e)];{let r=[];return e&&(r=W$(e)),br(i,(o,s)=>{r=r.concat(s)}),r}})}(g);for(let y=0;y<_.length;++y){const b=_[y],C=b.query,O=X$(n,b);n.listenProvider_.startListening(B_(C),V_(n,C),O.hashFn,O.onComplete)}}}!f&&c.length>0&&!i&&(u?n.listenProvider_.stopListening(B_(t),null):c.forEach(g=>{const _=n.queryToTagMap.get(mw(g));n.listenProvider_.stopListening(B_(g),_)}))}!function Xce(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=mw(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,c)}return a}function Y$(n,t,e,i){const r=fA(n,i);if(null!=r){const o=pA(r),s=o.path,a=o.queryId,l=wo(s,t);return mA(n,s,new id(eA(a),l,e))}return[]}function hA(n,t,e,i=!1){const r=t._path;let o=null,s=!1;n.syncPointTree_.foreachOnPath(r,(g,_)=>{const y=wo(g,r);o=o||kc(_,y),s=s||Oc(_)});let l,a=n.syncPointTree_.get(r);a?(s=s||Oc(a),o=o||kc(a,vn())):(a=new z$,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=o?l=!0:(l=!1,o=St.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((_,y)=>{const b=kc(y,vn());b&&(o=o.updateImmediateChild(_,b))}));const c=K$(a,t);if(!c&&!t._queryParams.loadsAllData()){const g=mw(t);(0,x.hu)(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");const _=function eue(){return Gce++}();n.queryToTagMap.set(g,_),n.tagToQueryMap.set(_,g)}let f=function jce(n,t,e,i,r,o){const s=G$(n,t,i,r,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,s),function Fce(n,t){n.eventRegistrations_.push(t)}(s,e),function Lce(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ei,(o,s)=>{i.push(qf(o,s))}),e.isFullyInitialized()&&i.push(T$(e.getNode())),$$(n,i,e.getNode(),t)}(s,e)}(a,t,e,sw(n.pendingWriteTree_,r),o,l);if(!c&&!s&&!i){const g=q$(a,t);f=f.concat(function tue(n,t,e){const i=t._path,r=V_(n,t),o=X$(n,e),s=n.listenProvider_.startListening(B_(t),r,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(i);if(r)(0,x.hu)(!Oc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,f)=>{if(!zt(c)&&u&&Oc(u))return[dw(u).query];{let g=[];return u&&(g=g.concat(W$(u).map(_=>_.query))),br(f,(_,y)=>{g=g.concat(y)}),g}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(B_(u),V_(n,u))}}return s}(n,t,g))}return f}function pw(n,t,e){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(s,a)=>{const c=kc(a,wo(s,t));if(c)return c});return M$(r,t,o,e,!0)}function Qf(n,t){return Q$(t,n.syncPointTree_,null,sw(n.pendingWriteTree_,vn()))}function Q$(n,t,e,i){if(zt(n.path))return J$(n,t,e,i);{const r=t.get(vn());null==e&&null!=r&&(e=kc(r,vn()));let o=[];const s=$t(n.path),a=n.operationForChild(s),l=t.children.get(s);if(l&&a){const c=e?e.getImmediateChild(s):null,u=O$(i,s);o=o.concat(Q$(a,l,c,u))}return r&&(o=o.concat(uA(r,n,i,e))),o}}function J$(n,t,e,i){const r=t.get(vn());null==e&&null!=r&&(e=kc(r,vn()));let o=[];return t.children.inorderTraversal((s,a)=>{const l=e?e.getImmediateChild(s):null,c=O$(i,s),u=n.operationForChild(s);u&&(o=o.concat(J$(u,a,l,c)))}),r&&(o=o.concat(uA(r,n,i,e))),o}function X$(n,t){const e=t.query,i=V_(n,e);return{hashFn:()=>(function kce(n){return n.viewCache_.serverCache.getNode()}(t)||St.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Zce(n,t,e){const i=fA(n,e);if(i){const r=pA(i),o=r.path,s=r.queryId,a=wo(o,t);return mA(n,o,new k_(eA(s),a))}return[]}(n,e._path,i):function Kce(n,t){return Qf(n,new k_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function qae(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return fw(n,e,null,o)}}}}function V_(n,t){const e=mw(t);return n.queryToTagMap.get(e)}function mw(n){return n._path.toString()+"$"+n._queryIdentifier}function fA(n,t){return n.tagToQueryMap.get(t)}function pA(n){const t=n.indexOf("$");return(0,x.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Rn(n.substr(0,t))}}function mA(n,t,e){const i=n.syncPointTree_.get(t);return(0,x.hu)(i,"Missing sync point for query tag that we're tracking"),uA(i,e,sw(n.pendingWriteTree_,t),null)}function B_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function zce(){return(0,x.hu)(hw,"Reference.ts has not been loaded"),hw}())(n._repo,n._path):n}class gA{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new gA(e)}node(){return this.node_}}class _A{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=gi(this.path_,t);return new _A(this.syncTree_,e)}node(){return pw(this.syncTree_,this.path_)}}const nue=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},ez=function(n,t,e){return n&&"object"==typeof n?((0,x.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?iue(n[".sv"],t,e):"object"==typeof n[".sv"]?rue(n[".sv"],t):void(0,x.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},iue=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,x.hu)(!1,"Unexpected server value: "+n)},rue=function(n,t,e){n.hasOwnProperty("increment")||(0,x.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,x.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,x.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},tz=function(n,t,e,i){return yA(t,new _A(e,n),i)},vA=function(n,t,e){return yA(n,new gA(t),e)};function yA(n,t,e){const i=n.getPriority().val(),r=ez(i,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const s=n,a=ez(s.getValue(),t,e);return a!==s.getValue()||r!==s.getPriority().val()?new Gf(a,Ti(r)):n}{const s=n;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Gf(r))),s.forEachChild(ei,(a,l)=>{const c=yA(l,t.getImmediateChild(a),e);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}class bA{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function gw(n,t){let e=t instanceof Rn?t:new Rn(t),i=n,r=$t(e);for(;null!==r;){const o=(0,x.DV)(i.node.children,r)||{children:{},childCount:0};i=new bA(r,i,o),e=Wn(e),r=$t(e)}return i}function sd(n){return n.node.value}function EA(n,t){n.node.value=t,wA(n)}function nz(n){return n.node.childCount>0}function _w(n,t){br(n.node.children,(e,i)=>{t(new bA(e,n,i))})}function iz(n,t,e,i){e&&!i&&t(n),_w(n,r=>{iz(r,t,!0,i)}),e&&i&&t(n)}function U_(n){return new Rn(null===n.parent?n.name:U_(n.parent)+"/"+n.name)}function wA(n){null!==n.parent&&function aue(n,t,e){const i=function oue(n){return void 0===sd(n)&&!nz(n)}(e),r=(0,x.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,wA(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,wA(n))}(n.parent,n.name,n)}const lue=/[\[\].#$\/\u0000-\u001F\u007F]/,cue=/[\[\].#$\u0000-\u001F\u007F]/,TA=10485760,vw=function(n){return"string"==typeof n&&0!==n.length&&!lue.test(n)},rz=function(n){return"string"==typeof n&&0!==n.length&&!cue.test(n)},j_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!GE(n)||n&&"object"==typeof n&&(0,x.r3)(n,".sv")},Ua=function(n,t,e,i){i&&void 0===t||H_((0,x.gK)(n,"value"),t,e)},H_=function(n,t,e){const i=e instanceof Rn?new xle(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+td(i));if("function"==typeof t)throw new Error(n+"contains a function "+td(i)+" with contents = "+t.toString());if(GE(t))throw new Error(n+"contains "+t.toString()+" "+td(i));if("string"==typeof t&&t.length>TA/3&&(0,x.ug)(t)>TA)throw new Error(n+"contains a string greater than "+TA+" utf8 bytes "+td(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,o=!1;if(br(t,(s,a)=>{if(".value"===s)r=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!vw(s)))throw new Error(n+" contains an invalid key ("+s+") "+td(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Dle(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,x.ug)(t),p$(n)})(i,s),H_(n,a,i),function Sle(n){const t=n.parts_.pop();n.byteLength_-=(0,x.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+td(i)+" in addition to actual children.")}},oz=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,x.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const o=[];br(t,(s,a)=>{const l=new Rn(s);if(H_(r,a,gi(e,l)),".priority"===B1(l)&&!j_(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const o=x_(i);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!vw(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Ile);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ms(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},CA=function(n,t,e){if(!e||void 0!==t){if(GE(t))throw new Error((0,x.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!j_(t))throw new Error((0,x.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$_=function(n,t,e,i){if(!(i&&void 0===e||vw(e)))throw new Error((0,x.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},z_=function(n,t,e,i){if(!(i&&void 0===e||rz(e)))throw new Error((0,x.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},hue=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),z_(n,t,e,i)},ks=function(n,t){if(".info"===$t(t))throw new Error(n+" failed = Can't modify data under /.info/")},sz=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!vw(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rz(n)}(e))throw new Error((0,x.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yw(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],o=r.getPath();null!==e&&!U1(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(r)}e&&n.eventLists_.push(e)}function az(n,t,e){yw(n,e),lz(n,i=>U1(i,t))}function as(n,t,e){yw(n,e),lz(n,i=>Ms(i,t)||Ms(t,i))}function lz(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(pue(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function pue(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Xu&&yr("event: "+e.toString()),$f(i)}}}const cz="repo_interrupt",mue=25;class gue{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nw(),this.transactionQueueTree_=new bA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uz(n){const e=n.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function G_(n){return nue({timestamp:uz(n)})}function dz(n,t,e,i,r){n.dataUpdateCount++;const o=new Rn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let s=[];if(r)if(i){const l=(0,x.UI)(e,c=>Ti(c));s=function Yce(n,t,e,i){const r=fA(n,i);if(r){const o=pA(r),s=o.path,a=o.queryId,l=wo(s,t),c=ti.fromObject(e);return mA(n,s,new Zf(eA(a),l,c))}return[]}(n.serverSyncTree_,o,l,r)}else{const l=Ti(e);s=Y$(n.serverSyncTree_,o,l,r)}else if(i){const l=(0,x.UI)(e,c=>Ti(c));s=function qce(n,t,e){const i=ti.fromObject(e);return Qf(n,new Zf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,o,l)}else{const l=Ti(e);s=L_(n.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Xf(n,o)),as(n.eventQueue_,a,s)}function hz(n,t){IA(n,"connected",t),!1===t&&function Eue(n){Jf(n,"onDisconnectEvents");const t=G_(n),e=nw();Q1(n.onDisconnect_,vn(),(r,o)=>{const s=tz(r,o,n.serverSyncTree_,t);Kf(e,r,s)});let i=[];Q1(e,vn(),(r,o)=>{i=i.concat(L_(n.serverSyncTree_,r,o));const s=AA(n,r);Xf(n,s)}),n.onDisconnect_=nw(),as(n.eventQueue_,vn(),i)}(n)}function IA(n,t,e){const i=new Rn("/.info/"+t),r=Ti(e);n.infoData_.updateSnapshot(i,r);const o=L_(n.infoSyncTree_,i,r);as(n.eventQueue_,i,o)}function bw(n){return n.nextWriteId_++}function xA(n,t,e,i,r){Jf(n,"set",{path:t.toString(),value:e,priority:i});const o=G_(n),s=Ti(e,i),a=pw(n.serverSyncTree_,t),l=vA(s,a,o),c=bw(n),u=dA(n.serverSyncTree_,t,l,c,!0);yw(n.eventQueue_,u),n.server_.put(t.toString(),s.val(!0),(g,_)=>{const y="ok"===g;y||Yr("set at "+t+" failed: "+g);const b=Pc(n.serverSyncTree_,c,!y);as(n.eventQueue_,t,b),Fc(0,r,g,_)});const f=AA(n,t);Xf(n,f),as(n.eventQueue_,f,[])}function wue(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&Y1(n.onDisconnect_,t),Fc(0,e,i,r)})}function fz(n,t,e,i){const r=Ti(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(o,s)=>{"ok"===o&&Kf(n.onDisconnect_,t,r),Fc(0,i,o,s)})}function DA(n,t,e){let i;i=".info"===$t(t._path)?fw(n.infoSyncTree_,t,e):fw(n.serverSyncTree_,t,e),az(n.eventQueue_,t._path,i)}function pz(n){n.persistentConnection_&&n.persistentConnection_.interrupt(cz)}function Jf(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),yr(e,...t)}function Fc(n,t,e,i){t&&$f(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let o=r;i&&(o+=": "+i);const s=new Error(o);s.code=r,t(s)}})}function SA(n,t,e){return pw(n.serverSyncTree_,t,e)||St.EMPTY_NODE}function Ew(n,t=n.transactionQueueTree_){if(t||ww(n,t),sd(t)){const e=gz(n,t);(0,x.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function Sue(n,t,e){const i=e.map(c=>c.currentWriteId),r=SA(n,t,i);let o=r;const s=r.hash();for(let c=0;c<e.length;c++){const u=e[c];(0,x.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const f=wo(t,u.path);o=o.updateChild(f,u.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;n.server_.put(l.toString(),a,c=>{Jf(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const f=[];for(let g=0;g<e.length;g++)e[g].status=2,u=u.concat(Pc(n.serverSyncTree_,e[g].currentWriteId)),e[g].onComplete&&f.push(()=>e[g].onComplete(null,!0,e[g].currentOutputSnapshotResolved)),e[g].unwatcher();ww(n,gw(n.transactionQueueTree_,t)),Ew(n,n.transactionQueueTree_),as(n.eventQueue_,t,u);for(let g=0;g<f.length;g++)$f(f[g])}else{if("datastale"===c)for(let f=0;f<e.length;f++)e[f].status=3===e[f].status?4:0;else{Yr("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<e.length;f++)e[f].status=4,e[f].abortReason=c}Xf(n,t)}},s)}(n,U_(t),e)}else nz(t)&&_w(t,e=>{Ew(n,e)})}function Xf(n,t){const e=mz(n,t),i=U_(e);return function Aue(n,t,e){if(0===t.length)return;const i=[];let r=[];const s=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const l=t[a],c=wo(e,l.path);let f,u=!1;if((0,x.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,f=l.abortReason,r=r.concat(Pc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=mue)u=!0,f="maxretry",r=r.concat(Pc(n.serverSyncTree_,l.currentWriteId,!0));else{const g=SA(n,l.path,s);l.currentInputSnapshot=g;const _=t[a].update(g.val());if(void 0!==_){H_("transaction failed: Data returned ",_,l.path);let y=Ti(_);"object"==typeof _&&null!=_&&(0,x.r3)(_,".priority")||(y=y.updatePriority(g.getPriority()));const C=l.currentWriteId,O=G_(n),S=vA(y,g,O);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=S,l.currentWriteId=bw(n),s.splice(s.indexOf(C),1),r=r.concat(dA(n.serverSyncTree_,l.path,S,l.currentWriteId,l.applyLocally)),r=r.concat(Pc(n.serverSyncTree_,C,!0))}else u=!0,f="nodata",r=r.concat(Pc(n.serverSyncTree_,l.currentWriteId,!0))}as(n.eventQueue_,e,r),r=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&i.push("nodata"===f?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(f),!1,null)))}ww(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)$f(i[a]);Ew(n,n.transactionQueueTree_)}(n,gz(n,e),i),i}function mz(n,t){let e,i=n.transactionQueueTree_;for(e=$t(t);null!==e&&void 0===sd(i);)i=gw(i,e),e=$t(t=Wn(t));return i}function gz(n,t){const e=[];return _z(n,t,e),e.sort((i,r)=>i.order-r.order),e}function _z(n,t,e){const i=sd(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);_w(t,r=>{_z(n,r,e)})}function ww(n,t){const e=sd(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,EA(t,e.length>0?e:void 0)}_w(t,i=>{ww(n,i)})}function AA(n,t){const e=U_(mz(n,t)),i=gw(n.transactionQueueTree_,t);return function sue(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{RA(n,r)}),RA(n,i),iz(i,r=>{RA(n,r)}),e}function RA(n,t){const e=sd(t);if(e){const i=[];let r=[],o=-1;for(let s=0;s<e.length;s++)3===e[s].status||(1===e[s].status?((0,x.hu)(o===s-1,"All SENT items should be at beginning of queue."),o=s,e[s].status=3,e[s].abortReason="set"):((0,x.hu)(0===e[s].status,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(Pc(n.serverSyncTree_,e[s].currentWriteId,!0)),e[s].onComplete&&i.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?EA(t,void 0):e.length=o+1,as(n.eventQueue_,U_(t),r);for(let s=0;s<i.length;s++)$f(i[s])}}const NA=function(n,t){const e=Mue(n),i=e.namespace;return"firebase.com"===e.domain&&La(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&La("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new k1(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Rn(e.pathString)}},Mue=function(n){let t="",e="",i="",r="",o="",s=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let f=n.indexOf("?");-1===f&&(f=n.length),t=n.substring(0,Math.min(u,f)),u<f&&(r=function Rue(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(u,f)));const g=function Nue(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Yr(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,f)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const _=t.slice(0,c);if("localhost"===_.toLowerCase())e="localhost";else if(_.split(".").length<=2)e=_;else{const y=t.indexOf(".");i=t.substring(0,y).toLowerCase(),e=t.substring(y+1),o=i}"ns"in g&&(o=g.ns)}return{host:t,port:l,domain:e,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}},vz="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kue=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const o=new Array(8);for(r=7;r>=0;r--)o[r]=vz.charAt(e%64),e=Math.floor(e/64);(0,x.hu)(0===e,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=vz.charAt(t[r]);return(0,x.hu)(20===s.length,"nextPushId: Length should be 20."),s}}();class yz{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,x.Wl)(this.snapshot.exportVal())}}class bz{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class MA{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,x.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Ez{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new x.BH;return wue(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ks("OnDisconnect.remove",this._path);const t=new x.BH;return fz(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ks("OnDisconnect.set",this._path),Ua("OnDisconnect.set",t,this._path,!1);const e=new x.BH;return fz(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){ks("OnDisconnect.setWithPriority",this._path),Ua("OnDisconnect.setWithPriority",t,this._path,!1),CA("OnDisconnect.setWithPriority",e,!1);const i=new x.BH;return function Tue(n,t,e,i,r){const o=Ti(e,i);n.server_.onDisconnectPut(t.toString(),o.val(!0),(s,a)=>{"ok"===s&&Kf(n.onDisconnect_,t,o),Fc(0,r,s,a)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){ks("OnDisconnect.update",this._path),oz("OnDisconnect.update",t,this._path,!1);const e=new x.BH;return function Cue(n,t,e,i){if((0,x.xb)(e))return yr("onDisconnect().update() called with empty data.  Don't do anything."),void Fc(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,o)=>{"ok"===r&&br(e,(s,a)=>{const l=Ti(a);Kf(n.onDisconnect_,gi(t,s),l)}),Fc(0,i,r,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Vo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return zt(this._path)?null:B1(this._path)}get ref(){return new Os(this._repo,this._path)}get _queryIdentifier(){const t=I$(this._queryParams),e=N1(t);return"{}"===e?"default":e}get _queryObject(){return I$(this._queryParams)}isEqual(t){if(!((t=(0,x.m9)(t))instanceof Vo))return!1;const e=this._repo===t._repo,i=U1(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Cle(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function Tw(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Lc(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Va){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Sc)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Rl)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===ei){if(null!=t&&!j_(t)||null!=e&&!j_(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,x.hu)(n.getIndex()instanceof G1||n.getIndex()===W1,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Cw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Os extends Vo{constructor(t,e){super(t,e,new XE,!1)}get parent(){const t=f$(this._path);return null===t?null:new Os(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class ad{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Rn(t),i=ld(this.ref,t);return new ad(this._node.getChild(e),i,ei)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new ad(r,ld(this.ref,i),ei)))}hasChild(t){const e=new Rn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wz(n,t){return(n=(0,x.m9)(n))._checkNotDeleted("ref"),void 0!==t?ld(n._root,t):n._root}function Tz(n,t){(n=(0,x.m9)(n))._checkNotDeleted("refFromURL");const e=NA(t,n._repo.repoInfo_.nodeAdmin);sz("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&La("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),wz(n,e.path.toString())}function ld(n,t){return null===$t((n=(0,x.m9)(n))._path)?hue("child","path",t,!1):z_("child","path",t,!1),new Os(n._repo,gi(n._path,t))}function kA(n,t){n=(0,x.m9)(n),ks("set",n._path),Ua("set",t,n._path,!1);const e=new x.BH;return xA(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function Vue(n,t){oz("update",t,n._path,!1);const e=new x.BH;return function bue(n,t,e,i){Jf(n,"update",{path:t.toString(),value:e});let r=!0;const o=G_(n),s={};if(br(e,(a,l)=>{r=!1,s[a]=tz(gi(t,a),Ti(l),n.serverSyncTree_,o)}),r)yr("update() called with empty data.  Don't do anything."),Fc(0,i,"ok",void 0);else{const a=bw(n),l=function Wce(n,t,e,i){!function cce(n,t,e,i){(0,x.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=nA(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ti.fromObject(e);return Qf(n,new Zf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,s,a);yw(n.eventQueue_,l),n.server_.merge(t.toString(),e,(c,u)=>{const f="ok"===c;f||Yr("update at "+t+" failed: "+c);const g=Pc(n.serverSyncTree_,a,!f),_=g.length>0?Xf(n,t):t;as(n.eventQueue_,_,g),Fc(0,i,c,u)}),br(e,c=>{const u=AA(n,gi(t,c));Xf(n,u)}),as(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Bue(n){n=(0,x.m9)(n);const t=new MA(()=>{}),e=new W_(t);return function yue(n,t,e){const i=function Qce(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(c,u)=>{const f=wo(c,e);i=i||kc(u,f)});let r=n.syncPointTree_.get(e);r?i=i||kc(r,vn()):(r=new z$,n.syncPointTree_=n.syncPointTree_.set(e,r));const o=null!=i,s=o?new Nc(i,!0,!1):null;return function Oce(n){return ow(n.viewCache_)}(G$(r,t,sw(n.pendingWriteTree_,t._path),o?s.getNode():St.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const o=Ti(r).withIndex(t._queryParams.getIndex());let s;if(hA(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())s=L_(n.serverSyncTree_,t._path,o);else{const a=V_(n.serverSyncTree_,t);s=Y$(n.serverSyncTree_,t._path,o,a)}return as(n.eventQueue_,t._path,s),fw(n.serverSyncTree_,t,e,null,!0),o},r=>(Jf(n,"get for query "+(0,x.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new ad(i,new Os(n._repo,n._path),n._queryParams.getIndex()))}class W_{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new yz("value",this,new ad(t.snapshotNode,new Os(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new bz(this,t,e):null}matches(t){return t instanceof W_&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Iw{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new bz(this,t,e):null}createEvent(t,e){(0,x.hu)(null!=t.childName,"Child events should have a childName.");const i=ld(new Os(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new yz(t.type,this,new ad(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Iw&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function q_(n,t,e,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const l=e,c=(u,f)=>{DA(n._repo,n,a),l(u,f)};c.userCallback=e.userCallback,c.context=e.context,e=c}const s=new MA(e,o||void 0),a="value"===t?new W_(s):new Iw(t,s);return function Iue(n,t,e){let i;i=".info"===$t(t._path)?hA(n.infoSyncTree_,t,e):hA(n.serverSyncTree_,t,e),az(n.eventQueue_,t._path,i)}(n._repo,n,a),()=>DA(n._repo,n,a)}function OA(n,t,e,i){return q_(n,"value",t,e,i)}function Cz(n,t,e,i){return q_(n,"child_added",t,e,i)}function Iz(n,t,e,i){return q_(n,"child_changed",t,e,i)}function xz(n,t,e,i){return q_(n,"child_moved",t,e,i)}function Dz(n,t,e,i){return q_(n,"child_removed",t,e,i)}function Sz(n,t,e){let i=null;const r=e?new MA(e):null;"value"===t?i=new W_(r):t&&(i=new Iw(t,r)),DA(n._repo,n,i)}class ra{}class Az extends ra{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ua("endAt",this._value,t._path,!0);const e=Z1(t._queryParams,this._value,this._key);if(Cw(e),Lc(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vo(t._repo,t._path,e,t._orderByCalled)}}class jue extends ra{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ua("endBefore",this._value,t._path,!1);const e=function Yle(n,t,e){let i;return i=Z1(n,t,n.index_===Va||e?e:Sc),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Cw(e),Lc(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vo(t._repo,t._path,e,t._orderByCalled)}}class Rz extends ra{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ua("startAt",this._value,t._path,!0);const e=K1(t._queryParams,this._value,this._key);if(Cw(e),Lc(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vo(t._repo,t._path,e,t._orderByCalled)}}class zue extends ra{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ua("startAfter",this._value,t._path,!1);const e=function Zle(n,t,e){let i;return i=K1(n,t,n.index_===Va||e?e:Rl),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(Cw(e),Lc(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vo(t._repo,t._path,e,t._orderByCalled)}}class Wue extends ra{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vo(t._repo,t._path,function qle(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Kue extends ra{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vo(t._repo,t._path,function Kle(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Yue extends ra{constructor(t){super(),this._path=t}_apply(t){Tw(t,"orderByChild");const e=new Rn(this._path);if(zt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new G1(e),r=ew(t._queryParams,i);return Lc(r),new Vo(t._repo,t._path,r,!0)}}class Jue extends ra{_apply(t){Tw(t,"orderByKey");const e=ew(t._queryParams,Va);return Lc(e),new Vo(t._repo,t._path,e,!0)}}class ede extends ra{_apply(t){Tw(t,"orderByPriority");const e=ew(t._queryParams,ei);return Lc(e),new Vo(t._repo,t._path,e,!0)}}class nde extends ra{_apply(t){Tw(t,"orderByValue");const e=ew(t._queryParams,W1);return Lc(e),new Vo(t._repo,t._path,e,!0)}}class rde extends ra{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Ua("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Az(this._value,this._key)._apply(new Rz(this._value,this._key)._apply(t))}}function oa(n,...t){let e=(0,x.m9)(n);for(const i of t)e=i._apply(e);return e}(function Vce(n){(0,x.hu)(!uw,"__referenceConstructor has already been defined"),uw=n})(Os),function $ce(n){(0,x.hu)(!hw,"__referenceConstructor has already been defined"),hw=n}(Os);const PA={};function FA(n,t,e,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||La("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yr("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,s=NA(o,r),a=s.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=NA(o,r),a=s.repoInfo):l=!s.repoInfo.secure;const u=r&&l?new I_(I_.OWNER):new Xae(n.name,n.options,t);sz("Invalid Firebase Database URL",s),zt(s.path)||La("Database URL must point to the root of a Firebase Database (not including a child path).");const f=function cde(n,t,e,i){let r=PA[t.name];r||(r={},PA[t.name]=r);let o=r[n.toURLString()];return o&&La("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new gue(n,false,e,i),r[n.toURLString()]=o,o}(a,n,u,new Jae(n.name,e));return new dde(f,n)}class dde{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function _ue(n,t,e){if(n.stats_=F1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new tw(n.repoInfo_,(i,r,o,s)=>{dz(n,i,r,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>hz(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,x.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new nd(n.repoInfo_,t,(i,r,o,s)=>{dz(n,i,r,o,s)},i=>{hz(n,i)},i=>{!function vue(n,t){br(t,(e,i)=>{IA(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function nle(n,t){const e=n.toString();return P1[e]||(P1[e]=t()),P1[e]}(n.repoInfo_,()=>new nce(n.stats_,n.server_)),n.infoData_=new Qle,n.infoSyncTree_=new Z$({startListening:(i,r,o,s)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=L_(n.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),IA(n,"connected",!1),n.serverSyncTree_=new Z$({startListening:(i,r,o,s)=>(n.server_.listen(i,o,r,(a,l)=>{const c=s(a,l);as(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Os(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function lde(n,t){const e=PA[t];(!e||e[n.key]!==n)&&La(`Database ${t}(${n.repoInfo_}) has already been deleted.`),pz(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&La("Cannot call "+t+" on a deleted database.")}}function Mz(){t$.IS_TRANSPORT_INITIALIZED&&Yr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function hde(){Mz(),Ac.forceDisallow()}function fde(){Mz(),zf.forceDisallow(),Ac.forceAllow()}function gde(n,t){PH(n,t)}const vde={".sv":"timestamp"};class Ede{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nd.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},nd.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function _de(n){S1(Ns.SDK_VERSION),(0,Ns._registerComponent)(new Al.wA("database",(t,{instanceIdentifier:e})=>FA(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Ns.registerVersion)(AH,"1.0.1",n),(0,Ns.registerVersion)(AH,"1.0.1","esm2017")}();const Ide=new ss.Yd("@firebase/database-compat"),Oz=function(n){Ide.warn("FIREBASE WARNING: "+n)};class Sde{constructor(t){this._delegate=t}cancel(t){(0,x.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,x.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,x.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,x.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,x.Dv)("OnDisconnect.set",1,2,arguments.length),(0,x.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,x.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,x.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),o=>i(o)),r}update(t,e){if((0,x.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,Oz("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,x.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class Ade{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,x.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Vc{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,x.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,x.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,x.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,x.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,x.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),z_("DataSnapshot.child","path",t,!1),new Vc(this._database,this._delegate.child(t))}hasChild(t){return(0,x.Dv)("DataSnapshot.hasChild",1,1,arguments.length),z_("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,x.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,x.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,x.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Vc(this._database,e)))}hasChildren(){return(0,x.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,x.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,x.Dv)("DataSnapshot.ref",0,0,arguments.length),new ls(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class kr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var o;(0,x.Dv)("Query.on",2,4,arguments.length),(0,x.Wj)("Query.on","callback",e,!1);const s=kr.getCancelAndContextArgs_("Query.on",i,r),a=(c,u)=>{e.call(s.context,new Vc(this.database,c),u)};a.userCallback=e,a.context=s.context;const l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return OA(this._delegate,a,l),e;case"child_added":return Cz(this._delegate,a,l),e;case"child_removed":return Dz(this._delegate,a,l),e;case"child_changed":return Iz(this._delegate,a,l),e;case"child_moved":return xz(this._delegate,a,l),e;default:throw new Error((0,x.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,x.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,x.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,x.Wj)("Query.off","callback",e,!0),(0,x.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,Sz(this._delegate,t,r)}else Sz(this._delegate,t)}get(){return Bue(this._delegate).then(t=>new Vc(this.database,t))}once(t,e,i,r){(0,x.Dv)("Query.once",1,4,arguments.length),(0,x.Wj)("Query.once","callback",e,!0);const o=kr.getCancelAndContextArgs_("Query.once",i,r),s=new x.BH,a=(c,u)=>{const f=new Vc(this.database,c);e&&e.call(o.context,f,u),s.resolve(f)};a.userCallback=e,a.context=o.context;const l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(t){case"value":OA(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Cz(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Dz(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Iz(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":xz(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,x.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return(0,x.Dv)("Query.limitToFirst",1,1,arguments.length),new kr(this.database,oa(this._delegate,function que(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Wue(n)}(t)))}limitToLast(t){return(0,x.Dv)("Query.limitToLast",1,1,arguments.length),new kr(this.database,oa(this._delegate,function Zue(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Kue(n)}(t)))}orderByChild(t){return(0,x.Dv)("Query.orderByChild",1,1,arguments.length),new kr(this.database,oa(this._delegate,function Que(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return z_("orderByChild","path",n,!1),new Yue(n)}(t)))}orderByKey(){return(0,x.Dv)("Query.orderByKey",0,0,arguments.length),new kr(this.database,oa(this._delegate,function Xue(){return new Jue}()))}orderByPriority(){return(0,x.Dv)("Query.orderByPriority",0,0,arguments.length),new kr(this.database,oa(this._delegate,function tde(){return new ede}()))}orderByValue(){return(0,x.Dv)("Query.orderByValue",0,0,arguments.length),new kr(this.database,oa(this._delegate,function ide(){return new nde}()))}startAt(t=null,e){return(0,x.Dv)("Query.startAt",0,2,arguments.length),new kr(this.database,oa(this._delegate,function $ue(n=null,t){return $_("startAt","key",t,!0),new Rz(n,t)}(t,e)))}startAfter(t=null,e){return(0,x.Dv)("Query.startAfter",0,2,arguments.length),new kr(this.database,oa(this._delegate,function Gue(n,t){return $_("startAfter","key",t,!0),new zue(n,t)}(t,e)))}endAt(t=null,e){return(0,x.Dv)("Query.endAt",0,2,arguments.length),new kr(this.database,oa(this._delegate,function Uue(n,t){return $_("endAt","key",t,!0),new Az(n,t)}(t,e)))}endBefore(t=null,e){return(0,x.Dv)("Query.endBefore",0,2,arguments.length),new kr(this.database,oa(this._delegate,function Hue(n,t){return $_("endBefore","key",t,!0),new jue(n,t)}(t,e)))}equalTo(t,e){return(0,x.Dv)("Query.equalTo",1,2,arguments.length),new kr(this.database,oa(this._delegate,function ode(n,t){return $_("equalTo","key",t,!0),new rde(n,t)}(t,e)))}toString(){return(0,x.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,x.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,x.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof kr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,x.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,x.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,x.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new ls(this.database,new Os(this._delegate._repo,this._delegate._path))}}class ls extends kr{constructor(t,e){super(t,new Vo(e._repo,e._path,new XE,!1)),this.database=t,this._delegate=e}getKey(){return(0,x.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,x.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new ls(this.database,ld(this._delegate,t))}getParent(){(0,x.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new ls(this.database,t):null}getRoot(){return(0,x.Dv)("Reference.root",0,0,arguments.length),new ls(this.database,this._delegate.root)}set(t,e){(0,x.Dv)("Reference.set",1,2,arguments.length),(0,x.Wj)("Reference.set","onComplete",e,!0);const i=kA(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,x.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,Oz("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ks("Reference.update",this._delegate._path),(0,x.Wj)("Reference.update","onComplete",e,!0);const i=Vue(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,x.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,x.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Lue(n,t,e){if(ks("setWithPriority",n._path),Ua("setWithPriority",t,n._path,!1),CA("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new x.BH;return xA(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),o=>i(o)),r}remove(t){(0,x.Dv)("Reference.remove",0,1,arguments.length),(0,x.Wj)("Reference.remove","onComplete",t,!0);const e=function Pue(n){return ks("remove",n._path),kA(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,x.Dv)("Reference.transaction",1,3,arguments.length),(0,x.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,x.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,x.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function wde(n,t,e){var i;if(n=(0,x.m9)(n),ks("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,o=new x.BH,a=OA(n,()=>{});return function Due(n,t,e,i,r,o){Jf(n,"transaction on "+t);const s={path:t,update:e,onComplete:i,status:null,order:MH(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=SA(n,t,void 0);s.currentInputSnapshot=a;const l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{H_("transaction failed: Data returned ",l,s.path),s.status=0;const c=gw(n.transactionQueueTree_,t),u=sd(c)||[];let f;u.push(s),EA(c,u),"object"==typeof l&&null!==l&&(0,x.r3)(l,".priority")?(f=(0,x.DV)(l,".priority"),(0,x.hu)(j_(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(pw(n.serverSyncTree_,t)||St.EMPTY_NODE).getPriority().val();const g=G_(n),_=Ti(l,f),y=vA(_,a,g);s.currentOutputSnapshotRaw=_,s.currentOutputSnapshotResolved=y,s.currentWriteId=bw(n);const b=dA(n.serverSyncTree_,t,y,s.currentWriteId,s.applyLocally);as(n.eventQueue_,t,b),Ew(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(l,c,u)=>{let f=null;l?o.reject(l):(f=new ad(u,new Os(n._repo,n._path),ei),o.resolve(new Ede(c,f)))},a,r),o.promise}(this._delegate,t,{applyLocally:i}).then(o=>new Ade(o.committed,new Vc(this.database,o.snapshot)));return e&&r.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),r}setPriority(t,e){(0,x.Dv)("Reference.setPriority",1,2,arguments.length),(0,x.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Fue(n,t){n=(0,x.m9)(n),ks("setPriority",n._path),CA("setPriority",t,!1);const e=new x.BH;return xA(n._repo,gi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,x.Dv)("Reference.push",0,2,arguments.length),(0,x.Wj)("Reference.push","onComplete",e,!0);const i=function Oue(n,t){n=(0,x.m9)(n),ks("push",n._path),Ua("push",t,n._path,!0);const e=uz(n._repo),i=kue(e),r=ld(n,i),o=ld(n,i);let s;return s=null!=t?kA(o,t).then(()=>o):Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}(this._delegate,t),r=i.then(s=>new ls(this.database,s));e&&r.then(()=>e(null),s=>e(s));const o=new ls(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return ks("Reference.onDisconnect",this._delegate._path),new Sde(new Ez(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class K_{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:hde,forceLongPolling:fde}}useEmulator(t,e,i={}){!function kz(n,t,e,i={}){(n=(0,x.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&La("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&La('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new I_(I_.OWNER);else if(i.mockUserToken){const s="string"==typeof i.mockUserToken?i.mockUserToken:(0,x.Sg)(i.mockUserToken,n.app.options.projectId);o=new I_(s)}!function ade(n,t,e,i){n.repoInfo_=new k1(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,o)}(this._delegate,t,e,i)}ref(t){if((0,x.Dv)("database.ref",0,1,arguments.length),t instanceof ls){const e=Tz(this._delegate,t.toString());return new ls(this,e)}{const e=wz(this._delegate,t);return new ls(this,e)}}refFromURL(t){(0,x.Dv)("database.refFromURL",1,1,arguments.length);const i=Tz(this._delegate,t);return new ls(this,i)}goOffline(){return(0,x.Dv)("database.goOffline",0,0,arguments.length),function pde(n){(n=(0,x.m9)(n))._checkNotDeleted("goOffline"),pz(n._repo)}(this._delegate)}goOnline(){return(0,x.Dv)("database.goOnline",0,0,arguments.length),function mde(n){(n=(0,x.m9)(n))._checkNotDeleted("goOnline"),function xue(n){n.persistentConnection_&&n.persistentConnection_.resume(cz)}(n._repo)}(this._delegate)}}K_.ServerValue={TIMESTAMP:function yde(){return vde}(),increment:n=>function bde(n){return{".sv":{increment:n}}}(n)};var Nde=Object.freeze({__proto__:null,initStandalone:function Rde({app:n,url:t,version:e,customAuthImpl:i,customAppCheckImpl:r,namespace:o,nodeAdmin:s=!1}){S1(e);const a=new Al.H0("database-standalone"),l=new Al.zt("auth-internal",a);let c;return l.setComponent(new Al.wA("auth-internal",()=>i,"PRIVATE")),r&&(c=new Al.zt("app-check-internal",a),c.setComponent(new Al.wA("app-check-internal",()=>r,"PRIVATE"))),{instance:new K_(FA(n,l,c,t,s),n),namespace:o}}});const Mde=K_.ServerValue;function Z_(n,t,e="on",i=Yu){return new it(r=>{let o=null;return o=n[e](t,(s,a)=>{i.schedule(()=>{r.next({snapshot:s,prevKey:a})}),"once"===e&&i.schedule(()=>r.complete())},s=>{i.schedule(()=>r.error(s))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe(Ce(r=>{const{snapshot:o,prevKey:s}=r;let a=null;return o.exists()&&(a=o.key),{type:t,payload:o,prevKey:s,key:a}}),oe())}function Pz(n){return null==n}function Fz(n){return"function"==typeof n.set}function Lz(n,t){return Fz(t)?t:n.ref(t)}function Vz(n,t){if(function Ode(n){return"string"==typeof n}(n))return t.stringCase();if(Fz(n))return t.firebaseCase();if(function Pde(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Bz(n){return(Pz(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Uz(n,t,e){return I(...(t=Bz(t)).map(r=>Z_(n,r,"on",e)))}function jz(n,t){return function(i,r){return Vz(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function Bde(n){return function(e){return e?Vz(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Hz(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function Hde(n,t){const{payload:e,prevKey:i,key:r}=t,o=Hz(n,r),s=function jde(n,t){if(Pz(t))return 0;{const e=Hz(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(o>-1)(n[o-1]?.key||null)!==i&&(n=n.filter(l=>l.payload.key!==e.key)).splice(s,0,t);else{if(null==i)return[t,...n];(n=n.slice()).splice(s,0,t)}return n;case"child_removed":return n.filter(a=>a.payload.key!==e.key);case"child_changed":return n.map(a=>a.payload.key===r?t:a);case"child_moved":if(o>-1){const a=n.splice(o,1)[0];return(n=n.slice()).splice(s,0,a),n}return n;default:return n}}function $z(n,t,e){return function Ude(n,t,e){return Z_(n,"value","once",e).pipe(Le(i=>{const r=[M(i)];return t.forEach(o=>r.push(Z_(n,o,"on",e))),I(...r).pipe(Af(Hde,[]))}),dt())}(n,t=Bz(t),e)}function zz(n,t){return function(){return Z_(n,"value","on",t)}}!function kde(n){n.INTERNAL.registerComponent(new Al.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new K_(r,i)},"PUBLIC").setServiceProps({Reference:ls,Query:kr,Database:K_,DataSnapshot:Vc,enableLogging:gde,INTERNAL:Nde,ServerValue:Mde}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.1")}(ta.Z);const Gde=new de("angularfire2.realtimeDatabaseURL"),Wde=new de("angularfire2.database.use-emulator");let Gz=(()=>{class n{schedulers;database;constructor(e,i,r,o,s,a,l,c,u,f,g,_,y,b,C){this.schedulers=a;const O=l,S=$E(e,s,i);c&&x1(S,s,u,g,_,y,f,b),this.database=v1(`${S.name}.database.${r}`,"AngularFireDatabase",S.name,()=>{const V=s.runOutsideAngular(()=>S.database(r||void 0));return O&&V.useEmulator(...O),V},[O])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>Lz(this.database,e));let o=r;return i&&(o=i(r)),function $de(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:jz(i,"update"),set:jz(i,"set"),push:r=>i.push(r),remove:Bde(i),snapshotChanges:r=>$z(n,r,e).pipe(or),stateChanges:r=>Uz(n,r,e).pipe(or),auditTrail:r=>function Fde(n,t,e){return function Vde(n,t,e){return function Lde(n,t){return Z_(n,"value","on",t).pipe(Ce(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(zE(t),Ce(([r,o])=>{const s=r.lastKeyToLoad,a=o.map(l=>l.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),function Bae(n){return se((t,e)=>{let i=!1,r=0;t.subscribe(De(e,o=>(i||(i=!n(o,r++)))&&e.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),Ce(r=>r.actions))}(n,Uz(n,t).pipe(Af((r,o)=>[...r,o],[])),e)}(n,r,e).pipe(or),valueChanges:(r,o)=>$z(n,r,e).pipe(Ce(a=>a.map(l=>o&&o.idField?{...l.payload.val(),[o.idField]:l.key}:l.payload.val())),or)}}(o,this)}object(e){return function zde(n,t){return{query:n,snapshotChanges:()=>zz(n,t.schedulers.outsideAngular)().pipe(or),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>zz(n,t.schedulers.outsideAngular)().pipe(or,Ce(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Lz(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(P(v_),P(y_,8),P(Gde,8),P(Cs),P(We),P(_1),P(Wde,8),P(b_,8),P(b1,8),P(E1,8),P(w1,8),P(T1,8),P(C1,8),P(I1,8),P(g1,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),qde=(()=>{class n{constructor(){ta.Z.registerVersion("angularfire",__.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[Gz]})}return n})();class xw{}class Dw{}class Ps{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ps?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ps;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ps?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Kde{encodeKey(t){return Wz(t)}encodeValue(t){return Wz(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Yde=/%(\d[a-f0-9])/gi,Qde={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Wz(n){return encodeURIComponent(n).replace(Yde,(t,e)=>Qde[e]??t)}function Sw(n){return`${n}`}class Bc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Kde,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Zde(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(Sw):[Sw(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Bc({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Sw(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(Sw(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Jde{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function qz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Kz(n){return typeof Blob<"u"&&n instanceof Blob}function Zz(n){return typeof FormData<"u"&&n instanceof FormData}class Y_{constructor(t,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Xde(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ps),this.context||(this.context=new Jde),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Bc,this.urlWithParams=e}serializeBody(){return null===this.body?null:qz(this.body)||Kz(this.body)||Zz(this.body)||function ehe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Zz(this.body)?null:Kz(this.body)?this.body.type||null:qz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((f,g)=>f.set(g,t.setHeaders[g]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((f,g)=>f.set(g,t.setParams[g]),c)),new Y_(e,i,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}}var ep=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ep||{});class LA{constructor(t,e=200,i="OK"){this.headers=t.headers||new Ps,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class VA extends LA{constructor(t={}){super(t),this.type=ep.ResponseHeader}clone(t={}){return new VA({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class tp extends LA{constructor(t={}){super(t),this.type=ep.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new tp({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Yz extends LA{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function BA(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Q_=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Y_)o=e;else{let l,c;l=r.headers instanceof Ps?r.headers:new Ps(r.headers),r.params&&(c=r.params instanceof Bc?r.params:new Bc({fromObject:r.params})),o=new Y_(e,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=M(o).pipe(Sf(l=>this.handler.handle(l)));if(e instanceof Y_||"events"===r.observe)return s;const a=s.pipe(ai(l=>l instanceof tp));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ce(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ce(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ce(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ce(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Bc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,BA(r,i))}post(e,i,r={}){return this.request("POST",e,BA(r,i))}put(e,i,r={}){return this.request("PUT",e,BA(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(P(xw))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function Xz(n,t){return t(n)}function nhe(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const rhe=new de(""),J_=new de(""),e3=new de("");function ohe(){let n=null;return(t,e)=>{null===n&&(n=(be(rhe,{optional:!0})??[]).reduceRight(nhe,Xz));const i=be(P0),r=i.add();return n(t,e).pipe(Rf(()=>i.remove(r)))}}let t3=(()=>{class n extends xw{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=be(P0)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(J_),...this.injector.get(e3,[])]));this.chain=r.reduceRight((o,s)=>function ihe(n,t,e){return(i,r)=>e.runInContext(()=>t(i,o=>n(o,r)))}(o,s,this.injector),Xz)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Rf(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(P(Dw),P(go))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const che=/^\)\]\}',?\n/;let r3=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new z(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?w(i.\u0275loadImpl()):M(null)).pipe(Le(()=>new it(o=>{const s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((b,C)=>s.setRequestHeader(b,C.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const b=e.detectContentTypeHeader();null!==b&&s.setRequestHeader("Content-Type",b)}if(e.responseType){const b=e.responseType.toLowerCase();s.responseType="json"!==b?b:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const b=s.statusText||"OK",C=new Ps(s.getAllResponseHeaders()),O=function uhe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||e.url;return l=new VA({headers:C,status:s.status,statusText:b,url:O}),l},u=()=>{let{headers:b,status:C,statusText:O,url:S}=c(),V=null;204!==C&&(V=typeof s.response>"u"?s.responseText:s.response),0===C&&(C=V?200:0);let W=C>=200&&C<300;if("json"===e.responseType&&"string"==typeof V){const ae=V;V=V.replace(che,"");try{V=""!==V?JSON.parse(V):null}catch(Ie){V=ae,W&&(W=!1,V={error:Ie,text:V})}}W?(o.next(new tp({body:V,headers:b,status:C,statusText:O,url:S||void 0})),o.complete()):o.error(new Yz({error:V,headers:b,status:C,statusText:O,url:S||void 0}))},f=b=>{const{url:C}=c(),O=new Yz({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});o.error(O)};let g=!1;const _=b=>{g||(o.next(c()),g=!0);let C={type:ep.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(C.total=b.total),"text"===e.responseType&&s.responseText&&(C.partialText=s.responseText),o.next(C)},y=b=>{let C={type:ep.UploadProgress,loaded:b.loaded};b.lengthComputable&&(C.total=b.total),o.next(C)};return s.addEventListener("load",u),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),e.reportProgress&&(s.addEventListener("progress",_),null!==a&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:ep.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",u),s.removeEventListener("timeout",f),e.reportProgress&&(s.removeEventListener("progress",_),null!==a&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(P($B))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const UA=new de("XSRF_ENABLED"),o3=new de("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),s3=new de("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class a3{}let fhe=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=kB(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(Cs),P(o3))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function phe(n,t){const e=n.url.toLowerCase();if(!be(UA)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=be(a3).getToken(),r=be(s3);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Uc=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Uc||{});function mhe(...n){const t=[Q_,r3,t3,{provide:xw,useExisting:t3},{provide:Dw,useExisting:r3},{provide:J_,useValue:phe,multi:!0},{provide:UA,useValue:!0},{provide:a3,useClass:fhe}];for(const e of n)t.push(...e.\u0275providers);return function _x(n){return{\u0275providers:n}}(t)}const l3=new de("LEGACY_INTERCEPTOR_FN");function ghe(){return function cd(n,t){return{\u0275kind:n,\u0275providers:t}}(Uc.LegacyInterceptors,[{provide:l3,useFactory:ohe},{provide:J_,useExisting:l3,multi:!0}])}let _he=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:[mhe(ghe())]})}return n})(),c3=(()=>{class n{constructor(e,i){this.realTimeDatabase=e,this.http=i,this.apiUrl="https://us-central1-project0781.cloudfunctions.net/api/",this.refNotes=e.list("/notes")}getNotes(){return this.refNotes.snapshotChanges().pipe(Ce(e=>e.map(i=>({key:i.payload.key,...i.payload.val()}))))}getWeather(e){return this.http.get(this.apiUrl+`weather?address=${e}`)}createNote(e){this.refNotes.push(e)}deleteNote(e){this.refNotes.remove(e.key)}updateNote(e,i){this.refNotes.update(e,i)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Gz),P(Q_))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),The=(()=>{class n{transform(e,i){return i?(i=i.toLowerCase(),e.filter(r=>r.body.toLowerCase().includes(i))):e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Dr({name:"filter",type:n,pure:!0})}return n})();function Che(n,t){1&n&&Jt(0,"span",10)}const Ihe=function(n,t,e){return{true:n,inputBg:t,inputFocus:e}};function xhe(n,t){if(1&n){const e=qi();te(0,"div",6)(1,"label",7),ot(2,"Keres\xe9s"),ne(),te(3,"input",8),Be("keyup",function(){return Yt(e),Lt(Se().inputClass=!1)})("keypress",function(){return Yt(e),Lt(Se().inputClass=!0)})("ngModelChange",function(r){return Yt(e),Lt(Se().searchWord=r)}),ne(),xe(4,Che,1,0,"span",9),ne()}if(2&n){const e=Se();re(3),ie("ngClass",N0(3,Ihe,e.inputClass,!e.inputClass,""==e.searchWord))("ngModel",e.searchWord),re(1),ie("ngIf",e.searchWord)}}function Dhe(n,t){1&n&&Jt(0,"span",19)}function She(n,t){1&n&&Jt(0,"span",20)}const Ahe=function(n,t){return{"btn-success":n,"btn-warning":t}};function Rhe(n,t){if(1&n){const e=qi();te(0,"form",11)(1,"label",12),ot(2,"C\xedm"),ne(),te(3,"input",13),Be("ngModelChange",function(r){return Yt(e),Lt(Se().title=r)}),ne(),te(4,"label",14),ot(5,"Tennival\xf3"),ne(),te(6,"textarea",15),Be("ngModelChange",function(r){return Yt(e),Lt(Se().body=r)}),ne(),te(7,"button",16),Be("click",function(){return Yt(e),Lt(Se().createUpdateControl())}),xe(8,Dhe,1,0,"span",17),xe(9,She,1,0,"span",18),ot(10),ne()()}if(2&n){const e=Se();re(3),ie("ngModel",e.title),re(3),ie("ngModel",e.body),re(1),ie("ngClass",Bu(6,Ahe,e.key,!e.key)),re(1),ie("ngIf",!e.key),re(1),ie("ngIf",e.key),re(1),vc(" ",e.buttonText,"")}}function Nhe(n,t){if(1&n){const e=qi();te(0,"div",23)(1,"div",24)(2,"div",25)(3,"h5",26),ot(4),ne(),te(5,"p",27),ot(6),ne()(),te(7,"div",28),ot(8),ED(9,"uppercase"),ne(),te(10,"div",29)(11,"div",30)(12,"span",31),Be("click",function(){const o=Yt(e).$implicit;return Lt(Se(2).putDataToInput(o))}),ne()(),te(13,"div",32)(14,"span",33),Be("click",function(){const o=Yt(e).$implicit;return Lt(Se(2).deleteNote(o))}),ne()()()()()}if(2&n){const e=t.$implicit,i=Se(2);re(4),mr(e.title),re(2),mr(e.body),re(2),vc(" ",rV(9,3,i.time)," ")}}function Mhe(n,t){if(1&n&&(te(0,"div",21),xe(1,Nhe,15,5,"div",22),ED(2,"filter"),ne()),2&n){const e=Se();re(1),ie("ngForOf",function oV(n,t,e,i){const r=n+jt,o=ge(),s=rc(o,r);return $g(o,r)?eV(o,pr(),t,s.transform,e,i,s):s.transform(e,i)}(2,1,e.notes,e.searchWord))}}const khe=function(n,t){return{fg:n,"text-warning":t}};let Ohe=(()=>{class n{constructor(e){this.baseService=e,this.isOpen=!1,this.isUpdating=!1,this.inputClass=!1,this.notes=[],this.title="",this.body="",this.time="",this.buttonText="Jegyzet l\xe9trehoz\xe1sa",this.searchWord="",console.log(this.key)}ngOnInit(){this.baseService.getNotes().subscribe({next:e=>{this.notes=e},error:e=>{console.log(e)}})}createUpdateControl(){null==this.key?this.createNote():(this.updateNote(),this.key=void 0,this.buttonText="Jegyzet l\xe9trehoz\xe1sa")}createNote(){this.baseService.createNote({title:this.title,body:this.body}),this.title="",this.body="",this.isOpen=!1}deleteNote(e){this.baseService.deleteNote(e)}updateNote(){this.baseService.updateNote(this.key,{title:this.title,body:this.body}),this.isUpdating=!1,this.isOpen=!1}putDataToInput(e){this.title=e.title,this.body=e.body,this.isUpdating=!0,this.key=e.key,this.isOpen=!0,this.buttonText="M\xf3dos\xedt\xe1s"}static#e=this.\u0275fac=function(i){return new(i||n)(N(c3))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-notes"]],decls:6,vars:7,consts:[[1,"row","d-grid","justify-content-center","my-3"],["class","search",4,"ngIf"],[1,"rounded-circle","btn","btn-white",3,"click"],[1,"h3","bi","bi-plus-circle","rounded-circle",3,"ngClass"],["class","form-group text-center",4,"ngIf"],["class","row d-flex justify-content-center my-3",4,"ngIf"],[1,"search"],["for","search"],["type","text","name","searh",3,"ngClass","ngModel","keyup","keypress","ngModelChange"],["class","text-success bi bi-search h5 ms-2",4,"ngIf"],[1,"text-success","bi","bi-search","h5","ms-2"],[1,"form-group","text-center"],["for","title"],["type","text","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","body"],["rows","10","type","text","name","body",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","mt-1","fs-4",3,"ngClass","click"],["class","h2 bi bi-plus-circle",4,"ngIf"],["class","bi bi-arrow-repeat",4,"ngIf"],[1,"h2","bi","bi-plus-circle"],[1,"bi","bi-arrow-repeat"],[1,"row","d-flex","justify-content-center","my-3"],["class","my-3 col-12 col-md-6 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"my-3","col-12","col-md-6","col-lg-4","col-xl-3"],[1,"card"],[1,"card-body","text-center"],[1,"card-title","pb-3"],[1,"card-text"],[1,"card-footer","text-muted"],[1,"d-flex","mx-2","mb-2"],[1,"w-50","text-start"],["role","button",1,"bi","bi-arrow-repeat","h3","text-success","rounded",3,"click"],[1,"w-50","text-end"],["role","button",1,"bi","bi-trash3-fill","h3","text-danger","rounded",3,"click"]],template:function(i,r){1&i&&(te(0,"div",0),xe(1,xhe,5,7,"div",1),te(2,"button",2),Be("click",function(){return r.isOpen=!r.isOpen}),Jt(3,"span",3),ne(),xe(4,Rhe,11,9,"form",4),ne(),xe(5,Mhe,3,4,"div",5)),2&i&&(re(1),ie("ngIf",!r.isOpen),re(2),ie("ngClass",Bu(4,khe,r.isOpen,!r.isOpen)),re(1),ie("ngIf",r.isOpen),re(1),ie("ngIf",!r.isUpdating))},dependencies:[eE,Oa,rs,vE,zu,wf,cE,Wu,Gu,UB,The],styles:[".card[_ngcontent-%COMP%]{width:300px;height:300px;background-color:#d4e256b3}.fg[_ngcontent-%COMP%]{color:#006400}.true[_ngcontent-%COMP%]{background-color:#fb0}.inputBg[_ngcontent-%COMP%]{background-color:#80806080}.background-color[_ngcontent-%COMP%]{background-color:green}.inputFocus[_ngcontent-%COMP%]{background-color:#c7c065b3}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:30px;padding:10px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px;border-radius:10px}.bi-arrow-repeat[_ngcontent-%COMP%]:hover{background-color:#d3f70980;color:#006400!important}.bi-trash3-fill[_ngcontent-%COMP%]:hover{background-color:#f10b0b80;color:#4b0707!important}.card-body[_ngcontent-%COMP%]{transition:2s ease-in font-size,transform 2s ease-in}.card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:27px;font-family:monospace}.card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.card-body[_ngcontent-%COMP%]:hover{font-size:18px;transform:translateY(12.5%)}"]})}return n})();var X_=et(560);const $he=Iae(X_.o,!0);let Nw=(()=>{class n{constructor(e,i){this.aFireAuth=e,this.http=i,this.usersApiUrl="https://us-central1-project0781.cloudfunctions.net/api/",this.defaultClaims={basic:!0,admin:!1,superAdmin:!1},this.user={},this.isSuperAdmin=new E(!1),this.httpHeaders=new Ps,this.isLoggedIn().subscribe(r=>{r&&(this.user=r),r?.getIdToken().then(o=>{this.user.idToken=o,this.authHeader=this.httpHeaders.set("Authorization",this.user.idToken),this.getClaims().subscribe(s=>{s?(this.user.claims=s,console.log("A felhaszn\xe1l\xf3 m\xe1r rendelkezik jogosults\xe1gokkal."),this.isSuperAdmin.next(this.user.claims.superAdmin)):(this.setCustomClaims(this.user.uid,this.defaultClaims),this.user.claims=this.defaultClaims,console.log("Alap jogosults\xe1gok sikeresen be\xe1ll\xedtva."),this.isSuperAdmin.next(!1))})})})}createUserWithEmAndPa(e,i){this.aFireAuth.createUserWithEmailAndPassword(e,i)}getClaims(){return this.http.get(this.usersApiUrl+`users/${this.user.uid}/claims`,{headers:this.authHeader})}getUsers(){if(this.user.idToken){let e=(new Ps).set("Authorization",this.user.idToken);return this.http.get(this.usersApiUrl+"users",{headers:e})}return null}isLoggedIn(){return this.aFireAuth.authState}loginWithEmAndPa(e,i){this.aFireAuth.signInWithEmailAndPassword(e,i)}ngOnInit(){}setCustomClaims(e,i){this.http.post(this.usersApiUrl+"setCustomClaims",{uid:e,claims:i},{headers:this.authHeader}).subscribe({next:()=>console.log("A claims be\xe1ll\xedt\xe1sa sikeres!")})}signOut(){this.aFireAuth.signOut()}signInWithGoogle(){return this.aFireAuth.signInWithPopup(new X_.W)}signInWithFacebook(){return this.aFireAuth.signInWithPopup(new X_.V)}signInWithPhoneNumber(e){return this.aFireAuth.signInWithPhoneNumber(e,new X_.R($he(),"reCaptchaContainer",{}))}verifyPhoneNumberAndSignIN(e){return this.aFireAuth.signInWithCredential(e)}static#e=this.\u0275fac=function(i){return new(i||n)(P(b_),P(Q_))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const zhe=new de("cdk-dir-doc",{providedIn:"root",factory:function Ghe(){return be(Tt)}}),Whe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let GA,zA=(()=>{class n{constructor(e){this.value="ltr",this.change=new Qe,e&&(this.value=function qhe(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Whe.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(P(zhe,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ev=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();try{GA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{GA=!1}let np,Or=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function jne(n){return n===HB}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!GA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(P(Cs))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const d3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function h3(){if(np)return np;if("object"!=typeof document||!document)return np=new Set(d3),np;let n=document.createElement("input");return np=new Set(d3.filter(t=>(n.setAttribute("type",t),n.type===t))),np}let tv,ud,WA;function ip(n){return function Khe(){if(null==tv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tv=!0}))}finally{tv=tv||!1}return tv}()?n:!!n.capture}function Zhe(){if(null==ud){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ud=!1,ud;if("scrollBehavior"in document.documentElement.style)ud=!0;else{const n=Element.prototype.scrollTo;ud=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ud}function jc(n){return n.composedPath?n.composedPath()[0]:n.target}function qA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class Jhe{constructor(t){this._box=t,this._destroyed=new $,this._resizeSubject=new $,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new it(e=>{const i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(ai(e=>e.some(i=>i.target===t)),y1({bufferSize:1,refCount:!0}),tn(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Xhe=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=be(We)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Jhe(r)),this._observers.get(r).observe(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bo(n){return null!=n&&"false"!=`${n}`}function KA(n,t=0){return function efe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function kw(n){return Array.isArray(n)?n:[n]}function Yi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Hc(n){return n instanceof wt?n.nativeElement:n}class f3{}class tfe{}const Ml="*";function p3(n,t){return{type:7,name:n,definitions:t,options:{}}}function ZA(n,t=null){return{type:4,styles:t,timings:n}}function m3(n,t=null){return{type:2,steps:n,options:t}}function rp(n){return{type:6,styles:n,offset:null}}function YA(n,t,e){return{type:0,name:n,styles:t,options:e}}function QA(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class nv{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class g3{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}let nfe=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:[nfe]})}return n})();function XA(n){return ai((t,e)=>n<=e)}const v3=new Set;let dd,dfe=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ffe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function hfe(n,t){if(!v3.has(n))try{dd||(dd=document.createElement("style"),t&&(dd.nonce=t),dd.setAttribute("type","text/css"),document.head.appendChild(dd)),dd.sheet&&(dd.sheet.insertRule(`@media ${n} {body{ }}`,0),v3.add(n))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Or),P(Cx,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ffe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let pfe=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new $}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return y3(kw(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=bE(y3(kw(e)).map(s=>this._registerQuery(s).observable));return o=If(o.pipe(Zi(1)),o.pipe(XA(1),function ufe(n,t=Yu){return se((e,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+n,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}e.subscribe(De(i,c=>{o=c,s=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(Ce(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),o={observable:new it(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Df(i),Ce(({matches:s})=>({query:e,matches:s})),tn(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(P(dfe),P(We))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y3(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Ow(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const E3="cdk-describedby-message",Pw="cdk-describedby-host";let eR=0,_fe=(()=>{class n{constructor(e,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+eR++,this._document=e,this._id=be(vg)+"-"+eR++}describe(e,i,r){if(!this._canBeDescribed(e,i))return;const o=tR(i,r);"string"!=typeof i?(w3(i,this._id),this._messageRegistry.set(o,{messageElement:i,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;const o=tR(i,r);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),"string"==typeof i){const s=this._messageRegistry.get(o);s&&0===s.referenceCount&&this._deleteMessageElement(o)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${Pw}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(Pw);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){const r=this._document.createElement("div");w3(r,this._id),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(tR(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<i.length;o++)i[o].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const i=Ow(e,"aria-describedby").filter(r=>0!=r.indexOf(E3));e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){const r=this._messageRegistry.get(i);(function mfe(n,t,e){const i=Ow(n,t);i.some(r=>r.trim()==e.trim())||(i.push(e.trim()),n.setAttribute(t,i.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(Pw,this._id),r.referenceCount++}_removeMessageReference(e,i){const r=this._messageRegistry.get(i);r.referenceCount--,function gfe(n,t,e){const r=Ow(n,t).filter(o=>o!=e.trim());r.length?n.setAttribute(t,r.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(Pw)}_isElementDescribedByMessage(e,i){const r=Ow(e,"aria-describedby"),o=this._messageRegistry.get(i),s=o&&o.messageElement.id;return!!s&&-1!=r.indexOf(s)}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),o=e.getAttribute("aria-label");return!(!r||o&&o.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(Or))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tR(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function w3(n,t){n.id||(n.id=`${E3}-${t}-${eR++}`)}function C3(n){return 0===n.buttons||0===n.detail}function I3(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Tfe=new de("cdk-input-modality-detector-options"),Cfe={ignoreKeys:[18,17,224,91,16]},op=ip({passive:!0,capture:!0});let Ife=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new E(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=jc(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(C3(s)?"keyboard":"mouse"),this._mostRecentTarget=jc(s))},this._onTouchstart=s=>{I3(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=jc(s))},this._options={...Cfe,...o},this.modalityDetected=this._modality.pipe(XA(1)),this.modalityChanged=this.modalityDetected.pipe(dt()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,op),r.addEventListener("mousedown",this._onMousedown,op),r.addEventListener("touchstart",this._onTouchstart,op)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,op),document.removeEventListener("mousedown",this._onMousedown,op),document.removeEventListener("touchstart",this._onTouchstart,op))}static#e=this.\u0275fac=function(i){return new(i||n)(P(Or),P(We),P(Tt),P(Tfe,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Dfe=new de("cdk-focus-monitor-default-options"),Fw=ip({passive:!0,capture:!0});let D3=(()=>{class n{constructor(e,i,r,o,s){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new $,this._rootNodeFocusAndBlurListener=a=>{for(let c=jc(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(e,i=!1){const r=Hc(e);if(!this._platform.isBrowser||1!==r.nodeType)return M();const o=function Qhe(n){if(function Yhe(){if(null==WA){const n=typeof document<"u"?document.head:null;WA=!(!n||!n.createShadowRoot&&!n.attachShadow)}return WA}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new $,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=Hc(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const o=Hc(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),o=jc(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fw),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fw)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(tn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fw),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fw),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(P(We),P(Or),P(Ife),P(Tt,8),P(Dfe,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const S3="cdk-high-contrast-black-on-white",A3="cdk-high-contrast-white-on-black",nR="cdk-high-contrast-active";let R3=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=be(pfe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(nR,S3,A3),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(nR,S3):2===i&&e.add(nR,A3)}}static#e=this.\u0275fac=function(i){return new(i||n)(P(Or),P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sfe=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(P(R3))};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[_3]})}return n})();const Rfe=new de("mat-sanity-checks",{providedIn:"root",factory:function Afe(){return!0}});let Qr=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!qA()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||n)(P(R3),P(Rfe,8),P(Tt))};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[ev,ev]})}return n})();function k3(n){return class extends n{get disabled(){return this._disabled}set disabled(t){this._disabled=Bo(t)}constructor(...t){super(...t),this._disabled=!1}}}function O3(n,t){return class extends n{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function P3(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Bo(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function Mfe(n){return class extends n{updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}let Ofe=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Pfe{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const F3=ip({passive:!0,capture:!0});class Ffe{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=jc(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,i,r){const o=this._events.get(e);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,F3)})}removeHandler(t,e,i){const r=this._events.get(t);if(!r)return;const o=r.get(e);o&&(o.delete(i),0===o.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,F3)))}}const L3={enterDuration:225,exitDuration:150},V3=ip({passive:!0,capture:!0}),B3=["mousedown","touchstart"],U3=["mouseup","mouseleave","touchend","touchcancel"];class Lw{static#e=this._eventManager=new Ffe;constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Hc(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...L3,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=i.radius||function Vfe(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-s+"px",u.style.top=l-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),_=f.transitionDuration,y="none"===f.transitionProperty||"0s"===_||"0s, 0s"===_||0===r.width&&0===r.height,b=new Pfe(this,u,i,y);u.style.transform="scale3d(1, 1, 1)",b.state=0,i.persistent||(this._mostRecentTransientRipple=b);let C=null;return!y&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const O=()=>this._finishRippleTransition(b),S=()=>this._destroyRipple(b);u.addEventListener("transitionend",O),u.addEventListener("transitioncancel",S),C={onTransitionEnd:O,onTransitionCancel:S}}),this._activeRipples.set(b,C),(y||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...L3,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Hc(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,B3.forEach(i=>{Lw._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{U3.forEach(e=>{this._triggerElement.addEventListener(e,this,V3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=C3(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!I3(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(B3.forEach(e=>Lw._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&U3.forEach(e=>t.removeEventListener(e,this,V3)))}}const j3=new de("mat-ripple-global-options");let iR=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Lw(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(We),N(Or),N(j3,8),N(Sa,8))};static#t=this.\u0275dir=me({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&ht("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),H3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,Qr]})}return n})();const $3={capture:!0},z3=["focus","click","mouseenter","touchstart"],rR="mat-ripple-loader-uninitialized",oR="mat-ripple-loader-class-name",G3="mat-ripple-loader-centered",Vw="mat-ripple-loader-disabled";let Bfe=(()=>{class n{constructor(){this._document=be(Tt,{optional:!0}),this._animationMode=be(Sa,{optional:!0}),this._globalRippleOptions=be(j3,{optional:!0}),this._platform=be(Or),this._ngZone=be(We),this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const r=e.target.closest(`[${rR}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const e of z3)this._document?.addEventListener(e,this._onInteraction,$3)})}ngOnDestroy(){for(const e of z3)this._document?.removeEventListener(e,this._onInteraction,$3)}configureRipple(e,i){e.setAttribute(rR,""),(i.className||!e.hasAttribute(oR))&&e.setAttribute(oR,i.className||""),i.centered&&e.setAttribute(G3,""),i.disabled&&e.setAttribute(Vw,"")}getRipple(e){return e.matRipple?e.matRipple:this.createRipple(e)}setDisabled(e,i){const r=e.matRipple;r?r.disabled=i:i?e.setAttribute(Vw,""):e.removeAttribute(Vw)}createRipple(e){if(!this._document)return;e.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(oR)),e.append(i);const r=new iR(new wt(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=e,r.centered=e.hasAttribute(G3),r.disabled=e.hasAttribute(Vw),this.attachRipple(e,r),r}attachRipple(e,i){e.removeAttribute(rR),e.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ufe=["notch"],jfe=["matFormFieldNotchedOutline",""],Hfe=["*"],$fe=["textField"],zfe=["iconPrefixContainer"],Gfe=["textPrefixContainer"];function Wfe(n,t){1&n&&Jt(0,"span",19)}function qfe(n,t){if(1&n&&(te(0,"label",17),Ei(1,1),xe(2,Wfe,1,0,"span",18),ne()),2&n){const e=Se(2);ie("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),on("for",e._control.id),re(2),ie("ngIf",!e.hideRequiredMarker&&e._control.required)}}function Kfe(n,t){1&n&&xe(0,qfe,3,5,"label",16),2&n&&ie("ngIf",Se()._hasFloatingLabel())}function Zfe(n,t){1&n&&Jt(0,"div",20)}function Yfe(n,t){}function Qfe(n,t){1&n&&xe(0,Yfe,0,0,"ng-template",22),2&n&&(Se(2),ie("ngTemplateOutlet",ts(1)))}function Jfe(n,t){if(1&n&&(te(0,"div",21),xe(1,Qfe,1,1,"ng-template",9),ne()),2&n){const e=Se();ie("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),re(1),ie("ngIf",!e._forceDisplayInfixLabel())}}function Xfe(n,t){1&n&&(te(0,"div",23,24),Ei(2,2),ne())}function epe(n,t){1&n&&(te(0,"div",25,26),Ei(2,3),ne())}function tpe(n,t){}function npe(n,t){1&n&&xe(0,tpe,0,0,"ng-template",22),2&n&&(Se(),ie("ngTemplateOutlet",ts(1)))}function ipe(n,t){1&n&&(te(0,"div",27),Ei(1,4),ne())}function rpe(n,t){1&n&&(te(0,"div",28),Ei(1,5),ne())}function ope(n,t){1&n&&Jt(0,"div",29)}function spe(n,t){1&n&&(te(0,"div",30),Ei(1,6),ne()),2&n&&ie("@transitionMessages",Se()._subscriptAnimationState)}function ape(n,t){if(1&n&&(te(0,"mat-hint",34),ot(1),ne()),2&n){const e=Se(2);ie("id",e._hintLabelId),re(1),mr(e.hintLabel)}}function lpe(n,t){if(1&n&&(te(0,"div",31),xe(1,ape,2,2,"mat-hint",32),Ei(2,7),Jt(3,"div",33),Ei(4,8),ne()),2&n){const e=Se();ie("@transitionMessages",e._subscriptAnimationState),re(1),ie("ngIf",e.hintLabel)}}const cpe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],upe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let rv=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["mat-label"]]})}return n})();const dpe=new de("MatError");let hpe=0,W3=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+hpe++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(_o("id",r.id),on("align",null),ht("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const fpe=new de("MatPrefix"),ppe=new de("MatSuffix"),q3=new de("FloatingLabelParent");let K3=(()=>{class n{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=be(Xhe),this._ngZone=be(We),this._parent=be(q3),this._resizeSubscription=new yt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function mpe(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt))};static#t=this.\u0275dir=me({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&ht("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const Z3="mdc-line-ripple--active",Bw="mdc-line-ripple--deactivating";let Y3=(()=>{class n{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{const o=this._elementRef.nativeElement.classList,s=o.contains(Bw);"opacity"===r.propertyName&&s&&o.remove(Z3,Bw)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(Bw),e.add(Z3)}deactivate(){this._elementRef.nativeElement.classList.add(Bw)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(We))};static#t=this.\u0275dir=me({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),Q3=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(We))};static#t=this.\u0275cmp=cn({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&gr(Ufe,5),2&i){let o;mt(o=gt())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&ht("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:jfe,ngContentSelectors:Hfe,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(wl(),Jt(0,"div",0),te(1,"div",1,2),Ei(3),ne(),Jt(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const gpe={transitionMessages:p3("transitionMessages",[YA("enter",rp({opacity:1,transform:"translateY(0%)"})),QA("void => enter",[rp({opacity:0,transform:"translateY(-5px)"}),ZA("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let J3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n})}return n})();const X3=new de("MatFormField"),_pe=new de("MAT_FORM_FIELD_DEFAULT_OPTIONS");let e4=0,sR=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Bo(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,o,s,a,l,c){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+e4++,this._hintLabelId="mat-mdc-hint-"+e4++,this._subscriptAnimationState="",this._destroyed=new $,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(tn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),I(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(tn(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(tn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=i?.getBoundingClientRect().width??0,s=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(bo),N(We),N(zA),N(Or),N(_pe,8),N(Sa,8),N(Tt))};static#t=this.\u0275cmp=cn({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(1&i&&(An(o,rv,5),An(o,rv,7),An(o,J3,5),An(o,fpe,5),An(o,ppe,5),An(o,dpe,5),An(o,W3,5)),2&i){let s;mt(s=gt())&&(r._labelChildNonStatic=s.first),mt(s=gt())&&(r._labelChildStatic=s.first),mt(s=gt())&&(r._formFieldControl=s.first),mt(s=gt())&&(r._prefixChildren=s),mt(s=gt())&&(r._suffixChildren=s),mt(s=gt())&&(r._errorChildren=s),mt(s=gt())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(1&i&&(gr($fe,5),gr(zfe,5),gr(Gfe,5),gr(K3,5),gr(Q3,5),gr(Y3,5)),2&i){let o;mt(o=gt())&&(r._textField=o.first),mt(o=gt())&&(r._iconPrefixContainer=o.first),mt(o=gt())&&(r._textPrefixContainer=o.first),mt(o=gt())&&(r._floatingLabel=o.first),mt(o=gt())&&(r._notchedOutline=o.first),mt(o=gt())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&ht("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[bn([{provide:X3,useExisting:n},{provide:q3,useExisting:n}])],ngContentSelectors:upe,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(wl(cpe),xe(0,Kfe,1,1,"ng-template",null,0,Ds),te(2,"div",1,2),Be("click",function(s){return r._control.onContainerClick(s)}),xe(4,Zfe,1,0,"div",3),te(5,"div",4),xe(6,Jfe,2,2,"div",5),xe(7,Xfe,3,0,"div",6),xe(8,epe,3,0,"div",7),te(9,"div",8),xe(10,npe,1,1,"ng-template",9),Ei(11),ne(),xe(12,ipe,2,0,"div",10),xe(13,rpe,2,0,"div",11),ne(),xe(14,ope,1,0,"div",12),ne(),te(15,"div",13),xe(16,spe,2,1,"div",14),xe(17,lpe,5,2,"div",15),ne()),2&i&&(re(2),ht("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),re(2),ie("ngIf",!r._hasOutline()&&!r._control.disabled),re(2),ie("ngIf",r._hasOutline()),re(1),ie("ngIf",r._hasIconPrefix),re(1),ie("ngIf",r._hasTextPrefix),re(2),ie("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),re(2),ie("ngIf",r._hasTextSuffix),re(1),ie("ngIf",r._hasIconSuffix),re(1),ie("ngIf",!r._hasOutline()),re(1),ht("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),ie("ngSwitch",r._getDisplayedMessages()),re(1),ie("ngSwitchCase","error"),re(1),ie("ngSwitchCase","hint"))},dependencies:[rs,Hu,tE,VB,W3,K3,Q3,Y3],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[gpe.transitionMessages]},changeDetection:0})}return n})(),aR=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,nE,_3,Qr]})}return n})();const bpe=["mat-button",""],Epe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],wpe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Tpe=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Cpe=O3(k3(P3(class{constructor(n){this._elementRef=n}})));let Ipe=(()=>{class n extends Cpe{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Bo(e),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=Bo(e),this._updateRippleDisabled()}constructor(e,i,r,o){super(e),this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=be(D3),this._rippleLoader=be(Bfe),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const s=e.nativeElement.classList;for(const a of Tpe)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{s.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){Tg()};static#t=this.\u0275dir=me({type:n,features:[Qt]})}return n})(),lR=(()=>{class n extends Ipe{constructor(e,i,r,o){super(e,i,r,o)}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(Or),N(We),N(Sa,8))};static#t=this.\u0275cmp=cn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(on("disabled",r.disabled||null),ht("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Qt],attrs:bpe,ngContentSelectors:wpe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(wl(Epe),Jt(0,"span",0),Ei(1),te(2,"span",1),Ei(3,1),ne(),Ei(4,2),Jt(5,"span",2)(6,"span",3)),2&i&&ht("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),Spe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,H3,Qr]})}return n})();const i4=ip({passive:!0});let Ape=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return mn;const i=Hc(e),r=this._monitoredElements.get(i);if(r)return r.subject;const o=new $,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(i.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,i4),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",a,i4)}}),o}stopMonitoring(e){const i=Hc(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||n)(P(Or),P(We))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rpe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();const Npe=new de("MAT_INPUT_VALUE_ACCESSOR"),Mpe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let kpe=0;const Ope=Mfe(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new $}});let cR=(()=>{class n extends Ope{get disabled(){return this._disabled}set disabled(e){this._disabled=Bo(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Xie.required)??!1}set required(e){this._required=Bo(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&h3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Bo(e)}constructor(e,i,r,o,s,a,l,c,u,f){super(a,o,s,r),this._elementRef=e,this._platform=i,this._autofillMonitor=c,this._formField=f,this._uid="mat-input-"+kpe++,this.focused=!1,this.stateChanges=new $,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(y=>h3().has(y)),this._iOSKeyupListener=y=>{const b=y.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const g=this._elementRef.nativeElement,_=g.nodeName.toLowerCase();this._inputValueAccessor=l||g,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===_,this._isTextarea="textarea"===_,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Mpe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(Or),N(xl,10),N(Gu,8),N(yE,8),N(Ofe),N(Npe,10),N(Ape),N(We),N(X3,8))};static#t=this.\u0275dir=me({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&Be("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(_o("id",r.id)("disabled",r.disabled)("required",r.required),on("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),ht("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[bn([{provide:J3,useExisting:n}]),Qt,Si]})}return n})(),Ppe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,aR,aR,Rpe,Qr]})}return n})();const Fpe=["addListener","removeListener"],Lpe=["addEventListener","removeEventListener"],Vpe=["on","off"];function Er(n,t,e,i){if(D(e)&&(i=e,e=void 0),i)return Er(n,t,e).pipe(IS(i));const[r,o]=function jpe(n){return D(n.addEventListener)&&D(n.removeEventListener)}(n)?Lpe.map(s=>a=>n[s](t,a,e)):function Bpe(n){return D(n.addListener)&&D(n.removeListener)}(n)?Fpe.map(r4(n,t)):function Upe(n){return D(n.on)&&D(n.off)}(n)?Vpe.map(r4(n,t)):[];if(!r&&Wt(n))return qt(s=>Er(s,t,e))(ye(n));if(!r)throw new TypeError("Invalid event target");return new it(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function r4(n,t){return e=>i=>n[e](t,i)}const ov={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=ov;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(o=>{e=void 0,n(o)});return new yt(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=ov;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=ov;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class $pe extends HE{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Hpe extends jE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=ov.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(ov.cancelAnimationFrame(e),t._scheduled=void 0)}});let uR,Gpe=1;const Uw={};function o4(n){return n in Uw&&(delete Uw[n],!0)}const Wpe={setImmediate(n){const t=Gpe++;return Uw[t]=!0,uR||(uR=Promise.resolve()),uR.then(()=>o4(t)&&n()),t},clearImmediate(n){o4(n)}},{setImmediate:qpe,clearImmediate:Kpe}=Wpe,jw={setImmediate(...n){const{delegate:t}=jw;return(t?.setImmediate||qpe)(...n)},clearImmediate(n){const{delegate:t}=jw;return(t?.clearImmediate||Kpe)(n)},delegate:void 0};new class Ype extends HE{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Zpe extends jE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=jw.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(jw.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});function dR(n=0,t,e=vae){let i=-1;return null!=t&&(Gn(t)?e=t:i=t),new it(r=>{let o=function Xpe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function s4(n,t=Yu){return function Jpe(n){return se((t,e)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,e.next(c)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};t.subscribe(De(e,c=>{i=!0,r=c,o||ye(n(c)).subscribe(o=De(e,a,l))},()=>{s=!0,(!i||!o||o.closed)&&e.complete()}))})}(()=>dR(n,t))}let a4=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new $,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new it(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(s4(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):M()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(ai(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=Hc(i),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Er(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(P(We),P(Or),P(Tt,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),l4=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new $,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(s4(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(P(Or),P(We),P(Tt,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hR=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),c4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[ev,hR,ev,hR]})}return n})();class fR{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class u4 extends fR{constructor(t,e,i,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class nme extends fR{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class ime extends fR{constructor(t){super(),this.element=t instanceof wt?t.nativeElement:t}}class rme{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof u4?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof nme?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof ime?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ome extends rme{constructor(t,e,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Wi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let sme=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();const d4=Zhe();class ame{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Yi(-this._previousScrollPosition.left),t.style.top=Yi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),d4&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),d4&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class lme{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(ai(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class h4{enable(){}disable(){}attach(){}}function pR(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function f4(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class cme{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();pR(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ume=(()=>{class n{constructor(e,i,r,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new h4,this.close=s=>new lme(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new ame(this._viewportRuler,this._document),this.reposition=s=>new cme(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(P(a4),P(l4),P(We),P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class dme{constructor(t){if(this.scrollStrategy=new h4,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class hme{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let p4=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fme=(()=>{class n extends p4{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(We,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pme=(()=>{class n extends p4{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=jc(o)},this._clickListener=o=>{const s=jc(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(s)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(o)):f.next(o)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(Or),P(We,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),m4=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||qA()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(e),qA()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(Or))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mme{constructor(t,e,i,r,o,s,a,l,c,u=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new $,this._attachments=new $,this._detachments=new $,this._locationChanges=yt.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new $,this._outsidePointerEvents=new $,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Zi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Yi(this._config.width),t.height=Yi(this._config.height),t.minWidth=Yi(this._config.minWidth),t.minHeight=Yi(this._config.minHeight),t.maxWidth=Yi(this._config.maxWidth),t.maxHeight=Yi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=kw(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(tn(I(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const g4="cdk-overlay-connected-position-bounding-box",gme=/([A-Za-z%]+)$/;class _me{get positions(){return this._preferredPositions}constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new $,this._resizeSubscription=yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(g4),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(const c of o){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(g4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,o;if("center"==i.originX)r=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?s:a}return e.left<0&&(r-=e.left),o="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r,o;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){const o=v4(e);let{x:s,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let g=0-a,_=a+o.height-i.height,y=this._subtractOverflows(o.width,0-s,s+o.width-i.width),b=this._subtractOverflows(o.height,g,_),C=y*b;return{visibleArea:C,isCompletelyWithinViewport:o.width*o.height===C,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:y==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,o=i.right-e.x,s=_4(this._overlayRef.getConfig().minHeight),a=_4(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=s&&s<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=v4(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),c=Math.max(o.left-i.left-t.x,0);let u=0,f=0;return u=r.width<=o.width?c||-s:t.x<this._viewportMargin?o.left-i.left-t.x:0,f=r.height<=o.height?l||-a:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:u,y:f},{x:t.x+u,y:t.y+f}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new hme(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let o,s,a,u,f,g;if("top"===e.overlayY)s=t.y,o=i.height-s+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const _=Math.min(i.bottom-t.y+i.top,t.y),y=this._lastBoundingBoxSize.height;o=2*_,s=t.y-_,o>y&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-y/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)g=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)f=t.x,u=i.right-t.x;else{const _=Math.min(i.right-t.x+i.left,t.x),y=this._lastBoundingBoxSize.width;u=2*_,f=t.x-_,u>y&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-y/2)}return{top:s,left:f,bottom:a,right:g,width:u,height:o}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Yi(i.height),r.top=Yi(i.top),r.bottom=Yi(i.bottom),r.width=Yi(i.width),r.left=Yi(i.left),r.right=Yi(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Yi(o)),s&&(r.maxWidth=Yi(s))}this._lastBoundingBoxSize=i,hd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){hd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();hd(i,this._getExactOverlayY(e,t,u)),hd(i,this._getExactOverlayX(e,t,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Yi(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Yi(s.maxWidth):o&&(i.maxWidth="")),hd(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Yi(o.y),r}_getExactOverlayX(t,e,i){let s,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Yi(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:f4(t,i),isOriginOutsideView:pR(t,i),isOverlayClipped:f4(e,i),isOverlayOutsideView:pR(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&kw(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof wt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function hd(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function _4(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(gme);return e&&"px"!==e?null:parseFloat(t)}return n||null}function v4(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const y4="cdk-global-overlay-wrapper";class vme{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(y4),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,g="rtl"===this._overlayRef.getConfig().direction;let _="",y="",b="";l?b="flex-start":"center"===u?(b="center",g?y=f:_=f):g?"left"===u||"end"===u?(b="flex-end",_=f):("right"===u||"start"===u)&&(b="flex-start",y=f):"left"===u||"start"===u?(b="flex-start",_=f):("right"===u||"end"===u)&&(b="flex-end",y=f),t.position=this._cssPosition,t.marginLeft=l?"0":_,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":y,e.justifyContent=b,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(y4),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let yme=(()=>{class n{constructor(e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new vme}flexibleConnectedTo(e){return new _me(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(P(l4),P(Tt),P(Or),P(m4))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bme=0,Hw=(()=>{class n{constructor(e,i,r,o,s,a,l,c,u,f,g,_){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=f,this._outsideClickDispatcher=g,this._animationsModuleType=_}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new dme(e);return s.direction=s.direction||this._directionality.value,new mme(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+bme++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ka)),new ome(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(P(ume),P(m4),P(Eg),P(yme),P(fme),P(Wi),P(We),P(Tt),P(zA),P($0),P(pme),P(Sa,8))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Tme={provide:new de("cdk-connected-overlay-scroll-strategy"),deps:[Hw],useFactory:function wme(n){return()=>n.scrollStrategies.reposition()}};let Cme=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:[Hw,Tme],imports:[ev,sme,c4,c4]})}return n})();const Ime=["tooltip"],b4=new de("mat-tooltip-scroll-strategy"),Sme={provide:b4,deps:[Hw],useFactory:function Dme(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},Rme=new de("mat-tooltip-default-options",{providedIn:"root",factory:function Ame(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),E4="tooltip-panel",w4=ip({passive:!0});let Fme=(()=>{class n{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Bo(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Bo(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=KA(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=KA(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,i,r,o,s,a,l,c,u,f,g,_){this._overlay=e,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=o,this._ngZone=s,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=f,this._defaultOptions=g,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new $,this._scrollStrategy=u,this._document=_,g&&(this._showDelay=g.showDelay,this._hideDelay=g.hideDelay,g.position&&(this.position=g.position),g.positionAtOrigin&&(this.positionAtOrigin=g.positionAtOrigin),g.touchGestures&&(this.touchGestures=g.touchGestures)),f.change.pipe(tn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(tn(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{e.removeEventListener(i,r,w4)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(i);this._detach(),this._portal=this._portal||new u4(this._tooltipComponent,this._viewContainerRef);const o=this._tooltipInstance=r.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(tn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(e)}hide(e=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&o._origin instanceof wt)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(tn(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${E4}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(tn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(tn(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(tn(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&27===o.keyCode&&!function cfe(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const i=e.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();i.withPositions([this._addOffset({...r.main,...o.main}),this._addOffset({...r.fallback,...o.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&e||"right"==i&&!e?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(r={originX:"end",originY:"center"});const{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&e||"right"==i&&!e?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Zi(1),tn(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){const{overlayY:i,originX:r,originY:o}=e;let s;if(s="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===o?"above":"below",s!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${E4}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(i=e),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const i=e.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{const r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,w4)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const i=this._elementRef.nativeElement,r=i.style;("on"===e||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}static#e=this.\u0275fac=function(i){Tg()};static#t=this.\u0275dir=me({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}})}return n})(),T4=(()=>{class n extends Fme{constructor(e,i,r,o,s,a,l,c,u,f,g,_){super(e,i,r,o,s,a,l,c,u,f,g,_),this._tooltipComponent=Vme,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const r=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=r?-8:8:"end"===e.originX&&(e.offsetX=r?8:-8),e}static#e=this.\u0275fac=function(i){return new(i||n)(N(Hw),N(wt),N(a4),N(ns),N(We),N(Or),N(_fe),N(D3),N(b4),N(zA,8),N(Rme,8),N(Tt))};static#t=this.\u0275dir=me({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,r){2&i&&ht("mat-mdc-tooltip-disabled",r.disabled)},exportAs:["matTooltip"],features:[Qt]})}return n})(),Lme=(()=>{class n{constructor(e,i){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new $,this._animationsDisabled="NoopAnimations"===i}show(e){null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const i=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(i.classList.remove(e?o:r),i.classList.add(e?r:o),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const s=getComputedStyle(i);("0s"===s.getPropertyValue("animation-duration")||"none"===s.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static#e=this.\u0275fac=function(i){return new(i||n)(N(bo),N(Sa,8))};static#t=this.\u0275dir=me({type:n})}return n})(),Vme=(()=>{class n extends Lme{constructor(e,i,r){super(e,r),this._elementRef=i,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}static#e=this.\u0275fac=function(i){return new(i||n)(N(bo),N(wt),N(Sa,8))};static#t=this.\u0275cmp=cn({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(i,r){if(1&i&&gr(Ime,7),2&i){let o;mt(o=gt())&&(r._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(i,r){1&i&&Be("mouseleave",function(s){return r._handleMouseLeave(s)}),2&i&&lD("zoom",r.isVisible()?1:null)},features:[Qt],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(i,r){1&i&&(te(0,"div",0,1),Be("animationend",function(s){return r._handleAnimationEnd(s)}),te(2,"div",2),ot(3),ne()()),2&i&&(ht("mdc-tooltip--multiline",r._isMultiline),ie("ngClass",r.tooltipClass),re(3),mr(r.message))},dependencies:[eE],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip{--mdc-plain-tooltip-container-shape:4px;--mdc-plain-tooltip-supporting-text-line-height:16px}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}return n})(),Bme=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:[Sme],imports:[Sfe,nE,Cme,Qr,Qr,hR]})}return n})(),Ume=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.password=""}createUserWithEmAndPa(){this.authService.createUserWithEmAndPa(this.email,this.password),this.router.navigate(["login"]),this.isLoggedIn=""}static#e=this.\u0275fac=function(i){return new(i||n)(N(Nw),N(Fo))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-signup"]],decls:14,vars:2,consts:[[1,"container-0"],["matTooltipPosition","left","matTooltip","K\xe9rj\xfck \xedrja be az e-mail c\xedm\xe9t \xe9s haszn\xe1ljon egy er\u0151s jelsz\xf3t a sikeres regisztr\xe1l\xe1shoz."],[3,"ngSubmit"],["for","email"],["matInput","","type","email","name","email",3,"ngModel","ngModelChange"],["for","password"],["matInput","","type","password","name","password",3,"ngModel","ngModelChange"],["color","accent","mat-raised-button","","type","submit"]],template:function(i,r){1&i&&(te(0,"div",0)(1,"h2",1),ot(2,"Regisztr\xe1ci\xf3 Email c\xedmmel"),ne()(),te(3,"form",2),Be("ngSubmit",function(){return r.createUserWithEmAndPa()}),te(4,"mat-form-field")(5,"mat-label",3),ot(6,"Email"),ne(),te(7,"input",4),Be("ngModelChange",function(s){return r.email=s}),ne()(),te(8,"mat-form-field")(9,"mat-label",5),ot(10,"Jelsz\xf3"),ne(),te(11,"input",6),Be("ngModelChange",function(s){return r.password=s}),ne()(),te(12,"button",7),ot(13,"Regisztr\xe1ci\xf3"),ne()()),2&i&&(re(7),ie("ngModel",r.email),re(4),ie("ngModel",r.password))},dependencies:[vE,zu,wf,cE,Wu,Gu,sR,rv,lR,cR,T4],styles:[".container-0[_ngcontent-%COMP%]{display:flex;justify-content:center}.container-0[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:50px;width:max-content;padding:10px;border:2px solid rgb(128,128,128);background-color:#80808080}.container-0[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:#fff;background-color:#47464680;cursor:help}form[_ngcontent-%COMP%]{display:grid}"]})}return n})();function jme(n,t){1&n&&(te(0,"div",3)(1,"h2",4),ot(2," Bejelentkez\xe9s Email c\xedmmel "),ne()())}function Hme(n,t){if(1&n){const e=qi();te(0,"form",5),Be("ngSubmit",function(){return Yt(e),Lt(Se().loginWithEmAndPa())}),te(1,"mat-form-field")(2,"mat-label",6),ot(3,"Email"),ne(),te(4,"input",7),Be("ngModelChange",function(r){return Yt(e),Lt(Se().email=r)}),ne()(),te(5,"mat-form-field")(6,"mat-label",8),ot(7,"Jelsz\xf3"),ne(),te(8,"input",9),Be("ngModelChange",function(r){return Yt(e),Lt(Se().password=r)}),ne()(),te(9,"button",10),ot(10,"Bejelentkez\xe9s"),ne(),te(11,"h4",11),ot(12," Vagy bejelentkez\xe9s: "),te(13,"a",12),Be("click",function(){Yt(e);const r=Se();return r.facebookOrGoogle=!0,Lt(r.booleanFunction())}),Jt(14,"i",13),ne(),te(15,"a",14),Be("click",function(){Yt(e);const r=Se();return r.facebookOrGoogle=!1,Lt(r.booleanFunction())}),Jt(16,"i",15),ne(),te(17,"button",16),Be("click",function(){Yt(e);const r=Se();return r.booleanFunction(),Lt(r.isPhone=!r.isPhone)}),Jt(18,"span",17),ne()()()}if(2&n){const e=Se();re(4),ie("ngModel",e.email),re(4),ie("ngModel",e.password)}}function $me(n,t){if(1&n){const e=qi();te(0,"div",19)(1,"button",20),Be("click",function(){return Yt(e),Lt(Se(2).loginWithGoogle())}),Jt(2,"i",21),ot(3," Bejelentkez\xe9s "),ne()()}if(2&n){const e=Se(2);re(1),ie("disabled",!e.facebookOrGoogle)}}function zme(n,t){if(1&n){const e=qi();te(0,"div",19)(1,"button",22),Be("click",function(){return Yt(e),Lt(Se(2).loginWithFacebook())}),Jt(2,"i",23),ot(3," Bejelentkez\xe9s "),ne()()}if(2&n){const e=Se(2);re(1),ie("disabled",e.facebookOrGoogle)}}function Gme(n,t){if(1&n&&(mc(0),xe(1,$me,4,1,"div",18),xe(2,zme,4,1,"div",18),gc()),2&n){const e=Se();re(1),ie("ngIf",e.emailOrGoogle),re(1),ie("ngIf",e.emailOrGoogle)}}function Wme(n,t){if(1&n){const e=qi();mc(0),Jt(1,"div",24),te(2,"div",25)(3,"div",26)(4,"input",27),Be("ngModelChange",function(r){return Yt(e),Lt(Se().phoneNumber=r)}),ne(),te(5,"label",28),ot(6,"Telefonsz\xe1m"),ne()(),te(7,"div",29),Jt(8,"span",30),ne(),te(9,"div",31)(10,"button",32),Be("click",function(){return Yt(e),Lt(Se().startLoginWithPhoneNumber())}),Jt(11,"i",33),ot(12," Bejelentkez\xe9s "),ne()()(),gc()}if(2&n){const e=Se();re(2),ie("ngClass",e.isPhone?"d-flex":"d-none"),re(2),ie("ngModel",e.phoneNumber)}}function qme(n,t){if(1&n){const e=qi();mc(0),te(1,"div",34)(2,"input",35),Be("ngModelChange",function(r){return Yt(e),Lt(Se().verificationCode=r)}),ne(),te(3,"label",36),ot(4,"Meger\u0151s\xedt\u0151 k\xf3d"),ne()(),te(5,"div",37)(6,"button",38),Be("click",function(){return Yt(e),Lt(Se().verifyPhoneNumberAndLogin())}),ot(7," K\xf3d meger\u0151s\xedt\xe9se "),ne()(),gc()}if(2&n){const e=Se();re(2),ie("ngModel",e.verificationCode)}}let Kme=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.password="",this.emailOrGoogle=!1,this.facebookOrGoogle=!1,this.isPhone=!1,this.reCapthcaOff=!1}loginWithEmAndPa(){this.authService.loginWithEmAndPa(this.email,this.password),this.router.navigate(["notes"])}loginWithGoogle(){this.authService.signInWithGoogle().then(()=>this.router.navigate(["notes"]))}loginWithFacebook(){this.authService.signInWithFacebook().then(()=>this.router.navigate(["notes"]))}booleanFunction(){this.emailOrGoogle=!this.emailOrGoogle}startLoginWithPhoneNumber(){this.authService.signInWithPhoneNumber(this.phoneNumber).then(e=>{this.verificationId=e.verificationId,this.reCapthcaOff=!0})}verifyPhoneNumberAndLogin(){const e=X_.P.credential(this.verificationId,this.verificationCode);this.authService.verifyPhoneNumberAndSignIN(e).then(()=>this.router.navigate(["notes"]))}static#e=this.\u0275fac=function(i){return new(i||n)(N(Nw),N(Fo))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-login"]],decls:5,vars:5,consts:[["class","container-0",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[4,"ngIf"],[1,"container-0"],["matTooltipPosition","left","matTooltip","K\xe9rj\xfck \xedrja be az e-mail c\xedm\xe9t \xe9s haszn\xe1ljon egy er\u0151s jelsz\xf3t a sikeres regisztr\xe1l\xe1shoz."],[3,"ngSubmit"],["for","email"],["matInput","","type","email","name","email",3,"ngModel","ngModelChange"],["for","password"],["matInput","","type","password","name","password",3,"ngModel","ngModelChange"],["color","accent","mat-raised-button","","type","submit"],[1,"text-center","mt-2","fs-5"],["type","button",1,"btn","btn-warning","ms-2",3,"click"],[1,"bi","bi-google","h4"],["type","button",1,"btn","btn-primary","mx-2",3,"click"],[1,"bi","bi-facebook","h4"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-telephone","h4"],["class","mt-4 d-grid gap-2 col-6 mx-auto google-container",4,"ngIf"],[1,"mt-4","d-grid","gap-2","col-6","mx-auto","google-container"],["color","warn","mat-raised-button","","type","button",1,"btn","btn-lg",3,"disabled","click"],[1,"bi","bi-google"],["color","primary","mat-raised-button","","type","button",1,"btn","btn-lg",3,"disabled","click"],[1,"bi","bi-facebook"],["id","reCaptchaContainer",1,"flexToMiddleContainer"],[1,"row","no-padding","justify-content-center","align-items-center",3,"ngClass"],[1,"form-floating","mt-4","col-6","no-padding"],["id","phoneNumber","name","phoneNumber","type","text","placeholder","Telefonsz\xe1m",1,"form-control",3,"ngModel","ngModelChange"],["for","phoneNumber"],[1,"col-6","mt-4","ms-2","no-padding","text-center","span-div"],[1,"p-2","bi","bi-telephone-fill","h2","text-dark","bg-success","rounded"],[1,"col-12","text-center","mt-1"],["type","button",1,"btn","btn-success",3,"click"],[1,"bi","bi-telephone"],[1,"form-floating","col-12","text-center","flexToMiddleContainer"],["id","verify-code","name","verify-code","type","text","placeholder","Meger\u0151s\xedt\u0151 k\xf3d",1,"form-control",3,"ngModel","ngModelChange"],["for","verify-code"],[1,"col-12","text-center"],["type","button",1,"btn","btn-dark","mt-1",3,"click"]],template:function(i,r){1&i&&(xe(0,jme,3,0,"div",0),xe(1,Hme,19,2,"form",1),xe(2,Gme,3,2,"ng-container",2),xe(3,Wme,13,2,"ng-container",2),xe(4,qme,8,1,"ng-container",2)),2&i&&(ie("ngIf",!r.emailOrGoogle),re(1),ie("ngIf",!r.emailOrGoogle),re(1),ie("ngIf",r.emailOrGoogle&&!r.isPhone),re(1),ie("ngIf",r.emailOrGoogle&&!r.reCapthcaOff),re(1),ie("ngIf",r.verificationId))},dependencies:[eE,rs,vE,zu,wf,cE,Wu,Gu,sR,rv,lR,cR,T4],styles:[".container-0[_ngcontent-%COMP%]{display:flex;justify-content:center}.container-0[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:50px;width:max-content;padding:10px;border:2px solid rgb(128,128,128);background-color:#80808080}.container-0[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:#fff;background-color:#47464680;cursor:help}.google-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100px}form[_ngcontent-%COMP%]{display:grid}.no-padding[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.span-div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.flexToMiddleContainer[_ngcontent-%COMP%]{display:flex!important;justify-content:center!important;margin-top:350px!important}.flexToMiddleContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35%}.flexToMiddleContainer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{left:44%;width:20%}"]})}return n})();function Zme(n,t){if(1&n&&(te(0,"div",3)(1,"b"),ot(2),ne()()),2&n){const e=t.$implicit;re(2),mr(e)}}function Yme(n,t){if(1&n){const e=qi();te(0,"div",5)(1,"div",3),ot(2),ne(),te(3,"div",3),Jt(4,"img",6),ne(),te(5,"div",3),ot(6),ne(),te(7,"div",3)(8,"div",7)(9,"input",8),Be("ngModelChange",function(r){return Lt(Yt(e).$implicit.claims.superAdmin=r)}),ne(),te(10,"label",9),ot(11,"Super Admin"),ne()(),te(12,"div",7)(13,"input",8),Be("ngModelChange",function(r){return Lt(Yt(e).$implicit.claims.admin=r)}),ne(),te(14,"label",9),ot(15,"Admin"),ne()(),te(16,"div",7)(17,"input",8),Be("ngModelChange",function(r){return Lt(Yt(e).$implicit.claims.basic=r)}),ne(),te(18,"label",9),ot(19,"Alap jogosults\xe1g"),ne()(),te(20,"div",10)(21,"button",11),Be("click",function(){const o=Yt(e).$implicit;return Lt(Se(2).save(o))}),ot(22,"Save"),ne()()()()}if(2&n){const e=t.$implicit;re(2),mr(e.displayName),re(2),T0("src",e.profilePicture,mx),re(2),mr(e.email),re(3),ie("ngModel",e.claims.superAdmin),re(4),ie("ngModel",e.claims.admin),re(4),ie("ngModel",e.claims.basic)}}function Qme(n,t){if(1&n&&(mc(0),xe(1,Yme,23,6,"div",4),gc()),2&n){const e=Se();re(1),ie("ngForOf",e.users)}}let Jme=(()=>{class n{constructor(e){this.authService=e,this.columns=["Megjelen\xedt\xe9si n\xe9v","Profilk\xe9p","Email-c\xedm","Jogosults\xe1gok"],this.authService.getUsers()?.subscribe(i=>{this.users=i})}save(e){this.authService.setCustomClaims(e.uid,e.claims)}static#e=this.\u0275fac=function(i){return new(i||n)(N(Nw))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-users"]],decls:3,vars:2,consts:[[1,"row","mt-3","mb-4","text-center"],["class","col-12 col-md-6 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12","col-md-6","col-lg-4","col-xl-3"],["class","row text-center",4,"ngFor","ngForOf"],[1,"row","text-center"],["alt","Profilk\xe9p",3,"src"],[1,"form-check","form-switch"],["type","checkbox","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"col"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,r){1&i&&(te(0,"div",0),xe(1,Zme,3,1,"div",1),ne(),xe(2,Qme,2,1,"ng-container",2)),2&i&&(re(1),ie("ngForOf",r.columns),re(1),ie("ngIf",r.users))},dependencies:[Oa,rs,xS,wf,Wu]})}return n})();const Xme=["*"],nge=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],ige=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],rge=new de("MAT_CARD_CONFIG");let C4=(()=>{class n{constructor(e){this.appearance=e?.appearance||"raised"}static#e=this.\u0275fac=function(i){return new(i||n)(N(rge,8))};static#t=this.\u0275cmp=cn({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){2&i&&ht("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Xme,decls:1,vars:0,template:function(i,r){1&i&&(wl(),Ei(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),I4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})(),x4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=me({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),D4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:ige,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){1&i&&(wl(nge),Ei(0),te(1,"div",0),Ei(2,1),ne(),Ei(3,2))},encapsulation:2,changeDetection:0})}return n})(),lge=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,nE,Qr]})}return n})();function cge(n,t){if(1&n&&(mc(0),te(1,"div",5)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),ot(5),ne()(),te(6,"mat-card-content")(7,"p"),ot(8),ne()()()(),gc()),2&n){const e=Se();re(5),mr(e.weather.location),re(3),mr(e.weather.forecast)}}const uge=[{path:"",component:dae},{path:"notes",component:Ohe},{path:"signup",component:Ume},{path:"login",component:Kme},{path:"users",component:Jme},{path:"weather",component:(()=>{class n{constructor(e){this.baseService=e,this.location="",this.weather={}}getWeather(e){this.baseService.getWeather(e).subscribe(i=>{this.weather=i})}static#e=this.\u0275fac=function(i){return new(i||n)(N(c3))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-weather"]],decls:8,vars:2,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"mt-4"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-flat-button","","color","accent",1,"ms-2",3,"click"],[4,"ngIf"],[1,"d-grid","justify-content-center"]],template:function(i,r){1&i&&(te(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),ot(3,"Hely neve"),ne(),te(4,"input",2),Be("ngModelChange",function(s){return r.location=s}),ne()(),te(5,"button",3),Be("click",function(){return r.getWeather(r.location)}),ot(6,"Keres\xe9s"),ne()(),xe(7,cge,9,2,"ng-container",4)),2&i&&(re(4),ie("ngModel",r.location),re(3),ie("ngIf",r.weather.location))},dependencies:[rs,zu,wf,Wu,sR,rv,C4,x4,D4,I4,lR,cR]})}return n})()},{path:"**",redirectTo:""}];let dge=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[wH.forRoot(uge),wH]})}return n})();function mR(){return se((n,t)=>{let e,i=!1;n.subscribe(De(t,r=>{const o=e;e=r,i&&t.next([o,r]),i=!0}))})}var Pe,hge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sa={},gR=gR||{},Ct=hge||self;function $w(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function sv(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var _R="closure_uid_"+(1e9*Math.random()>>>0),pge=0;function mge(n,t,e){return n.call.apply(n.bind,arguments)}function gge(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Jr(n,t,e){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mge:gge).apply(null,arguments)}function zw(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function wr(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[r].apply(i,s)}}function $c(){this.s=this.s,this.o=this.o}$c.prototype.s=!1,$c.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function fge(n){Object.prototype.hasOwnProperty.call(n,_R)&&n[_R]||(n[_R]=++pge)}(this)},$c.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S4=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function vR(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function A4(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if($w(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let s=0;s<o;s++)n[r+s]=i[s]}else n.push(i)}}function Xr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Xr.prototype.h=function(){this.defaultPrevented=!0};var vge=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",()=>{},t),Ct.removeEventListener("test",()=>{},t)}catch{}return n}();function av(n){return/^[\s\xa0]*$/.test(n)}function Gw(){var n=Ct.navigator;return n&&(n=n.userAgent)?n:""}function ja(n){return-1!=Gw().indexOf(n)}function yR(n){return yR[" "](n),n}yR[" "]=function(){};var ER,n,bge=ja("Opera"),sp=ja("Trident")||ja("MSIE"),R4=ja("Edge"),bR=R4||sp,N4=ja("Gecko")&&!(-1!=Gw().toLowerCase().indexOf("webkit")&&!ja("Edge"))&&!(ja("Trident")||ja("MSIE"))&&!ja("Edge"),Ege=-1!=Gw().toLowerCase().indexOf("webkit")&&!ja("Edge");function M4(){var n=Ct.document;return n?n.documentMode:void 0}e:{var wR="",TR=(n=Gw(),N4?/rv:([^\);]+)(\)|;)/.exec(n):R4?/Edge\/([\d\.]+)/.exec(n):sp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ege?/WebKit\/(\S+)/.exec(n):bge?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(TR&&(wR=TR?TR[1]:""),sp){var CR=M4();if(null!=CR&&CR>parseFloat(wR)){ER=String(CR);break e}}ER=wR}var wge=Ct.document&&sp&&(M4()||parseInt(ER,10))||void 0;function lv(n,t){if(Xr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(N4){e:{try{yR(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Tge[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&lv.$.h.call(this)}}wr(lv,Xr);var Tge={2:"touch",3:"pen",4:"mouse"};lv.prototype.h=function(){lv.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cv="closure_listenable_"+(1e6*Math.random()|0),Cge=0;function Ige(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++Cge,this.fa=this.ia=!1}function Ww(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function xR(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function O4(n){const t={};for(const e in n)t[e]=n[e];return t}const P4="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F4(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let o=0;o<P4.length;o++)e=P4[o],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function qw(n){this.src=n,this.g={},this.h=0}function DR(n,t){var e=t.type;if(e in n.g){var o,i=n.g[e],r=S4(i,t);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Ww(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function SR(n,t,e,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.fa&&o.listener==t&&o.capture==!!e&&o.la==i)return r}return-1}qw.prototype.add=function(n,t,e,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=SR(n,t,i,r);return-1<s?(t=n[s],e||(t.ia=!1)):((t=new Ige(t,this.src,o,!!i,r)).ia=e,n.push(t)),t};var AR="closure_lm_"+(1e6*Math.random()|0),RR={};function L4(n,t,e,i,r){if(i&&i.once)return B4(n,t,e,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)L4(n,t[o],e,i,r);return null}return e=OR(e),n&&n[cv]?n.O(t,e,sv(i)?!!i.capture:!!i,r):V4(n,t,e,!1,i,r)}function V4(n,t,e,i,r,o){if(!t)throw Error("Invalid event type");var s=sv(r)?!!r.capture:!!r,a=MR(n);if(a||(n[AR]=a=new qw(n)),(e=a.add(t,e,i,s,o)).proxy)return e;if(i=function Dge(){const t=Sge;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)vge||(r=s),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(j4(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function B4(n,t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)B4(n,t[o],e,i,r);return null}return e=OR(e),n&&n[cv]?n.P(t,e,sv(i)?!!i.capture:!!i,r):V4(n,t,e,!0,i,r)}function U4(n,t,e,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)U4(n,t[o],e,i,r);else i=sv(i)?!!i.capture:!!i,e=OR(e),n&&n[cv]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=SR(o=n.g[t],e,i,r))&&(Ww(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=MR(n))&&(t=n.g[t.toString()],n=-1,t&&(n=SR(t,e,i,r)),(e=-1<n?t[n]:null)&&NR(e))}function NR(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[cv])DR(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(j4(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=MR(t))?(DR(e,n),0==e.h&&(e.src=null,t[AR]=null)):Ww(n)}}}function j4(n){return n in RR?RR[n]:RR[n]="on"+n}function Sge(n,t){if(n.fa)n=!0;else{t=new lv(t,this);var e=n.listener,i=n.la||n.src;n.ia&&NR(n),n=e.call(i,t)}return n}function MR(n){return(n=n[AR])instanceof qw?n:null}var kR="__closure_events_fn_"+(1e9*Math.random()>>>0);function OR(n){return"function"==typeof n?n:(n[kR]||(n[kR]=function(t){return n.handleEvent(t)}),n[kR])}function Tr(){$c.call(this),this.i=new qw(this),this.S=this,this.J=null}function Pr(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new Xr(t,n);else if(t instanceof Xr)t.target=t.target||n;else{var r=t;F4(t=new Xr(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.g=e[o];r=Kw(s,i,!0,t)&&r}if(r=Kw(s=t.g=n,i,!0,t)&&r,r=Kw(s,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Kw(s=t.g=e[o],i,!1,t)&&r}function Kw(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==e){var a=s.listener,l=s.la||s.src;s.ia&&DR(n.i,s),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}wr(Tr,$c),Tr.prototype[cv]=!0,Tr.prototype.removeEventListener=function(n,t,e,i){U4(this,n,t,e,i)},Tr.prototype.N=function(){if(Tr.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Ww(e[i]);delete n.g[t],n.h--}}this.J=null},Tr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Tr.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var PR=Ct.JSON.stringify;function Rge(){var n=FR;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var H4=new class Age{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Mge,n=>n.reset());class Mge{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function kge(n){var t=1;n=n.split(":");const e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function Oge(n){Ct.setTimeout(()=>{throw n},0)}let uv,dv=!1,FR=new class Nge{constructor(){this.h=this.g=null}add(t,e){const i=H4.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},$4=()=>{const n=Ct.Promise.resolve(void 0);uv=()=>{n.then(Pge)}};var Pge=()=>{for(var n;n=Rge();){try{n.h.call(n.g)}catch(e){Oge(e)}var t=H4;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}dv=!1};function Zw(n,t){Tr.call(this),this.h=n||1,this.g=t||Ct,this.j=Jr(this.qb,this),this.l=Date.now()}function LR(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function VR(n,t,e){if("function"==typeof n)e&&(n=Jr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Ct.setTimeout(n,t||0)}function z4(n){n.g=VR(()=>{n.g=null,n.i&&(n.i=!1,z4(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}wr(Zw,Tr),(Pe=Zw.prototype).ga=!1,Pe.T=null,Pe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pr(this,"tick"),this.ga&&(LR(this),this.start()))}},Pe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pe.N=function(){Zw.$.N.call(this),LR(this),delete this.g};class Fge extends $c{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:z4(this)}N(){super.N(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hv(n){$c.call(this),this.h=n,this.g={}}wr(hv,$c);var G4=[];function W4(n,t,e,i){Array.isArray(e)||(e&&(G4[0]=e.toString()),e=G4);for(var r=0;r<e.length;r++){var o=L4(t,e[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function q4(n){xR(n.g,function(t,e){this.g.hasOwnProperty(e)&&NR(t)},n),n.g={}}function Yw(){this.g=!0}function ap(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Uge(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return PR(e)}catch{return t}}(n,e)+(i?" "+i:"")})}hv.prototype.N=function(){hv.$.N.call(this),q4(this)},hv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yw.prototype.Ea=function(){this.g=!1},Yw.prototype.info=function(){};var fd={},K4=null;function Qw(){return K4=K4||new Tr}function Z4(n){Xr.call(this,fd.Ta,n)}function fv(n){const t=Qw();Pr(t,new Z4(t))}function Y4(n,t){Xr.call(this,fd.STAT_EVENT,n),this.stat=t}function To(n){const t=Qw();Pr(t,new Y4(t,n))}function Q4(n,t){Xr.call(this,fd.Ua,n),this.size=t}function pv(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},t)}fd.Ta="serverreachability",wr(Z4,Xr),fd.STAT_EVENT="statevent",wr(Y4,Xr),fd.Ua="timingevent",wr(Q4,Xr);var Jw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},J4={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function BR(){}function eG(){}BR.prototype.h=null;var HR,mv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function UR(){Xr.call(this,"d")}function jR(){Xr.call(this,"c")}function Xw(){}function gv(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new hv(this),this.P=jge,this.V=new Zw(n=bR?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tG}function tG(){this.i=null,this.g="",this.h=!1}wr(UR,Xr),wr(jR,Xr),wr(Xw,BR),Xw.prototype.g=function(){return new XMLHttpRequest},Xw.prototype.i=function(){return{}},HR=new Xw;var jge=45e3,$R={},eT={};function zR(n,t,e){n.L=1,n.v=rT(kl(t)),n.s=e,n.S=!0,nG(n,null)}function nG(n,t){n.G=Date.now(),_v(n),n.A=kl(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),hG(e.i,"t",i),n.C=0,e=n.l.J,n.h=new tG,n.g=FG(n.l,e?t:null,!n.s),0<n.O&&(n.M=new Fge(Jr(n.Pa,n,n.g),n.O)),W4(n.U,n.g,"readystatechange",n.nb),t=n.I?O4(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),fv(),function Lge(n,t,e,i,r,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");s=2<=f.length&&"type"==f[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+s})}(n.j,n.u,n.A,n.m,n.W,n.s)}function iG(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function rG(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=Hge(n,e),r==eT){4==t&&(n.o=4,To(14),i=!1),ap(n.j,n.m,null,"[Incomplete Response]");break}if(r==$R){n.o=4,To(15),ap(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}ap(n.j,n.m,r,null),GR(n,r)}iG(n)&&r!=eT&&r!=$R&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,To(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,(t=n.l).g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),JR(t),t.M=!0,To(11))):(ap(n.j,n.m,e,"[Invalid Chunked Response]"),pd(n),vv(n))}function Hge(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?eT:(e=Number(t.substring(e,i)),isNaN(e)?$R:(i+=1)+e>t.length?eT:(t=t.slice(i,i+e),n.C=i+e,t))}function _v(n){n.Y=Date.now()+n.P,oG(n,n.P)}function oG(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=pv(Jr(n.lb,n),t)}function tT(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function vv(n){0==n.l.H||n.J||MG(n.l,n)}function pd(n){tT(n);var t=n.M;t&&"function"==typeof t.sa&&t.sa(),n.M=null,LR(n.V),q4(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function GR(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||WR(e.i,n)))if(!n.K&&WR(e.i,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;uT(e),lT(e)}QR(e),To(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.G&&0==e.A&&!e.v&&(e.v=pv(Jr(e.ib,e),6e3));if(1>=mG(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else gd(e,11)}else if((n.K||e.g==n)&&uT(e),!av(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(e.V=c[0],c=c[1],2==e.H)if("c"==c[0]){e.K=c[1],e.pa=c[2];const u=c[3];null!=u&&(e.ra=u,e.l.info("VER="+e.ra));const f=c[4];null!=f&&(e.Ga=f,e.l.info("SVER="+e.Ga));const g=c[5];null!=g&&"number"==typeof g&&0<g&&(e.L=i=1.5*g,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;const _=n.g;if(_){const y=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=i.i;o.g||-1==y.indexOf("spdy")&&-1==y.indexOf("quic")&&-1==y.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(qR(o,o.h),o.h=null))}if(i.F){const b=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(i.Da=b,li(i.I,i.F,b))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms"));var s=n;if((i=e).wa=PG(i,i.J?i.pa:null,i.Y),s.K){gG(i.i,s);var a=s,l=i.L;l&&a.setTimeout(l),a.B&&(tT(a),_v(a)),i.g=s}else RG(i);0<e.j.length&&cT(e)}else"stop"!=c[0]&&"close"!=c[0]||gd(e,7);else 3==e.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gd(e,7):YR(e):"noop"!=c[0]&&e.h&&e.h.Aa(c),e.A=0)}fv()}catch{}}function sG(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if($w(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function zge(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if($w(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function $ge(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if($w(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],e&&e[o],n)}(Pe=gv.prototype).setTimeout=function(n){this.P=n},Pe.nb=function(n){n=n.target;const t=this.M;t&&3==Ha(n)?t.l():this.Pa(n)},Pe.Pa=function(n){try{if(n==this.g)e:{const u=Ha(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||bR||this.g&&(this.h.h||this.g.ja()||CG(this.g)))){this.J||4!=u||7==t||fv(),tT(this);var e=this.g.da();this.ca=e;t:if(iG(this)){var i=CG(this.g);n="";var r=i.length,o=4==Ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){pd(this),vv(this);var s="";break t}this.h.i=new Ct.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==e,function Vge(n,t,e,i,r,o,s){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.W,u,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!av(a)){var c=a;break t}}c=null}if(!(e=c)){this.i=!1,this.o=3,To(12),pd(this),vv(this);break e}ap(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,GR(this,e)}this.S?(rG(this,u,s),bR&&this.i&&3==u&&(W4(this.U,this.V,"tick",this.mb),this.V.start())):(ap(this.j,this.m,s,null),GR(this,s)),4==u&&pd(this),this.i&&!this.J&&(4==u?MG(this.l,this):(this.i=!1,_v(this)))}else(function l_e(n){const t={};n=(n.g&&2<=Ha(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(av(n[i]))continue;var e=kge(n[i]);const r=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const o=t[r]||[];t[r]=o,o.push(e)}!function xge(n,t){for(const e in n)t.call(void 0,n[e],e,n)}(t,function(i){return i.join(", ")})})(this.g),400==e&&0<s.indexOf("Unknown SID")?(this.o=3,To(12)):(this.o=0,To(13)),pd(this),vv(this)}}}catch{}},Pe.mb=function(){if(this.g){var n=Ha(this.g),t=this.g.ja();this.C<t.length&&(tT(this),rG(this,n,t),this.i&&4!=n&&_v(this))}},Pe.cancel=function(){this.J=!0,pd(this)},Pe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Bge(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(fv(),To(17)),pd(this),this.o=2,vv(this)):oG(this,this.Y-n)};var aG=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function md(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof md){this.h=n.h,nT(this,n.j),this.s=n.s,this.g=n.g,iT(this,n.m),this.l=n.l;var t=n.i,e=new Ev;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),lG(this,e),this.o=n.o}else n&&(t=String(n).match(aG))?(this.h=!1,nT(this,t[1]||"",!0),this.s=yv(t[2]||""),this.g=yv(t[3]||"",!0),iT(this,t[4]),this.l=yv(t[5]||"",!0),lG(this,t[6]||"",!0),this.o=yv(t[7]||"")):(this.h=!1,this.i=new Ev(null,this.h))}function kl(n){return new md(n)}function nT(n,t,e){n.j=e?yv(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function iT(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function lG(n,t,e){t instanceof Ev?(n.i=t,function Qge(n,t){t&&!n.j&&(zc(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(uG(this,i),hG(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=bv(t,Zge)),n.i=new Ev(t,n.h))}function li(n,t,e){n.i.set(t,e)}function rT(n){return li(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yv(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bv(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,Wge),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Wge(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}md.prototype.toString=function(){var n=[],t=this.j;t&&n.push(bv(t,cG,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(bv(t,cG,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(bv(e,"/"==e.charAt(0)?Kge:qge,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",bv(e,Yge)),n.join("")};var cG=/[#\/\?@]/g,qge=/[#\?:]/g,Kge=/[#\?]/g,Zge=/[#\?@]/g,Yge=/#/g;function Ev(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function zc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Gge(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var o=n[e].substring(0,i);r=n[e].substring(i+1)}else o=n[e];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function uG(n,t){zc(n),t=lp(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function dG(n,t){return zc(n),t=lp(n,t),n.g.has(t)}function hG(n,t,e){uG(n,t),0<e.length&&(n.i=null,n.g.set(lp(n,t),vR(e)),n.h+=e.length)}function lp(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function fG(n){this.l=n||Xge,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ka&&Ct.g.Ka()&&Ct.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Pe=Ev.prototype).add=function(n,t){zc(this),this.i=null,n=lp(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Pe.forEach=function(n,t){zc(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},Pe.ta=function(){zc(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let o=0;o<r.length;o++)e.push(t[i])}return e},Pe.Z=function(n){zc(this);let t=[];if("string"==typeof n)dG(this,n)&&(t=t.concat(this.g.get(lp(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},Pe.set=function(n,t){return zc(this),this.i=null,dG(this,n=lp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Pe.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},Pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;""!==s[i]&&(r+="="+encodeURIComponent(String(s[i]))),n.push(r)}}return this.i=n.join("&")};var Xge=10;function pG(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mG(n){return n.h?1:n.g?n.g.size:0}function WR(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function qR(n,t){n.g?n.g.add(t):n.h=t}function gG(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function _G(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return vR(n.i)}fG.prototype.cancel=function(){if(this.i=_G(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var e_e=class{stringify(n){return Ct.JSON.stringify(n,void 0)}parse(n){return Ct.JSON.parse(n,void 0)}};function t_e(){this.g=new e_e}function n_e(n,t,e){const i=e||"";try{sG(n,function(r,o){let s=r;sv(r)&&(s=PR(r)),t.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function oT(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function wv(n){this.l=n.ec||null,this.j=n.ob||!1}function sT(n,t){Tr.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=KR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wr(wv,BR),wv.prototype.g=function(){return new sT(this.l,this.j)},wv.prototype.i=function(n){return function(){return n}}({}),wr(sT,Tr);var KR=0;function vG(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Tv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Cv(n)}function Cv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Pe=sT.prototype).open=function(n,t){if(this.readyState!=KR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Cv(this)},Pe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||Ct).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tv(this)),this.readyState=KR},Pe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Cv(this)),this.g&&(this.readyState=3,Cv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ct.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vG(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Pe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Tv(this):Cv(this),3==this.readyState&&vG(this)}},Pe.Za=function(n){this.g&&(this.response=this.responseText=n,Tv(this))},Pe.Ya=function(n){this.g&&(this.response=n,Tv(this))},Pe.ka=function(){this.g&&Tv(this)},Pe.setRequestHeader=function(n,t){this.v.append(n,t)},Pe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Pe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(sT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var r_e=Ct.JSON.parse;function Mi(n){Tr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yG,this.L=this.M=!1}wr(Mi,Tr);var yG="",o_e=/^https?$/i,s_e=["POST","PUT"];function bG(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,EG(n),aT(n)}function EG(n){n.F||(n.F=!0,Pr(n,"complete"),Pr(n,"error"))}function wG(n){if(n.h&&typeof gR<"u"&&(!n.C[1]||4!=Ha(n)||2!=n.da()))if(n.v&&4==Ha(n))VR(n.La,0,n);else if(Pr(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===s){var r=String(n.I).match(aG)[1]||null;!r&&Ct.self&&Ct.self.location&&(r=Ct.self.location.protocol.slice(0,-1)),i=!o_e.test(r?r.toLowerCase():"")}e=i}if(e)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var o=2<Ha(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",EG(n)}}finally{aT(n)}}}function aT(n,t){if(n.g){TG(n);const e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||Pr(n,"ready");try{e.onreadystatechange=i}catch{}}}function TG(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function CG(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case yG:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function IG(n){let t="";return xR(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function ZR(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=IG(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):li(n,t,e))}function Iv(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function xG(n){this.Ga=0,this.j=[],this.l=new Yw,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Iv("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Iv("baseRetryDelayMs",5e3,n),this.hb=Iv("retryDelaySeedMs",1e4,n),this.eb=Iv("forwardChannelMaxRetries",2,n),this.xa=Iv("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new fG(n&&n.concurrentRequestLimit),this.Ja=new t_e,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function YR(n){if(DG(n),3==n.H){var t=n.W++,e=kl(n.I);if(li(e,"SID",n.K),li(e,"RID",t),li(e,"TYPE","terminate"),xv(n,e),(t=new gv(n,n.l,t)).L=2,t.v=rT(kl(e)),e=!1,Ct.navigator&&Ct.navigator.sendBeacon)try{e=Ct.navigator.sendBeacon(t.v.toString(),"")}catch{}!e&&Ct.Image&&((new Image).src=t.v,e=!0),e||(t.g=FG(t.l,null),t.g.ha(t.v)),t.G=Date.now(),_v(t)}OG(n)}function lT(n){n.g&&(JR(n),n.g.cancel(),n.g=null)}function DG(n){lT(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),uT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function cT(n){if(!pG(n.i)&&!n.m){n.m=!0;var t=n.Na;uv||$4(),dv||(uv(),dv=!0),FR.add(t,n),n.C=0}}function SG(n,t){var e;e=t?t.m:n.W++;const i=kl(n.I);li(i,"SID",n.K),li(i,"RID",e),li(i,"AID",n.V),xv(n,i),n.o&&n.s&&ZR(i,n.o,n.s),e=new gv(n,n.l,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=AG(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),qR(n.i,e),zR(e,i,t)}function xv(n,t){n.na&&xR(n.na,function(e,i){li(t,i,e)}),n.h&&sG({},function(e,i){li(t,i,e)})}function AG(n,t,e){e=Math.min(n.j.length,e);var i=n.h?Jr(n.h.Va,n.h,n):null;e:{var r=n.j;let o=-1;for(;;){const s=["count="+e];-1==o?0<e?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<e;l++){let c=r[l].g;const u=r[l].map;if(c-=o,0>c)o=Math.max(0,r[l].g-100),a=!1;else try{n_e(u,s,"req"+c+"_")}catch{i&&i(u)}}if(a){i=s.join("&");break e}}}return n=n.j.splice(0,e),t.F=n,i}function RG(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;uv||$4(),dv||(uv(),dv=!0),FR.add(t,n),n.A=0}}function QR(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=pv(Jr(n.Ma,n),kG(n,n.A)),n.A++,0))}function JR(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function NG(n){n.g=new gv(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=kl(n.wa);li(t,"RID","rpc"),li(t,"SID",n.K),li(t,"AID",n.V),li(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&li(t,"TO",n.qa),li(t,"TYPE","xmlhttp"),xv(n,t),n.o&&n.s&&ZR(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.v=rT(kl(t)),e.s=null,e.S=!0,nG(e,n)}function uT(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function MG(n,t){var e=null;if(n.g==t){uT(n),JR(n),n.g=null;var i=2}else{if(!WR(n.i,t))return;e=t.F,gG(n.i,t),i=1}if(0!=n.H)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;Pr(i=Qw(),new Q4(i,e)),cT(n)}else RG(n);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function c_e(n,t){return!(mG(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=t.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=pv(Jr(n.Na,n,t),kG(n,n.C)),n.C++,0)))}(n,t)||2==i&&QR(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:gd(n,5);break;case 4:gd(n,10);break;case 3:gd(n,6);break;default:gd(n,2)}}function kG(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function gd(n,t){if(n.l.info("Error code "+t),2==t){var e=null;n.h&&(e=null);var i=Jr(n.pb,n);e||(e=new md("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||nT(e,"https"),rT(e)),function i_e(n,t){const e=new Yw;if(Ct.Image){const i=new Image;i.onload=zw(oT,e,i,"TestLoadImage: loaded",!0,t),i.onerror=zw(oT,e,i,"TestLoadImage: error",!1,t),i.onabort=zw(oT,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=zw(oT,e,i,"TestLoadImage: timeout",!1,t),Ct.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else To(2);n.H=0,n.h&&n.h.za(t),OG(n),DG(n)}function OG(n){if(n.H=0,n.ma=[],n.h){const t=_G(n.i);(0!=t.length||0!=n.j.length)&&(A4(n.ma,t),A4(n.ma,n.j),n.i.i.length=0,vR(n.j),n.j.length=0),n.h.ya()}}function PG(n,t,e){var i=e instanceof md?kl(e):new md(e);if(""!=i.g)t&&(i.g=t+"."+i.g),iT(i,i.m);else{var r=Ct.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new md(null);i&&nT(o,i),t&&(o.g=t),r&&iT(o,r),e&&(o.l=e),i=o}return t=n.Da,(e=n.F)&&t&&li(i,e,t),li(i,"VER",n.ra),xv(n,i),i}function FG(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Mi(e&&n.Ha&&!n.va?new wv({ob:!0}):n.va)).Oa(n.J),t}function LG(){}function dT(){if(sp&&!(10<=Number(wge)))throw Error("Environmental error: no available transport.")}function cs(n,t){Tr.call(this),this.g=new xG(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!av(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!av(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new cp(this)}function VG(n){UR.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function BG(){jR.call(this),this.status=1}function cp(n){this.g=n}function aa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function XR(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var o=n.g[3],s=(t=n.g[0])+(o^(e=n.g[1])&((r=n.g[2])^o))+i[0]+3614090360&4294967295;s=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=(e=(r=(o=(t=e+(s<<7&4294967295|s>>>25))+((s=o+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=r+(e^o&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=e+(t^r&(o^t))+i[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^e&(r^o))+i[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=r+(e^o&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=e+(t^r&(o^t))+i[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^e&(r^o))+i[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=r+(e^o&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=e+(t^r&(o^t))+i[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^e&(r^o))+i[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=r+(e^o&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=e+(t^r&(o^t))+i[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(r^o&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^e&(o^t))+i[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=e+(o^t&(r^o))+i[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^o&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^e&(o^t))+i[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=e+(o^t&(r^o))+i[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^o&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^e&(o^t))+i[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=e+(o^t&(r^o))+i[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^o&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^e&(o^t))+i[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=e+(o^t&(r^o))+i[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(e^r^o)+i[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=e+(r^o^t)+i[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(e^r^o)+i[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=e+(r^o^t)+i[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(e^r^o)+i[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=e+(r^o^t)+i[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(e^r^o)+i[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^t^e)+i[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=e+(r^o^t)+i[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^(e|~o))+i[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(o|~e))+i[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=e+(o^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(r^(e|~o))+i[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(o|~e))+i[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=e+(o^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(r^(e|~o))+i[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(o|~e))+i[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=e+(o^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=e+((s=t+(r^(e|~o))+i[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((r=o+((s=r+(t^(o|~e))+i[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+o&4294967295}function On(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var o=0|n[r];i&&o==t||(e[r]=o,i=!1)}this.g=e}(Pe=Mi.prototype).Oa=function(n){this.M=n},Pe.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():HR.g(),this.C=function X4(n){return n.h||(n.h=n.i())}(this.u?this.u:HR),this.g.onreadystatechange=Jr(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(o){return void bG(this,o)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())e.set(o,i.get(o))}i=Array.from(e.keys()).find(o=>"content-type"==o.toLowerCase()),r=Ct.FormData&&n instanceof Ct.FormData,!(0<=S4(s_e,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of e)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{TG(this),0<this.B&&((this.L=function a_e(n){return sp&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.ua,this)):this.A=VR(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){bG(this,o)}},Pe.ua=function(){typeof gR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},Pe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),aT(this))},Pe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),aT(this,!0)),Mi.$.N.call(this)},Pe.La=function(){this.s||(this.G||this.v||this.l?wG(this):this.kb())},Pe.kb=function(){wG(this)},Pe.isActive=function(){return!!this.g},Pe.da=function(){try{return 2<Ha(this)?this.g.status:-1}catch{return-1}},Pe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Pe.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),r_e(t)}},Pe.Ia=function(){return this.m},Pe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Pe=xG.prototype).ra=8,Pe.H=1,Pe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new gv(this,this.l,n);let o=this.s;if(this.U&&(o?(o=O4(o),F4(o,this.U)):o=this.U),null!==this.o||this.O||(r.I=o,o=null),this.P)e:{for(var t=0,e=0;e<this.j.length;e++){var i=this.j[e];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.j.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=AG(this,r,t),li(e=kl(this.I),"RID",n),li(e,"CVER",22),this.F&&li(e,"X-HTTP-Session-Id",this.F),xv(this,e),o&&(this.O?t="headers="+encodeURIComponent(String(IG(o)))+"&"+t:this.o&&ZR(e,this.o,o)),qR(this.i,r),this.bb&&li(e,"TYPE","init"),this.P?(li(e,"$req",t),li(e,"SID","null"),r.aa=!0,zR(r,e,null)):zR(r,e,t),this.H=2}}else 3==this.H&&(n?SG(this,n):0==this.j.length||pG(this.i)||SG(this))},Pe.Ma=function(){if(this.u=null,NG(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=pv(Jr(this.jb,this),n)}},Pe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,To(10),lT(this),NG(this))},Pe.ib=function(){null!=this.v&&(this.v=null,lT(this),QR(this),To(19))},Pe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),To(2)):(this.l.info("Failed to ping google.com"),To(1))},Pe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Pe=LG.prototype).Ba=function(){},Pe.Aa=function(){},Pe.za=function(){},Pe.ya=function(){},Pe.isActive=function(){return!0},Pe.Va=function(){},dT.prototype.g=function(n,t){return new cs(n,t)},wr(cs,Tr),cs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;To(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=PG(n,null,n.Y),cT(n)},cs.prototype.close=function(){YR(this.g)},cs.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=PR(n),n=e);t.j.push(new class{constructor(n,t){this.g=n,this.map=t}}(t.fb++,n)),3==t.H&&cT(t)},cs.prototype.N=function(){this.g.h=null,delete this.j,YR(this.g),delete this.g,cs.$.N.call(this)},wr(VG,UR),wr(BG,jR),wr(cp,LG),cp.prototype.Ba=function(){Pr(this.g,"a")},cp.prototype.Aa=function(n){Pr(this.g,new VG(n))},cp.prototype.za=function(n){Pr(this.g,new BG)},cp.prototype.ya=function(){Pr(this.g,"b")},wr(aa,function u_e(){this.blockSize=-1}),aa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},aa.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,o=0;o<t;){if(0==r)for(;o<=e;)XR(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<t;)if(i[r++]=n.charCodeAt(o++),r==this.blockSize){XR(this,i),r=0;break}}else for(;o<t;)if(i[r++]=n[o++],r==this.blockSize){XR(this,i),r=0;break}}this.h=r,this.i+=t},aa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var d_e={};function eN(n){return-128<=n&&128>n?function yge(n,t){var e=d_e;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}(n,function(t){return new On([0|t],0>t?-1:0)}):new On([0|n],0>n?-1:0)}function $a(n){if(isNaN(n)||!isFinite(n))return up;if(0>n)return Fr($a(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=tN;return new On(t,0)}var tN=4294967296,up=eN(0),nN=eN(1),jG=eN(16777216);function Ol(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Fs(n){return-1==n.h}function Fr(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new On(e,~n.h).add(nN)}function hT(n,t){return n.add(Fr(t))}function fT(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function Dv(n,t){this.g=n,this.h=t}function pT(n,t){if(Ol(t))throw Error("division by zero");if(Ol(n))return new Dv(up,up);if(Fs(n))return t=pT(Fr(n),t),new Dv(Fr(t.g),Fr(t.h));if(Fs(t))return t=pT(n,Fr(t)),new Dv(Fr(t.g),t.h);if(30<n.g.length){if(Fs(n)||Fs(t))throw Error("slowDivide_ only works with positive integers.");for(var e=nN,i=t;0>=i.X(n);)e=HG(e),i=HG(i);var r=dp(e,1),o=dp(i,1);for(i=dp(i,2),e=dp(e,2);!Ol(i);){var s=o.add(i);0>=s.X(n)&&(r=r.add(e),o=s),i=dp(i,1),e=dp(e,1)}return t=hT(n,r.R(t)),new Dv(r,t)}for(r=up;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),s=(o=$a(e)).R(t);Fs(s)||0<s.X(n);)s=(o=$a(e-=i)).R(t);Ol(o)&&(o=nN),r=r.add(o),n=hT(n,s)}return new Dv(r,n)}function HG(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new On(e,n.h)}function dp(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],o=0;o<i;o++)r[o]=0<t?n.D(o+e)>>>t|n.D(o+e+1)<<32-t:n.D(o+e);return new On(r,n.h)}(Pe=On.prototype).ea=function(){if(Fs(this))return-Fr(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:tN+i)*t,t*=tN}return n},Pe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ol(this))return"0";if(Fs(this))return"-"+Fr(this).toString(n);for(var t=$a(Math.pow(n,6)),e=this,i="";;){var r=pT(e,t).g,o=((0<(e=hT(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(Ol(e=r))return o+i;for(;6>o.length;)o="0"+o;i=o+i}},Pe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Pe.X=function(n){return Fs(n=hT(this,n))?-1:Ol(n)?0:1},Pe.abs=function(){return Fs(this)?Fr(this):this},Pe.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var o=i+(65535&this.D(r))+(65535&n.D(r)),s=(o>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=s>>>16,e[r]=(s&=65535)<<16|(o&=65535)}return new On(e,-2147483648&e[e.length-1]?-1:0)},Pe.R=function(n){if(Ol(this)||Ol(n))return up;if(Fs(this))return Fs(n)?Fr(this).R(Fr(n)):Fr(Fr(this).R(n));if(Fs(n))return Fr(this.R(Fr(n)));if(0>this.X(jG)&&0>n.X(jG))return $a(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var o=this.D(i)>>>16,s=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);e[2*i+2*r]+=s*l,fT(e,2*i+2*r),e[2*i+2*r+1]+=o*l,fT(e,2*i+2*r+1),e[2*i+2*r+1]+=s*a,fT(e,2*i+2*r+1),e[2*i+2*r+2]+=o*a,fT(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new On(e,0)},Pe.gb=function(n){return pT(this,n).h},Pe.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new On(e,this.h&n.h)},Pe.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new On(e,this.h|n.h)},Pe.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new On(e,this.h^n.h)},dT.prototype.createWebChannel=dT.prototype.g,cs.prototype.send=cs.prototype.u,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,Jw.NO_ERROR=0,Jw.TIMEOUT=8,Jw.HTTP_ERROR=6,J4.COMPLETE="complete",eG.EventType=mv,mv.OPEN="a",mv.CLOSE="b",mv.ERROR="c",mv.MESSAGE="d",Tr.prototype.listen=Tr.prototype.O,Mi.prototype.listenOnce=Mi.prototype.P,Mi.prototype.getLastError=Mi.prototype.Sa,Mi.prototype.getLastErrorCode=Mi.prototype.Ia,Mi.prototype.getStatus=Mi.prototype.da,Mi.prototype.getResponseJson=Mi.prototype.Wa,Mi.prototype.getResponseText=Mi.prototype.ja,Mi.prototype.send=Mi.prototype.ha,Mi.prototype.setWithCredentials=Mi.prototype.Oa,aa.prototype.digest=aa.prototype.l,aa.prototype.reset=aa.prototype.reset,aa.prototype.update=aa.prototype.j,On.prototype.add=On.prototype.add,On.prototype.multiply=On.prototype.R,On.prototype.modulo=On.prototype.gb,On.prototype.compare=On.prototype.X,On.prototype.toNumber=On.prototype.ea,On.prototype.toString=On.prototype.toString,On.prototype.getBits=On.prototype.D,On.fromNumber=$a,On.fromString=function UG(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return Fr(UG(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=$a(Math.pow(t,8)),i=up,r=0;r<n.length;r+=8){var o=Math.min(8,n.length-r),s=parseInt(n.substring(r,r+o),t);8>o?(o=$a(Math.pow(t,o)),i=i.R(o).add($a(s))):i=(i=i.R(e)).add($a(s))}return i};var h_e=sa.createWebChannelTransport=function(){return new dT},f_e=sa.getStatEventTarget=function(){return Qw()},iN=sa.ErrorCode=Jw,p_e=sa.EventType=J4,m_e=sa.Event=fd,$G=sa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},g_e=sa.FetchXmlHttpFactory=wv,mT=sa.WebChannel=eG,__e=sa.XhrIo=Mi,v_e=sa.Md5=aa,hp=sa.Integer=On;const zG="@firebase/firestore";class Cr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");let fp="10.5.2";const Gc=new ss.Yd("@firebase/firestore");function pp(){return Gc.logLevel}function we(n,...t){if(Gc.logLevel<=ss.in.DEBUG){const e=t.map(rN);Gc.debug(`Firestore (${fp}): ${n}`,...e)}}function Ui(n,...t){if(Gc.logLevel<=ss.in.ERROR){const e=t.map(rN);Gc.error(`Firestore (${fp}): ${n}`,...e)}}function Uo(n,...t){if(Gc.logLevel<=ss.in.WARN){const e=t.map(rN);Gc.warn(`Firestore (${fp}): ${n}`,...e)}}function rN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ue(n="Unexpected state"){const t=`FIRESTORE (${fp}) INTERNAL ASSERTION FAILED: `+n;throw Ui(t),new Error(t)}function Je(n,t){n||Ue()}function Re(n,t){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends x.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class GG{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class E_e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Cr.UNAUTHENTICATED))}shutdown(){}}class w_e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class T_e{constructor(t){this.t=t,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const o=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,t.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;t.enqueueRetryable((0,le.Z)(function*(){yield c.promise,yield o(i.currentUser)}))},l=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je("string"==typeof i.accessToken),new GG(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Je(null===t||"string"==typeof t),new Cr(t)}}class C_e{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class I_e{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new C_e(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WG{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x_e{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const i=o=>{null!=o.error&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,we("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Je("string"==typeof e.token),this.R=e.token,new WG(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function D_e(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class qG{static newId(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=D_e(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[o]%62))}return i}}function vt(n,t){return n<t?-1:n>t?1:0}function mp(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function KG(n){return n+"\0"}class _i{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _e(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _e(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _e(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _e(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return _i.fromMillis(Date.now())}static fromDate(t){return _i.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new _i(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vt(this.nanoseconds,t.nanoseconds):vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xe{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Xe(t)}static min(){return new Xe(new _i(0,0))}static max(){return new Xe(new _i(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Sv{constructor(t,e,i){void 0===e?e=0:e>t.length&&Ue(),void 0===i?i=t.length-e:i>t.length-e&&Ue(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Sv.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Sv?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=t.get(r),s=e.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class un extends Sv{construct(t,e,i){return new un(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new _e(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new un(e)}static emptyPath(){return new un([])}}const S_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends Sv{construct(t,e,i){return new ci(t,e,i)}static isValidIdentifier(t){return S_e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ci(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(0===i.length)throw new _e(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let s=!1;for(;r<t.length;){const a=t[r];if("\\"===a){if(r+1===t.length)throw new _e(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new _e(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new _e(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ci(e)}static emptyPath(){return new ci([])}}class Ne{constructor(t){this.path=t}static fromPath(t){return new Ne(un.fromString(t))}static fromName(t){return new Ne(un.fromString(t).popFirst(5))}static empty(){return new Ne(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===un.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return un.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ne(new un(t.slice()))}}class gp{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function oN(n){return n.fields.find(t=>2===t.kind)}function _d(n){return n.fields.filter(t=>2!==t.kind)}gp.UNKNOWN_ID=-1;class vd{constructor(t,e){this.fieldPath=t,this.kind=e}}class _p{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new _p(0,us.min())}}function ZG(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Xe.fromTimestamp(1e9===i?new _i(e+1,0):new _i(e,i));return new us(r,Ne.empty(),t)}function YG(n){return new us(n.readTime,n.key,-1)}class us{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new us(Xe.min(),Ne.empty(),-1)}static max(){return new us(Xe.max(),Ne.empty(),-1)}}function sN(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ne.comparator(n.documentKey,t.documentKey),0!==e?e:vt(n.largestBatchId,t.largestBatchId))}const QG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Wc(n){return aN.apply(this,arguments)}function aN(){return aN=(0,le.Z)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==QG)throw n;we("LocalStore","Unexpectedly lost primary lease")}),aN.apply(this,arguments)}class G{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new G((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof G?e:G.resolve(e)}catch(e){return G.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):G.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):G.reject(e)}static resolve(t){return new G((e,i)=>{e(t)})}static reject(t){return new G((e,i)=>{i(t)})}static waitFor(t){return new G((e,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&e()},l=>i(l))}),s=!0,o===r&&e()})}static or(t){let e=G.resolve(!1);for(const i of t)e=e.next(r=>r?G.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new G((i,r)=>{const o=t.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;e(t[c]).next(u=>{s[c]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(t,e){return new G((i,r)=>{const o=()=>{!0===t()?e().next(()=>{o()},r):i()};o()})}}class gT{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new sr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Av(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=lN(i.target.error);this.V.reject(new Av(t,r))}}static open(t,e,i,r){try{return new gT(e,t.transaction(r,i))}catch(o){throw new Av(e,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(we("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new M_e(e)}}class la{constructor(t,e,i){this.name=t,this.version=e,this.p=i,12.2===la.S((0,x.z$)())&&Ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return we("SimpleDb","Removing database:",t),yd(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,x.hl)())return!1;if(la.C())return!0;const t=(0,x.z$)(),e=la.S(t),i=0<e&&e<10,r=la.v(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(t){var e=this;return(0,le.Z)(function*(){return e.db||(we("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=s=>{i(s.target.result)},o.onblocked=()=>{r(new Av(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;r("VersionError"===a.name?new _e(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new _e(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Av(t,a))},o.onupgradeneeded=s=>{we("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',s.oldVersion),e.p.N(s.target.result,o.transaction,s.oldVersion,e.version).next(()=>{we("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var o=this;return(0,le.Z)(function*(){const s="readonly"===e;let a=0;for(;;){++a;try{o.db=yield o.O(t);const l=gT.open(o.db,t,s?"readonly":"readwrite",i),c=r(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),G.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(we("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),o.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class N_e{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return yd(this.k.delete())}}class Av extends _e{constructor(t,e){super(J.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function qc(n){return"IndexedDbTransactionError"===n.name}class M_e{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(we("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(we("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),yd(i)}add(t){return we("SimpleDb","ADD",this.store.name,t,t),yd(this.store.add(t))}get(t){return yd(this.store.get(t)).next(e=>(void 0===e&&(e=null),we("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return we("SimpleDb","DELETE",this.store.name,t),yd(this.store.delete(t))}count(){return we("SimpleDb","COUNT",this.store.name),yd(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.G(r,(s,a)=>{o.push(a)}).next(()=>o)}{const r=this.store.getAll(i.range);return new G((o,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{o(a.target.result)}})}}j(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new G((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(t,e){we("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.J=!1;const r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.G(r,e)}Z(t){const e=this.cursor({});return new G((i,r)=>{e.onerror=o=>{const s=lN(o.target.error);r(s)},e.onsuccess=o=>{const s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(t,e){const i=[];return new G((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{const a=s.target.result;if(!a)return void r();const l=new N_e(a),c=e(a.primaryKey,a.value,l);if(c instanceof G){const u=c.catch(f=>(l.done(),G.reject(f)));i.push(u)}l.isDone?r():null===l.$?a.continue():a.continue(l.$)}}).next(()=>G.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.J?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function yd(n){return new G((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=lN(i.target.error);e(r)}})}let XG=!1;function lN(n){const t=la.S((0,x.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XG||(XG=!0,setTimeout(()=>{throw i},0)),i}}return n}class k_e{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(t){var e=this;we("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,le.Z)(function*(){e.task=null;try{we("IndexBackiller",`Documents written: ${yield e.X.te()}`)}catch(i){qc(i)?we("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Wc(i)}yield e.ee(6e4)}))}}class O_e{constructor(t,e){this.localStore=t,this.persistence=e}te(t=50){var e=this;return(0,le.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.ne(i,t))})()}ne(t,e){const i=new Set;let r=e,o=!0;return G.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(null!==s&&!i.has(s))return we("IndexBackiller",`Processing collection: ${s}`),this.re(t,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>e-r)}re(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.ie(r,o)).next(a=>(we("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>s.size)}))}ie(t,e){let i=t;return e.changes.forEach((r,o)=>{const s=YG(o);sN(s,i)>0&&(i=s)}),new us(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let ds=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}return n._e=-1,n})();function Rv(n){return null==n}function Nv(n){return 0===n&&1/n==-1/0}function e5(n){return"number"==typeof n&&Number.isInteger(n)&&!Nv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function eo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=t5(t)),t=P_e(n.get(e),t);return t5(t)}function P_e(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function t5(n){return n+"\x01\x01"}function za(n){const t=n.length;if(Je(t>=2),2===t)return Je("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const e=t-2,i=[];let r="";for(let o=0;o<t;){const s=n.indexOf("\x01",o);switch((s<0||s>e)&&Ue(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(o,s),r+="\0";break;case"\x11":r+=n.substring(o,s+1);break;default:Ue()}o=s+2}return new un(i)}const n5=["userId","batchId"];function _T(n,t){return[n,eo(t)]}function r5(n,t,e){return[n,eo(t),e]}const F_e={},L_e=["prefixPath","collectionGroup","readTime","documentId"],V_e=["prefixPath","collectionGroup","documentId"],B_e=["collectionGroup","readTime","prefixPath","documentId"],U_e=["canonicalId","targetId"],j_e=["targetId","path"],H_e=["path","targetId"],$_e=["collectionId","parent"],z_e=["indexId","uid"],G_e=["uid","sequenceNumber"],W_e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],q_e=["indexId","uid","orderedDocumentKey"],K_e=["userId","collectionPath","documentId"],Z_e=["userId","collectionPath","largestBatchId"],Y_e=["userId","collectionGroup","largestBatchId"],o5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q_e=[...o5,"documentOverlays"],s5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a5=s5,J_e=[...a5,"indexConfiguration","indexState","indexEntries"];class cN extends JG{constructor(t,e){super(),this.ae=t,this.currentSequenceNumber=e}}function Ir(n,t){const e=Re(n);return la.M(e.ae,t)}function l5(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Kc(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function c5(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class ni{constructor(t,e){this.comparator=t,this.root=e||Lr.EMPTY}insert(t,e){return new ni(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(t){return new ni(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vT(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vT(this.root,t,this.comparator,!1)}getReverseIterator(){return new vT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vT(this.root,t,this.comparator,!0)}}class vT{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Lr{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??Lr.RED,this.left=r??Lr.EMPTY,this.right=o??Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new Lr(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Lr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const t=this.left.check();if(t!==this.right.check())throw Ue();return t+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1,Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(t,e,i,r,o){return this}insert(t,e,i){return new Lr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(t){this.comparator=t,this.data=new ni(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new u5(this.data.getIterator())}getIteratorFrom(t){return new u5(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Un)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Un(this.comparator);return e.data=t,e}}class u5{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vp(n){return n.hasNext()?n.getNext():void 0}class jo{constructor(t){this.fields=t,t.sort(ci.comparator)}static empty(){return new jo([])}unionWith(t){let e=new Un(ci.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new jo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return mp(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class d5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ar{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new d5("Invalid base64 string: "+o):o}}(t);return new ar(e)}static fromUint8Array(t){const e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new ar(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const eve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zc(n){if(Je(!!n),"string"==typeof n){let t=0;const e=eve.exec(n);if(Je(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ki(n.seconds),nanos:ki(n.nanos)}}function ki(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pl(n){return"string"==typeof n?ar.fromBase64String(n):ar.fromUint8Array(n)}function yT(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function bT(n){const t=n.mapValue.fields.__previous_value__;return yT(t)?bT(t):t}function Mv(n){const t=Zc(n.mapValue.fields.__local_write_time__.timestampValue);return new _i(t.seconds,t.nanos)}class tve{constructor(t,e,i,r,o,s,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Yc{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Yc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Yc&&t.projectId===this.projectId&&t.database===this.database}}const Qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ET={nullValue:"NULL_VALUE"};function Jc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yT(n)?4:m5(n)?9007199254740991:10:Ue()}function Ga(n,t){if(n===t)return!0;const e=Jc(n);if(e!==Jc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Mv(n).isEqual(Mv(t));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const s=Zc(r.timestampValue),a=Zc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return o=t,Pl(n.bytesValue).isEqual(Pl(o.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return ki(r.geoPointValue.latitude)===ki(o.geoPointValue.latitude)&&ki(r.geoPointValue.longitude)===ki(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ki(r.integerValue)===ki(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const s=ki(r.doubleValue),a=ki(o.doubleValue);return s===a?Nv(s)===Nv(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return mp(n.arrayValue.values||[],t.arrayValue.values||[],Ga);case 10:return function(r,o){const s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(l5(s)!==l5(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===a[l]||!Ga(s[l],a[l])))return!1;return!0}(n,t);default:return Ue()}var o}function kv(n,t){return void 0!==(n.values||[]).find(e=>Ga(e,t))}function Xc(n,t){if(n===t)return 0;const e=Jc(n),i=Jc(t);if(e!==i)return vt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return vt(n.booleanValue,t.booleanValue);case 2:return function(o,s){const a=ki(o.integerValue||o.doubleValue),l=ki(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return h5(n.timestampValue,t.timestampValue);case 4:return h5(Mv(n),Mv(t));case 5:return vt(n.stringValue,t.stringValue);case 6:return function(o,s){const a=Pl(o),l=Pl(s);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=vt(a[c],l[c]);if(0!==u)return u}return vt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){const a=vt(ki(o.latitude),ki(s.latitude));return 0!==a?a:vt(ki(o.longitude),ki(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Xc(a[c],l[c]);if(u)return u}return vt(a.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===Qc.mapValue&&s===Qc.mapValue)return 0;if(o===Qc.mapValue)return 1;if(s===Qc.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const g=vt(l[f],u[f]);if(0!==g)return g;const _=Xc(a[l[f]],c[u[f]]);if(0!==_)return _}return vt(l.length,u.length)}(n.mapValue,t.mapValue);default:throw Ue()}}function h5(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return vt(n,t);const e=Zc(n),i=Zc(t),r=vt(e.seconds,i.seconds);return 0!==r?r:vt(e.nanos,i.nanos)}function yp(n){return uN(n)}function uN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Zc(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pl(n.bytesValue).toBase64():"referenceValue"in n?Ne.fromName(n.referenceValue).toString():"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=uN(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const s of i)o?o=!1:r+=",",r+=`${s}:${uN(e.fields[s])}`;return r+"}"}(n.mapValue):Ue()}function bd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function dN(n){return!!n&&"integerValue"in n}function Ov(n){return!!n&&"arrayValue"in n}function f5(n){return!!n&&"nullValue"in n}function p5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function TT(n){return!!n&&"mapValue"in n}function Pv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Kc(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Pv(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Pv(n.arrayValue.values[e]);return t}return Object.assign({},n)}function m5(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function nve(n){return"nullValue"in n?ET:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bd(Yc.empty(),Ne.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ue()}function ive(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bd(Yc.empty(),Ne.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qc:Ue()}function g5(n,t){const e=Xc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function _5(n,t){const e=Xc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Vr{constructor(t){this.value=t}static empty(){return new Vr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!TT(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pv(e)}setAll(t){let e=ci.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}s?i[a.lastSegment()]=Pv(s):r.push(a.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());TT(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ga(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];TT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Kc(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new Vr(Pv(this.value))}}function v5(n){const t=[];return Kc(n.fields,(e,i)=>{const r=new ci([e]);if(TT(i)){const o=v5(i.mapValue).fields;if(0===o.length)t.push(r);else for(const s of o)t.push(r.child(s))}else t.push(r)}),new jo(t)}class ui{constructor(t,e,i,r,o,s,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new ui(t,0,Xe.min(),Xe.min(),Xe.min(),Vr.empty(),0)}static newFoundDocument(t,e,i,r){return new ui(t,1,e,Xe.min(),i,r,0)}static newNoDocument(t,e){return new ui(t,2,e,Xe.min(),Xe.min(),Vr.empty(),0)}static newUnknownDocument(t,e){return new ui(t,3,e,Xe.min(),Xe.min(),Vr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Xe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ui&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eu{constructor(t,e){this.position=t,this.inclusive=e}}function y5(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],s=n.position[r];if(i=o.field.isKeyField()?Ne.comparator(Ne.fromName(s.referenceValue),e.key):Xc(s,e.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function b5(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ga(n.position[e],t.position[e]))return!1;return!0}class Fv{constructor(t,e="asc"){this.field=t,this.dir=e}}function rve(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class E5{}class sn extends E5{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new ove(t,e,i):"array-contains"===e?new lve(t,i):"in"===e?new D5(t,i):"not-in"===e?new cve(t,i):"array-contains-any"===e?new uve(t,i):new sn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new sve(t,i):new ave(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Xc(e,this.value)):null!==e&&Jc(this.value)===Jc(e)&&this.matchesComparison(Xc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends E5{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Pn(t,e)}matches(t){return bp(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function bp(n){return"and"===n.op}function hN(n){return"or"===n.op}function fN(n){return w5(n)&&bp(n)}function w5(n){for(const t of n.filters)if(t instanceof Pn)return!1;return!0}function pN(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+yp(n.value);if(fN(n))return n.filters.map(t=>pN(t)).join(",");{const t=n.filters.map(e=>pN(e)).join(",");return`${n.op}(${t})`}}function T5(n,t){return n instanceof sn?(i=n,(r=t)instanceof sn&&i.op===r.op&&i.field.isEqual(r.field)&&Ga(i.value,r.value)):n instanceof Pn?function(i,r){return r instanceof Pn&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((o,s,a)=>o&&T5(s,r.filters[a]),!0)}(n,t):void Ue();var i,r}function C5(n,t){const e=n.filters.concat(t);return Pn.create(e,n.op)}function I5(n){return n instanceof sn?`${(e=n).field.canonicalString()} ${e.op} ${yp(e.value)}`:n instanceof Pn?function(e){return e.op.toString()+" {"+e.getFilters().map(I5).join(" ,")+"}"}(n):"Filter";var e}class ove extends sn{constructor(t,e,i){super(t,e,i),this.key=Ne.fromName(i.referenceValue)}matches(t){const e=Ne.comparator(t.key,this.key);return this.matchesComparison(e)}}class sve extends sn{constructor(t,e){super(t,"in",e),this.keys=x5(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ave extends sn{constructor(t,e){super(t,"not-in",e),this.keys=x5(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function x5(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Ne.fromName(i.referenceValue))}class lve extends sn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ov(e)&&kv(e.arrayValue,this.value)}}class D5 extends sn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&kv(this.value.arrayValue,e)}}class cve extends sn{constructor(t,e){super(t,"not-in",e)}matches(t){if(kv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!kv(this.value.arrayValue,e)}}class uve extends sn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ov(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>kv(this.value.arrayValue,i))}}class dve{constructor(t,e=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function mN(n,t=null,e=[],i=[],r=null,o=null,s=null){return new dve(n,t,e,i,r,o,s)}function Ed(n){const t=Re(n);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>pN(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(o=i).field.canonicalString()+o.dir;var o}).join(","),Rv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>yp(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>yp(i)).join(",")),t.ce=e}return t.ce}function Lv(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!rve(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!T5(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!b5(n.startAt,t.startAt)&&b5(n.endAt,t.endAt)}function CT(n){return Ne.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function IT(n,t){return n.filters.filter(e=>e instanceof sn&&e.field.isEqual(t))}function S5(n,t,e){let i=ET,r=!0;for(const o of IT(n,t)){let s=ET,a=!0;switch(o.op){case"<":case"<=":s=nve(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ET}g5({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const s=e.position[o];g5({value:i,inclusive:r},{value:s,inclusive:e.inclusive})<0&&(i=s,r=e.inclusive);break}return{value:i,inclusive:r}}function A5(n,t,e){let i=Qc,r=!0;for(const o of IT(n,t)){let s=Qc,a=!0;switch(o.op){case">=":case">":s=ive(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Qc}_5({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const s=e.position[o];_5({value:i,inclusive:r},{value:s,inclusive:e.inclusive})>0&&(i=s,r=e.inclusive);break}return{value:i,inclusive:r}}class Fl{constructor(t,e=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function R5(n,t,e,i,r,o,s,a){return new Fl(n,t,e,i,r,o,s,a)}function Ep(n){return new Fl(n)}function N5(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function gN(n){return null!==n.collectionGroup}function wp(n){const t=Re(n);if(null===t.le){t.le=[];const e=new Set;for(const o of t.explicitOrderBy)t.le.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Un(ci.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.le.push(new Fv(o,i))}),e.has(ci.keyField().canonicalString())||t.le.push(new Fv(ci.keyField(),i))}return t.le}function Co(n){const t=Re(n);return t.he||(t.he=function M5(n,t){if("F"===n.limitType)return mN(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>new Fv(r.field,"desc"===r.dir?"asc":"desc"));const e=n.endAt?new eu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new eu(n.startAt.position,n.startAt.inclusive):null;return mN(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}(t,wp(n))),t.he}function _N(n,t){const e=n.filters.concat([t]);return new Fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function xT(n,t,e){return new Fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Vv(n,t){return Lv(Co(n),Co(t))&&n.limitType===t.limitType}function k5(n){return`${Ed(Co(n))}|lt:${n.limitType}`}function Tp(n){return`Query(target=${function(e){let i=e.path.canonicalString();return null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>I5(r)).join(", ")}]`),Rv(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>yp(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>yp(r)).join(",")),`Target(${i})`}(Co(n))}; limitType=${n.limitType})`}function Bv(n,t){return t.isFoundDocument()&&function(i,r){const o=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ne.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(const o of wp(i))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,t)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&(r=t,!((i=n).startAt&&!function(s,a,l){const c=y5(s,a,l);return s.inclusive?c<=0:c<0}(i.startAt,wp(i),r)||i.endAt&&!function(s,a,l){const c=y5(s,a,l);return s.inclusive?c>=0:c>0}(i.endAt,wp(i),r)));var i,r}function O5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function P5(n){return(t,e)=>{let i=!1;for(const r of wp(n)){const o=hve(r,t,e);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function hve(n,t,e){const i=n.field.isKeyField()?Ne.comparator(t.key,e.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return null!==l&&null!==c?Xc(l,c):Ue()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ue()}}class Ll{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Kc(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return c5(this.inner)}size(){return this.innerSize}}const fve=new ni(Ne.comparator);function Ho(){return fve}const F5=new ni(Ne.comparator);function Uv(...n){let t=F5;for(const e of n)t=t.insert(e.key,e);return t}function L5(n){let t=F5;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Wa(){return jv()}function V5(){return jv()}function jv(){return new Ll(n=>n.toString(),(n,t)=>n.isEqual(t))}const pve=new ni(Ne.comparator),mve=new Un(Ne.comparator);function Rt(...n){let t=mve;for(const e of n)t=t.add(e);return t}const gve=new Un(vt);function vN(){return gve}function B5(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nv(t)?"-0":t}}function U5(n){return{integerValue:""+n}}function j5(n,t){return e5(t)?U5(t):B5(n,t)}class DT{constructor(){this._=void 0}}function _ve(n,t,e){return n instanceof Cp?function(r,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&yT(o)&&(o=bT(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):n instanceof wd?$5(n,t):n instanceof Td?z5(n,t):function(r,o){const s=H5(r,o),a=G5(s)+G5(r.Ie);return dN(s)&&dN(r.Ie)?U5(a):B5(r.serializer,a)}(n,t)}function vve(n,t,e){return n instanceof wd?$5(n,t):n instanceof Td?z5(n,t):e}function H5(n,t){return n instanceof Ip?dN(i=t)||(o=i)&&"doubleValue"in o?t:{integerValue:0}:null;var i,o}class Cp extends DT{}class wd extends DT{constructor(t){super(),this.elements=t}}function $5(n,t){const e=W5(t);for(const i of n.elements)e.some(r=>Ga(r,i))||e.push(i);return{arrayValue:{values:e}}}class Td extends DT{constructor(t){super(),this.elements=t}}function z5(n,t){let e=W5(t);for(const i of n.elements)e=e.filter(r=>!Ga(r,i));return{arrayValue:{values:e}}}class Ip extends DT{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function G5(n){return ki(n.integerValue||n.doubleValue)}function W5(n){return Ov(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hv{constructor(t,e){this.field=t,this.transform=e}}class bve{constructor(t,e){this.version=t,this.transformResults=e}}class vi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new vi}static exists(t){return new vi(void 0,t)}static updateTime(t){return new vi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ST(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class AT{}function q5(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Dp(n.key,vi.none()):new xp(n.key,n.data,vi.none());{const e=n.data,i=Vr.empty();let r=new Un(ci.comparator);for(let o of t.fields)if(!r.has(o)){let s=e.field(o);null===s&&o.length>1&&(o=o.popLast(),s=e.field(o)),null===s?i.delete(o):i.set(o,s),r=r.add(o)}return new Vl(n.key,i,new jo(r.toArray()),vi.none())}}function Eve(n,t,e){n instanceof xp?function(r,o,s){const a=r.value.clone(),l=Y5(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Vl?function(r,o,s){if(!ST(r.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Y5(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(Z5(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function $v(n,t,e,i){return n instanceof xp?function(o,s,a,l){if(!ST(o.precondition,s))return a;const c=o.value.clone(),u=Q5(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,t,e,i):n instanceof Vl?function(o,s,a,l){if(!ST(o.precondition,s))return a;const c=Q5(o.fieldTransforms,l,s),u=s.data;return u.setAll(Z5(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,t,e,i):(a=e,ST(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function wve(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=H5(i.transform,r||null);null!=o&&(null===e&&(e=Vr.empty()),e.set(i.field,o))}return e||null}function K5(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&mp(i,r,(o,s)=>function yve(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(i=n.transform)instanceof wd&&r instanceof wd||i instanceof Td&&r instanceof Td?mp(i.elements,r.elements,Ga):i instanceof Ip&&r instanceof Ip?Ga(i.Ie,r.Ie):i instanceof Cp&&r instanceof Cp);var i,r}(o,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var i,r}class xp extends AT{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vl extends AT{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Z5(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Y5(n,t,e){const i=new Map;Je(n.length===e.length);for(let r=0;r<e.length;r++){const o=n[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,vve(s,a,e[r]))}return i}function Q5(n,t,e){const i=new Map;for(const r of n){const o=r.transform,s=e.data.field(r.field);i.set(r.field,_ve(o,s,t))}return i}class Dp extends AT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yN extends AT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bN{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&Eve(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$v(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$v(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=V5();return this.mutations.forEach(r=>{const o=t.get(r.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=e.has(r.key)?null:a;const l=q5(s,a);null!==l&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(Xe.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Rt())}isEqual(t){return this.batchId===t.batchId&&mp(this.mutations,t.mutations,(e,i)=>K5(e,i))&&mp(this.baseMutations,t.baseMutations,(e,i)=>K5(e,i))}}class EN{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Je(t.mutations.length===i.length);let r=pve;const o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new EN(t,e,i,r)}}class wN{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cve{constructor(t,e){this.count=t,this.unchangedNames=e}}var Qi,dn;function J5(n){switch(n){default:return Ue();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function X5(n){if(void 0===n)return Ui("GRPC error has no .code"),J.UNKNOWN;switch(n){case Qi.OK:return J.OK;case Qi.CANCELLED:return J.CANCELLED;case Qi.UNKNOWN:return J.UNKNOWN;case Qi.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Qi.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Qi.INTERNAL:return J.INTERNAL;case Qi.UNAVAILABLE:return J.UNAVAILABLE;case Qi.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Qi.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Qi.NOT_FOUND:return J.NOT_FOUND;case Qi.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Qi.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Qi.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Qi.ABORTED:return J.ABORTED;case Qi.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Qi.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Qi.DATA_LOSS:return J.DATA_LOSS;default:return Ue()}}(dn=Qi||(Qi={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";function eW(){return new TextEncoder}const Ive=new hp([4294967295,4294967295],0);function tW(n){const t=eW().encode(n),e=new v_e;return e.update(t),new Uint8Array(e.digest())}function nW(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new hp([e,i],0),new hp([r,o],0)]}class TN{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new zv(`Invalid padding: ${e}`);if(i<0)throw new zv(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new zv(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new zv(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=hp.fromNumber(this.Te)}de(t,e,i){let r=t.add(e.multiply(hp.fromNumber(i)));return 1===r.compare(Ive)&&(r=new hp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=tW(t),[i,r]=nW(e);for(let o=0;o<this.hashCount;o++){const s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new TN(o,r,e);return i.forEach(a=>s.insert(a)),s}insert(t){if(0===this.Te)return;const e=tW(t),[i,r]=nW(e);for(let o=0;o<this.hashCount;o++){const s=this.de(i,r,o);this.Re(s)}}Re(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class zv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gv{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Wv.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Gv(Xe.min(),r,new ni(vt),Ho(),Rt())}}class Wv{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Wv(i,e,Rt(),Rt(),Rt())}}class NT{constructor(t,e,i,r){this.Ve=t,this.removedTargetIds=e,this.key=i,this.me=r}}class iW{constructor(t,e){this.targetId=t,this.fe=e}}class rW{constructor(t,e,i=ar.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class oW{constructor(){this.ge=0,this.pe=aW(),this.ye=ar.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Rt(),e=Rt(),i=Rt();return this.pe.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Ue()}}),new Wv(this.ye,this.we,t,e,i)}Fe(){this.Se=!1,this.pe=aW()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class xve{constructor(t){this.Le=t,this.ke=new Map,this.qe=Ho(),this.Qe=sW(),this.Ke=new ni(vt)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,e=>{const i=this.ze(e);switch(t.state){case 0:this.je(e)&&i.Ce(t.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(t.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(e);break;case 3:this.je(e)&&(i.Be(),i.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),i.Ce(t.resumeToken));break;default:Ue()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach((i,r)=>{this.je(r)&&e(r)})}Je(t){const e=t.targetId,i=t.fe.count,r=this.Ye(e);if(r){const o=r.target;if(CT(o))if(0===i){const s=new Ne(o.path);this.We(e,s,ui.newNoDocument(s,Xe.min()))}else Je(1===i);else{const s=this.Ze(e);if(s!==i){const a=this.Xe(t),l=a?this.et(a,t,s):1;0!==l&&(this.He(e),this.Ke=this.Ke.insert(e,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let s,a;try{s=Pl(i).toUint8Array()}catch(l){if(l instanceof d5)return Uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new TN(s,r,o)}catch(l){return Uo(l instanceof zv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(t,e,i){return e.fe.count===i-this.rt(t,e.targetId)?0:2}rt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(e,o,null),r++)}),r}it(t){const e=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&CT(a.target)){const l=new Ne(a.target.path);null!==this.qe.get(l)||this.st(s,l)||this.We(s,l,ui.newNoDocument(l,t))}o.De&&(e.set(s,o.ve()),o.Fe())}});let i=Rt();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(t));const r=new Gv(t,e,this.Ke,this.qe,i);return this.qe=Ho(),this.Qe=sW(),this.Ke=new ni(vt),r}Ue(t,e){if(!this.je(t))return;const i=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,i),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,i){if(!this.je(t))return;const r=this.ze(t);this.st(t,e)?r.Me(e,1):r.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),i&&(this.qe=this.qe.insert(e,i))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new oW,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new Un(vt),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||we("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new oW),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.We(t,e,null)})}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function sW(){return new ni(Ne.comparator)}function aW(){return new ni(Ne.comparator)}const Dve={asc:"ASCENDING",desc:"DESCENDING"},Sve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ave={and:"AND",or:"OR"};class Rve{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function CN(n,t){return n.useProto3Json||Rv(t)?t:{value:t}}function Sp(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lW(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Nve(n,t){return Sp(n,t.toTimestamp())}function ji(n){return Je(!!n),Xe.fromTimestamp(function(e){const i=Zc(e);return new _i(i.seconds,i.nanos)}(n))}function IN(n,t){return(i=n,new un(["projects",i.projectId,"databases",i.database])).child("documents").child(t).canonicalString();var i}function cW(n){const t=un.fromString(n);return Je(vW(t)),t}function qv(n,t){return IN(n.databaseId,t.path)}function qa(n,t){const e=cW(t);if(e.get(1)!==n.databaseId.projectId)throw new _e(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new _e(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ne(dW(e))}function xN(n,t){return IN(n.databaseId,t)}function uW(n){const t=cW(n);return 4===t.length?un.emptyPath():dW(t)}function Kv(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dW(n){return Je(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function hW(n,t,e){return{name:qv(n,t),fields:e.value.mapValue.fields}}function fW(n,t,e){const i=qa(n,t.name),r=ji(t.updateTime),o=t.createTime?ji(t.createTime):Xe.min(),s=new Vr({mapValue:{fields:t.fields}}),a=ui.newFoundDocument(i,r,o,s);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function Zv(n,t){let e;if(t instanceof xp)e={update:hW(n,t.key,t.value)};else if(t instanceof Dp)e={delete:qv(n,t.key)};else if(t instanceof Vl)e={update:hW(n,t.key,t.data),updateMask:Bve(t.fieldMask)};else{if(!(t instanceof yN))return Ue();e={verify:qv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,s){const a=s.transform;if(a instanceof Cp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Td)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ip)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Ue()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(o=t.precondition).updateTime?{updateTime:Nve(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ue()),e;var o}function DN(n,t){const e=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?vi.updateTime(ji(o.updateTime)):void 0!==o.exists?vi.exists(o.exists):vi.none():vi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let l=null;"setToServerValue"in a?(Je("REQUEST_TIME"===a.setToServerValue),l=new Cp):"appendMissingElements"in a?l=new wd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Td(a.removeAllFromArray.values||[]):"increment"in a?l=new Ip(s,a.increment):Ue();const c=ci.fromServerFormat(a.fieldPath);return new Hv(c,l)}(n,r)):[];var o;if(t.update){const r=qa(n,t.update.name),o=new Vr({mapValue:{fields:t.update.fields}});if(t.updateMask){const s=new jo((t.updateMask.fieldPaths||[]).map(u=>ci.fromServerFormat(u)));return new Vl(r,o,s,e,i)}return new xp(r,o,e,i)}if(t.delete){const r=qa(n,t.delete);return new Dp(r,e)}if(t.verify){const r=qa(n,t.verify);return new yN(r,e)}return Ue()}function pW(n,t){return{documents:[xN(n,t.path)]}}function SN(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=xN(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=xN(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return _W(Pn.create(l,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const o=function(l){if(0!==l.length)return l.map(c=>{return{field:tu((f=c).field),direction:Fve(f.dir)};var f})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const s=CN(n,t.limit);return null!==s&&(e.structuredQuery.limit=s),t.startAt&&(e.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(e.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),e;var l}function mW(n){let t=uW(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Je(1===i);const u=e.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let o=[];e.where&&(o=function(f){const g=gW(f);return g instanceof Pn&&fN(g)?g.getFilters():[g]}(e.where));let s=[];e.orderBy&&(s=e.orderBy.map(g=>{return new Fv(Ap((y=g).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction));var y}));let a=null;e.limit&&(a=function(f){let g;return g="object"==typeof f?f.value:f,Rv(g)?null:g}(e.limit));let l=null;var f;e.startAt&&(l=new eu((f=e.startAt).values||[],!!f.before));let c=null;return e.endAt&&(c=function(f){return new eu(f.values||[],!f.before)}(e.endAt)),R5(t,r,s,o,a,"F",l,c)}function gW(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ap(e.unaryFilter.field);return sn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ap(e.unaryFilter.field);return sn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ap(e.unaryFilter.field);return sn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ap(e.unaryFilter.field);return sn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(n):void 0!==n.fieldFilter?sn.create(Ap((e=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Pn.create(e.compositeFilter.filters.map(i=>gW(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ue()}}(e.compositeFilter.op))}(n):Ue();var e}function Fve(n){return Dve[n]}function Lve(n){return Sve[n]}function Vve(n){return Ave[n]}function tu(n){return{fieldPath:n.canonicalString()}}function Ap(n){return ci.fromServerFormat(n.fieldPath)}function _W(n){return n instanceof sn?function(e){if("=="===e.op){if(p5(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NAN"}};if(f5(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(p5(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NOT_NAN"}};if(f5(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(e.field),op:Lve(e.op),value:e.value}}}(n):n instanceof Pn?function(e){const i=e.getFilters().map(r=>_W(r));return 1===i.length?i[0]:{compositeFilter:{op:Vve(e.op),filters:i}}}(n):Ue()}function Bve(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vW(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Bl{constructor(t,e,i,r,o=Xe.min(),s=Xe.min(),a=ar.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Bl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class yW{constructor(t){this.ut=t}}function bW(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:MT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:qv(o=n.ut,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:Sp(o,s.version.toTimestamp()),createTime:Sp(o,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Cd(t.version)};else{if(!t.isUnknownDocument())return Ue();i.unknownDocument={path:e.path.toArray(),version:Cd(t.version)}}var o,s;return i}function MT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Cd(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Id(n){const t=new _i(n.seconds,n.nanoseconds);return Xe.fromTimestamp(t)}function xd(n,t){const e=(t.baseMutations||[]).map(o=>DN(n.ut,o));for(let o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);const i=t.mutations.map(o=>DN(n.ut,o)),r=_i.fromMillis(t.localWriteTimeMs);return new bN(t.batchId,r,e,i)}function Yv(n){const t=Id(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Id(n.lastLimboFreeSnapshotVersion):Xe.min();let i;return i=void 0!==n.query.documents?(Je(1===(o=n.query).documents.length),Co(Ep(uW(o.documents[0])))):function(o){return Co(mW(o))}(n.query),new Bl(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,ar.fromBase64String(n.resumeToken));var o}function EW(n,t){const e=Cd(t.snapshotVersion),i=Cd(t.lastLimboFreeSnapshotVersion);let r;r=CT(t.target)?pW(n.ut,t.target):SN(n.ut,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ed(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function AN(n){const t=mW({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xT(t,t.limit,"L"):t}function RN(n,t){return new wN(t.largestBatchId,DN(n.ut,t.overlayMutation))}function wW(n,t){const e=t.path.lastSegment();return[n,eo(t.path.popLast()),e]}function TW(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Cd(i.readTime),documentKey:eo(i.documentKey.path),largestBatchId:i.largestBatchId}}class jve{getBundleMetadata(t,e){return CW(t).get(e).next(i=>{if(i)return{id:(o=i).bundleId,createTime:Id(o.createTime),version:o.version};var o})}saveBundleMetadata(t,e){return CW(t).put({bundleId:(r=e).id,createTime:Cd(ji(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return IW(t).get(e).next(i=>{if(i)return{name:(o=i).name,query:AN(o.bundledQuery),readTime:Id(o.readTime)};var o})}saveNamedQuery(t,e){return IW(t).put({name:(r=e).name,readTime:Cd(ji(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CW(n){return Ir(n,"bundles")}function IW(n){return Ir(n,"namedQueries")}class kT{constructor(t,e){this.serializer=t,this.userId=e}static ct(t,e){return new kT(t,e.uid||"")}getOverlay(t,e){return Qv(t).get(wW(this.userId,e)).next(i=>i?RN(this.serializer,i):null)}getOverlays(t,e){const i=Wa();return G.forEach(e,r=>this.getOverlay(t,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((o,s)=>{const a=new wN(e,s);r.push(this.lt(t,a))}),G.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(s=>r.add(eo(s.getCollectionPath())));const o=[];return r.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Qv(t).H("collectionPathOverlayIndex",a))}),G.waitFor(o)}getOverlaysForCollection(t,e,i){const r=Wa(),o=eo(e),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Qv(t).W("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=RN(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const o=Wa();let s;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Qv(t).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const f=RN(this.serializer,c);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):u.done()}).next(()=>o)}lt(t,e){return Qv(t).put(function(r,o,s){const[a,l,c]=wW(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Zv(r.ut,s.mutation)}}(this.serializer,this.userId,e))}}function Qv(n){return Ir(n,"documentOverlays")}class Dd{constructor(){}ht(t,e){this.Pt(t,e),e.It()}Pt(t,e){if("nullValue"in t)this.Tt(e,5);else if("booleanValue"in t)this.Tt(e,10),e.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(e,15),e.Et(ki(t.integerValue));else if("doubleValue"in t){const i=ki(t.doubleValue);isNaN(i)?this.Tt(e,13):(this.Tt(e,15),Nv(i)?e.Et(0):e.Et(i))}else if("timestampValue"in t){const i=t.timestampValue;this.Tt(e,20),"string"==typeof i?e.dt(i):(e.dt(`${i.seconds||""}`),e.Et(i.nanos||0))}else if("stringValue"in t)this.At(t.stringValue,e),this.Rt(e);else if("bytesValue"in t)this.Tt(e,30),e.Vt(Pl(t.bytesValue)),this.Rt(e);else if("referenceValue"in t)this.ft(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Tt(e,45),e.Et(i.latitude||0),e.Et(i.longitude||0)}else"mapValue"in t?m5(t)?this.Tt(e,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,e),this.Rt(e)):"arrayValue"in t?(this.yt(t.arrayValue,e),this.Rt(e)):Ue()}At(t,e){this.Tt(e,25),this.wt(t,e)}wt(t,e){e.dt(t)}gt(t,e){const i=t.fields||{};this.Tt(e,55);for(const r of Object.keys(i))this.At(r,e),this.Pt(i[r],e)}yt(t,e){const i=t.values||[];this.Tt(e,50);for(const r of i)this.Pt(r,e)}ft(t,e){this.Tt(e,37),Ne.fromName(t).path.forEach(i=>{this.Tt(e,60),this.wt(i,e)})}Tt(t,e){t.Et(e)}Rt(t){t.Et(2)}}function Hve(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function xW(n){const t=64-function(i){let r=0;for(let o=0;o<8;++o){const s=Hve(255&i[o]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(t/8)}Dd.St=new Dd;class $ve{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Dt(i.value),i=e.next();this.Ct()}vt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ft(i.value),i=e.next();this.Mt()}xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=e.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=e.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(t){const e=this.Bt(t),i=xW(e);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}kt(t){const e=this.Bt(t),i=xW(e);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(t){this.Lt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Ut(){return this.buffer.slice(0,this.position)}Bt(t){const e=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Dt(t){const e=255&t;0===e?(this.Qt(0),this.Qt(255)):255===e?(this.Qt(255),this.Qt(0)):this.Qt(e)}Ft(t){const e=255&t;0===e?(this.$t(0),this.$t(255)):255===e?(this.$t(255),this.$t(0)):this.$t(t)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(t){this.Lt(1),this.buffer[this.position++]=t}$t(t){this.Lt(1),this.buffer[this.position++]=~t}Lt(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class zve{constructor(t){this.Wt=t}Vt(t){this.Wt.bt(t)}dt(t){this.Wt.xt(t)}Et(t){this.Wt.Nt(t)}It(){this.Wt.qt()}}class Gve{constructor(t){this.Wt=t}Vt(t){this.Wt.vt(t)}dt(t){this.Wt.Ot(t)}Et(t){this.Wt.kt(t)}It(){this.Wt.Kt()}}class Jv{constructor(){this.Wt=new $ve,this.Gt=new zve(this.Wt),this.zt=new Gve(this.Wt)}seed(t){this.Wt.seed(t)}jt(t){return 0===t?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Sd{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ht(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Sd(this.indexId,this.documentKey,this.arrayValue,i)}}function nu(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=DW(n.arrayValue,t.arrayValue),0!==e?e:(e=DW(n.directionalValue,t.directionalValue),0!==e?e:Ne.comparator(n.documentKey,t.documentKey)))}function DW(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class SW{constructor(t){this.Jt=new Un((e,i)=>ci.comparator(e.field,i.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];for(const e of t.filters){const i=e;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(t){if(Je(t.collectionGroup===this.collectionId),this.Xt)return!1;const e=oN(t);if(void 0!==e&&!this.tn(e))return!1;const i=_d(t);let r=new Set,o=0,s=0;for(;o<i.length&&this.tn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[o];if(!this.nn(a,l)||!this.rn(this.Yt[s++],l))return!1}++o}for(;o<i.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],i[o]))return!1;return!0}sn(){if(this.Xt)return null;let t=new Un(ci.comparator);const e=[];for(const i of this.Zt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)e.push(new vd(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new vd(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new vd(i.field,"asc"===i.dir?0:1)));return new gp(gp.UNKNOWN_ID,this.collectionId,e,_p.empty())}tn(t){for(const e of this.Zt)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}rn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function AW(n){var t,e;if(Je(n instanceof sn||n instanceof Pn),n instanceof sn){if(n instanceof D5){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(o=>sn.create(n.field,"==",o)))||[];return Pn.create(r,"or")}return n}const i=n.filters.map(r=>AW(r));return Pn.create(i,n.op)}function Wve(n){if(0===n.getFilters().length)return[];const t=kN(AW(n));return Je(RW(t)),NN(t)||MN(t)?[t]:t.getFilters()}function NN(n){return n instanceof sn}function MN(n){return n instanceof Pn&&fN(n)}function RW(n){return NN(n)||MN(n)||function(e){if(e instanceof Pn&&hN(e)){for(const i of e.getFilters())if(!NN(i)&&!MN(i))return!1;return!0}return!1}(n)}function kN(n){if(Je(n instanceof sn||n instanceof Pn),n instanceof sn)return n;if(1===n.filters.length)return kN(n.filters[0]);const t=n.filters.map(i=>kN(i));let e=Pn.create(t,n.op);return e=OT(e),RW(e)?e:(Je(e instanceof Pn),Je(bp(e)),Je(e.filters.length>1),e.filters.reduce((i,r)=>ON(i,r)))}function ON(n,t){let e;return Je(n instanceof sn||n instanceof Pn),Je(t instanceof sn||t instanceof Pn),e=n instanceof sn?t instanceof sn?Pn.create([n,t],"and"):NW(n,t):t instanceof sn?NW(t,n):function(r,o){if(Je(r.filters.length>0&&o.filters.length>0),bp(r)&&bp(o))return C5(r,o.getFilters());const s=hN(r)?r:o,a=hN(r)?o:r,l=s.filters.map(c=>ON(c,a));return Pn.create(l,"or")}(n,t),OT(e)}function NW(n,t){if(bp(t))return C5(t,n.getFilters());{const e=t.filters.map(i=>ON(n,i));return Pn.create(e,"or")}}function OT(n){if(Je(n instanceof sn||n instanceof Pn),n instanceof sn)return n;const t=n.getFilters();if(1===t.length)return OT(t[0]);if(w5(n))return n;const e=t.map(r=>OT(r)),i=[];return e.forEach(r=>{r instanceof sn?i.push(r):r instanceof Pn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Pn.create(i,n.op)}class qve{constructor(){this.on=new PN}addToCollectionParentIndex(t,e){return this.on.add(e),G.resolve()}getCollectionParents(t,e){return G.resolve(this.on.getEntries(e))}addFieldIndex(t,e){return G.resolve()}deleteFieldIndex(t,e){return G.resolve()}deleteAllFieldIndexes(t){return G.resolve()}createTargetIndexes(t,e){return G.resolve()}getDocumentsMatchingTarget(t,e){return G.resolve(null)}getIndexType(t,e){return G.resolve(0)}getFieldIndexes(t,e){return G.resolve([])}getNextCollectionGroupToUpdate(t){return G.resolve(null)}getMinOffset(t,e){return G.resolve(us.min())}getMinOffsetFromCollectionGroup(t,e){return G.resolve(us.min())}updateCollectionGroup(t,e,i){return G.resolve()}updateIndexEntries(t,e){return G.resolve()}}class PN{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Un(un.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Un(un.comparator)).toArray()}}const PT=new Uint8Array(0);class Kve{constructor(t,e){this.user=t,this.databaseId=e,this._n=new PN,this.an=new Ll(i=>Ed(i),(i,r)=>Lv(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this._n.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this._n.add(e)});const o={collectionId:i,parent:eo(r)};return MW(t).put(o)}return G.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[KG(e),""],!1,!0);return MW(t).W(r).next(o=>{for(const s of o){if(s.collectionId!==e)break;i.push(za(s.parent))}return i})}addFieldIndex(t,e){const i=Xv(t),r={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const o=i.add(r);if(e.indexState){const s=Np(t);return o.next(a=>{s.put(TW(a,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){const i=Xv(t),r=Np(t),o=Rp(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Xv(t),i=Rp(t),r=Np(t);return e.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(t,e){return G.forEach(this.un(e),i=>this.getIndexType(t,i).next(r=>{if(0===r||1===r){const o=new SW(i).sn();if(null!=o)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,e){const i=Rp(t);let r=!0;const o=new Map;return G.forEach(this.un(e),s=>this.cn(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=Rt();const a=[];return G.forEach(o,(l,c)=>{var V;we("IndexedDbIndexManager",`Using index ${V=l,`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`} to execute ${Ed(e)}`);const u=function(V,W){const ae=oN(W);if(void 0===ae)return null;for(const Ie of IT(V,ae.fieldPath))switch(Ie.op){case"array-contains-any":return Ie.value.arrayValue.values||[];case"array-contains":return[Ie.value]}return null}(c,l),f=function(V,W){const ae=new Map;for(const Ie of _d(W))for(const Ve of IT(V,Ie.fieldPath))switch(Ve.op){case"==":case"in":ae.set(Ie.fieldPath.canonicalString(),Ve.value);break;case"not-in":case"!=":return ae.set(Ie.fieldPath.canonicalString(),Ve.value),Array.from(ae.values())}return null}(c,l),g=function(V,W){const ae=[];let Ie=!0;for(const Ve of _d(W)){const rt=0===Ve.kind?S5(V,Ve.fieldPath,V.startAt):A5(V,Ve.fieldPath,V.startAt);ae.push(rt.value),Ie&&(Ie=rt.inclusive)}return new eu(ae,Ie)}(c,l),_=function(V,W){const ae=[];let Ie=!0;for(const Ve of _d(W)){const rt=0===Ve.kind?A5(V,Ve.fieldPath,V.endAt):S5(V,Ve.fieldPath,V.endAt);ae.push(rt.value),Ie&&(Ie=rt.inclusive)}return new eu(ae,Ie)}(c,l),y=this.ln(l,c,g),b=this.ln(l,c,_),C=this.hn(l,c,f),O=this.Pn(l.indexId,u,y,g.inclusive,b,_.inclusive,C);return G.forEach(O,S=>i.j(S,e.limit).next(V=>{V.forEach(W=>{const ae=Ne.fromSegments(W.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return G.resolve(null)})}un(t){let e=this.an.get(t);return e||(e=0===t.filters.length?[t]:Wve(Pn.create(t.filters,"and")).map(i=>mN(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.an.set(t,e),e)}Pn(t,e,i,r,o,s,a){const l=(null!=e?e.length:1)*Math.max(i.length,o.length),c=l/(null!=e?e.length:1),u=[];for(let f=0;f<l;++f){const g=e?this.In(e[f/c]):PT,_=this.Tn(t,g,i[f%c],r),y=this.En(t,g,o[f%c],s),b=a.map(C=>this.Tn(t,g,C,!0));u.push(...this.createRange(_,y,b))}return u}Tn(t,e,i,r){const o=new Sd(t,Ne.empty(),e,i);return r?o:o.Ht()}En(t,e,i,r){const o=new Sd(t,Ne.empty(),e,i);return r?o.Ht():o}cn(t,e){const i=new SW(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(const a of o)i.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,e){let i=2;const r=this.un(e);return G.forEach(r,o=>this.cn(t,o).next(s=>{s?0!==i&&s.fields.length<function(l){let c=new Un(ci.comparator),u=!1;for(const f of l.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?u=!0:c=c.add(g.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(o)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}dn(t,e){const i=new Jv;for(const r of _d(t)){const o=e.data.field(r.fieldPath);if(null==o)return null;const s=i.jt(r.kind);Dd.St.ht(o,s)}return i.Ut()}In(t){const e=new Jv;return Dd.St.ht(t,e.jt(0)),e.Ut()}An(t,e){const i=new Jv;return Dd.St.ht(bd(this.databaseId,e),i.jt(function(o){const s=_d(o);return 0===s.length?0:s[s.length-1].kind}(t))),i.Ut()}hn(t,e,i){if(null===i)return[];let r=[];r.push(new Jv);let o=0;for(const s of _d(t)){const a=i[o++];for(const l of r)if(this.Rn(e,s.fieldPath)&&Ov(a))r=this.Vn(r,s,a);else{const c=l.jt(s.kind);Dd.St.ht(a,c)}}return this.mn(r)}ln(t,e,i){return this.hn(t,e,i.position)}mn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Ut();return e}Vn(t,e,i){const r=[...t],o=[];for(const s of i.arrayValue.values||[])for(const a of r){const l=new Jv;l.seed(a.Ut()),Dd.St.ht(s,l.jt(e.kind)),o.push(l)}return o}Rn(t,e){return!!t.filters.find(i=>i instanceof sn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Xv(t),r=Np(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(o=>{const s=[];return G.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(u,f){const g=f?new _p(f.sequenceNumber,new us(Id(f.readTime),new Ne(za(f.documentKey)),f.largestBatchId)):_p.empty(),_=u.fields.map(([y,b])=>new vd(ci.fromServerFormat(y),b));return new gp(u.indexId,u.collectionGroup,_,g)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:vt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Xv(t),o=Np(t);return this.fn(t).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>G.forEach(a,l=>o.put(TW(l.indexId,this.user,s,i)))))}updateIndexEntries(t,e){const i=new Map;return G.forEach(e,(r,o)=>{const s=i.get(r.collectionGroup);return(s?G.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),G.forEach(a,l=>this.gn(t,r,l).next(c=>{const u=this.pn(o,l);return c.isEqual(u)?G.resolve():this.yn(t,o,l,c,u)}))))})}wn(t,e,i,r){return Rp(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,e.key),documentKey:e.key.path.toArray()})}Sn(t,e,i,r){return Rp(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,e.key),e.key.path.toArray()])}gn(t,e,i){const r=Rp(t);let o=new Un(nu);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,e)])},(s,a)=>{o=o.add(new Sd(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(t,e){let i=new Un(nu);const r=this.dn(e,t);if(null==r)return i;const o=oN(e);if(null!=o){const s=t.data.field(o.fieldPath);if(Ov(s))for(const a of s.arrayValue.values||[])i=i.add(new Sd(e.indexId,t.key,this.In(a),r))}else i=i.add(new Sd(e.indexId,t.key,PT,r));return i}yn(t,e,i,r,o){we("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(l,c,u,f,g){const _=l.getIterator(),y=c.getIterator();let b=vp(_),C=vp(y);for(;b||C;){let O=!1,S=!1;if(b&&C){const V=u(b,C);V<0?S=!0:V>0&&(O=!0)}else null!=b?S=!0:O=!0;O?(f(C),C=vp(y)):S?(g(b),b=vp(_)):(b=vp(_),C=vp(y))}}(r,o,nu,a=>{s.push(this.wn(t,e,i,a))},a=>{s.push(this.Sn(t,e,i,a))}),G.waitFor(s)}fn(t){let e=1;return Np(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((s,a)=>nu(s,a)).filter((s,a,l)=>!a||0!==nu(s,l[a-1]));const r=[];r.push(t);for(const s of i){const a=nu(s,t),l=nu(s,e);if(0===a)r[0]=t.Ht();else if(a>0&&l<0)r.push(s),r.push(s.Ht());else if(l>0)break}r.push(e);const o=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];o.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,PT,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,PT,[]]))}return o}bn(t,e){return nu(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(kW)}getMinOffset(t,e){return G.mapArray(this.un(e),i=>this.cn(t,i).next(r=>r||Ue())).next(kW)}}function MW(n){return Ir(n,"collectionParents")}function Rp(n){return Ir(n,"indexEntries")}function Xv(n){return Ir(n,"indexConfiguration")}function Np(n){return Ir(n,"indexState")}function kW(n){Je(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;sN(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new us(t.readTime,t.documentKey,e)}const OW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new to(t,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PW(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(e.batchId);let a=0;const l=i.Y({range:s},(u,f,g)=>(a++,g.delete()));o.push(l.next(()=>{Je(1===a)}));const c=[];for(const u of e.mutations){const f=r5(t,u.key.path,e.batchId);o.push(r.delete(f)),c.push(u.key)}return G.waitFor(o).next(()=>c)}function FT(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ue();t=n.noDocument}return JSON.stringify(t).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class LT{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(t,e,i,r){Je(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new LT(o,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iu(t).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{e=!1,s.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const o=Mp(t),s=iu(t);return s.add({}).next(a=>{Je("number"==typeof a);const l=new bN(a,e,i,r),c=function(_,y,b){const C=b.baseMutations.map(S=>Zv(_.ut,S)),O=b.mutations.map(S=>Zv(_.ut,S));return{userId:y,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:C,mutations:O}}(this.serializer,this.userId,l),u=[];let f=new Un((g,_)=>vt(g.canonicalString(),_.canonicalString()));for(const g of r){const _=r5(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),u.push(s.put(c)),u.push(o.put(_,F_e))}return f.forEach(g=>{u.push(this.indexManager.addToCollectionParentIndex(t,g))}),t.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),G.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return iu(t).get(e).next(i=>i?(Je(i.userId===this.userId),xd(this.serializer,i)):null)}Cn(t,e){return this.Dn[e]?G.resolve(this.Dn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Dn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return iu(t).Y({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(Je(a.batchId>=i),o=xd(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return iu(t).Y({index:"userMutationsIndex",range:e,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iu(t).W("userMutationsIndex",e).next(i=>i.map(r=>xd(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=_T(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return Mp(t).Y({range:r},(s,a,l)=>{const[c,u,f]=s,g=za(u);if(c===this.userId&&e.path.isEqual(g))return iu(t).get(f).next(_=>{if(!_)throw Ue();Je(_.userId===this.userId),o.push(xd(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Un(vt);const r=[];return e.forEach(o=>{const s=_T(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=Mp(t).Y({range:a},(c,u,f)=>{const[g,_,y]=c,b=za(_);g===this.userId&&o.path.isEqual(b)?i=i.add(y):f.done()});r.push(l)}),G.waitFor(r).next(()=>this.vn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,o=_T(this.userId,i),s=IDBKeyRange.lowerBound(o);let a=new Un(vt);return Mp(t).Y({range:s},(l,c,u)=>{const[f,g,_]=l,y=za(g);f===this.userId&&i.isPrefixOf(y)?y.length===r&&(a=a.add(_)):u.done()}).next(()=>this.vn(t,a))}vn(t,e){const i=[],r=[];return e.forEach(o=>{r.push(iu(t).get(o).next(s=>{if(null===s)throw Ue();Je(s.userId===this.userId),i.push(xd(this.serializer,s))}))}),G.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return PW(t.ae,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Fn(e.batchId)}),G.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Fn(t){delete this.Dn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return G.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Mp(t).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){const l=za(o[1]);r.push(l)}else a.done()}).next(()=>{Je(0===r.length)})})}containsKey(t,e){return FW(t,this.userId,e)}Mn(t){return LW(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FW(n,t,e){const i=_T(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i);let s=!1;return Mp(n).Y({range:o,J:!0},(a,l,c)=>{const[u,f,g]=a;u===t&&f===r&&(s=!0),c.done()}).next(()=>s)}function iu(n){return Ir(n,"mutations")}function Mp(n){return Ir(n,"documentMutations")}function LW(n){return Ir(n,"mutationQueues")}class Ad{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Ad(0)}static Nn(){return new Ad(-1)}}class Zve{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Bn(t).next(e=>{const i=new Ad(e.highestTargetId);return e.highestTargetId=i.next(),this.Ln(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(e=>Xe.fromTimestamp(new _i(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Ln(t,r)))}addTargetData(t,e){return this.kn(t,e).next(()=>this.Bn(t).next(i=>(i.targetCount+=1,this.qn(e,i),this.Ln(t,i))))}updateTargetData(t,e){return this.kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>kp(t).delete(e.targetId)).next(()=>this.Bn(t)).next(i=>(Je(i.targetCount>0),i.targetCount-=1,this.Ln(t,i)))}removeTargets(t,e,i){let r=0;const o=[];return kp(t).Y((s,a)=>{const l=Yv(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(r++,o.push(this.removeTargetData(t,l)))}).next(()=>G.waitFor(o)).next(()=>r)}forEachTarget(t,e){return kp(t).Y((i,r)=>{const o=Yv(r);e(o)})}Bn(t){return VW(t).get("targetGlobalKey").next(e=>(Je(null!==e),e))}Ln(t,e){return VW(t).put("targetGlobalKey",e)}kn(t,e){return kp(t).put(EW(this.serializer,e))}qn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Ed(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return kp(t).Y({range:r,index:"queryTargetsIndex"},(s,a,l)=>{const c=Yv(a);Lv(e,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(t,e,i){const r=[],o=ru(t);return e.forEach(s=>{const a=eo(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,s))}),G.waitFor(r)}removeMatchingKeys(t,e,i){const r=ru(t);return G.forEach(e,o=>{const s=eo(o.path);return G.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){const i=ru(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=ru(t);let o=Rt();return r.Y({range:i,J:!0},(s,a,l)=>{const c=za(s[1]),u=new Ne(c);o=o.add(u)}).next(()=>o)}containsKey(t,e){const i=eo(e.path),r=IDBKeyRange.bound([i],[KG(i)],!1,!0);let o=0;return ru(t).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}_t(t,e){return kp(t).get(e).next(i=>i?Yv(i):null)}}function kp(n){return Ir(n,"targets")}function VW(n){return Ir(n,"targetGlobal")}function ru(n){return Ir(n,"targetDocuments")}function BW([n,t],[e,i]){const r=vt(n,e);return 0===r?vt(t,i):r}class Yve{constructor(t){this.Qn=t,this.buffer=new Un(BW),this.Kn=0}$n(){return++this.Kn}Un(t){const e=[t,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();BW(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class UW{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(t){var e=this;we("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,le.Z)(function*(){e.Wn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){qc(i)?we("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Wc(i)}yield e.Gn(3e5)}))}}class Qve{constructor(t,e){this.zn=t,this.params=e}calculateTargetCount(t,e){return this.zn.jn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return G.resolve(ds._e);const i=new Yve(e);return this.zn.forEachTarget(t,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(t,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.zn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.zn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(OW)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OW):this.Jn(t,e))}getCacheSize(t){return this.zn.getCacheSize(t)}Jn(t,e){let i,r,o,s,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(c=Date.now(),pp()<=ss.in.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${f} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}}class Jve{constructor(t,e){this.db=t,this.garbageCollector=function jW(n,t){return new Qve(n,t)}(this,e)}jn(t){const e=this.Yn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Yn(t){let e=0;return this.Hn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Hn(t,e){return this.Zn(t,(i,r)=>e(r))}addReference(t,e,i){return VT(t,i)}removeReference(t,e,i){return VT(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return VT(t,e)}Xn(t,e){return function(r,o){let s=!1;return LW(r).Z(a=>FW(r,a,o).next(l=>(l&&(s=!0),G.resolve(!l)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Zn(t,(s,a)=>{if(a<=e){const l=this.Xn(t,s).next(c=>{if(!c)return o++,i.getEntry(t,s).next(()=>(i.removeEntry(s,Xe.min()),ru(t).delete([0,eo(s.path)])))});r.push(l)}}).next(()=>G.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return VT(t,e)}Zn(t,e){const i=ru(t);let r,o=ds._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==ds._e&&e(new Ne(za(r)),o),o=c,r=l):o=ds._e}).next(()=>{o!==ds._e&&e(new Ne(za(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function VT(n,t){return ru(n).put((r=n.currentSequenceNumber,{targetId:0,path:eo(t.path),sequenceNumber:r}));var r}class HW{constructor(){this.changes=new Ll(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ui.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?G.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Xve{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Rd(t).put(i)}removeEntry(t,e,i){return Rd(t).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],MT(s),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.er(t,i)))}getEntry(t,e){let i=ui.newInvalidDocument(e);return Rd(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ey(e))},(r,o)=>{i=this.tr(e,o)}).next(()=>i)}nr(t,e){let i={size:0,document:ui.newInvalidDocument(e)};return Rd(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ey(e))},(r,o)=>{i={document:this.tr(e,o),size:FT(o)}}).next(()=>i)}getEntries(t,e){let i=Ho();return this.rr(t,e,(r,o)=>{const s=this.tr(r,o);i=i.insert(r,s)}).next(()=>i)}ir(t,e){let i=Ho(),r=new ni(Ne.comparator);return this.rr(t,e,(o,s)=>{const a=this.tr(o,s);i=i.insert(o,a),r=r.insert(o,FT(s))}).next(()=>({documents:i,sr:r}))}rr(t,e,i){if(e.isEmpty())return G.resolve();let r=new Un(WW);e.forEach(l=>r=r.add(l));const o=IDBKeyRange.bound(ey(r.first()),ey(r.last())),s=r.getIterator();let a=s.getNext();return Rd(t).Y({index:"documentKeyIndex",range:o},(l,c,u)=>{const f=Ne.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&WW(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,c),a=s.hasNext()?s.getNext():null),a?u.U(ey(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,o){const s=e.path,a=[s.popLast().toArray(),s.lastSegment(),MT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rd(t).W(IDBKeyRange.bound(a,l,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let u=Ho();for(const f of c){const g=this.tr(Ne.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Bv(e,g)||r.has(g.key))&&(u=u.insert(g.key,g))}return u})}getAllFromCollectionGroup(t,e,i,r){let o=Ho();const s=GW(e,i),a=GW(e,us.max());return Rd(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,u)=>{const f=this.tr(Ne.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(f.key,f),o.size===r&&u.done()}).next(()=>o)}newChangeBuffer(t){return new eye(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return zW(t).get("remoteDocumentGlobalKey").next(e=>(Je(!!e),e))}er(t,e){return zW(t).put("remoteDocumentGlobalKey",e)}tr(t,e){if(e){const i=function Uve(n,t){let e;if(t.document)e=fW(n.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ne.fromSegments(t.noDocument.path),r=Id(t.noDocument.readTime);e=ui.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ue();{const i=Ne.fromSegments(t.unknownDocument.path),r=Id(t.unknownDocument.version);e=ui.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){const o=new _i(r[0],r[1]);return Xe.fromTimestamp(o)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(Xe.min()))return i}return ui.newInvalidDocument(t)}}function $W(n){return new Xve(n)}class eye extends HW{constructor(t,e){super(),this._r=t,this.trackRemovals=e,this.ar=new Ll(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Un((o,s)=>vt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(e.push(this._r.removeEntry(t,o,a.readTime)),s.isValidDocument()){const l=bW(this._r.serializer,s);r=r.add(o.path.popLast());const c=FT(l);i+=c-a.size,e.push(this._r.addEntry(t,o,l))}else if(i-=a.size,this.trackRemovals){const l=bW(this._r.serializer,s.convertToNoDocument(Xe.min()));e.push(this._r.addEntry(t,o,l))}}),r.forEach(o=>{e.push(this._r.indexManager.addToCollectionParentIndex(t,o))}),e.push(this._r.updateMetadata(t,i)),G.waitFor(e)}getFromCache(t,e){return this._r.nr(t,e).next(i=>(this.ar.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this._r.ir(t,e).next(({documents:i,sr:r})=>(r.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:i.get(o).readTime})}),i))}}function zW(n){return Ir(n,"remoteDocumentGlobal")}function Rd(n){return Ir(n,"remoteDocumentsV14")}function ey(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function GW(n,t){const e=t.documentKey.path.toArray();return[n,MT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function WW(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=vt(e[o],i[o]),r)return r;return r=vt(e.length,i.length),r||(r=vt(e[e.length-2],i[i.length-2]),r||vt(e[e.length-1],i[i.length-1]))}class tye{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class qW{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&$v(i.mutation,r,jo.empty(),_i.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Rt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Rt()){const r=Wa();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let s=Uv();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){const i=Wa();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Rt()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,i,r){let o=Ho();const s=jv(),a=jv();return e.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof Vl)?o=o.insert(c.key,c):void 0!==u?(s.set(c.key,u.mutation.getFieldMask()),$v(u.mutation,c,u.mutation.getFieldMask(),_i.now())):s.set(c.key,jo.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),e.forEach((c,u)=>{var f;return a.set(c,new tye(u,null!==(f=s.get(c))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(t,e){const i=jv();let r=new ni((s,a)=>s-a),o=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=e.get(l);if(null===c)return;let u=i.get(l)||jo.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(r.get(a.batchId)||Rt()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=V5();u.forEach(g=>{if(!o.has(g)){const _=q5(e.get(g),i.get(g));null!==_&&f.set(g,_),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(t,c,f))}return G.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return Ne.isDocumentKey((s=e).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):gN(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r);var s}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):G.resolve(Wa());let a=-1,l=o;return s.next(c=>G.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(u)?G.resolve():this.remoteDocumentCache.getEntry(t,u).next(g=>{l=l.insert(u,g)}))).next(()=>this.populateOverlays(t,c,o)).next(()=>this.computeViews(t,l,c,Rt())).next(u=>({batchId:a,changes:L5(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ne(e)).next(i=>{let r=Uv();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let s=Uv();return this.indexManager.getCollectionParents(t,o).next(a=>G.forEach(a,l=>{const c=(f=e,g=l.child(o),new Fl(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,g;return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();null===s.get(u)&&(s=s.insert(u,ui.newInvalidDocument(u)))});let a=Uv();return s.forEach((l,c)=>{const u=o.get(l);void 0!==u&&$v(u.mutation,c,jo.empty(),_i.now()),Bv(e,c)&&(a=a.insert(l,c))}),a})}}class nye{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,e){return G.resolve(this.ur.get(e))}saveBundleMetadata(t,e){return this.ur.set(e.id,{id:(r=e).id,version:r.version,createTime:ji(r.createTime)}),G.resolve();var r}getNamedQuery(t,e){return G.resolve(this.cr.get(e))}saveNamedQuery(t,e){return this.cr.set(e.name,{name:(r=e).name,query:AN(r.bundledQuery),readTime:ji(r.readTime)}),G.resolve();var r}}class iye{constructor(){this.overlays=new ni(Ne.comparator),this.lr=new Map}getOverlay(t,e){return G.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Wa();return G.forEach(e,r=>this.getOverlay(t,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.lt(t,e,o)}),G.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.lr.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(i)),G.resolve()}getOverlaysForCollection(t,e,i){const r=Wa(),o=e.length+1,s=new Ne(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return G.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new ni((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>i){let u=o.get(c.largestBatchId);null===u&&(u=Wa(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Wa(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return G.resolve(a)}lt(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const s=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new wN(e,i));let o=this.lr.get(e);void 0===o&&(o=Rt(),this.lr.set(e,o)),this.lr.set(e,o.add(i.key))}}class FN{constructor(){this.hr=new Un(xr.Pr),this.Ir=new Un(xr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,e){const i=new xr(t,e);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.dr(new xr(t,e))}Ar(t,e){t.forEach(i=>this.removeReference(i,e))}Rr(t){const e=new Ne(new un([])),i=new xr(e,t),r=new xr(e,t+1),o=[];return this.Ir.forEachInRange([i,r],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const e=new Ne(new un([])),i=new xr(e,t),r=new xr(e,t+1);let o=Rt();return this.Ir.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){const e=new xr(t,0),i=this.hr.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class xr{constructor(t,e){this.key=t,this.gr=e}static Pr(t,e){return Ne.comparator(t.key,e.key)||vt(t.gr,e.gr)}static Tr(t,e){return vt(t.gr,e.gr)||Ne.comparator(t.key,e.key)}}class rye{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.pr=1,this.yr=new Un(xr.Pr)}checkEmpty(t){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const o=this.pr;this.pr++;const s=new bN(o,e,i,r);this.mutationQueue.push(s);for(const a of r)this.yr=this.yr.add(new xr(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(t,e){return G.resolve(this.wr(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.Sr(e+1),o=r<0?0:r;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(t){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new xr(e,0),r=new xr(e,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([i,r],s=>{const a=this.wr(s.gr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Un(vt);return e.forEach(r=>{const o=new xr(r,0),s=new xr(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{i=i.add(a.gr)})}),G.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;Ne.isDocumentKey(o)||(o=o.child(""));const s=new xr(new Ne(o),0);let a=new Un(vt);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},s),G.resolve(this.br(a))}br(t){const e=[];return t.forEach(i=>{const r=this.wr(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Je(0===this.Dr(e.batchId,"removed")),this.mutationQueue.shift();let i=this.yr;return G.forEach(e.mutations,r=>{const o=new xr(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.yr=i})}Fn(t){}containsKey(t,e){const i=new xr(e,0),r=this.yr.firstAfterOrEqual(i);return G.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return G.resolve()}Dr(t,e){return this.Sr(t)}Sr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}wr(t){const e=this.Sr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class oye{constructor(t){this.Cr=t,this.docs=new ni(Ne.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.Cr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return G.resolve(i?i.document.mutableCopy():ui.newInvalidDocument(e))}getEntries(t,e){let i=Ho();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ui.newInvalidDocument(r))}),G.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=Ho();const s=e.path,a=new Ne(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||sN(YG(u),i)<=0||(r.has(u.key)||Bv(e,u))&&(o=o.insert(u.key,u.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Ue()}vr(t,e){return G.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new sye(this)}getSize(t){return G.resolve(this.size)}}class sye extends HW{constructor(t){super(),this._r=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this._r.addEntry(t,r)):this._r.removeEntry(i)}),G.waitFor(e)}getFromCache(t,e){return this._r.getEntry(t,e)}getAllFromCache(t,e){return this._r.getEntries(t,e)}}class aye{constructor(t){this.persistence=t,this.Fr=new Ll(e=>Ed(e),Lv),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.Mr=0,this.Or=new FN,this.targetCount=0,this.Nr=Ad.On()}forEachTarget(t,e){return this.Fr.forEach((i,r)=>e(r)),G.resolve()}getLastRemoteSnapshotVersion(t){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return G.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Mr&&(this.Mr=e),G.resolve()}kn(t){this.Fr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Nr=new Ad(e),this.highestTargetId=e),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,e){return this.kn(e),this.targetCount+=1,G.resolve()}updateTargetData(t,e){return this.kn(e),G.resolve()}removeTargetData(t,e){return this.Fr.delete(e.target),this.Or.Rr(e.targetId),this.targetCount-=1,G.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),G.waitFor(o).next(()=>r)}getTargetCount(t){return G.resolve(this.targetCount)}getTargetData(t,e){const i=this.Fr.get(e)||null;return G.resolve(i)}addMatchingKeys(t,e,i){return this.Or.Er(e,i),G.resolve()}removeMatchingKeys(t,e,i){this.Or.Ar(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Or.Rr(e),G.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Or.mr(e);return G.resolve(i)}containsKey(t,e){return G.resolve(this.Or.containsKey(e))}}class LN{constructor(t,e){this.Br={},this.overlays={},this.Lr=new ds(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new aye(this),this.indexManager=new qve,this.remoteDocumentCache=new oye(i=>this.referenceDelegate.Qr(i)),this.serializer=new yW(e),this.Kr=new nye(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new iye,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new rye(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,e,i){we("MemoryPersistence","Starting transaction:",t);const r=new lye(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(o=>this.referenceDelegate.Ur(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Wr(t,e){return G.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}}class lye extends JG{constructor(t){super(),this.currentSequenceNumber=t}}class BT{constructor(t){this.persistence=t,this.Gr=new FN,this.zr=null}static jr(t){return new BT(t)}get Hr(){if(this.zr)return this.zr;throw Ue()}addReference(t,e,i){return this.Gr.addReference(i,e),this.Hr.delete(i.toString()),G.resolve()}removeReference(t,e,i){return this.Gr.removeReference(i,e),this.Hr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(t,e){return this.Hr.add(e.toString()),G.resolve()}removeTarget(t,e){this.Gr.Rr(e.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Hr.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}$r(){this.zr=new Set}Ur(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Hr,i=>{const r=Ne.fromPath(i);return this.Jr(t,r).next(o=>{o||e.removeEntry(r,Xe.min())})}).next(()=>(this.zr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Jr(t,e).next(i=>{i?this.Hr.delete(e.toString()):this.Hr.add(e.toString())})}Qr(t){return 0}Jr(t,e){return G.or([()=>G.resolve(this.Gr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Wr(t,e)])}}class cye{constructor(t){this.serializer=t}N(t,e,i,r){const o=new gT("createOrUpgrade",e);var l;i<1&&r>=1&&(t.createObjectStore("owner"),(l=t).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n5,{unique:!0}),l.createObjectStore("documentMutations"),KW(t),function(l){l.createObjectStore("remoteDocuments")}(t));let s=G.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),KW(t)),s=s.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(o))),i<4&&r>=4&&(0!==i&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n5,{unique:!0});const f=c.store("mutations"),g=u.map(_=>f.put(_));return G.waitFor(g)})}(t,o))),s=s.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(s=s.next(()=>this.Zr(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.Xr(o)))),i<7&&r>=7&&(s=s.next(()=>this.ei(o))),i<8&&r>=8&&(s=s.next(()=>this.ti(t,o))),i<9&&r>=9&&(s=s.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(s=s.next(()=>this.ni(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(s=s.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:K_e});c.createIndex("collectionPathOverlayIndex",Z_e,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Y_e,{unique:!1})}(t)})),i<13&&r>=13&&(s=s.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:L_e});c.createIndex("documentKeyIndex",V_e),c.createIndex("collectionGroupIndex",B_e)}(t)).next(()=>this.ri(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ii(t,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:z_e}).createIndex("sequenceNumberIndex",G_e,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:W_e}).createIndex("documentKeyIndex",q_e,{unique:!1})}(t))),s}Xr(t){let e=0;return t.store("remoteDocuments").Y((i,r)=>{e+=FT(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>G.forEach(r,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>G.forEach(a,l=>{Je(l.userId===o.userId);const c=xd(this.serializer,l);return PW(t,o.userId,c).next(()=>{})}))}))}ei(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Y((s,a)=>{const l=new un(s),c=[0,eo(l)];o.push(e.get(c).next(u=>u?G.resolve():e.put({targetId:0,path:eo(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>G.waitFor(o))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:$_e});const i=e.store("collectionParents"),r=new PN,o=s=>{if(r.add(s)){const a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:eo(l)})}};return e.store("remoteDocuments").Y({J:!0},(s,a)=>{const l=new un(s);return o(l.popLast())}).next(()=>e.store("documentMutations").Y({J:!0},([s,a,l],c)=>{const u=za(a);return o(u.popLast())}))}ni(t){const e=t.store("targets");return e.Y((i,r)=>{const o=Yv(r),s=EW(this.serializer,o);return e.put(s)})}ri(t,e){const i=e.store("remoteDocuments"),r=[];return i.Y((o,s)=>{const a=e.store("remoteDocumentsV14"),l=(f=s,f.document?new Ne(un.fromString(f.document.name).popFirst(5)):f.noDocument?Ne.fromSegments(f.noDocument.path):f.unknownDocument?Ne.fromSegments(f.unknownDocument.path):Ue()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var f;r.push(a.put(c))}).next(()=>G.waitFor(r))}ii(t,e){const i=e.store("mutations"),r=$W(this.serializer),o=new LN(BT.jr,this.serializer.ut);return i.W().next(s=>{const a=new Map;return s.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Rt();xd(this.serializer,l).keys().forEach(f=>u=u.add(f)),a.set(l.userId,u)}),G.forEach(a,(l,c)=>{const u=new Cr(c),f=kT.ct(this.serializer,u),g=o.getIndexManager(u),_=LT.ct(u,this.serializer,g,o.referenceDelegate);return new qW(r,_,f,g).recalculateAndSaveOverlaysForDocumentKeys(new cN(e,ds._e),l).next()})})}}function KW(n){n.createObjectStore("targetDocuments",{keyPath:j_e}).createIndex("documentTargetsIndex",H_e,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",U_e,{unique:!0}),n.createObjectStore("targetGlobal")}const VN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BN{constructor(t,e,i,r,o,s,a,l,c,u,f=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.si=o,this.window=s,this.document=a,this.oi=c,this._i=u,this.ai=f,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=g=>Promise.resolve(),!BN.D())throw new _e(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jve(this,r),this.Ii=e+"main",this.serializer=new yW(l),this.Ti=new la(this.Ii,this.ai,new cye(this.serializer)),this.qr=new Zve(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$W(this.serializer),this.Kr=new jve,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===u&&Ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(J.FAILED_PRECONDITION,VN);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.qr.getHighestSequenceNumber(t))}).then(t=>{this.Lr=new ds(t,this.oi)}).then(()=>{this.kr=!0}).catch(t=>(this.Ti&&this.Ti.close(),Promise.reject(t)))}mi(t){var e=this;return this.Pi=function(){var i=(0,le.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ti.L(function(){var e=(0,le.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.si.enqueueAndForget((0,le.Z)(function*(){e.started&&(yield e.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>jT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(t)).next(e=>this.isPrimary&&!e?this.pi(t).next(()=>!1):!!e&&this.yi(t).next(()=>!0))).catch(t=>{if(qc(t))return we("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return we("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.si.enqueueRetryable(()=>this.Pi(t)),this.isPrimary=t})}fi(t){return ty(t).get("owner").next(e=>G.resolve(this.wi(e)))}Si(t){return jT(t).delete(this.clientId)}bi(){var t=this;return(0,le.Z)(function*(){if(t.isPrimary&&!t.Di(t.hi,18e5)){t.hi=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Ir(i,"clientMetadata");return r.W().next(o=>{const s=t.Ci(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return G.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.Ei)for(const i of e)t.Ei.removeItem(t.vi(i.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(t){return!!t&&t.ownerId===this.clientId}gi(t){return this._i?G.resolve(!0):ty(t).get("owner").next(e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)){if(this.wi(e)&&this.networkEnabled)return!0;if(!this.wi(e)){if(!e.allowTabSynchronization)throw new _e(J.FAILED_PRECONDITION,VN);return!1}}return!(!this.networkEnabled||!this.inForeground)||jT(t).W().next(i=>void 0===this.Ci(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&we("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,le.Z)(function*(){t.kr=!1,t.Mi(),t.li&&(t.li.cancel(),t.li=null),t.xi(),t.Oi(),yield t.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new cN(e,ds._e);return t.pi(i).next(()=>t.Si(i))}),t.Ti.close(),t.Ni()})()}Ci(t,e){return t.filter(i=>this.Di(i.updateTimeMs,e)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>jT(t).W().next(e=>this.Ci(e,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(t,e){return LT.ct(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Kve(t,this.serializer.ut.databaseId)}getDocumentOverlayCache(t){return kT.ct(this.serializer,t)}getBundleCache(){return this.Kr}runTransaction(t,e,i){we("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",o=15===(l=this.ai)?J_e:14===l?a5:13===l?s5:12===l?Q_e:11===l?o5:void Ue();var l;let s;return this.Ti.runTransaction(t,r,o,a=>(s=new cN(a,this.Lr?this.Lr.next():ds._e),"readwrite-primary"===e?this.fi(s).next(l=>!!l||this.gi(s)).next(l=>{if(!l)throw Ui(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new _e(J.FAILED_PRECONDITION,QG);return i(s)}).next(l=>this.yi(s).next(()=>l)):this.Li(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(t){return ty(t).get("owner").next(e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new _e(J.FAILED_PRECONDITION,VN)})}yi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ty(t).put("owner",e)}static D(){return la.D()}pi(t){const e=ty(t);return e.get("owner").next(i=>this.wi(i)?(we("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):G.resolve())}Di(t,e){const i=Date.now();return!(t<i-e||t>i&&(Ui(`Detected an update time that is in the future: ${t} > ${i}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;(0,x.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(t){var e;try{const i=null!==(null===(e=this.Ei)||void 0===e?void 0:e.getItem(this.vi(t)));return we("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ui("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(t){Ui("Failed to set zombie client id.",t)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ty(n){return Ir(n,"owner")}function jT(n){return Ir(n,"clientMetadata")}function UN(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class jN{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.ki=i,this.qi=r}static Qi(t,e){let i=Rt(),r=Rt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new jN(t,e.fromCache,i,r)}}class uye{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class ZW{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,e){this.Gi=t,this.indexManager=e,this.Ki=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.zi(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(t,e,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new uye;return this.Hi(t,e,s).next(a=>{if(o.result=a,this.$i)return this.Ji(t,e,s,a.size)})}).next(()=>o.result)}Ji(t,e,i,r){return i.documentReadCount<this.Ui?(pp()<=ss.in.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Tp(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),G.resolve()):(pp()<=ss.in.DEBUG&&we("QueryEngine","Query:",Tp(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(pp()<=ss.in.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Tp(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Co(e))):G.resolve())}zi(t,e){if(N5(e))return G.resolve(null);let i=Co(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=xT(e,null,"F"),i=Co(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const s=Rt(...o);return this.Gi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.Yi(e,a);return this.Zi(e,c,s,l.readTime)?this.zi(t,xT(e,null,"F")):this.Xi(t,c,e,l)}))})))}ji(t,e,i,r){return N5(e)||r.isEqual(Xe.min())?G.resolve(null):this.Gi.getDocuments(t,i).next(o=>{const s=this.Yi(e,o);return this.Zi(e,s,i,r)?G.resolve(null):(pp()<=ss.in.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tp(e)),this.Xi(t,s,e,ZG(r,-1)).next(a=>a))})}Yi(t,e){let i=new Un(P5(t));return e.forEach((r,o)=>{Bv(t,o)&&(i=i.add(o))}),i}Zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(t,e,i){return pp()<=ss.in.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Tp(e)),this.Gi.getDocumentsMatchingQuery(t,e,us.min(),i)}Xi(t,e,i,r){return this.Gi.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}}class dye{constructor(t,e,i,r){this.persistence=t,this.es=e,this.serializer=r,this.ts=new ni(vt),this.ns=new Ll(o=>Ed(o),Lv),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(i)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new qW(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ts))}}function YW(n,t,e,i){return new dye(n,t,e,i)}function QW(n,t){return HN.apply(this,arguments)}function HN(){return HN=(0,le.Z)(function*(n,t){const e=Re(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.os(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const s=[],a=[];let l=Rt();for(const c of r){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})}),HN.apply(this,arguments)}function JW(n){const t=Re(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.qr.getLastRemoteSnapshotVersion(e))}function XW(n,t,e){let i=Rt(),r=Rt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let s=Ho();return e.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Xe.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):we("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:s,cs:r}})}function pye(n,t){const e=Re(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Op(n,t){const e=Re(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.qr.getTargetData(i,t).next(o=>o?(r=o,G.resolve(r)):e.qr.allocateTargetId(i).next(s=>(r=new Bl(t,s,"TargetPurposeListen",i.currentSequenceNumber),e.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ts.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ts=e.ts.insert(i.targetId,i),e.ns.set(t,i.targetId)),i})}function Pp(n,t,e){return $N.apply(this,arguments)}function $N(){return $N=(0,le.Z)(function*(n,t,e){const i=Re(n),r=i.ts.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!qc(s))throw s;we("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.ts=i.ts.remove(t),i.ns.delete(r.target)}),$N.apply(this,arguments)}function HT(n,t,e){const i=Re(n);let r=Xe.min(),o=Rt();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const f=Re(l),g=f.ns.get(u);return void 0!==g?G.resolve(f.ts.get(g)):f.qr.getTargetData(c,u)}(i,s,Co(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.es.getDocumentsMatchingQuery(s,t,e?r:Xe.min(),e?o:Rt())).next(a=>(n8(i,O5(t),a),{documents:a,ls:o})))}function e8(n,t){const e=Re(n),i=Re(e.qr),r=e.ts.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i._t(o,t).next(s=>s?s.target:null))}function t8(n,t){const e=Re(n),i=e.rs.get(t)||Xe.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.ss.getAllFromCollectionGroup(r,t,ZG(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(n8(e,t,r),r))}function n8(n,t,e){let i=n.rs.get(t)||Xe.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.rs.set(t,i)}function zN(){return zN=(0,le.Z)(function*(n,t,e,i){const r=Re(n);let o=Rt(),s=Ho();for(const c of e){const u=t.hs(c.metadata.name);c.document&&(o=o.add(u));const f=t.Ps(c);f.setReadTime(t.Is(c.metadata.readTime)),s=s.insert(u,f)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield Op(r,(u=i,Co(Ep(un.fromString(`__bundle__/docs/${u}`)))));var u;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>XW(c,a,s).next(u=>(a.apply(c),u)).next(u=>r.qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.qr.addMatchingKeys(c,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.us,u.cs)).next(()=>u.us)))}),zN.apply(this,arguments)}function gye(n,t){return GN.apply(this,arguments)}function GN(){return GN=(0,le.Z)(function*(n,t,e=Rt()){const i=yield Op(n,Co(AN(t.bundledQuery))),r=Re(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const s=ji(t.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.Kr.saveNamedQuery(o,t);const a=i.withResumeToken(ar.EMPTY_BYTE_STRING,s);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(o,a).next(()=>r.qr.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.qr.addMatchingKeys(o,e,i.targetId)).next(()=>r.Kr.saveNamedQuery(o,t))})}),GN.apply(this,arguments)}function i8(n,t){return`firestore_clients_${n}_${t}`}function r8(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function WN(n,t){return`firestore_targets_${n}_${t}`}class $T{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Ts(t,e,i){const r=JSON.parse(i);let o,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(o=new _e(r.error.code,r.error.message))),s?new $T(t,e,r.state,o):(Ui("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Es(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ny{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ts(t,e){const i=JSON.parse(e);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new _e(i.error.code,i.error.message))),o?new ny(t,i.state,r):(Ui("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Es(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class zT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ts(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=vN();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=e5(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new zT(t,o):(Ui("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class qN{constructor(t,e){this.clientId=t,this.onlineState=e}static Ts(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new qN(e.clientId,e.onlineState):(Ui("SharedClientState",`Failed to parse online state: ${t}`),null)}}class KN{constructor(){this.activeTargetIds=vN()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ZN{constructor(t,e,i,r,o){this.window=t,this.si=e,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new ni(vt),this.started=!1,this.ps=[];const s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=i8(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new KN),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,le.Z)(function*(){const e=yield t.syncEngine.Bi();for(const r of e){if(r===t.Rs)continue;const o=t.getItem(i8(t.persistenceKey,r));if(o){const s=zT.Ts(r,o);s&&(t.gs=t.gs.insert(s.clientId,s))}}t.Fs();const i=t.storage.getItem(t.Cs);if(i){const r=t.Ms(i);r&&t.xs(r)}for(const r of t.ps)t.fs(r);t.ps=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ws,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(t){let e=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Ns(t,"pending")}updateMutationState(t,e,i){this.Ns(t,e,i),this.Bs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(WN(this.persistenceKey,t));if(i){const r=ny.Ts(t,i);r&&(e=r.state)}}return this.Ls.ds(t),this.Fs(),e}removeLocalQueryTarget(t){this.Ls.As(t),this.Fs()}isLocalQueryTarget(t){return this.Ls.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(WN(this.persistenceKey,t))}updateQueryState(t,e,i){this.ks(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Bs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.qs(t)}notifyBundleLoaded(t){this.Qs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return we("SharedClientState","READ",t,e),e}setItem(t,e){we("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){we("SharedClientState","REMOVE",t),this.storage.removeItem(t)}fs(t){var e=this;const i=t;if(i.storageArea===this.storage){if(we("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ys)return void Ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,le.Z)(function*(){if(e.started){if(null!==i.key)if(e.Ss.test(i.key)){if(null==i.newValue){const r=e.Ks(i.key);return e.$s(r,null)}{const r=e.Us(i.key,i.newValue);if(r)return e.$s(r.clientId,r)}}else if(e.bs.test(i.key)){if(null!==i.newValue){const r=e.Ws(i.key,i.newValue);if(r)return e.Gs(r)}}else if(e.Ds.test(i.key)){if(null!==i.newValue){const r=e.zs(i.key,i.newValue);if(r)return e.js(r)}}else if(i.key===e.Cs){if(null!==i.newValue){const r=e.Ms(i.newValue);if(r)return e.xs(r)}}else if(i.key===e.ws){const r=function(s){let a=ds._e;if(null!=s)try{const l=JSON.parse(s);Je("number"==typeof l),a=l}catch(l){Ui("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==ds._e&&e.sequenceNumberHandler(r)}else if(i.key===e.vs){const r=e.Hs(i.newValue);yield Promise.all(r.map(o=>e.syncEngine.Js(o)))}}else e.ps.push(i)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(t,e,i){const r=new $T(this.currentUser,t,e,i),o=r8(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Es())}Bs(t){const e=r8(this.persistenceKey,this.currentUser,t);this.removeItem(e)}qs(t){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:t}))}ks(t,e,i){const r=WN(this.persistenceKey,t),o=new ny(t,e,i);this.setItem(r,o.Es())}Qs(t){const e=JSON.stringify(Array.from(t));this.setItem(this.vs,e)}Ks(t){const e=this.Ss.exec(t);return e?e[1]:null}Us(t,e){const i=this.Ks(t);return zT.Ts(i,e)}Ws(t,e){const i=this.bs.exec(t),r=Number(i[1]);return $T.Ts(new Cr(void 0!==i[2]?i[2]:null),r,e)}zs(t,e){const i=this.Ds.exec(t),r=Number(i[1]);return ny.Ts(r,e)}Ms(t){return qN.Ts(t)}Hs(t){return JSON.parse(t)}Gs(t){var e=this;return(0,le.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Ys(t.batchId,t.state,t.error);we("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}js(t){return this.syncEngine.Zs(t.targetId,t.state,t.error)}$s(t,e){const i=e?this.gs.insert(t,e):this.gs.remove(t),r=this.Os(this.gs),o=this.Os(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=i})}xs(t){this.gs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Os(t){let e=vN();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class o8{constructor(){this.eo=new KN,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,e,i){this.no[t]=e}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new KN,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class _ye{ro(t){}shutdown(){}}class s8{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GT=null;function YN(){return null===GT?GT=268435456+Math.round(2147483648*Math.random()):GT++,"0x"+GT.toString(16)}const vye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yye{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}const no="WebChannelConnection";class bye extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+e.host,this.fo=`projects/${r}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get yo(){return!1}wo(e,i,r,o,s){const a=YN(),l=this.So(e,i);we("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,o,s),this.Do(e,l,c,r).then(u=>(we("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Uo("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Co(e,i,r,o,s,a){return this.wo(e,i,r,o,s)}bo(e,i,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>e[s]=o),r&&r.headers.forEach((o,s)=>e[s]=o)}So(e,i){return`${this.mo}/v1/${i}:${vye[e]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,e,i,r){const o=YN();return new Promise((s,a)=>{const l=new __e;l.setWithCredentials(!0),l.listenOnce(p_e.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case iN.NO_ERROR:const u=l.getResponseJson();we(no,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(u)),s(u);break;case iN.TIMEOUT:we(no,`RPC '${t}' ${o} timed out`),a(new _e(J.DEADLINE_EXCEEDED,"Request time out"));break;case iN.HTTP_ERROR:const f=l.getStatus();if(we(no,`RPC '${t}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const y=function(C){const O=C.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(O)>=0?O:J.UNKNOWN}(_.status);a(new _e(y,_.message))}else a(new _e(J.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new _e(J.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{we(no,`RPC '${t}' ${o} completed.`)}});const c=JSON.stringify(r);we(no,`RPC '${t}' ${o} sending request:`,r),l.send(e,"POST",c,i,15)})}vo(t,e,i){const r=YN(),o=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=h_e(),a=f_e(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new g_e({})),this.bo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const u=o.join("");we(no,`Creating RPC '${t}' stream ${r}: ${u}`,l);const f=s.createWebChannel(u,l);let g=!1,_=!1;const y=new yye({co:C=>{_?we(no,`Not sending because RPC '${t}' stream ${r} is closed:`,C):(g||(we(no,`Opening RPC '${t}' stream ${r} transport.`),f.open(),g=!0),we(no,`RPC '${t}' stream ${r} sending:`,C),f.send(C))},lo:()=>f.close()}),b=(C,O,S)=>{C.listen(O,V=>{try{S(V)}catch(W){setTimeout(()=>{throw W},0)}})};return b(f,mT.EventType.OPEN,()=>{_||we(no,`RPC '${t}' stream ${r} transport opened.`)}),b(f,mT.EventType.CLOSE,()=>{_||(_=!0,we(no,`RPC '${t}' stream ${r} transport closed`),y.Ro())}),b(f,mT.EventType.ERROR,C=>{_||(_=!0,Uo(no,`RPC '${t}' stream ${r} transport errored:`,C),y.Ro(new _e(J.UNAVAILABLE,"The operation could not be completed")))}),b(f,mT.EventType.MESSAGE,C=>{var O;if(!_){const S=C.data[0];Je(!!S);const W=S.error||(null===(O=S[0])||void 0===O?void 0:O.error);if(W){we(no,`RPC '${t}' stream ${r} received error:`,W);const ae=W.status;let Ie=function(hn){const fn=Qi[hn];if(void 0!==fn)return X5(fn)}(ae),Ve=W.message;void 0===Ie&&(Ie=J.INTERNAL,Ve="Unknown error status: "+ae+" with message "+W.message),_=!0,y.Ro(new _e(Ie,Ve)),f.close()}else we(no,`RPC '${t}' stream ${r} received:`,S),y.Vo(S)}}),b(a,m_e.STAT_EVENT,C=>{C.stat===$G.PROXY?we(no,`RPC '${t}' stream ${r} detected buffering proxy`):C.stat===$G.NOPROXY&&we(no,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.Ao()},0),y}}function a8(){return typeof window<"u"?window:null}function WT(){return typeof document<"u"?document:null}function iy(n){return new Rve(n,!0)}class QN{constructor(t,e,i=1e3,r=1.5,o=6e4){this.si=t,this.timerId=e,this.Fo=i,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const e=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,e-i);r>0&&we("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class l8{constructor(t,e,i,r,o,s,a,l){this.si=t,this.Ko=i,this.$o=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new QN(t,e)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var t=this;return(0,le.Z)(function*(){t.jo()&&(yield t.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}Xo(){var t=this;return(0,le.Z)(function*(){if(t.Ho())return t.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(t,e){var i=this;return(0,le.Z)(function*(){i.t_(),i.n_(),i.zo.cancel(),i.Uo++,4!==t?i.zo.reset():e&&e.code===J.RESOURCE_EXHAUSTED?(Ui(e.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),i.zo.Lo()):e&&e.code===J.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.r_(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Io(e)})()}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),e=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===e&&this.s_(i,r)},i=>{t(()=>{const r=new _e(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(t,e){const i=this.i_(this.Uo);this.stream=this.__(t,e),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){var t=this;this.state=5,this.zo.ko((0,le.Z)(function*(){t.state=0,t.start()}))}o_(t){return we("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return e=>{this.si.enqueueAndForget(()=>this.Uo===t?e():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Eye extends l8{constructor(t,e,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}__(t,e){return this.connection.vo("Listen",t,e)}onMessage(t){this.zo.reset();const e=function kve(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(c=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ue(),r=t.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Je(void 0===u||"string"==typeof u),ar.fromBase64String(u||"")):(Je(void 0===u||u instanceof Uint8Array),ar.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(c){const u=void 0===c.code?J.UNKNOWN:X5(c.code);return new _e(u,c.message||"")}(s);e=new rW(i,r,o,a||null)}else if("documentChange"in t){const i=t.documentChange,r=qa(n,i.document.name),o=ji(i.document.updateTime),s=i.document.createTime?ji(i.document.createTime):Xe.min(),a=new Vr({mapValue:{fields:i.document.fields}}),l=ui.newFoundDocument(r,o,s,a);e=new NT(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){const i=t.documentDelete,r=qa(n,i.document),o=i.readTime?ji(i.readTime):Xe.min(),s=ui.newNoDocument(r,o);e=new NT([],i.removedTargetIds||[],s.key,s)}else if("documentRemove"in t){const i=t.documentRemove,r=qa(n,i.document);e=new NT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Ue();{const i=t.filter,{count:r=0,unchangedNames:o}=i,s=new Cve(r,o);e=new iW(i.targetId,s)}}var c;return e}(this.serializer,t),i=function(o){if(!("targetChange"in o))return Xe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Xe.min():s.readTime?ji(s.readTime):Xe.min()}(t);return this.listener.a_(e,i)}u_(t){const e={};e.database=Kv(this.serializer),e.addTarget=function(o,s){let a;const l=s.target;if(a=CT(l)?{documents:pW(o,l)}:{query:SN(o,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=lW(o,s.resumeToken);const c=CN(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Xe.min())>0){a.readTime=Sp(o,s.snapshotVersion.toTimestamp());const c=CN(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,t);const i=function Pve(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.e_(e)}c_(t){const e={};e.database=Kv(this.serializer),e.removeTarget=t,this.e_(e)}}class wye extends l8{constructor(t,e,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,e){return this.connection.vo("Write",t,e)}onMessage(t){if(Je(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const e=function Ove(n,t){return n&&n.length>0?(Je(void 0!==t),n.map(e=>function(r,o){let s=ji(r.updateTime?r.updateTime:o);return s.isEqual(Xe.min())&&(s=ji(o)),new bve(s,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=ji(t.commitTime);return this.listener.I_(i,e)}return Je(!t.writeResults||0===t.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=Kv(this.serializer),this.e_(t)}P_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Zv(this.serializer,i))};this.e_(e)}}class Tye extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new _e(J.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,e,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.wo(t,e,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new _e(J.UNKNOWN,r.toString())})}Co(t,e,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(t,e,i,o,s,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(J.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class Iye{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,"Online"===t&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Ui(e),this.f_=!1):we("OnlineStateTracker",e)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class xye{constructor(t,e,i,r,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{i.enqueueAndForget((0,le.Z)(function*(){var l;ou(s)&&(we("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,le.Z)(function*(u){const f=Re(u);f.C_.add(4),yield Fp(f),f.M_.set("Unknown"),f.C_.delete(4),yield ry(f)}),function c(u){return l.apply(this,arguments)})(s))}))}),this.M_=new Iye(i,r)}}function ry(n){return XN.apply(this,arguments)}function XN(){return XN=(0,le.Z)(function*(n){if(ou(n))for(const t of n.v_)yield t(!0)}),XN.apply(this,arguments)}function Fp(n){return eM.apply(this,arguments)}function eM(){return eM=(0,le.Z)(function*(n){for(const t of n.v_)yield t(!1)}),eM.apply(this,arguments)}function qT(n,t){const e=Re(n);e.D_.has(t.targetId)||(e.D_.set(t.targetId,t),iM(e)?nM(e):Vp(e).Ho()&&tM(e,t))}function oy(n,t){const e=Re(n),i=Vp(e);e.D_.delete(t),i.Ho()&&c8(e,t),0===e.D_.size&&(i.Ho()?i.Zo():ou(e)&&e.M_.set("Unknown"))}function tM(n,t){if(n.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Xe.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Vp(n).u_(t)}function c8(n,t){n.x_.Oe(t),Vp(n).c_(t)}function nM(n){n.x_=new xve({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>n.D_.get(t)||null,nt:()=>n.datastore.serializer.databaseId}),Vp(n).start(),n.M_.g_()}function iM(n){return ou(n)&&!Vp(n).jo()&&n.D_.size>0}function ou(n){return 0===Re(n).C_.size}function u8(n){n.x_=void 0}function Dye(n){return rM.apply(this,arguments)}function rM(){return rM=(0,le.Z)(function*(n){n.D_.forEach((t,e)=>{tM(n,t)})}),rM.apply(this,arguments)}function Sye(n,t){return oM.apply(this,arguments)}function oM(){return oM=(0,le.Z)(function*(n,t){u8(n),iM(n)?(n.M_.w_(t),nM(n)):n.M_.set("Unknown")}),oM.apply(this,arguments)}function Aye(n,t,e){return sM.apply(this,arguments)}function sM(){return sM=(0,le.Z)(function*(n,t,e){if(n.M_.set("Online"),t instanceof rW&&2===t.state&&t.cause)try{yield(i=(0,le.Z)(function*(o,s){const a=s.cause;for(const l of s.targetIds)o.D_.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.D_.delete(l),o.x_.removeTarget(l))}),function r(o,s){return i.apply(this,arguments)})(n,t)}catch(i){we("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield KT(n,i)}else if(t instanceof NT?n.x_.$e(t):t instanceof iW?n.x_.Je(t):n.x_.Ge(t),!e.isEqual(Xe.min()))try{const i=yield JW(n.localStore);e.compareTo(i)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.D_.get(c);u&&o.D_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.D_.get(l);if(!u)return;o.D_.set(l,u.withResumeToken(ar.EMPTY_BYTE_STRING,u.snapshotVersion)),c8(o,l);const f=new Bl(u.target,l,c,u.sequenceNumber);tM(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){we("RemoteStore","Failed to raise snapshot:",i),yield KT(n,i)}var i}),sM.apply(this,arguments)}function KT(n,t,e){return aM.apply(this,arguments)}function aM(){return aM=(0,le.Z)(function*(n,t,e){if(!qc(t))throw t;n.C_.add(1),yield Fp(n),n.M_.set("Offline"),e||(e=()=>JW(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){we("RemoteStore","Retrying IndexedDB access"),yield e(),n.C_.delete(1),yield ry(n)}))}),aM.apply(this,arguments)}function d8(n,t){return t().catch(e=>KT(n,e,t))}function Lp(n){return lM.apply(this,arguments)}function lM(){return lM=(0,le.Z)(function*(n){const t=Re(n),e=su(t);let i=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Rye(t);)try{const r=yield pye(t.localStore,i);if(null===r){0===t.b_.length&&e.Zo();break}i=r.batchId,Nye(t,r)}catch(r){yield KT(t,r)}h8(t)&&f8(t)}),lM.apply(this,arguments)}function Rye(n){return ou(n)&&n.b_.length<10}function Nye(n,t){n.b_.push(t);const e=su(n);e.Ho()&&e.h_&&e.P_(t.mutations)}function h8(n){return ou(n)&&!su(n).jo()&&n.b_.length>0}function f8(n){su(n).start()}function Mye(n){return cM.apply(this,arguments)}function cM(){return cM=(0,le.Z)(function*(n){su(n).E_()}),cM.apply(this,arguments)}function kye(n){return uM.apply(this,arguments)}function uM(){return uM=(0,le.Z)(function*(n){const t=su(n);for(const e of n.b_)t.P_(e.mutations)}),uM.apply(this,arguments)}function Oye(n,t,e){return dM.apply(this,arguments)}function dM(){return dM=(0,le.Z)(function*(n,t,e){const i=n.b_.shift(),r=EN.from(i,t,e);yield d8(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Lp(n)}),dM.apply(this,arguments)}function Pye(n,t){return hM.apply(this,arguments)}function hM(){return hM=(0,le.Z)(function*(n,t){var e;t&&su(n).h_&&(yield(e=(0,le.Z)(function*(r,o){if(J5(a=o.code)&&a!==J.ABORTED){const s=r.b_.shift();su(r).Yo(),yield d8(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Lp(r)}var a}),function i(r,o){return e.apply(this,arguments)})(n,t)),h8(n)&&f8(n)}),hM.apply(this,arguments)}function p8(n,t){return fM.apply(this,arguments)}function fM(){return fM=(0,le.Z)(function*(n,t){const e=Re(n);e.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const i=ou(e);e.C_.add(3),yield Fp(e),i&&e.M_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.C_.delete(3),yield ry(e)}),fM.apply(this,arguments)}function pM(n,t){return mM.apply(this,arguments)}function mM(){return mM=(0,le.Z)(function*(n,t){const e=Re(n);t?(e.C_.delete(2),yield ry(e)):t||(e.C_.add(2),yield Fp(e),e.M_.set("Unknown"))}),mM.apply(this,arguments)}function Vp(n){return n.O_||(n.O_=function(e,i,r){const o=Re(e);return o.A_(),new Eye(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{ho:Dye.bind(null,n),Io:Sye.bind(null,n),a_:Aye.bind(null,n)}),n.v_.push(function(){var t=(0,le.Z)(function*(e){e?(n.O_.Yo(),iM(n)?nM(n):n.M_.set("Unknown")):(yield n.O_.stop(),u8(n))});return function(e){return t.apply(this,arguments)}}())),n.O_}function su(n){return n.N_||(n.N_=function(e,i,r){const o=Re(e);return o.A_(),new wye(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{ho:Mye.bind(null,n),Io:Pye.bind(null,n),T_:kye.bind(null,n),I_:Oye.bind(null,n)}),n.v_.push(function(){var t=(0,le.Z)(function*(e){e?(n.N_.Yo(),yield Lp(n)):(yield n.N_.stop(),n.b_.length>0&&(we("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(e){return t.apply(this,arguments)}}())),n.N_}class gM{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const s=Date.now()+i,a=new gM(t,e,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(n,t){if(Ui("AsyncQueue",`${t}: ${n}`),qc(n))return new _e(J.UNAVAILABLE,`${t}: ${n}`);throw n}class Up{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ne.comparator(e.key,i.key):(e,i)=>Ne.comparator(e.key,i.key),this.keyedMap=Uv(),this.sortedSet=new ni(this.comparator)}static emptySet(t){return new Up(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Up)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Up;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class m8{constructor(){this.B_=new ni(Ne.comparator)}track(t){const e=t.doc.key,i=this.B_.get(e);i?0!==t.type&&3===i.type?this.B_=this.B_.insert(e,t):3===t.type&&1!==i.type?this.B_=this.B_.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.B_=this.B_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.B_=this.B_.remove(e):1===t.type&&2===i.type?this.B_=this.B_.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):Ue():this.B_=this.B_.insert(e,t)}L_(){const t=[];return this.B_.inorderTraversal((e,i)=>{t.push(i)}),t}}class jp{constructor(t,e,i,r,o,s,a,l,c){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,i,r,o){const s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new jp(t,e,Up.emptySet(e),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class Fye{constructor(){this.k_=void 0,this.listeners=[]}}class Lye{constructor(){this.queries=new Ll(t=>k5(t),Vv),this.onlineState="Unknown",this.q_=new Set}}function _M(n,t){return vM.apply(this,arguments)}function vM(){return vM=(0,le.Z)(function*(n,t){const e=Re(n),i=t.query;let r=!1,o=e.queries.get(i);if(o||(r=!0,o=new Fye),r)try{o.k_=yield e.onListen(i)}catch(s){const a=Bp(s,`Initialization of query '${Tp(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,o),o.listeners.push(t),t.Q_(e.onlineState),o.k_&&t.K_(o.k_)&&EM(e)}),vM.apply(this,arguments)}function yM(n,t){return bM.apply(this,arguments)}function bM(){return bM=(0,le.Z)(function*(n,t){const e=Re(n),i=t.query;let r=!1;const o=e.queries.get(i);if(o){const s=o.listeners.indexOf(t);s>=0&&(o.listeners.splice(s,1),r=0===o.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),bM.apply(this,arguments)}function Vye(n,t){const e=Re(n);let i=!1;for(const r of t){const s=e.queries.get(r.query);if(s){for(const a of s.listeners)a.K_(r)&&(i=!0);s.k_=r}}i&&EM(e)}function Bye(n,t,e){const i=Re(n),r=i.queries.get(t);if(r)for(const o of r.listeners)o.onError(e);i.queries.delete(t)}function EM(n){n.q_.forEach(t=>{t.next()})}class wM{constructor(t,e,i){this.query=t,this.U_=e,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new jp(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.W_?this.z_(t)&&(this.U_.next(t),e=!0):this.j_(t,this.onlineState)&&(this.H_(t),e=!0),this.G_=t,e}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let e=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),e=!0),e}j_(t,e){return!t.fromCache||(!this.options.J_||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}z_(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(t){t=jp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}class Uye{constructor(t,e){this.Y_=t,this.byteLength=e}Z_(){return"metadata"in this.Y_}}class g8{constructor(t){this.serializer=t}hs(t){return qa(this.serializer,t)}Ps(t){return t.metadata.exists?fW(this.serializer,t.document,!1):ui.newNoDocument(this.hs(t.metadata.name),this.Is(t.metadata.readTime))}Is(t){return ji(t)}}class jye{constructor(t,e,i){this.X_=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_8(t)}ea(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Y_.namedQuery)this.queries.push(t.Y_.namedQuery);else if(t.Y_.documentMetadata){this.documents.push({metadata:t.Y_.documentMetadata}),t.Y_.documentMetadata.exists||++e;const i=un.fromString(t.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Y_.document&&(this.documents[this.documents.length-1].document=t.Y_.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ta(t){const e=new Map,i=new g8(this.serializer);for(const r of t)if(r.metadata.queries){const o=i.hs(r.metadata.name);for(const s of r.metadata.queries){const a=(e.get(s)||Rt()).add(o);e.set(s,a)}}return e}complete(){var t=this;return(0,le.Z)(function*(){const e=yield function mye(n,t,e,i){return zN.apply(this,arguments)}(t.localStore,new g8(t.serializer),t.documents,t.X_.id),i=t.ta(t.documents);for(const r of t.queries)yield gye(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,na:t.collectionGroups,ra:e}})()}}function _8(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class v8{constructor(t){this.key=t}}class y8{constructor(t){this.key=t}}class b8{constructor(t,e){this.query=t,this.ia=e,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Rt(),this.mutatedKeys=Rt(),this._a=P5(t),this.aa=new Up(this._a)}get ua(){return this.ia}ca(t,e){const i=e?e.la:new m8,r=e?e.aa:this.aa;let o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,f)=>{const g=r.get(u),_=Bv(this.query,f)?f:null,y=!!g&&this.mutatedKeys.has(g.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;g&&_?g.data.isEqual(_.data)?y!==b&&(i.track({type:3,doc:_}),C=!0):this.ha(g,_)||(i.track({type:2,doc:_}),C=!0,(l&&this._a(_,l)>0||c&&this._a(_,c)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),C=!0):g&&!_&&(i.track({type:1,doc:g}),C=!0,(l||c)&&(a=!0)),C&&(_?(s=s.add(_),o=b?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const u="F"===this.query.limitType?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{aa:s,la:i,Zi:a,mutatedKeys:o}}ha(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((c,u)=>function(g,_){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return y(g)-y(_)}(c.type,u.type)||this._a(c.doc,u.doc)),this.Pa(i);const s=e?this.Ia():[],a=0===this.oa.size&&this.current?1:0,l=a!==this.sa;return this.sa=a,0!==o.length||l?{snapshot:new jp(this.query,t.aa,r,o,t.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({aa:this.aa,la:new m8,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(e=>this.ia=this.ia.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.ia=this.ia.delete(e)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=Rt(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const e=[];return t.forEach(i=>{this.oa.has(i)||e.push(new y8(i))}),this.oa.forEach(i=>{t.has(i)||e.push(new v8(i))}),e}da(t){this.ia=t.ls,this.oa=Rt();const e=this.ca(t.documents);return this.applyChanges(e,!0)}Aa(){return jp.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Hye{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class $ye{constructor(t){this.key=t,this.Ra=!1}}class zye{constructor(t,e,i,r,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Ll(a=>k5(a),Vv),this.fa=new Map,this.ga=new Set,this.pa=new ni(Ne.comparator),this.ya=new Map,this.wa=new FN,this.Sa={},this.ba=new Map,this.Da=Ad.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Gye(n,t){return TM.apply(this,arguments)}function TM(){return TM=(0,le.Z)(function*(n,t){const e=WM(n);let i,r;const o=e.ma.get(t);if(o)i=o.targetId,e.sharedClientState.addLocalQueryTarget(i),r=o.view.Aa();else{const s=yield Op(e.localStore,Co(t)),a=e.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield CM(e,t,i,"current"===a,s.resumeToken),e.isPrimaryClient&&qT(e.remoteStore,s)}return r}),TM.apply(this,arguments)}function CM(n,t,e,i,r){return IM.apply(this,arguments)}function IM(){return IM=(0,le.Z)(function*(n,t,e,i,r){n.va=(f,g,_)=>{return(y=(0,le.Z)(function*(C,O,S,V){let W=O.view.ca(S);W.Zi&&(W=yield HT(C.localStore,O.query,!1).then(({documents:Ve})=>O.view.ca(Ve,W)));const ae=V&&V.targetChanges.get(O.targetId),Ie=O.view.applyChanges(W,C.isPrimaryClient,ae);return PM(C,O.targetId,Ie.Ta),Ie.snapshot}),function b(C,O,S,V){return y.apply(this,arguments)})(n,f,g,_);var y};const o=yield HT(n.localStore,t,!0),s=new b8(t,o.ls),a=s.ca(o.documents),l=Wv.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),c=s.applyChanges(a,n.isPrimaryClient,l);PM(n,e,c.Ta);const u=new Hye(t,e,s);return n.ma.set(t,u),n.fa.has(e)?n.fa.get(e).push(t):n.fa.set(e,[t]),c.snapshot}),IM.apply(this,arguments)}function Wye(n,t){return xM.apply(this,arguments)}function xM(){return xM=(0,le.Z)(function*(n,t){const e=Re(n),i=e.ma.get(t),r=e.fa.get(i.targetId);if(r.length>1)return e.fa.set(i.targetId,r.filter(o=>!Vv(o,t))),void e.ma.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Pp(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),oy(e.remoteStore,i.targetId),Hp(e,i.targetId)}).catch(Wc))):(Hp(e,i.targetId),yield Pp(e.localStore,i.targetId,!0))}),xM.apply(this,arguments)}function DM(){return DM=(0,le.Z)(function*(n,t,e){const i=qM(n);try{const r=yield function(s,a){const l=Re(s),c=_i.now(),u=a.reduce((_,y)=>_.add(y.key),Rt());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=Ho(),b=Rt();return l.ss.getEntries(_,u).next(C=>{y=C,y.forEach((O,S)=>{S.isValidDocument()||(b=b.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,y)).next(C=>{f=C;const O=[];for(const S of a){const V=wve(S,f.get(S.key).overlayedDocument);null!=V&&O.push(new Vl(S.key,V,v5(V.value.mapValue),vi.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,O,a)}).next(C=>{g=C;const O=C.applyToLocalDocumentSet(f,b);return l.documentOverlayCache.saveOverlays(_,C.batchId,O)})}).then(()=>({batchId:g.batchId,changes:L5(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let c=s.Sa[s.currentUser.toKey()];c||(c=new ni(vt)),c=c.insert(a,l),s.Sa[s.currentUser.toKey()]=c}(i,r.batchId,e),yield Ul(i,r.changes),yield Lp(i.remoteStore)}catch(r){const o=Bp(r,"Failed to persist write");e.reject(o)}}),DM.apply(this,arguments)}function E8(n,t){return SM.apply(this,arguments)}function SM(){return SM=(0,le.Z)(function*(n,t){const e=Re(n);try{const i=yield function fye(n,t){const e=Re(n),i=t.snapshotVersion;let r=e.ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=e.ss.newChangeBuffer({trackRemovals:!0});r=e.ts;const a=[];t.targetChanges.forEach((u,f)=>{const g=r.get(f);if(!g)return;a.push(e.qr.removeMatchingKeys(o,u.removedDocuments,f).next(()=>e.qr.addMatchingKeys(o,u.addedDocuments,f)));let _=g.withSequenceNumber(o.currentSequenceNumber);var b,C,O;null!==t.targetMismatches.get(f)?_=_.withResumeToken(ar.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):u.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(u.resumeToken,i)),r=r.insert(f,_),C=_,O=u,(0===(b=g).resumeToken.approximateByteSize()||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(e.qr.updateTargetData(o,_))});let l=Ho(),c=Rt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(XW(o,s,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!i.isEqual(Xe.min())){const u=e.qr.getLastRemoteSnapshotVersion(o).next(f=>e.qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(e.ts=r,o))}(e.localStore,t);t.targetChanges.forEach((r,o)=>{const s=e.ya.get(o);s&&(Je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.Ra=!0:r.modifiedDocuments.size>0?Je(s.Ra):r.removedDocuments.size>0&&(Je(s.Ra),s.Ra=!1))}),yield Ul(e,i,t)}catch(i){yield Wc(i)}}),SM.apply(this,arguments)}function w8(n,t,e){const i=Re(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ma.forEach((o,s)=>{const a=s.view.Q_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){const l=Re(s);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const g of f.listeners)g.Q_(a)&&(c=!0)}),c&&EM(l)}(i.eventManager,t),r.length&&i.Va.a_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Kye(n,t,e){return AM.apply(this,arguments)}function AM(){return AM=(0,le.Z)(function*(n,t,e){const i=Re(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ya.get(t),o=r&&r.key;if(o){let s=new ni(Ne.comparator);s=s.insert(o,ui.newNoDocument(o,Xe.min()));const a=Rt().add(o),l=new Gv(Xe.min(),new Map,new ni(vt),s,a);yield E8(i,l),i.pa=i.pa.remove(o),i.ya.delete(t),FM(i)}else yield Pp(i.localStore,t,!1).then(()=>Hp(i,t,e)).catch(Wc)}),AM.apply(this,arguments)}function Zye(n,t){return RM.apply(this,arguments)}function RM(){return RM=(0,le.Z)(function*(n,t){const e=Re(n),i=t.batch.batchId;try{const r=yield function hye(n,t){const e=Re(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,g=f.keys();let _=G.resolve();return g.forEach(y=>{_=_.next(()=>u.getEntry(l,y)).next(b=>{const C=c.docVersions.get(y);Je(null!==C),b.version.compareTo(C)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),u.addEntry(b)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);OM(e,i,null),kM(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ul(e,r)}catch(r){yield Wc(r)}}),RM.apply(this,arguments)}function Yye(n,t,e){return NM.apply(this,arguments)}function NM(){return NM=(0,le.Z)(function*(n,t,e){const i=Re(n);try{const r=yield function(s,a){const l=Re(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Je(null!==f),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);OM(i,t,e),kM(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ul(i,r)}catch(r){yield Wc(r)}}),NM.apply(this,arguments)}function MM(){return MM=(0,le.Z)(function*(n,t){const e=Re(n);ou(e.remoteStore)||we("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const a=Re(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(-1===i)return void t.resolve();const r=e.ba.get(i)||[];r.push(t),e.ba.set(i,r)}catch(i){const r=Bp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),MM.apply(this,arguments)}function kM(n,t){(n.ba.get(t)||[]).forEach(e=>{e.resolve()}),n.ba.delete(t)}function OM(n,t,e){const i=Re(n);let r=i.Sa[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Sa[i.currentUser.toKey()]=r}}function Hp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.fa.get(t))n.ma.delete(i),e&&n.Va.Fa(i,e);n.fa.delete(t),n.isPrimaryClient&&n.wa.Rr(t).forEach(i=>{n.wa.containsKey(i)||T8(n,i)})}function T8(n,t){n.ga.delete(t.path.canonicalString());const e=n.pa.get(t);null!==e&&(oy(n.remoteStore,e),n.pa=n.pa.remove(t),n.ya.delete(e),FM(n))}function PM(n,t,e){for(const i of e)i instanceof v8?(n.wa.addReference(i.key,t),Jye(n,i)):i instanceof y8?(we("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,t),n.wa.containsKey(i.key)||T8(n,i.key)):Ue()}function Jye(n,t){const e=t.key,i=e.path.canonicalString();n.pa.get(e)||n.ga.has(i)||(we("SyncEngine","New document in limbo: "+e),n.ga.add(i),FM(n))}function FM(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const t=n.ga.values().next().value;n.ga.delete(t);const e=new Ne(un.fromString(t)),i=n.Da.next();n.ya.set(i,new $ye(e)),n.pa=n.pa.insert(e,i),qT(n.remoteStore,new Bl(Co(Ep(e.path)),i,"TargetPurposeLimboResolution",ds._e))}}function Ul(n,t,e){return LM.apply(this,arguments)}function LM(){return LM=(0,le.Z)(function*(n,t,e){const i=Re(n),r=[],o=[],s=[];var a;i.ma.isEmpty()||(i.ma.forEach((a,l)=>{s.push(i.va(l,t,e).then(c=>{if((c||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);const u=jN.Qi(l.targetId,c);o.push(u)}}))}),yield Promise.all(s),i.Va.a_(r),yield(a=(0,le.Z)(function*(c,u){const f=Re(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>G.forEach(u,_=>G.forEach(_.ki,y=>f.persistence.referenceDelegate.addReference(g,_.targetId,y)).next(()=>G.forEach(_.qi,y=>f.persistence.referenceDelegate.removeReference(g,_.targetId,y)))))}catch(g){if(!qc(g))throw g;we("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const _=g.targetId;if(!g.fromCache){const y=f.ts.get(_),C=y.withLastLimboFreeSnapshotVersion(y.snapshotVersion);f.ts=f.ts.insert(_,C)}}}),function l(c,u){return a.apply(this,arguments)})(i.localStore,o))}),LM.apply(this,arguments)}function Xye(n,t){return VM.apply(this,arguments)}function VM(){return VM=(0,le.Z)(function*(n,t){const e=Re(n);if(!e.currentUser.isEqual(t)){we("SyncEngine","User change. New user:",t.toKey());const i=yield QW(e.localStore,t);e.currentUser=t,(o=e).ba.forEach(a=>{a.forEach(l=>{l.reject(new _e(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ul(e,i._s)}var o}),VM.apply(this,arguments)}function ebe(n,t){const e=Re(n),i=e.ya.get(t);if(i&&i.Ra)return Rt().add(i.key);{let r=Rt();const o=e.fa.get(t);if(!o)return r;for(const s of o){const a=e.ma.get(s);r=r.unionWith(a.view.ua)}return r}}function tbe(n,t){return BM.apply(this,arguments)}function BM(){return BM=(0,le.Z)(function*(n,t){const e=Re(n),i=yield HT(e.localStore,t.query,!0),r=t.view.da(i);return e.isPrimaryClient&&PM(e,t.targetId,r.Ta),r}),BM.apply(this,arguments)}function nbe(n,t){return UM.apply(this,arguments)}function UM(){return UM=(0,le.Z)(function*(n,t){const e=Re(n);return t8(e.localStore,t).then(i=>Ul(e,i))}),UM.apply(this,arguments)}function ibe(n,t,e,i){return jM.apply(this,arguments)}function jM(){return jM=(0,le.Z)(function*(n,t,e,i){const r=Re(n),o=yield function(a,l){const c=Re(a),u=Re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>u.Cn(f,l).next(g=>g?c.localDocuments.getDocuments(f,g):G.resolve(null)))}(r.localStore,t);var l;null!==o?("pending"===e?yield Lp(r.remoteStore):"acknowledged"===e||"rejected"===e?(OM(r,t,i||null),kM(r,t),l=t,Re(Re(r.localStore).mutationQueue).Fn(l)):Ue(),yield Ul(r,o)):we("SyncEngine","Cannot apply mutation batch with id: "+t)}),jM.apply(this,arguments)}function HM(){return HM=(0,le.Z)(function*(n,t){const e=Re(n);if(WM(e),qM(e),!0===t&&!0!==e.Ca){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield C8(e,i.toArray());e.Ca=!0,yield pM(e.remoteStore,!0);for(const o of r)qT(e.remoteStore,o)}else if(!1===t&&!1!==e.Ca){const i=[];let r=Promise.resolve();e.fa.forEach((o,s)=>{e.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Hp(e,s),Pp(e.localStore,s,!0))),oy(e.remoteStore,s)}),yield r,yield C8(e,i),function(s){const a=Re(s);a.ya.forEach((l,c)=>{oy(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new ni(Ne.comparator)}(e),e.Ca=!1,yield pM(e.remoteStore,!1)}}),HM.apply(this,arguments)}function C8(n,t,e){return $M.apply(this,arguments)}function $M(){return $M=(0,le.Z)(function*(n,t,e){const i=Re(n),r=[],o=[];for(const s of t){let a;const l=i.fa.get(s);if(l&&0!==l.length){a=yield Op(i.localStore,Co(l[0]));for(const c of l){const u=i.ma.get(c),f=yield tbe(i,u);f.snapshot&&o.push(f.snapshot)}}else{const c=yield e8(i.localStore,s);a=yield Op(i.localStore,c),yield CM(i,I8(c),s,!1,a.resumeToken)}r.push(a)}return i.Va.a_(o),r}),$M.apply(this,arguments)}function I8(n){return R5(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function obe(n){return e=Re(n).localStore,Re(Re(e).persistence).Bi();var e}function sbe(n,t,e,i){return zM.apply(this,arguments)}function zM(){return zM=(0,le.Z)(function*(n,t,e,i){const r=Re(n);if(r.Ca)return void we("SyncEngine","Ignoring unexpected query state notification.");const o=r.fa.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const s=yield t8(r.localStore,O5(o[0])),a=Gv.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,ar.EMPTY_BYTE_STRING);yield Ul(r,s,a);break}case"rejected":yield Pp(r.localStore,t,!0),Hp(r,t,i);break;default:Ue()}}),zM.apply(this,arguments)}function abe(n,t,e){return GM.apply(this,arguments)}function GM(){return GM=(0,le.Z)(function*(n,t,e){const i=WM(n);if(i.Ca){for(const r of t){if(i.fa.has(r)){we("SyncEngine","Adding an already active target "+r);continue}const o=yield e8(i.localStore,r),s=yield Op(i.localStore,o);yield CM(i,I8(o),s.targetId,!1,s.resumeToken),qT(i.remoteStore,s)}for(const r of e)i.fa.has(r)&&(yield Pp(i.localStore,r,!1).then(()=>{oy(i.remoteStore,r),Hp(i,r)}).catch(Wc))}}),GM.apply(this,arguments)}function WM(n){const t=Re(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=E8.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ebe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kye.bind(null,t),t.Va.a_=Vye.bind(null,t.eventManager),t.Va.Fa=Bye.bind(null,t.eventManager),t}function qM(n){const t=Re(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zye.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yye.bind(null,t),t}class sy{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,le.Z)(function*(){e.serializer=iy(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return YW(this.persistence,new ZW,t.initialUser,this.serializer)}createPersistence(t){return new LN(BT.jr,this.serializer)}createSharedClientState(t){return new o8}terminate(){var t=this;return(0,le.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class KM extends sy{constructor(t,e,i){super(),this.xa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,le.Z)(function*(){yield e().call(i,t),yield i.xa.initialize(i,t),yield qM(i.xa.syncEngine),yield Lp(i.xa.remoteStore),yield i.persistence.mi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return YW(this.persistence,new ZW,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new UW(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new O_e(e,this.persistence);return new k_e(t.asyncQueue,i)}createPersistence(t){const e=UN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new BN(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,a8(),WT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new o8}}class x8 extends KM{constructor(t,e){super(t,e,!1),this.xa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,le.Z)(function*(){yield e().call(i,t);const r=i.xa.syncEngine;i.sharedClientState instanceof ZN&&(i.sharedClientState.syncEngine={Ys:ibe.bind(null,r),Zs:sbe.bind(null,r),Xs:abe.bind(null,r),Bi:obe.bind(null,r),Js:nbe.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.mi(function(){var o=(0,le.Z)(function*(s){yield function rbe(n,t){return HM.apply(this,arguments)}(i.xa.syncEngine,s),i.gcScheduler&&(s&&!i.gcScheduler.started?i.gcScheduler.start():s||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(s&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():s||i.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(t){const e=a8();if(!ZN.D(e))throw new _e(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=UN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ZN(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class $p{initialize(t,e){var i=this;return(0,le.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>w8(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=Xye.bind(null,i.syncEngine),yield pM(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Lye}createDatastore(t){const e=iy(t.databaseInfo.databaseId),i=new bye(t.databaseInfo);return new Tye(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return i=this.localStore,r=this.datastore,o=t.asyncQueue,s=e=>w8(this.syncEngine,e,0),a=s8.D()?new s8:new _ye,new xye(i,r,o,s,a);var i,r,o,s,a}createSyncEngine(t,e){return function(r,o,s,a,l,c,u){const f=new zye(r,o,s,a,l,c);return u&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,le.Z)(function*(i){const r=Re(i);we("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Fp(r),r.F_.shutdown(),r.M_.set("Unknown")}),function e(i){return t.apply(this,arguments)})(this.remoteStore);var t}}function D8(n,t=10240){let e=0;return{read:()=>(0,le.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Ui("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class ube{constructor(t,e){this.Ba=t,this.serializer=e,this.metadata=new sr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){var t=this;return(0,le.Z)(function*(){return t.metadata.promise})()}Ma(){var t=this;return(0,le.Z)(function*(){return yield t.getMetadata(),t.ka()})()}ka(){var t=this;return(0,le.Z)(function*(){const e=yield t.qa();if(null===e)return null;const i=t.La.decode(e),r=Number(i);isNaN(r)&&t.Qa(`length string (${i}) is not valid number`);const o=yield t.Ka(r);return new Uye(JSON.parse(o),e.length+r)})()}$a(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}qa(){var t=this;return(0,le.Z)(function*(){for(;t.$a()<0&&!(yield t.Ua()););if(0===t.buffer.length)return null;const e=t.$a();e<0&&t.Qa("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Ka(t){var e=this;return(0,le.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ua())&&e.Qa("Reached the end of bundle when more is expected.");const i=e.La.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Qa(t){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${t}`)}Ua(){var t=this;return(0,le.Z)(function*(){const e=yield t.Ba.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class dbe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new _e(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,le.Z)(function*(s,a){const l=Re(s),c=Kv(l.serializer)+"/documents",u={documents:a.map(y=>qv(l.serializer,y))},f=yield l.Co("BatchGetDocuments",c,u,a.length),g=new Map;f.forEach(y=>{const b=function Mve(n,t){return"found"in t?function(i,r){Je(!!r.found);const o=qa(i,r.found.name),s=ji(r.found.updateTime),a=r.found.createTime?ji(r.found.createTime):Xe.min(),l=new Vr({mapValue:{fields:r.found.fields}});return ui.newFoundDocument(o,s,a,l)}(n,t):"missing"in t?function(i,r){Je(!!r.missing),Je(!!r.readTime);const o=qa(i,r.missing),s=ji(r.readTime);return ui.newNoDocument(o,s)}(n,t):Ue()}(l.serializer,y);g.set(b.key.toString(),b)});const _=[];return a.forEach(y=>{const b=g.get(y.toString());Je(!!b),_.push(b)}),_}),function o(s,a){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Dp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const o=Ne.fromPath(r);t.mutations.push(new yN(o,t.precondition(o)))}),yield(i=(0,le.Z)(function*(o,s){const a=Re(o),l=Kv(a.serializer)+"/documents",c={writes:s.map(u=>Zv(a.serializer,u))};yield a.wo("Commit",l,c)}),function r(o,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ue();e=Xe.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new _e(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Xe.min())?vi.exists(!1):vi.updateTime(e):vi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Xe.min()))throw new _e(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vi.updateTime(e)}return vi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class hbe{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.Wa=i.maxAttempts,this.zo=new QN(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var t=this;this.zo.ko((0,le.Z)(function*(){const e=new dbe(t.datastore),i=t.za(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(o=>{t.ja(o)}))}).catch(r=>{t.ja(r)})}))}za(t){try{const e=this.updateFunction(t);return!Rv(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(t){this.Wa>0&&this.Ha(t)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(t)}Ha(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!J5(e)}return!1}}class fbe{constructor(t,e,i,r){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Cr.UNAUTHENTICATED,this.clientId=qG.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var s=(0,le.Z)(function*(a){we("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(i,s=>(we("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var t=this;return(0,le.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _e(J.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Bp(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function YT(n,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,le.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,le.Z)(function*(o){i.isEqual(o)||(yield QW(t.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),ZM.apply(this,arguments)}function YM(n,t){return QM.apply(this,arguments)}function QM(){return QM=(0,le.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield JM(n);we("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>p8(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>p8(t.remoteStore,o)),n._onlineComponents=t}),QM.apply(this,arguments)}function S8(n){return"FirebaseError"===n.name?n.code===J.FAILED_PRECONDITION||n.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function JM(n){return XM.apply(this,arguments)}function XM(){return XM=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{yield YT(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!S8(e))throw e;Uo("Error using user provided cache. Falling back to memory cache: "+e),yield YT(n,new sy)}}else we("FirestoreClient","Using default OfflineComponentProvider"),yield YT(n,new sy);return n._offlineComponents}),XM.apply(this,arguments)}function QT(n){return ek.apply(this,arguments)}function ek(){return ek=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),yield YM(n,n._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),yield YM(n,new $p))),n._onlineComponents}),ek.apply(this,arguments)}function A8(n){return JM(n).then(t=>t.persistence)}function zp(n){return JM(n).then(t=>t.localStore)}function R8(n){return QT(n).then(t=>t.remoteStore)}function tk(n){return QT(n).then(t=>t.syncEngine)}function Gp(n){return nk.apply(this,arguments)}function nk(){return nk=(0,le.Z)(function*(n){const t=yield QT(n),e=t.eventManager;return e.onListen=Gye.bind(null,t.syncEngine),e.onUnlisten=Wye.bind(null,t.syncEngine),e}),nk.apply(this,arguments)}function M8(n,t,e={}){const i=new sr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(o,s,a,l,c){const u=new ZT({next:g=>{s.enqueueAndForget(()=>yM(o,f));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new _e(J.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&"server"===l.source?c.reject(new _e(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new wM(Ep(a.path),u,{includeMetadataChanges:!0,J_:!0});return _M(o,f)}(yield Gp(n),n.asyncQueue,t,e,i)})),i.promise}function k8(n,t,e={}){const i=new sr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(o,s,a,l,c){const u=new ZT({next:g=>{s.enqueueAndForget(()=>yM(o,f)),g.fromCache&&"server"===l.source?c.reject(new _e(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new wM(a,u,{includeMetadataChanges:!0,J_:!0});return _M(o,f)}(yield Gp(n),n.asyncQueue,t,e,i)})),i.promise}function O8(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const P8=new Map;function ik(n,t,e){if(!e)throw new _e(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function F8(n,t,e,i){if(!0===t&&!0===i)throw new _e(J.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function L8(n){if(!Ne.isDocumentKey(n))throw new _e(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V8(n){if(Ne.isDocumentKey(n))throw new _e(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(i=n).constructor?i.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var i;return"function"==typeof n?"a function":Ue()}function nn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new _e(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=JT(n);throw new _e(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function B8(n,t){if(t<=0)throw new _e(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class U8{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new _e(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _e(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}F8("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=O8(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new _e(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ay{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U8({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _e(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new _e(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U8(t),void 0!==t.credentials&&(this._authCredentials=function(i){if(!i)return new E_e;switch(i.type){case"firstParty":return new I_e(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=P8.get(e);i&&(we("ComponentProvider","Removing Datastore"),P8.delete(e),i.terminate())}(this),Promise.resolve()}}class Br{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Br(this.firestore,t,this._query)}}class di{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new di(this.firestore,t,this._key)}}class Ka extends Br{constructor(t,e,i){super(t,e,Ep(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new di(this.firestore,null,new Ne(t))}withConverter(t){return new Ka(this.firestore,t,this._path)}}function H8(n,t,...e){if(n=(0,x.m9)(n),ik("collection","path",t),n instanceof ay){const i=un.fromString(t,...e);return V8(i),new Ka(n,null,i)}{if(!(n instanceof di||n instanceof Ka))throw new _e(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(un.fromString(t,...e));return V8(i),new Ka(n.firestore,null,i)}}function XT(n,t,...e){if(n=(0,x.m9)(n),1===arguments.length&&(t=qG.newId()),ik("doc","path",t),n instanceof ay){const i=un.fromString(t,...e);return L8(i),new di(n,null,new Ne(i))}{if(!(n instanceof di||n instanceof Ka))throw new _e(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(un.fromString(t,...e));return L8(i),new di(n.firestore,n instanceof Ka?n.converter:null,new Ne(i))}}function $8(n,t){return n=(0,x.m9)(n),t=(0,x.m9)(t),(n instanceof di||n instanceof Ka)&&(t instanceof di||t instanceof Ka)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function rk(n,t){return n=(0,x.m9)(n),t=(0,x.m9)(t),n instanceof Br&&t instanceof Br&&n.firestore===t.firestore&&Vv(n._query,t._query)&&n.converter===t.converter}class Ibe{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new QN(this,"async_queue_retry"),this.iu=()=>{const e=WT();e&&we("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const t=WT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const e=WT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const e=new sr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}_u(){var t=this;return(0,le.Z)(function*(){if(0!==t.Ya.length){try{yield t.Ya[0](),t.Ya.shift(),t.zo.reset()}catch(e){if(!qc(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}t.Ya.length>0&&t.zo.ko(()=>t._u())}})()}ou(t){const e=this.Ja.then(()=>(this.tu=!0,t().catch(i=>{throw this.eu=i,this.tu=!1,Ui("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(i)),i}).then(i=>(this.tu=!1,i))));return this.Ja=e,e}enqueueAfterDelay(t,e,i){this.su(),this.ru.indexOf(t)>-1&&(e=0);const r=gM.createAndSchedule(this,t,e,i,o=>this.au(o));return this.Xa.push(r),r}su(){this.eu&&Ue()}verifyOperationInProgress(){}uu(){var t=this;return(0,le.Z)(function*(){let e;do{e=t.Ja,yield e}while(e!==t.Ja)})()}cu(t){for(const e of this.Xa)if(e.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Xa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const e=this.Xa.indexOf(t);this.Xa.splice(e,1)}}function ok(n){return function(e,i){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class xbe{constructor(){this._progressObserver={},this._taskCompletionResolver=new sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ii extends ay{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Ibe,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||z8(this),this._firestoreClient.terminate()}}function Oi(n){return n._firestoreClient||z8(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function z8(n){var t,e,i;const r=n._freezeSettings(),o=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new tve(n._databaseId,l,n._persistenceKey,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,O8(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._firestoreClient=new fbe(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(e=r.localCache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function G8(n,t,e){const i=new sr;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield YT(n,e),yield YM(n,t),i.resolve()}catch(r){const o=r;if(!S8(o))throw o;Uo("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function W8(n){if(n._initialized||n._terminated)throw new _e(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Za{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Za(ar.fromBase64String(t))}catch(e){throw new _e(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Za(ar.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class jl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new _e(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Nd{constructor(t){this._methodName=t}}class eC{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new _e(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _e(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vt(this._lat,t._lat)||vt(this._long,t._long)}}const Lbe=/^__.*__$/;class Vbe{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Vl(t,this.data,this.fieldMask,e,this.fieldTransforms):new xp(t,this.data,e,this.fieldTransforms)}}class q8{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Vl(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function K8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class tC{constructor(t,e,i,r,o,s){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new tC(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Tu({path:i,du:!1});return r.Au(t),r}Ru(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return rC(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(0===t.length)throw this.mu("Document fields must not be empty");if(K8(this.Iu)&&Lbe.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class Bbe{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||iy(t)}pu(t,e,i,r=!1){return new tC({Iu:t,methodName:e,gu:i,path:ci.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Md(n){const t=n._freezeSettings(),e=iy(n._databaseId);return new Bbe(n._databaseId,!!t.ignoreUndefinedProperties,e)}function nC(n,t,e,i,r,o={}){const s=n.pu(o.merge||o.mergeFields?2:0,t,e,r);ck("Data must be an object, but it was:",s,i);const a=Q8(i,s);let l,c;if(o.merge)l=new jo(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const f of o.mergeFields){const g=uy(t,f,e);if(!s.contains(g))throw new _e(J.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);X8(u,g)||u.push(g)}l=new jo(u),c=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=s.fieldTransforms;return new Vbe(new Vr(a),l,c)}class cy extends Nd{_toFieldTransform(t){if(2!==t.Iu)throw t.mu(1===t.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof cy}}function Z8(n,t,e){return new tC({Iu:3,gu:t.settings.gu,methodName:n._methodName,du:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class sk extends Nd{_toFieldTransform(t){return new Hv(t.path,new Cp)}isEqual(t){return t instanceof sk}}class Ube extends Nd{constructor(t,e){super(t),this.yu=e}_toFieldTransform(t){const e=Z8(this,t,!0),i=this.yu.map(o=>kd(o,e)),r=new wd(i);return new Hv(t.path,r)}isEqual(t){return this===t}}class jbe extends Nd{constructor(t,e){super(t),this.yu=e}_toFieldTransform(t){const e=Z8(this,t,!0),i=this.yu.map(o=>kd(o,e)),r=new Td(i);return new Hv(t.path,r)}isEqual(t){return this===t}}class Hbe extends Nd{constructor(t,e){super(t),this.wu=e}_toFieldTransform(t){const e=new Ip(t.serializer,j5(t.serializer,this.wu));return new Hv(t.path,e)}isEqual(t){return this===t}}function ak(n,t,e,i){const r=n.pu(1,t,e);ck("Data must be an object, but it was:",r,i);const o=[],s=Vr.empty();Kc(i,(l,c)=>{const u=iC(t,l,e);c=(0,x.m9)(c);const f=r.Ru(u);if(c instanceof cy)o.push(u);else{const g=kd(c,f);null!=g&&(o.push(u),s.set(u,g))}});const a=new jo(o);return new q8(s,a,r.fieldTransforms)}function lk(n,t,e,i,r,o){const s=n.pu(1,t,e),a=[uy(t,i,e)],l=[r];if(o.length%2!=0)throw new _e(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(uy(t,o[g])),l.push(o[g+1]);const c=[],u=Vr.empty();for(let g=a.length-1;g>=0;--g)if(!X8(c,a[g])){const _=a[g];let y=l[g];y=(0,x.m9)(y);const b=s.Ru(_);if(y instanceof cy)c.push(_);else{const C=kd(y,b);null!=C&&(c.push(_),u.set(_,C))}}const f=new jo(c);return new q8(u,f,s.fieldTransforms)}function Y8(n,t,e,i=!1){return kd(e,n.pu(i?4:3,t))}function kd(n,t){if(J8(n=(0,x.m9)(n)))return ck("Unsupported field value:",t,n),Q8(n,t);if(n instanceof Nd)return function(i,r){if(!K8(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(i,r){const o=[];let s=0;for(const a of i){let l=kd(a,r.Vu(s));null==l&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if(null===(i=(0,x.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return j5(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const o=_i.fromDate(i);return{timestampValue:Sp(r.serializer,o)}}if(i instanceof _i){const o=new _i(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sp(r.serializer,o)}}if(i instanceof eC)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Za)return{bytesValue:lW(r.serializer,i._byteString)};if(i instanceof di){const o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:IN(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${JT(i)}`)}(n,t)}function Q8(n,t){const e={};return c5(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kc(n,(i,r)=>{const o=kd(r,t.Eu(i));null!=o&&(e[i]=o)}),{mapValue:{fields:e}}}function J8(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _i||n instanceof eC||n instanceof Za||n instanceof di||n instanceof Nd)}function ck(n,t,e){if(!J8(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=JT(e);throw t.mu("an object"===i?n+" a custom object":n+" "+i)}var r}function uy(n,t,e){if((t=(0,x.m9)(t))instanceof jl)return t._internalPath;if("string"==typeof t)return iC(n,t);throw rC("Field path arguments must be of type string or ",n,!1,void 0,e)}const $be=new RegExp("[~\\*/\\[\\]]");function iC(n,t,e){if(t.search($be)>=0)throw rC(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new jl(...t.split("."))._internalPath}catch{throw rC(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function rC(n,t,e,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new _e(J.INVALID_ARGUMENT,a+n+l)}function X8(n,t){return n.some(e=>e.isEqual(t))}class dy{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new di(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new zbe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(oC("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class zbe extends dy{data(){return super.data()}}function oC(n,t){return"string"==typeof t?iC(n,t):t instanceof jl?t._internalPath:t._delegate._internalPath}function e6(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new _e(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uk{}class hy extends uk{}function au(n,t,...e){let i=[];t instanceof uk&&i.push(t),i=i.concat(e),function(o){const s=o.filter(l=>l instanceof Wp).length,a=o.filter(l=>l instanceof fy).length;if(s>1||s>0&&a>0)throw new _e(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class fy extends hy{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new fy(t,e,i)}_apply(t){const e=this._parse(t);return r6(t._query,e),new Br(t.firestore,t.converter,_N(t._query,e))}_parse(t){const e=Md(t.firestore);return function(o,s,a,l,c,u,f){let g;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new _e(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){i6(f,u);const _=[];for(const y of f)_.push(n6(l,o,y));g={arrayValue:{values:_}}}else g=n6(l,o,f)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||i6(f,u),g=Y8(a,"where",f,"in"===u||"not-in"===u);return sn.create(c,u,g)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Wp extends uk{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Wp(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Pn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(r,o){let s=r;const a=o.getFlattenedFilters();for(const l of a)r6(s,l),s=_N(s,l)}(t._query,e),new Br(t.firestore,t.converter,_N(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dk extends hy{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new dk(t,e)}_apply(t){const e=function(r,o,s){if(null!==r.startAt)throw new _e(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new _e(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fv(o,s)}(t._query,this._field,this._direction);return new Br(t.firestore,t.converter,function(r,o){const s=r.explicitOrderBy.concat([o]);return new Fl(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class sC extends hy{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new sC(t,e,i)}_apply(t){return new Br(t.firestore,t.converter,xT(t._query,this._limit,this._limitType))}}class aC extends hy{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new aC(t,e,i)}_apply(t){const e=t6(t,this.type,this._docOrFields,this._inclusive);return new Br(t.firestore,t.converter,(o=e,new Fl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class lC extends hy{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new lC(t,e,i)}_apply(t){const e=t6(t,this.type,this._docOrFields,this._inclusive);return new Br(t.firestore,t.converter,(o=e,new Fl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function t6(n,t,e,i){if(e[0]=(0,x.m9)(e[0]),e[0]instanceof dy)return function(o,s,a,l,c){if(!l)throw new _e(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const f of wp(o))if(f.field.isKeyField())u.push(bd(s,l.key));else{const g=l.data.field(f.field);if(yT(g))throw new _e(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=f.field.canonicalString();throw new _e(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}u.push(g)}return new eu(u,c)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Md(n.firestore);return function(s,a,l,c,u,f){const g=s.explicitOrderBy;if(u.length>g.length)throw new _e(J.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let y=0;y<u.length;y++){const b=u[y];if(g[y].field.isKeyField()){if("string"!=typeof b)throw new _e(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof b}`);if(!gN(s)&&-1!==b.indexOf("/"))throw new _e(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${b}' contains a slash.`);const C=s.path.child(un.fromString(b));if(!Ne.isDocumentKey(C))throw new _e(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const O=new Ne(C);_.push(bd(a,O))}else{const C=Y8(l,c,b);_.push(C)}}return new eu(_,f)}(n._query,n.firestore._databaseId,r,t,e,i)}}function n6(n,t,e){if("string"==typeof(e=(0,x.m9)(e))){if(""===e)throw new _e(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gN(t)&&-1!==e.indexOf("/"))throw new _e(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(un.fromString(e));if(!Ne.isDocumentKey(i))throw new _e(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bd(n,new Ne(i))}if(e instanceof di)return bd(n,e._key);throw new _e(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JT(e)}.`)}function i6(n,t){if(!Array.isArray(n)||0===n.length)throw new _e(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function r6(n,t){const e=function(r,o){for(const s of r)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new _e(J.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class hk{convertValue(t,e="none"){switch(Jc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ki(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Pl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ue()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Kc(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertGeoPoint(t){return new eC(ki(t.latitude),ki(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=bT(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Mv(t));default:return null}}convertTimestamp(t){const e=Zc(t);return new _i(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=un.fromString(t);Je(vW(i));const r=new Yc(i.get(1),i.get(3)),o=new Ne(i.popFirst(5));return r.isEqual(e)||Ui(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function cC(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Xbe extends hk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Za(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new di(this.firestore,null,e)}}class Od{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Hl extends dy{constructor(t,e,i,r,o,s){super(t,e,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new py(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(oC("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class py extends Hl{data(t={}){return super.data(t)}}class lu{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Od(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new py(this._firestore,this._userDataWriter,i.key,i,new Od(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _e(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new py(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Od(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const l=new py(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Od(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:t0e(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function t0e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}function s6(n,t){return n instanceof Hl&&t instanceof Hl?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof lu&&t instanceof lu&&n._firestore===t._firestore&&rk(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class cu extends hk{constructor(t){super(),this.firestore=t}convertBytes(t){return new Za(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new di(this.firestore,null,e)}}function a6(n,t,e){n=nn(n,di);const i=nn(n.firestore,ii),r=cC(n.converter,t,e);return qp(i,[nC(Md(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,vi.none())])}function l6(n,t,e,...i){n=nn(n,di);const r=nn(n.firestore,ii),o=Md(r);let s;return s="string"==typeof(t=(0,x.m9)(t))||t instanceof jl?lk(o,"updateDoc",n._key,t,e,i):ak(o,"updateDoc",n._key,t),qp(r,[s.toMutation(n._key,vi.exists(!0))])}function c6(n,...t){var e,i,r;n=(0,x.m9)(n);let o={includeMetadataChanges:!1},s=0;"object"!=typeof t[s]||ok(t[s])||(o=t[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(ok(t[s])){const f=t[s];t[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),t[s+1]=null===(i=f.error)||void 0===i?void 0:i.bind(f),t[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}let l,c,u;if(n instanceof di)c=nn(n.firestore,ii),u=Ep(n._key.path),l={next:f=>{t[s]&&t[s](fk(c,n,f))},error:t[s+1],complete:t[s+2]};else{const f=nn(n,Br);c=nn(f.firestore,ii),u=f._query;const g=new cu(c);l={next:_=>{t[s]&&t[s](new lu(c,g,f,_))},error:t[s+1],complete:t[s+2]},e6(n._query)}return function(g,_,y,b){const C=new ZT(b),O=new wM(_,C,y);return g.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return _M(yield Gp(g),O)})),()=>{C.Na(),g.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return yM(yield Gp(g),O)}))}}(Oi(c),u,a,l)}function qp(n,t){return function(i,r){const o=new sr;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function qye(n,t,e){return DM.apply(this,arguments)}(yield tk(i),r,o)})),o.promise}(Oi(n),t)}function fk(n,t,e){const i=e.docs.get(t._key),r=new cu(n);return new Hl(n,r,t._key,i,new Od(e.hasPendingWrites,e.fromCache),t.converter)}const y0e={maxAttempts:5};class u6{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Md(t)}set(t,e,i){this._verifyNotCommitted();const r=uu(t,this._firestore),o=cC(r.converter,e,i),s=nC(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(s.toMutation(r._key,vi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=uu(t,this._firestore);let s;return s="string"==typeof(e=(0,x.m9)(e))||e instanceof jl?lk(this._dataReader,"WriteBatch.update",o._key,e,i,r):ak(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,vi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=uu(t,this._firestore);return this._mutations=this._mutations.concat(new Dp(e._key,vi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(n,t){if((n=(0,x.m9)(n)).firestore!==t)throw new _e(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class b0e extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=Md(e)}get(e){const i=uu(e,this._firestore),r=new Xbe(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||1!==o.length)return Ue();const s=o[0];if(s.isFoundDocument())return new dy(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new dy(this._firestore,r,i._key,null,i.converter);throw Ue()})}set(e,i,r){const o=uu(e,this._firestore),s=cC(o.converter,i,r),a=nC(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,r);return this._transaction.set(o._key,a),this}update(e,i,r,...o){const s=uu(e,this._firestore);let a;return a="string"==typeof(i=(0,x.m9)(i))||i instanceof jl?lk(this._dataReader,"Transaction.update",s._key,i,r,o):ak(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(e){const i=uu(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=uu(t,this._firestore),i=new cu(this._firestore);return super.get(t).then(r=>new Hl(this._firestore,i,e._key,r._document,new Od(!1,!1),e.converter))}}function mk(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new _e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function p6(){if(typeof Uint8Array>"u")throw new _e("unimplemented","Uint8Arrays are not available in this environment.")}function m6(){if(!function X_e(){return typeof atob<"u"}())throw new _e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){fp=Ns.SDK_VERSION,(0,Ns._registerComponent)(new Al.wA("firestore",(i,{instanceIdentifier:r,options:o})=>{const s=i.getProvider("app").getImmediate(),a=new ii(new T_e(i.getProvider("auth-internal")),new x_e(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _e(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(c.options.projectId,u)}(s,r),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Ns.registerVersion)(zG,"4.3.2",t),(0,Ns.registerVersion)(zG,"4.3.2","esm2017")}();class my{constructor(t){this._delegate=t}static fromBase64String(t){return m6(),new my(Za.fromBase64String(t))}static fromUint8Array(t){return p6(),new my(Za.fromUint8Array(t))}toBase64(){return m6(),this._delegate.toBase64()}toUint8Array(){return p6(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gk(n){return function R0e(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class N0e{enableIndexedDbPersistence(t,e){return function Sbe(n,t){W8(n=nn(n,ii));const e=Oi(n);if(e._uninitializedComponentsProvider)throw new _e(J.FAILED_PRECONDITION,"SDK cache is already specified.");Uo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new $p;return G8(e,r,new KM(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Abe(n){W8(n=nn(n,ii));const t=Oi(n);if(t._uninitializedComponentsProvider)throw new _e(J.FAILED_PRECONDITION,"SDK cache is already specified.");Uo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new $p;return G8(t,i,new x8(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Rbe(n){if(n._initialized&&!n._terminated)throw new _e(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(e=(0,le.Z)(function*(r){if(!la.D())return Promise.resolve();const o=r+"main";yield la.delete(o)}),function i(r){return e.apply(this,arguments)})(UN(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class g6{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Yc||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Uo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function j8(n,t,e,i={}){var r;const o=(n=nn(n,ay))._getSettings(),s=`${t}:${e}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Cr.MOCK_USER;else{a=(0,x.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new _e(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Cr(c)}n._authCredentials=new w_e(new GG(a,l))}}(this._delegate,t,e,i)}enableNetwork(){return function Mbe(n){return function pbe(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const t=yield A8(n),e=yield R8(n);return t.setNetworkEnabled(!0),function(r){const o=Re(r);return o.C_.delete(0),ry(o)}(e)}))}(Oi(n=nn(n,ii)))}(this._delegate)}disableNetwork(){return function kbe(n){return function mbe(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const t=yield A8(n),e=yield R8(n);return t.setNetworkEnabled(!1),(i=(0,le.Z)(function*(o){const s=Re(o);s.C_.add(0),yield Fp(s),s.M_.set("Offline")}),function r(o){return i.apply(this,arguments)})(e);var i}))}(Oi(n=nn(n,ii)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,F8("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Nbe(n){return function(e){const i=new sr;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Qye(n,t){return MM.apply(this,arguments)}(yield tk(e),i)})),i.promise}(Oi(n=nn(n,ii)))}(this._delegate)}onSnapshotsInSync(t){return function u0e(n,t){return function vbe(n,t){const e=new ZT(t);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Gp(n),o=e,Re(r).q_.add(o),void o.next();var r,o})),()=>{e.Na(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Gp(n),o=e,void Re(r).q_.delete(o);var r,o}))}}(Oi(n=nn(n,ii)),ok(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new _e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Kp(this,H8(this._delegate,t))}catch(e){throw Io(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ls(this,XT(this._delegate,t))}catch(e){throw Io(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new xo(this,function Cbe(n,t){if(n=nn(n,ay),ik("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new _e(J.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Br(n,null,(i=t,new Fl(un.emptyPath(),i)));var i}(this._delegate,t))}catch(e){throw Io(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function E0e(n,t,e){n=nn(n,ii);const i=Object.assign(Object.assign({},y0e),e);return function(o){if(o.maxAttempts<1)throw new _e(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){const l=new sr;return o.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const c=yield function N8(n){return QT(n).then(t=>t.datastore)}(o);new hbe(o.asyncQueue,c,a,s,l).run()})),l.promise}(Oi(n),r=>t(new b0e(n,r)),i)}(this._delegate,e=>t(new _6(this,e)))}batch(){return Oi(this._delegate),new v6(new u6(this._delegate,t=>qp(this._delegate,t)))}loadBundle(t){return function Obe(n,t){const e=Oi(n=nn(n,ii)),i=new xbe;return function ybe(n,t,e,i){const r=function(s,a){let l;return l="string"==typeof s?eW().encode(s):s,u=function(u,f){if(u instanceof Uint8Array)return D8(u,f);if(u instanceof ArrayBuffer)return D8(new Uint8Array(u),f);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new ube(u,a);var u}(e,iy(t));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function lbe(n,t,e){const i=Re(n);var r;(r=(0,le.Z)(function*(s,a,l){try{const c=yield a.getMetadata();if(yield function(y,b){const C=Re(y),O=ji(b.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",S=>C.Kr.getBundleMetadata(S,b.id)).then(S=>!!S&&S.createTime.compareTo(O)>=0)}(s.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(y=c).totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}),Promise.resolve(new Set);l._updateProgress(_8(c));const u=new jye(c,s.localStore,a.serializer);let f=yield a.Ma();for(;f;){const _=yield u.ea(f);_&&l._updateProgress(_),f=yield a.Ma()}const g=yield u.complete();return yield Ul(s,g.ra,void 0),yield function(y,b){const C=Re(y);return C.persistence.runTransaction("Save bundle","readwrite",O=>C.Kr.saveBundleMetadata(O,b))}(s.localStore,c),l._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return Uo("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var y}),function o(s,a,l){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield tk(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function Pbe(n,t){return function bbe(n,t){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(i,r){const o=Re(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,r))}(yield zp(n),t)}))}(Oi(n=nn(n,ii)),t).then(e=>e?new Br(n,null,e.query):null)}(this._delegate,t).then(e=>e?new xo(this,e):null)}}class dC extends hk{constructor(t){super(),this.firestore=t}convertBytes(t){return new my(new Za(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ls.forKey(e,this.firestore,null)}}class _6{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new dC(t)}get(t){const e=Fd(t);return this._delegate.get(e).then(i=>new gy(this._firestore,new Hl(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Fd(t);return i?(mk("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=Fd(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=Fd(t);return this._delegate.delete(e),this}}class v6{constructor(t){this._delegate=t}set(t,e,i){const r=Fd(t);return i?(mk("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=Fd(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=Fd(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Pd{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new py(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _y(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Pd.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new Pd(t,new dC(t),e),r.set(e,o)),o}}Pd.INSTANCES=new WeakMap;class Ls{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dC(t)}static forPath(t,e,i){if(t.length%2!=0)throw new _e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ls(e,new di(e._delegate,i,new Ne(t)))}static forKey(t,e,i){return new Ls(e,new di(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Kp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Kp(this.firestore,H8(this._delegate,t))}catch(e){throw Io(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,x.m9)(t))instanceof di&&$8(this._delegate,t)}set(t,e){e=mk("DocumentReference.set",e);try{return e?a6(this._delegate,t,e):a6(this._delegate,t)}catch(i){throw Io(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?l6(this._delegate,t):l6(this._delegate,t,e,...i)}catch(r){throw Io(r,"updateDoc()","DocumentReference.update()")}}delete(){return function l0e(n){return qp(nn(n.firestore,ii),[new Dp(n._key,vi.none())])}(this._delegate)}onSnapshot(...t){const e=y6(t),i=b6(t,r=>new gy(this.firestore,new Hl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return c6(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function i0e(n){n=nn(n,di);const t=nn(n.firestore,ii),e=Oi(t),i=new cu(t);return function gbe(n,t){const e=new sr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(i=(0,le.Z)(function*(o,s,a){try{const l=yield function(u,f){const g=Re(u);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,f))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new _e(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Bp(l,`Failed to get document '${s} from cache`);a.reject(c)}}),function r(o,s,a){return i.apply(this,arguments)})(yield zp(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Hl(t,i,n._key,r,new Od(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function r0e(n){n=nn(n,di);const t=nn(n.firestore,ii);return M8(Oi(t),n._key,{source:"server"}).then(e=>fk(t,n,e))}(this._delegate):function n0e(n){n=nn(n,di);const t=nn(n.firestore,ii);return M8(Oi(t),n._key).then(e=>fk(t,n,e))}(this._delegate),e.then(i=>new gy(this.firestore,new Hl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Ls(this.firestore,this._delegate.withConverter(t?Pd.getInstance(this.firestore,t):null))}}function Io(n,t,e){return n.message=n.message.replace(t,e),n}function y6(n){for(const t of n)if("object"==typeof t&&!gk(t))return t;return{}}function b6(n,t){var e,i;let r;return r=gk(n[0])?n[0]:gk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class gy{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ls(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return s6(this._delegate,t._delegate)}}class _y extends gy{data(t){const e=this._delegate.data(t);return function b_e(n,t){n||Ue()}(void 0!==e),e}}class xo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dC(t)}where(t,e,i){try{return new xo(this.firestore,au(this._delegate,function Gbe(n,t,e){const i=t,r=oC("where",n);return fy._create(r,i,e)}(t,e,i)))}catch(r){throw Io(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new xo(this.firestore,au(this._delegate,function Wbe(n,t="asc"){const e=t,i=oC("orderBy",n);return dk._create(i,e)}(t,e)))}catch(i){throw Io(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new xo(this.firestore,au(this._delegate,function qbe(n){return B8("limit",n),sC._create("limit",n,"F")}(t)))}catch(e){throw Io(e,"limit()","Query.limit()")}}limitToLast(t){try{return new xo(this.firestore,au(this._delegate,function Kbe(n){return B8("limitToLast",n),sC._create("limitToLast",n,"L")}(t)))}catch(e){throw Io(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new xo(this.firestore,au(this._delegate,function Zbe(...n){return aC._create("startAt",n,!0)}(...t)))}catch(e){throw Io(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new xo(this.firestore,au(this._delegate,function Ybe(...n){return aC._create("startAfter",n,!1)}(...t)))}catch(e){throw Io(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new xo(this.firestore,au(this._delegate,function Qbe(...n){return lC._create("endBefore",n,!1)}(...t)))}catch(e){throw Io(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new xo(this.firestore,au(this._delegate,function Jbe(...n){return lC._create("endAt",n,!0)}(...t)))}catch(e){throw Io(e,"endAt()","Query.endAt()")}}isEqual(t){return rk(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function s0e(n){n=nn(n,Br);const t=nn(n.firestore,ii),e=Oi(t),i=new cu(t);return function _be(n,t){const e=new sr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(i=(0,le.Z)(function*(o,s,a){try{const l=yield HT(o,s,!0),c=new b8(s,l.ls),u=c.ca(l.documents),f=c.applyChanges(u,!1);a.resolve(f.snapshot)}catch(l){const c=Bp(l,`Failed to execute query '${s} against cache`);a.reject(c)}}),function r(o,s,a){return i.apply(this,arguments)})(yield zp(n),t,e);var i})),e.promise}(e,n._query).then(r=>new lu(t,i,n,r))}(this._delegate):"server"===t?.source?function a0e(n){n=nn(n,Br);const t=nn(n.firestore,ii),e=Oi(t),i=new cu(t);return k8(e,n._query,{source:"server"}).then(r=>new lu(t,i,n,r))}(this._delegate):function o0e(n){n=nn(n,Br);const t=nn(n.firestore,ii),e=Oi(t),i=new cu(t);return e6(n._query),k8(e,n._query).then(r=>new lu(t,i,n,r))}(this._delegate),e.then(i=>new _k(this.firestore,new lu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=y6(t),i=b6(t,r=>new _k(this.firestore,new lu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return c6(this._delegate,e,i)}withConverter(t){return new xo(this.firestore,this._delegate.withConverter(t?Pd.getInstance(this.firestore,t):null))}}class k0e{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new _y(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _k{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new xo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new _y(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new k0e(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new _y(this._firestore,i))})}isEqual(t){return s6(this._delegate,t._delegate)}}class Kp extends xo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ls(this.firestore,t):null}doc(t){try{return new Ls(this.firestore,void 0===t?XT(this._delegate):XT(this._delegate,t))}catch(e){throw Io(e,"doc()","CollectionReference.doc()")}}add(t){return function c0e(n,t){const e=nn(n.firestore,ii),i=XT(n),r=cC(n.converter,t);return qp(e,[nC(Md(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,vi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Ls(this.firestore,e))}isEqual(t){return $8(this._delegate,t._delegate)}withConverter(t){return new Kp(this.firestore,this._delegate.withConverter(t?Pd.getInstance(this.firestore,t):null))}}function Fd(n){return nn(n,di)}class vk{constructor(...t){this._delegate=new jl(...t)}static documentId(){return new vk(ci.keyField().canonicalString())}isEqual(t){return(t=(0,x.m9)(t))instanceof jl&&this._delegate._internalPath.isEqual(t._internalPath)}}class Ld{constructor(t){this._delegate=t}static serverTimestamp(){const t=function T0e(){return new sk("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Ld(t)}static delete(){const t=function w0e(){return new cy("deleteField")}();return t._methodName="FieldValue.delete",new Ld(t)}static arrayUnion(...t){const e=function C0e(...n){return new Ube("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Ld(e)}static arrayRemove(...t){const e=function I0e(...n){return new jbe("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Ld(e)}static increment(t){const e=function x0e(n){return new Hbe("increment",n)}(t);return e._methodName="FieldValue.increment",new Ld(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const O0e={Firestore:g6,GeoPoint:eC,Timestamp:_i,Blob:my,Transaction:_6,WriteBatch:v6,DocumentReference:Ls,DocumentSnapshot:gy,Query:xo,QueryDocumentSnapshot:_y,QuerySnapshot:_k,CollectionReference:Kp,FieldPath:vk,FieldValue:Ld,setLogLevel:function M0e(n){!function y_e(n){Gc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function E6(n,t){return function L0e(n,t=Yu){return new it(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function yk(n,t){return E6(n,t).pipe(Ce(e=>({payload:e,type:"query"})))}!function F0e(n){(function P0e(n,t){n.INTERNAL.registerComponent(new Al.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},O0e)))})(n,(t,e)=>new g6(t,e,new N0e)),n.registerVersion("@firebase/firestore-compat","0.3.21")}(ta.Z);class w6{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:o}=S6(i,e);return new I6(r,o,this.afs)}snapshotChanges(){return function V0e(n,t){return E6(n,t).pipe(Df(void 0),mR(),Ce(e=>{const[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(or)}valueChanges(t={}){return this.snapshotChanges().pipe(Ce(({payload:e})=>t.idField?{...e.data(),[t.idField]:e.id}:e.data()))}get(t){return w(this.ref.get(t)).pipe(or)}}function hC(n,t){return yk(n,t).pipe(Df(void 0),mR(),Ce(e=>{const[i,r]=e,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=o.find(f=>f.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function T6(n,t,e){return hC(n,e).pipe(Af((i,r)=>function B0e(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function U0e(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return bk(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return bk(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return bk(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),t),[]),dt(),Ce(i=>i.map(r=>({type:r.type,payload:r}))))}function bk(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function C6(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class I6{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=hC(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Ce(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Df(void 0),mR(),ai(([i,r])=>r.length>0||!i),Ce(([,i])=>i),or)}auditTrail(t){return this.stateChanges(t).pipe(Af((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=C6(t);return T6(this.query,e,this.afs.schedulers.outsideAngular).pipe(or)}valueChanges(t={}){return yk(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(e=>e.payload.docs.map(i=>t.idField?{...i.data(),[t.idField]:i.id}:i.data())),or)}get(t){return w(this.query.get(t)).pipe(or)}add(t){return this.ref.add(t)}doc(t){return new w6(this.ref.doc(t),this.afs)}}class j0e{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?hC(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(e=>e.filter(i=>t.indexOf(i.type)>-1)),ai(e=>e.length>0),or):hC(this.query,this.afs.schedulers.outsideAngular).pipe(or)}auditTrail(t){return this.stateChanges(t).pipe(Af((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=C6(t);return T6(this.query,e,this.afs.schedulers.outsideAngular).pipe(or)}valueChanges(t={}){return yk(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(i=>i.payload.docs.map(r=>t.idField?{[t.idField]:r.id,...r.data()}:r.data())),or)}get(t){return w(this.query.get(t)).pipe(or)}}const x6=new de("angularfire2.enableFirestorePersistence"),D6=new de("angularfire2.firestore.persistenceSettings"),H0e=new de("angularfire2.firestore.settings"),$0e=new de("angularfire2.firestore.use-emulator");function S6(n,t=(e=>e)){return{query:t(n),ref:n}}let z0e=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,o,s,a,l,c,u,f,g,_,y,b,C,O,S){this.schedulers=l;const V=$E(e,a,i),W=u;f&&x1(V,a,g,y,b,C,_,O),[this.firestore,this.persistenceEnabled$]=v1(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const ae=a.runOutsideAngular(()=>V.firestore());if(o&&ae.settings(o),W&&ae.useEmulator(...W),r&&!iE(s)){const Ie=()=>{try{return w(ae.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(Ve){return typeof console<"u"&&console.warn(Ve),M(!1)}};return[ae,a.runOutsideAngular(Ie)]}return[ae,M(!1)]},[o,W,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:s}=S6(r,i),a=this.schedulers.ngZone.run(()=>o);return new I6(a,s,this)}collectionGroup(e,i){const r=i||(s=>s),o=this.firestore.collectionGroup(e);return new j0e(r(o),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new w6(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(P(v_),P(y_,8),P(x6,8),P(H0e,8),P(Cs),P(We),P(_1),P(D6,8),P($0e,8),P(b_,8),P(b1,8),P(E1,8),P(w1,8),P(T1,8),P(C1,8),P(I1,8),P(g1,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),G0e=(()=>{class n{constructor(){ta.Z.registerVersion("angularfire",__.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:x6,useValue:!0},{provide:D6,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[z0e]})}return n})();const W0e_firebaseConfig={apiKey:"AIzaSyAqSzVgcm58_Y7k3PvuvQ5L-qW8vJrrq30",authDomain:"project0781.firebaseapp.com",databaseURL:"https://project0781-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project0781",storageBucket:"project0781.appspot.com",messagingSenderId:"254100950894",appId:"1:254100950894:web:74273920b751120e19fb7f",measurementId:"G-4JXLN15RYP"},{isArray:q0e}=Array;function A6(n){return 1===n.length&&q0e(n[0])?n[0]:n}function Ek(...n){const t=ao(n),e=A6(n);return e.length?new it(i=>{let r=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<e.length;s++)ye(e[s]).subscribe(De(i,a=>{if(r[s].push(a),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(t?t(...l):l),r.some((c,u)=>!c.length&&o[u])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):mn}Math,Math,Math;const Cwe=["*"],eTe=["dialog"];function Ud(n){return"string"==typeof n}function jd(n){return null!=n}function em(n){return(n||document.body).getBoundingClientRect()}const lq={animation:!0,transitionTimerDelayMs:5},WTe=()=>{},{transitionTimerDelayMs:qTe}=lq,Iy=new Map,Go=(n,t,e,i)=>{let r=i.context||{};const o=Iy.get(t);if(o)switch(i.runningTransition){case"continue":return mn;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Iy.delete(t)}const s=e(t,i.animation,r)||WTe;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>s()),M(void 0).pipe(function zTe(n){return t=>new it(e=>t.subscribe({next:s=>n.run(()=>e.next(s)),error:s=>n.run(()=>e.error(s)),complete:()=>n.run(()=>e.complete())}))}(n));const a=new $,l=new $,c=a.pipe(function Z0e(...n){return t=>If(t,M(...n))}(!0));Iy.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const u=function GTe(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const f=Er(t,"transitionend").pipe(tn(c),ai(({target:_})=>_===t));(function R6(...n){return 1===(n=A6(n)).length?ye(n[0]):new it(function K0e(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push(ye(n[i]).subscribe(De(t,r=>{if(e){for(let o=0;o<e.length;o++)o!==i&&e[o].unsubscribe();e=null}t.next(r)})))}}(n))})(dR(u+qTe).pipe(tn(c)),f,l).pipe(tn(c)).subscribe(()=>{Iy.delete(t),n.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let bC=(()=>{class n{constructor(){this.animation=lq.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_q=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),vq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),Eq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),wq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();var qn=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(qn||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Aq=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Rq(n){const t=Array.from(n.querySelectorAll(Aq)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let $q=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),Wq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();class Wd{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let WCe=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Zi(1)).subscribe(()=>{Go(this._zone,this._el.nativeElement,(e,i)=>{i&&em(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Go(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(N(wt),N(We))};static#t=this.\u0275cmp=cn({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(Fu("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),ht("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[xs],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class qq{update(t){}close(t){}dismiss(t){}}const qCe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],KCe=["animation","backdropClass"];class ZCe{_applyWindowOptions(t,e){qCe.forEach(i=>{jd(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){KCe.forEach(i=>{jd(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(tn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(tn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new $,this._dismissed=new $,this._hidden=new $,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function oq(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():M(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ek(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Zk=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(Zk||{});let YCe=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new $,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Qe,this.shown=new $,this.hidden=new $}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Ud(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Zi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=Ek(Go(this._zone,e,()=>e.classList.remove("show"),i),Go(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const e={animation:this.animation,runningTransition:"continue"};Ek(Go(this._zone,this._elRef.nativeElement,(o,s)=>{s&&em(o),o.classList.add("show")},e),Go(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Er(e,"keydown").pipe(tn(this._closed$),ai(r=>r.which===qn.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Zk.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Er(this._dialogEl.nativeElement,"mousedown").pipe(tn(this._closed$),Ni(()=>i=!1),Le(()=>Er(e,"mouseup").pipe(tn(this._closed$),Zi(1))),ai(({target:r})=>e===r)).subscribe(()=>{i=!0}),Er(e,"click").pipe(tn(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Zk.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=Rq(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Go(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(N(Tt),N(wt),N(We))};static#t=this.\u0275cmp=cn({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&gr(eTe,7),2&i){let o;mt(o=gt())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(on("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Fu("modal d-block"+(r.windowClass?" "+r.windowClass:"")),ht("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[xs],ngContentSelectors:Cwe,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(wl(),te(0,"div",0,1)(2,"div",2),Ei(3),ne()()),2&i&&Fu("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),QCe=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(e>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=o}}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JCe=(()=>{class n{constructor(e,i,r,o,s,a,l){this._applicationRef=e,this._injector=i,this._environmentInjector=r,this._document=o,this._scrollBar=s,this._rendererFactory=a,this._ngZone=l,this._activeWindowCmptHasChanged=new $,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Qe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const c=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const r=Er(t,"focusin").pipe(tn(e),Ce(o=>o.target));Er(t,"keydown").pipe(tn(e),ai(o=>o.which===qn.Tab),zE(r)).subscribe(([o,s])=>{const[a,l]=Rq(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&Er(t,"click").pipe(tn(e),zE(r),Ce(o=>o[1])).subscribe(o=>o.focus())})})(this._ngZone,c.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(c.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const o=r.container instanceof HTMLElement?r.container:jd(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new qq,l=(e=r.injector||e).get(go,null)||this._environmentInjector,c=this._getContentRef(e,l,i,a,r);let u=!1!==r.backdrop?this._attachBackdrop(o):void 0,f=this._attachWindowComponent(o,c.nodes),g=new ZCe(f,c,u,r.beforeDismiss);return this._registerModalRef(g),this._registerWindowCmpt(f),g.hidden.pipe(Zi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=_=>{g.close(_)},a.dismiss=_=>{g.dismiss(_)},a.update=_=>{g.update(_)},g.update(r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),g}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=ZD(WCe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=ZD(YCe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,o,s){return r?r instanceof wi?this._createFromTemplateRef(r,o):Ud(r)?this._createFromString(r):this._createFromComponent(e,i,r,o,s):new Wd([])}_createFromTemplateRef(e,i){const o=e.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(o),new Wd([o.rootNodes],o)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Wd([[i]])}_createFromComponent(e,i,r,o,s){const l=ZD(r,{environmentInjector:i,elementInjector:Wi.create({providers:[{provide:qq,useValue:o}],parent:e})}),c=l.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Wd([[c]],l.hostView,l)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(P(ka),P(Wi),P(go),P(Tt),P(QCe),P(Xh),P(We))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XCe=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}static#e=this.\u0275fac=function(i){return new(i||n)(P(bC))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eIe=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(P(Wi),P(JCe),P(XCe))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:[eIe]})}return n})(),Qq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),o9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),s9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),a9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),l9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),c9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),u9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),d9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),h9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();new de("live announcer delay",{providedIn:"root",factory:function mIe(){return 100}});let f9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),p9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})();const _Ie=[_q,vq,Eq,wq,$q,Wq,Kq,Qq,p9,o9,s9,a9,l9,c9,u9,d9,h9,f9];let vIe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[_Ie,_q,vq,Eq,wq,$q,Wq,Kq,Qq,p9,o9,s9,a9,l9,c9,u9,d9,h9,f9]})}return n})(),CIe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,Qr]})}return n})(),E9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({})}return n})(),LIe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({imports:[Qr,H3,E9,Qr,E9]})}return n})();function VIe(n,t){1&n&&(te(0,"a",12)(1,"span"),ot(2,"Felhaszn\xe1l\xf3k"),ne()())}function BIe(n,t){1&n&&(te(0,"li",9)(1,"a",13),ot(2,"Id\u0151j\xe1r\xe1s"),ne()())}function UIe(n,t){1&n&&(te(0,"li",9)(1,"a",14),ot(2,"Jegyzetek"),ne()())}function jIe(n,t){if(1&n){const e=qi();te(0,"li",9)(1,"a",15),Be("click",function(){return Yt(e),Lt(Se().signOut())}),ot(2,"Kijelentkez\xe9s "),ne()()}}const w9=function(){return{exact:!0}};let HIe=(()=>{class n{constructor(e){this.authService=e,this.isSuperAdmin=!1}ngOnInit(){this.authService.isLoggedIn().subscribe({next:e=>{console.log(e),1==e?.emailVerified||"facebook.com"==e?.providerData[0]?.providerId||"phone"==e?.providerData[0]?.providerId?this.isLoggedIn=e:(e?.sendEmailVerification(),this.isLoggedIn="")},error:e=>console.log(e)}),this.authService.isSuperAdmin.subscribe(e=>{this.isSuperAdmin=e})}signOut(){this.authService.signOut(),this.isSuperAdmin=!1}static#e=this.\u0275fac=function(i){return new(i||n)(N(Nw))};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-nav"]],decls:19,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-secondary"],[1,"container-fluid"],[1,"row"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","my-2"],["routerLink","","routerLinkActive","active-link",1,"navbar-brand",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],["routerLink","/users","class","navbar-brand","routerLinkActive","active-link",4,"ngIf"],[1,"navbar-nav","h5"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/signup","routerLinkActive","active-link",1,"nav-link"],["routerLinkActive","active-link","routerLink","/login",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/users","routerLinkActive","active-link",1,"navbar-brand"],["routerLinkActive","active-link","routerLink","/weather",1,"nav-link"],["routerLinkActive","active-link","routerLink","/notes",1,"nav-link"],["routerLink","/login",1,"nav-link","sign-out",3,"click"]],template:function(i,r){1&i&&(te(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),Jt(5,"span",5),ot(6," Kezd\u0151lap"),ne()(),te(7,"div",3),xe(8,VIe,3,0,"a",6),ne()(),te(9,"ul",7),xe(10,BIe,3,0,"li",8),xe(11,UIe,3,0,"li",8),te(12,"li",9)(13,"a",10),ot(14," Regisztr\xe1ci\xf3 "),ne()(),te(15,"li",9)(16,"a",11),ot(17,"Bejelentkez\xe9s"),ne()(),xe(18,jIe,3,0,"li",8),ne()()()),2&i&&(re(4),ie("routerLinkActiveOptions",bD(6,w9)),re(4),ie("ngIf",r.isSuperAdmin),re(2),ie("ngIf",r.isLoggedIn),re(1),ie("ngIf",r.isLoggedIn),re(5),ie("routerLinkActiveOptions",bD(7,w9)),re(2),ie("ngIf",r.isLoggedIn))},dependencies:[rs,BE,pH],styles:[".active-link[_ngcontent-%COMP%]{color:#fff;background-color:#83968380;height:-moz-fit-content;height:fit-content}.sign-out[_ngcontent-%COMP%]{color:#1b1b19;background-color:#383d3c4d;box-shadow:5px 5px 5px #201e1e80}.nav-item[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}"]})}return n})(),$Ie=(()=>{class n{constructor(){this.title="Project"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=cn({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"main-img","mt-0","mb-0"],["src","https://img.freepik.com/free-photo/beautiful-shot-grassy-hills-covered-trees-near-mountains-dolomites-italy_181624-24400.jpg?w=1380&t=st=1699608253~exp=1699608853~hmac=d483e48590bee222086a9a3602a9862fa65824b57c22bd041cee76e7fafca419","width","100%","height","100%","alt","T\xe1jk\xe9p"],[1,"container"]],template:function(i,r){1&i&&(Jt(0,"app-nav"),te(1,"div",0),Jt(2,"img",1),ne(),te(3,"div",2),Jt(4,"router-outlet"),ne())},dependencies:[s1,HIe],styles:[".main-img[_ngcontent-%COMP%]{position:relative;z-index:-1}img[_ngcontent-%COMP%]{position:fixed;top:0;opacity:.5}"]})}return n})();function T9(n){return new z(3e3,!1)}function fu(n){switch(n.length){case 0:return new nv;case 1:return n[0];default:return new g3(n)}}function C9(n,t,e=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(t.forEach(l=>{const c=l.get("offset"),u=c==s,f=u&&a||new Map;l.forEach((g,_)=>{let y=_,b=g;if("offset"!==_)switch(y=n.normalizePropertyName(y,r),b){case"!":b=e.get(_);break;case Ml:b=i.get(_);break;default:b=n.normalizeStyleValue(_,y,b,r)}f.set(y,b)}),u||o.push(f),a=f,s=c}),r.length)throw function hxe(n){return new z(3502,!1)}();return o}function Jk(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Xk(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Xk(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Xk(e,"destroy",n)))}}function Xk(n,t,e){const o=eO(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),s=n._data;return null!=s&&(o._data=s),o}function eO(n,t,e,i,r="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function ms(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function I9(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const Cxe=(()=>typeof document>"u"?null:document.documentElement)();function tO(n){const t=n.parentNode||n.host||null;return t===Cxe?null:t}let Kd=null,x9=!1;function D9(n,t){for(;t;){if(t===n)return!0;t=tO(t)}return!1}function S9(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]}let A9=(()=>{class n{validateStyleProperty(e){return function xxe(n){Kd||(Kd=function Dxe(){return typeof document<"u"?document.body:null}()||{},x9=!!Kd.style&&"WebkitAppearance"in Kd.style);let t=!0;return Kd.style&&!function Ixe(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Kd.style,!t&&x9&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Kd.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return D9(e,i)}getParentElement(e){return tO(e)}query(e,i,r){return S9(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,a=[],l){return new nv(r,o)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),nO=(()=>{class n{static#e=this.NOOP=new A9}return n})();const Sxe=1e3,iO="ng-enter",PC="ng-leave",FC="ng-trigger",LC=".ng-trigger",N9="ng-animating",rO=".ng-animating";function zl(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:oO(parseFloat(t[1]),t[2])}function oO(n,t){return"s"===t?n*Sxe:n}function VC(n,t,e){return n.hasOwnProperty("duration")?n:function Rxe(n,t,e){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(T9()),{duration:0,delay:0,easing:""};r=oO(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=oO(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=n;if(!e){let a=!1,l=t.length;r<0&&(t.push(function zIe(){return new z(3100,!1)}()),a=!0),o<0&&(t.push(function GIe(){return new z(3101,!1)}()),a=!0),a&&t.splice(l,0,T9())}return{duration:r,delay:o,easing:s}}(n,t,e)}function Ny(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function M9(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function pu(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function Ja(n,t,e){t.forEach((i,r)=>{const o=aO(r);e&&!e.has(r)&&e.set(r,n.style[o]),n.style[o]=i})}function Zd(n,t){t.forEach((e,i)=>{const r=aO(i);n.style[r]=""})}function My(n){return Array.isArray(n)?1==n.length?n[0]:m3(n):n}const sO=new RegExp("{{\\s*(.+?)\\s*}}","g");function O9(n){let t=[];if("string"==typeof n){let e;for(;e=sO.exec(n);)t.push(e[1]);sO.lastIndex=0}return t}function ky(n,t,e){const i=n.toString(),r=i.replace(sO,(o,s)=>{let a=t[s];return null==a&&(e.push(function qIe(n){return new z(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function BC(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const kxe=/-+([a-z0-9])/g;function aO(n){return n.replace(kxe,(...t)=>t[1].toUpperCase())}function gs(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function KIe(n){return new z(3004,!1)}()}}function P9(n,t){return window.getComputedStyle(n)[t]}const UC="*";function Fxe(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Lxe(n,t,e){if(":"==n[0]){const l=function Vxe(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function lxe(n){return new z(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function axe(n){return new z(3015,!1)}()),t;const r=i[1],o=i[2],s=i[3];t.push(F9(r,s));"<"==o[0]&&!(r==UC&&s==UC)&&t.push(F9(s,r))}(i,e,t)):e.push(n),e}const jC=new Set(["true","1"]),HC=new Set(["false","0"]);function F9(n,t){const e=jC.has(n)||HC.has(n),i=jC.has(t)||HC.has(t);return(r,o)=>{let s=n==UC||n==r,a=t==UC||t==o;return!s&&e&&"boolean"==typeof r&&(s=r?jC.has(n):HC.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?jC.has(t):HC.has(t)),s&&a}}const Bxe=new RegExp("s*:selfs*,?","g");function lO(n,t,e,i){return new Uxe(n).build(t,e,i)}class Uxe{constructor(t){this._driver=t}build(t,e,i){const r=new $xe(e);return this._resetContextStyleTimingState(r),gs(this,My(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function YIe(){return new z(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,s.push(l)}else e.errors.push(function QIe(){return new z(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{O9(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(BC(o.values()),e.errors.push(function JIe(n,t){return new z(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=gs(this,My(t.animation),e);return{type:1,matchers:Fxe(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Yd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>gs(this,i,e)),options:Yd(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const o=t.steps.map(s=>{e.currentTime=i;const a=gs(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:o,options:Yd(t.options)}}visitAnimate(t,e){const i=function Gxe(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return cO(VC(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=cO(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=VC(e,t);return cO(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:rp({});if(5==o.type)r=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=rp(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Ml?i.push(a):e.errors.push(new z(3002,!1)):i.push(M9(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let f=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(e.errors.push(function exe(n,t,e,i,r){return new z(3010,!1)}()),f=!1),o=u.startTime),f&&c.set(l,{startTime:o,endTime:r}),e.options&&function Mxe(n,t,e){const i=t.params||{},r=O9(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(function WIe(n){return new z(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function txe(){return new z(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const u=t.steps.map(O=>{const S=this._makeStyleAst(O,e);let V=null!=S.offset?S.offset:function zxe(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(S.styles),W=0;return null!=V&&(o++,W=S.offset=V),l=l||W<0||W>1,a=a||W<c,c=W,s.push(W),S});l&&e.errors.push(function nxe(){return new z(3012,!1)}()),a&&e.errors.push(function ixe(){return new z(3200,!1)}());const f=t.steps.length;let g=0;o>0&&o<f?e.errors.push(function rxe(){return new z(3202,!1)}()):0==o&&(g=1/(f-1));const _=f-1,y=e.currentTime,b=e.currentAnimateTimings,C=b.duration;return u.forEach((O,S)=>{const V=g>0?S==_?1:g*S:s[S],W=V*C;e.currentTime=y+b.delay+W,b.duration=W,this._validateStyleAst(O,e),O.offset=V,i.styles.push(O)}),i}visitReference(t,e){return{type:8,animation:gs(this,My(t.animation),e),options:Yd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Yd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Yd(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function jxe(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Bxe,"")),n=n.replace(/@\*/g,LC).replace(/@\w+/g,e=>LC+"-"+e.slice(1)).replace(/:animating/g,rO),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,ms(e.collectedStyles,e.currentQuerySelector,new Map);const a=gs(this,My(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Yd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function oxe(){return new z(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:VC(t.timings,e.errors,!0);return{type:12,animation:gs(this,My(t.animation),e),timings:i,options:null}}}class $xe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Yd(n){return n?(n=Ny(n)).params&&(n.params=function Hxe(n){return n?Ny(n):null}(n.params)):n={},n}function cO(n,t,e){return{duration:n,delay:t,easing:e}}function uO(n,t,e,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class $C{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Kxe=new RegExp(":enter","g"),Yxe=new RegExp(":leave","g");function dO(n,t,e,i,r,o=new Map,s=new Map,a,l,c=[]){return(new Qxe).buildKeyframes(n,t,e,i,r,o,s,a,l,c)}class Qxe{buildKeyframes(t,e,i,r,o,s,a,l,c,u=[]){c=c||new $C;const f=new hO(t,e,c,r,o,u,[]);f.options=l;const g=l.delay?zl(l.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([s],null,f.errors,l),gs(this,i,f);const _=f.timelines.filter(y=>y.containsAnimation());if(_.length&&a.size){let y;for(let b=_.length-1;b>=0;b--){const C=_[b];if(C.element===e){y=C;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,f.errors,l)}return _.length?_.map(y=>y.buildKeyframes()):[uO(e,[],[],[],0,g,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:zl(ky(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime;const s=null!=i.duration?zl(i.duration):null,a=null!=i.delay?zl(i.delay):null;return 0!==s&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),gs(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=zC);const s=zl(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>gs(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?zl(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),gs(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return VC(e.params?ky(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?zl(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=zC);let s=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const f=e.createSubContext(t.options,c);o&&f.delayNextStep(o),c===e.element&&(l=f.currentTimeline),gs(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const f=u.currentTime;gs(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const zC={};class hO{constructor(t,e,i,r,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new GC(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=zl(i.duration)),null!=i.delay&&(r.delay=zl(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=ky(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,o=new hO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=zC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new Jxe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Kxe,"."+this._enterClassName)).replace(Yxe,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function sxe(n){return new z(3014,!1)}()),a}}class GC{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new GC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Ml),this._currentKeyframe.set(e,Ml);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},s=function Xxe(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)e.set(o,Ml)}else pu(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of s){const c=ky(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ml),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=pu(a,new Map,this._backFill);c.forEach((u,f)=>{"!"===u?t.add(f):u===Ml&&e.add(f)}),i||c.set("offset",l/this.duration),r.push(c)});const o=t.size?BC(t.values()):[],s=e.size?BC(e.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return uO(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class Jxe extends GC{constructor(t,e,i,r,o,s,a=!1){super(t,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=i+e,a=e/s,l=pu(t[0]);l.set("offset",0),o.push(l);const c=pu(t[0]);c.set("offset",B9(a)),o.push(c);const u=t.length-1;for(let f=1;f<=u;f++){let g=pu(t[f]);const _=g.get("offset");g.set("offset",B9((e+_*i)/s)),o.push(g)}i=s,e=0,r="",t=o}return uO(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function B9(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class fO{}const eDe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class tDe extends fO{normalizePropertyName(t,e){return aO(t)}normalizeStyleValue(t,e,i,r){let o="";const s=i.toString().trim();if(eDe.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ZIe(n,t){return new z(3005,!1)}())}return s+o}}function U9(n,t,e,i,r,o,s,a,l,c,u,f,g){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:f,errors:g}}const pO={};class j9{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function nDe(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,o,s,a,l,c,u){const f=[],g=this.ast.options&&this.ast.options.params||pO,y=this.buildStyles(i,a&&a.params||pO,f),b=l&&l.params||pO,C=this.buildStyles(r,b,f),O=new Set,S=new Map,V=new Map,W="void"===r,ae={params:iDe(b,g),delay:this.ast.options?.delay},Ie=u?[]:dO(t,e,this.ast.animation,o,s,y,C,ae,c,f);let Ve=0;if(Ie.forEach(hn=>{Ve=Math.max(hn.duration+hn.delay,Ve)}),f.length)return U9(e,this._triggerName,i,r,W,y,C,[],[],S,V,Ve,f);Ie.forEach(hn=>{const fn=hn.element,Hi=ms(S,fn,new Set);hn.preStyleProps.forEach(Ci=>Hi.add(Ci));const Hr=ms(V,fn,new Set);hn.postStyleProps.forEach(Ci=>Hr.add(Ci)),fn!==e&&O.add(fn)});const rt=BC(O.values());return U9(e,this._triggerName,i,r,W,y,C,Ie,rt,S,V,Ve)}}function iDe(n,t){const e=Ny(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class rDe{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=Ny(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=ky(s,r,e));const l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),i.set(a,s)})}),i}}class sDe{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new rDe(r.style,r.options&&r.options.params||{},i))}),H9(this.states,"true","1"),H9(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new j9(t,r,this.states))}),this.fallbackTransition=function aDe(n,t,e){return new j9(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(s=>s.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function H9(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const lDe=new $C;class cDe{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],o=lO(this._driver,e,i,[]);if(i.length)throw function fxe(n){return new z(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,i){const r=t.element,o=C9(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=dO(this._driver,e,o,iO,PC,new Map,new Map,i,lDe,r),s.forEach(u=>{const f=ms(a,u.element,new Map);u.postStyleProps.forEach(g=>f.set(g,null))})):(r.push(function pxe(){return new z(3300,!1)}()),s=[]),r.length)throw function mxe(n){return new z(3504,!1)}();a.forEach((u,f)=>{u.forEach((g,_)=>{u.set(_,this._driver.computeStyle(f,_,Ml))})});const c=fu(s.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function gxe(n){return new z(3301,!1)}();return e}listen(t,e,i,r){const o=eO(e,"","","");return Jk(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const $9="ng-animate-queued",mO="ng-animate-disabled",pDe=[],z9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},mDe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ha="__ng_removed";class gO{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function yDe(n){return n??null}(i?t.value:t),i){const o=Ny(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Oy="void",_O=new gO(Oy);class gDe{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Bs(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function _xe(n,t){return new z(3302,!1)}();if(null==i||0==i.length)throw function vxe(n){return new z(3303,!1)}();if(!function bDe(n){return"start"==n||"done"==n}(i))throw function yxe(n,t){return new z(3400,!1)}();const o=ms(this._elementListeners,t,[]),s={name:e,phase:i,callback:r};o.push(s);const a=ms(this._engine.statesByElement,t,new Map);return a.has(e)||(Bs(t,FC),Bs(t,FC+"-"+e),a.set(e,_O)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function bxe(n){return new z(3401,!1)}();return e}trigger(t,e,i,r=!0){const o=this._getTrigger(e),s=new vO(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Bs(t,FC),Bs(t,FC+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new gO(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=_O),c.value!==Oy&&l.value===c.value){if(!function TDe(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(l.params,c.params)){const b=[],C=o.matchStyles(l.value,l.params,b),O=o.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Zd(t,C),Ja(t,O)})}return}const g=ms(this._engine.playersByElement,t,[]);g.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let _=o.matchTransition(l.value,c.value,t,c.params),y=!1;if(!_){if(!r)return;_=o.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:_,fromState:l,toState:c,player:s,isFallbackTransition:y}),y||(Bs(t,$9),s.onStart(()=>{rm(t,$9)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);const C=this._engine.playersByElement.get(t);if(C){let O=C.indexOf(s);O>=0&&C.splice(O,1)}}),this.players.push(s),g.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,LC,!0);i.forEach(r=>{if(r[ha])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(t,c,Oy,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),i&&fu(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||_O,u=new gO(Oy),f=new vO(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const o=t[ha];(!o||o===z9)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Bs(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=eO(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,Jk(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class _De{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new gDe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(t,e,i,r){if(WC(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!WC(e))return;const o=e[ha];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Bs(t,mO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),rm(t,mO))}removeNode(t,e,i){if(WC(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[ha]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return WC(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,LC,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,rO,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return fu(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ha];if(e&&e.setForRemoval){if(t[ha]=z9,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(mO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Bs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?fu(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Exe(n){return new z(3402,!1)}()}_flushAnimations(t,e){const i=new $C,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Oe=>{u.add(Oe);const ze=this.driver.query(Oe,".ng-animate-queued",!0);for(let st=0;st<ze.length;st++)u.add(ze[st])});const f=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=q9(g,this.collectedEnterElements),y=new Map;let b=0;_.forEach((Oe,ze)=>{const st=iO+b++;y.set(ze,st),Oe.forEach(Ot=>Bs(Ot,st))});const C=[],O=new Set,S=new Set;for(let Oe=0;Oe<this.collectedLeaveElements.length;Oe++){const ze=this.collectedLeaveElements[Oe],st=ze[ha];st&&st.setForRemoval&&(C.push(ze),O.add(ze),st.hasAnimation?this.driver.query(ze,".ng-star-inserted",!0).forEach(Ot=>O.add(Ot)):S.add(ze))}const V=new Map,W=q9(g,Array.from(O));W.forEach((Oe,ze)=>{const st=PC+b++;V.set(ze,st),Oe.forEach(Ot=>Bs(Ot,st))}),t.push(()=>{_.forEach((Oe,ze)=>{const st=y.get(ze);Oe.forEach(Ot=>rm(Ot,st))}),W.forEach((Oe,ze)=>{const st=V.get(ze);Oe.forEach(Ot=>rm(Ot,st))}),C.forEach(Oe=>{this.processLeaveNode(Oe)})});const ae=[],Ie=[];for(let Oe=this._namespaceList.length-1;Oe>=0;Oe--)this._namespaceList[Oe].drainQueuedTransitions(e).forEach(st=>{const Ot=st.player,Ii=st.element;if(ae.push(Ot),this.collectedEnterElements.length){const $i=Ii[ha];if($i&&$i.setForMove){if($i.previousTriggersValues&&$i.previousTriggersValues.has(st.triggerName)){const Do=$i.previousTriggersValues.get(st.triggerName),io=this.statesByElement.get(st.element);if(io&&io.has(st.triggerName)){const om=io.get(st.triggerName);om.value=Do,io.set(st.triggerName,om)}}return void Ot.destroy()}}const Wo=!f||!this.driver.containsElement(f,Ii),cr=V.get(Ii),_s=y.get(Ii),Nn=this._buildInstruction(st,i,_s,cr,Wo);if(Nn.errors&&Nn.errors.length)return void Ie.push(Nn);if(Wo)return Ot.onStart(()=>Zd(Ii,Nn.fromStyles)),Ot.onDestroy(()=>Ja(Ii,Nn.toStyles)),void r.push(Ot);if(st.isFallbackTransition)return Ot.onStart(()=>Zd(Ii,Nn.fromStyles)),Ot.onDestroy(()=>Ja(Ii,Nn.toStyles)),void r.push(Ot);const fa=[];Nn.timelines.forEach($i=>{$i.stretchStartingKeyframe=!0,this.disabledNodes.has($i.element)||fa.push($i)}),Nn.timelines=fa,i.append(Ii,Nn.timelines),s.push({instruction:Nn,player:Ot,element:Ii}),Nn.queriedElements.forEach($i=>ms(a,$i,[]).push(Ot)),Nn.preStyleProps.forEach(($i,Do)=>{if($i.size){let io=l.get(Do);io||l.set(Do,io=new Set),$i.forEach((om,Jd)=>io.add(Jd))}}),Nn.postStyleProps.forEach(($i,Do)=>{let io=c.get(Do);io||c.set(Do,io=new Set),$i.forEach((om,Jd)=>io.add(Jd))})});if(Ie.length){const Oe=[];Ie.forEach(ze=>{Oe.push(function wxe(n,t){return new z(3505,!1)}())}),ae.forEach(ze=>ze.destroy()),this.reportError(Oe)}const Ve=new Map,rt=new Map;s.forEach(Oe=>{const ze=Oe.element;i.has(ze)&&(rt.set(ze,ze),this._beforeAnimationBuild(Oe.player.namespaceId,Oe.instruction,Ve))}),r.forEach(Oe=>{const ze=Oe.element;this._getPreviousPlayers(ze,!1,Oe.namespaceId,Oe.triggerName,null).forEach(Ot=>{ms(Ve,ze,[]).push(Ot),Ot.destroy()})});const hn=C.filter(Oe=>Z9(Oe,l,c)),fn=new Map;W9(fn,this.driver,S,c,Ml).forEach(Oe=>{Z9(Oe,l,c)&&hn.push(Oe)});const Hr=new Map;_.forEach((Oe,ze)=>{W9(Hr,this.driver,new Set(Oe),l,"!")}),hn.forEach(Oe=>{const ze=fn.get(Oe),st=Hr.get(Oe);fn.set(Oe,new Map([...ze?.entries()??[],...st?.entries()??[]]))});const Ci=[],Xa=[],el={};s.forEach(Oe=>{const{element:ze,player:st,instruction:Ot}=Oe;if(i.has(ze)){if(u.has(ze))return st.onDestroy(()=>Ja(ze,Ot.toStyles)),st.disabled=!0,st.overrideTotalTime(Ot.totalTime),void r.push(st);let Ii=el;if(rt.size>1){let cr=ze;const _s=[];for(;cr=cr.parentNode;){const Nn=rt.get(cr);if(Nn){Ii=Nn;break}_s.push(cr)}_s.forEach(Nn=>rt.set(Nn,Ii))}const Wo=this._buildAnimation(st.namespaceId,Ot,Ve,o,Hr,fn);if(st.setRealPlayer(Wo),Ii===el)Ci.push(st);else{const cr=this.playersByElement.get(Ii);cr&&cr.length&&(st.parentPlayer=fu(cr)),r.push(st)}}else Zd(ze,Ot.fromStyles),st.onDestroy(()=>Ja(ze,Ot.toStyles)),Xa.push(st),u.has(ze)&&r.push(st)}),Xa.forEach(Oe=>{const ze=o.get(Oe.element);if(ze&&ze.length){const st=fu(ze);Oe.setRealPlayer(st)}}),r.forEach(Oe=>{Oe.parentPlayer?Oe.syncPlayerEvents(Oe.parentPlayer):Oe.destroy()});for(let Oe=0;Oe<C.length;Oe++){const ze=C[Oe],st=ze[ha];if(rm(ze,PC),st&&st.hasAnimation)continue;let Ot=[];if(a.size){let Wo=a.get(ze);Wo&&Wo.length&&Ot.push(...Wo);let cr=this.driver.query(ze,rO,!0);for(let _s=0;_s<cr.length;_s++){let Nn=a.get(cr[_s]);Nn&&Nn.length&&Ot.push(...Nn)}}const Ii=Ot.filter(Wo=>!Wo.destroyed);Ii.length?EDe(this,ze,Ii):this.processLeaveNode(ze)}return C.length=0,Ci.forEach(Oe=>{this.players.push(Oe),Oe.onDone(()=>{Oe.destroy();const ze=this.players.indexOf(Oe);this.players.splice(ze,1)}),Oe.play()}),Ci}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==Oy;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,e,i){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==o,f=ms(i,c,[]);this._getPreviousPlayers(c,u,s,a,e.toState).forEach(_=>{const y=_.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),_.destroy(),f.push(_)})}Zd(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,s){const a=e.triggerName,l=e.element,c=[],u=new Set,f=new Set,g=e.timelines.map(y=>{const b=y.element;u.add(b);const C=b[ha];if(C&&C.removedBeforeQueried)return new nv(y.duration,y.delay);const O=b!==l,S=function wDe(n){const t=[];return K9(n,t),t}((i.get(b)||pDe).map(Ve=>Ve.getRealPlayer())).filter(Ve=>!!Ve.element&&Ve.element===b),V=o.get(b),W=s.get(b),ae=C9(this._normalizer,y.keyframes,V,W),Ie=this._buildPlayer(y,ae,S);if(y.subTimeline&&r&&f.add(b),O){const Ve=new vO(t,a,b);Ve.setRealPlayer(Ie),c.push(Ve)}return Ie});c.forEach(y=>{ms(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>function vDe(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,y.element,y))}),u.forEach(y=>Bs(y,N9));const _=fu(g);return _.onDestroy(()=>{u.forEach(y=>rm(y,N9)),Ja(l,e.toStyles)}),f.forEach(y=>{ms(r,y,[]).push(_)}),_}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new nv(t.duration,t.delay)}}class vO{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new nv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>Jk(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ms(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function WC(n){return n&&1===n.nodeType}function G9(n,t){const e=n.style.display;return n.style.display=t??"none",e}function W9(n,t,e,i,r){const o=[];e.forEach(l=>o.push(G9(l)));const s=[];i.forEach((l,c)=>{const u=new Map;l.forEach(f=>{const g=t.computeStyle(c,f,r);u.set(f,g),(!g||0==g.length)&&(c[ha]=mDe,s.push(c))}),n.set(c,u)});let a=0;return e.forEach(l=>G9(l,o[a++])),s}function q9(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&e.get(l).push(a)}),e}function Bs(n,t){n.classList?.add(t)}function rm(n,t){n.classList?.remove(t)}function EDe(n,t,e){fu(e).onDone(()=>n.processLeaveNode(t))}function K9(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof g3?K9(i.players,t):t.push(i)}}function Z9(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}class qC{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new _De(t,e,i),this._timelineEngine=new cDe(t,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],u=lO(this._driver,o,l,[]);if(l.length)throw function dxe(n,t){return new z(3404,!1)}();a=function oDe(n,t,e){return new sDe(n,t,e)}(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[o,s]=I9(i);this._timelineEngine.command(o,e,s,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if("@"==i.charAt(0)){const[s,a]=I9(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let IDe=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ja(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ja(this._element,this._initialStyles),this._endStyles&&(Ja(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zd(this._element,this._endStyles),this._endStyles=null),Ja(this._element,this._initialStyles),this._state=3)}}return n})();function yO(n){let t=null;return n.forEach((e,i)=>{(function xDe(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class Y9{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:P9(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class DDe{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return D9(t,e)}getParentElement(t){return tO(t)}query(t,e,i){return S9(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,u=s.filter(_=>_ instanceof Y9);(function Oxe(n,t){return 0===n||0===t})(i,r)&&u.forEach(_=>{_.currentSnapshot.forEach((y,b)=>c.set(b,y))});let f=function Nxe(n){return n.length?n[0]instanceof Map?n:n.map(t=>M9(t)):[]}(e).map(_=>pu(_));f=function Pxe(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,P9(n,a)))}}return t}(t,f,c);const g=function CDe(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=yO(t[0]),t.length>1&&(i=yO(t[t.length-1]))):t instanceof Map&&(e=yO(t)),e||i?new IDe(n,e,i):null}(t,f);return new Y9(t,f,l,g)}}let SDe=(()=>{class n extends f3{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Ro.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?m3(e):e;return Q9(this._renderer,null,i,"register",[r]),new ADe(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(P(Xh),P(Tt))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();class ADe extends tfe{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new RDe(this._id,t,e||{},this._renderer)}}class RDe{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Q9(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Q9(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const J9="@.disabled";let NDe=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,i){const o=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(o);return u||(u=new X9("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,u)),u}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,e,u.name,u)};return i.data.animation.forEach(l),new MDe(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(P(Xh),P(qC),P(We))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();class X9{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==J9?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class MDe extends X9{constructor(t,e,i,r,o){super(e,i,r,o),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==J9?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function kDe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function ODe(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}let PDe=(()=>{class n extends qC{constructor(e,i,r,o){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(P(Tt),P(nO),P(fO),P(ka))};static#t=this.\u0275prov=he({token:n,factory:n.\u0275fac})}return n})();const eK=[{provide:f3,useClass:SDe},{provide:fO,useFactory:function FDe(){return new tDe}},{provide:qC,useClass:PDe},{provide:Xh,useFactory:function LDe(n,t,e){return new NDe(n,t,e)},deps:[bS,qC,We]}],bO=[{provide:nO,useFactory:()=>new DDe},{provide:Sa,useValue:"BrowserAnimations"},...eK],tK=[{provide:nO,useClass:A9},{provide:Sa,useValue:"NoopAnimations"},...eK];let VDe=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?tK:bO}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n});static#n=this.\u0275inj=tt({providers:bO,imports:[sU]})}return n})(),BDe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=nt({type:n,bootstrap:[$Ie]});static#n=this.\u0275inj=tt({imports:[sU,dge,vIe,zre,_he,kae.initializeApp(W0e_firebaseConfig),qde,Vae,G0e,VDe,aR,lge,Spe,CIe,LIe,Ppe,Bme]})}return n})();kie().bootstrapModule(BDe).catch(n=>console.error(n))},614:()=>{const $r=":";const pn=function(j,...B){if(pn.translate){const ue=pn.translate(j,B);j=ue[0],B=ue[1]}let Q=oi(j[0],j.raw[0]);for(let ue=1;ue<j.length;ue++)Q+=B[ue-1]+oi(j[ue],j.raw[ue]);return Q},Ln=":";function oi(j,B){return B.charAt(0)===Ln?j.substring(function X(j,B){for(let Q=1,ue=1;Q<j.length;Q++,ue++)if("\\"===B[ue])ue++;else if(j[Q]===$r)return Q;throw new Error(`Unterminated $localize metadata block in "${B}".`)}(j,B)+1):j}globalThis.$localize=pn},106:($r,hi,et)=>{et.d(hi,{Z:()=>Hn});var D=et(58),ee=et(537),U=et(534),Ge=et(879);class yt{constructor(ct,ut){this._delegate=ct,this.firebase=ut,(0,U._addComponent)(ct,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ct){this._delegate.automaticDataCollectionEnabled=ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ct=>{this._delegate.checkDestroyed(),ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ct,ut=U._DEFAULT_ENTRY_NAME){var fi;this._delegate.checkDestroyed();const $n=this._delegate.container.getProvider(ct);return!$n.isInitialized()&&"EXPLICIT"===(null===(fi=$n.getComponent())||void 0===fi?void 0:fi.instantiationMode)&&$n.initialize(),$n.getImmediate({identifier:ut})}_removeServiceInstance(ct,ut=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ct).clearInstance(ut)}_addComponent(ct){(0,U._addComponent)(this._delegate,ct)}_addOrOverwriteComponent(ct){(0,U._addOrOverwriteComponent)(this._delegate,ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ri=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function Gt(){const Pt=function Tn(Pt){const ct={},ut={__esModule:!0,initializeApp:function xt(_t,ve={}){const Vt=U.initializeApp(_t,ve);if((0,D.r3)(ct,Vt.name))return ct[Vt.name];const Cn=new Pt(Vt,ut);return ct[Vt.name]=Cn,Cn},app:$n,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function ur(_t){const ve=_t.name,Vt=ve.replace("-compat","");if(U._registerComponent(_t)&&"PUBLIC"===_t.type){const Cn=(Kn=$n())=>{if("function"!=typeof Kn[Vt])throw ri.create("invalid-app-argument",{appName:ve});return Kn[Vt]()};void 0!==_t.serviceProps&&(0,D.ZB)(Cn,_t.serviceProps),ut[Vt]=Cn,Pt.prototype[Vt]=function(...Kn){return this._getService.bind(this,ve).apply(this,_t.multipleInstances?Kn:[])}}return"PUBLIC"===_t.type?ut[Vt]:null},removeApp:function fi(_t){delete ct[_t]},useAsService:function pi(_t,ve){return"serverAuth"===ve?null:ve},modularAPIs:U}};function $n(_t){if(!(0,D.r3)(ct,_t=_t||U._DEFAULT_ENTRY_NAME))throw ri.create("no-app",{appName:_t});return ct[_t]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function Ft(){return Object.keys(ct).map(_t=>ct[_t])}}),$n.App=Pt,ut}(yt);return Pt.INTERNAL=Object.assign(Object.assign({},Pt.INTERNAL),{createFirebaseNamespace:Gt,extendNamespace:function ct(ut){(0,D.ZB)(Pt,ut)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Pt}(),Ee=new Ge.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Hn=ce;!function en(Pt){(0,U.registerVersion)("@firebase/app-compat","0.2.22",Pt)}()},534:($r,hi,et)=>{et.r(hi),et.d(hi,{FirebaseError:()=>Ge.ZR,SDK_VERSION:()=>qo,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>zi,_addOrOverwriteComponent:()=>Ji,_apps:()=>Zn,_clearComponents:()=>mn,_components:()=>Pi,_getProvider:()=>qt,_registerComponent:()=>yn,_removeServiceInstance:()=>an,deleteApp:()=>xi,getApp:()=>Ko,getApps:()=>Fi,initializeApp:()=>ao,onLog:()=>Gl,registerVersion:()=>lo,setLogLevel:()=>pa});var D=et(861),ee=et(537),U=et(879),Ge=et(58);const yt=(H,F)=>F.some(Te=>H instanceof Te);let jn,ri;const ce=new WeakMap,Ee=new WeakMap,He=new WeakMap,ft=new WeakMap,en=new WeakMap;let ct={get(H,F,Te){if(H instanceof IDBTransaction){if("done"===F)return Ee.get(H);if("objectStoreNames"===F)return H.objectStoreNames||He.get(H);if("store"===F)return Te.objectStoreNames[1]?void 0:Te.objectStore(Te.objectStoreNames[0])}return xt(H[F])},set:(H,F,Te)=>(H[F]=Te,!0),has:(H,F)=>H instanceof IDBTransaction&&("done"===F||"store"===F)||F in H};function $n(H){return"function"==typeof H?function fi(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Gt(){return ri||(ri=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...F){return H.apply(Ft(this),F),xt(ce.get(this))}:function(...F){return xt(H.apply(Ft(this),F))}:function(F,...Te){const qe=H.call(Ft(this),F,...Te);return He.set(qe,F.sort?F.sort():[F]),xt(qe)}}(H):(H instanceof IDBTransaction&&function Pt(H){if(Ee.has(H))return;const F=new Promise((Te,qe)=>{const bt=()=>{H.removeEventListener("complete",Mt),H.removeEventListener("error",z),H.removeEventListener("abort",z)},Mt=()=>{Te(),bt()},z=()=>{qe(H.error||new DOMException("AbortError","AbortError")),bt()};H.addEventListener("complete",Mt),H.addEventListener("error",z),H.addEventListener("abort",z)});Ee.set(H,F)}(H),yt(H,function Tn(){return jn||(jn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,ct):H)}function xt(H){if(H instanceof IDBRequest)return function Hn(H){const F=new Promise((Te,qe)=>{const bt=()=>{H.removeEventListener("success",Mt),H.removeEventListener("error",z)},Mt=()=>{Te(xt(H.result)),bt()},z=()=>{qe(H.error),bt()};H.addEventListener("success",Mt),H.addEventListener("error",z)});return F.then(Te=>{Te instanceof IDBCursor&&ce.set(Te,H)}).catch(()=>{}),en.set(F,H),F}(H);if(ft.has(H))return ft.get(H);const F=$n(H);return F!==H&&(ft.set(H,F),en.set(F,H)),F}const Ft=H=>en.get(H),_t=["get","getKey","getAll","getAllKeys","count"],ve=["put","add","delete","clear"],Vt=new Map;function Cn(H,F){if(!(H instanceof IDBDatabase)||F in H||"string"!=typeof F)return;if(Vt.get(F))return Vt.get(F);const Te=F.replace(/FromIndex$/,""),qe=F!==Te,bt=ve.includes(Te);if(!(Te in(qe?IDBIndex:IDBObjectStore).prototype)||!bt&&!_t.includes(Te))return;const Mt=function(){var z=(0,D.Z)(function*(Di,...$e){const Ut=this.transaction(Di,bt?"readwrite":"readonly");let rl=Ut.store;return qe&&(rl=rl.index($e.shift())),(yield Promise.all([rl[Te](...$e),bt&&Ut.done]))[0]});return function($e){return z.apply(this,arguments)}}();return Vt.set(F,Mt),Mt}!function ut(H){ct=H(ct)}(H=>({...H,get:(F,Te,qe)=>Cn(F,Te)||H.get(F,Te,qe),has:(F,Te)=>!!Cn(F,Te)||H.has(F,Te)}));class Kn{constructor(F){this.container=F}getPlatformInfoString(){return this.container.getProviders().map(Te=>{if(function zn(H){const F=H.getComponent();return"VERSION"===F?.type}(Te)){const qe=Te.getImmediate();return`${qe.library}/${qe.version}`}return null}).filter(Te=>Te).join(" ")}}const ro="@firebase/app",it=new U.Yd("@firebase/app"),Nt="[DEFAULT]",xn={[ro]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zn=new Map,Pi=new Map;function zi(H,F){try{H.container.addComponent(F)}catch(Te){it.debug(`Component ${F.name} failed to register with FirebaseApp ${H.name}`,Te)}}function Ji(H,F){H.container.addOrOverwriteComponent(F)}function yn(H){const F=H.name;if(Pi.has(F))return it.debug(`There were multiple attempts to register component ${F}.`),!1;Pi.set(F,H);for(const Te of Zn.values())zi(Te,H);return!0}function qt(H,F){const Te=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Te&&Te.triggerHeartbeat(),H.container.getProvider(F)}function an(H,F,Te=Nt){qt(H,F).clearInstance(Te)}function mn(){Pi.clear()}const Vn=new Ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gn{constructor(F,Te,qe){this._isDeleted=!1,this._options=Object.assign({},F),this._config=Object.assign({},Te),this._name=Te.name,this._automaticDataCollectionEnabled=Te.automaticDataCollectionEnabled,this._container=qe,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(F){this.checkDestroyed(),this._automaticDataCollectionEnabled=F}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(F){this._isDeleted=F}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const qo="10.5.2";function ao(H,F={}){let Te=H;"object"!=typeof F&&(F={name:F});const qe=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},F),bt=qe.name;if("string"!=typeof bt||!bt)throw Vn.create("bad-app-name",{appName:String(bt)});if(Te||(Te=(0,Ge.aH)()),!Te)throw Vn.create("no-options");const Mt=Zn.get(bt);if(Mt){if((0,Ge.vZ)(Te,Mt.options)&&(0,Ge.vZ)(qe,Mt.config))return Mt;throw Vn.create("duplicate-app",{appName:bt})}const z=new ee.H0(bt);for(const $e of Pi.values())z.addComponent($e);const Di=new Gn(Te,qe,z);return Zn.set(bt,Di),Di}function Ko(H=Nt){const F=Zn.get(H);if(!F&&H===Nt&&(0,Ge.aH)())return ao();if(!F)throw Vn.create("no-app",{appName:H});return F}function Fi(){return Array.from(Zn.values())}function xi(H){return hr.apply(this,arguments)}function hr(){return(hr=(0,D.Z)(function*(H){const F=H.name;Zn.has(F)&&(Zn.delete(F),yield Promise.all(H.container.getProviders().map(Te=>Te.delete())),H.isDeleted=!0)})).apply(this,arguments)}function lo(H,F,Te){var qe;let bt=null!==(qe=xn[H])&&void 0!==qe?qe:H;Te&&(bt+=`-${Te}`);const Mt=bt.match(/\s|\//),z=F.match(/\s|\//);if(Mt||z){const Di=[`Unable to register library "${bt}" with version "${F}":`];return Mt&&Di.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),Mt&&z&&Di.push("and"),z&&Di.push(`version name "${F}" contains illegal characters (whitespace or "/")`),void it.warn(Di.join(" "))}yn(new ee.wA(`${bt}-version`,()=>({library:bt,version:F}),"VERSION"))}function Gl(H,F){if(null!==H&&"function"!=typeof H)throw Vn.create("invalid-log-argument");(0,U.Am)(H,F)}function pa(H){(0,U.Ub)(H)}const nl="firebase-heartbeat-database",vs=1,k="firebase-heartbeat-store";let R=null;function w(){return R||(R=function ur(H,F,{blocked:Te,upgrade:qe,blocking:bt,terminated:Mt}={}){const z=indexedDB.open(H,F),Di=xt(z);return qe&&z.addEventListener("upgradeneeded",$e=>{qe(xt(z.result),$e.oldVersion,$e.newVersion,xt(z.transaction),$e)}),Te&&z.addEventListener("blocked",$e=>Te($e.oldVersion,$e.newVersion,$e)),Di.then($e=>{Mt&&$e.addEventListener("close",()=>Mt()),bt&&$e.addEventListener("versionchange",Ut=>bt(Ut.oldVersion,Ut.newVersion,Ut))}).catch(()=>{}),Di}(nl,vs,{upgrade:(H,F)=>{0===F&&H.createObjectStore(k)}}).catch(H=>{throw Vn.create("idb-open",{originalErrorMessage:H.message})})),R}function E(){return(E=(0,D.Z)(function*(H){try{return yield(yield w()).transaction(k).objectStore(k).get(Fe(H))}catch(F){if(F instanceof Ge.ZR)it.warn(F.message);else{const Te=Vn.create("idb-get",{originalErrorMessage:F?.message});it.warn(Te.message)}}})).apply(this,arguments)}function M(H,F){return oe.apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(H,F){try{const qe=(yield w()).transaction(k,"readwrite");yield qe.objectStore(k).put(F,Fe(H)),yield qe.done}catch(Te){if(Te instanceof Ge.ZR)it.warn(Te.message);else{const qe=Vn.create("idb-set",{originalErrorMessage:Te?.message});it.warn(qe.message)}}})).apply(this,arguments)}function Fe(H){return`${H.name}!${H.options.appId}`}class _n{constructor(F){this.container=F,this._heartbeatsCache=null;const Te=this.container.getProvider("app").getImmediate();this._storage=new Ze(Te),this._heartbeatsCachePromise=this._storage.read().then(qe=>(this._heartbeatsCache=qe,qe))}triggerHeartbeat(){var F=this;return(0,D.Z)(function*(){const qe=F.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=Me();if(null===F._heartbeatsCache&&(F._heartbeatsCache=yield F._heartbeatsCachePromise),F._heartbeatsCache.lastSentHeartbeatDate!==bt&&!F._heartbeatsCache.heartbeats.some(Mt=>Mt.date===bt))return F._heartbeatsCache.heartbeats.push({date:bt,agent:qe}),F._heartbeatsCache.heartbeats=F._heartbeatsCache.heartbeats.filter(Mt=>{const z=new Date(Mt.date).valueOf();return Date.now()-z<=2592e6}),F._storage.overwrite(F._heartbeatsCache)})()}getHeartbeatsHeader(){var F=this;return(0,D.Z)(function*(){if(null===F._heartbeatsCache&&(yield F._heartbeatsCachePromise),null===F._heartbeatsCache||0===F._heartbeatsCache.heartbeats.length)return"";const Te=Me(),{heartbeatsToSend:qe,unsentEntries:bt}=function Dn(H,F=1024){const Te=[];let qe=H.slice();for(const bt of H){const Mt=Te.find(z=>z.agent===bt.agent);if(Mt){if(Mt.dates.push(bt.date),Li(Te)>F){Mt.dates.pop();break}}else if(Te.push({agent:bt.agent,dates:[bt.date]}),Li(Te)>F){Te.pop();break}qe=qe.slice(1)}return{heartbeatsToSend:Te,unsentEntries:qe}}(F._heartbeatsCache.heartbeats),Mt=(0,Ge.L)(JSON.stringify({version:2,heartbeats:qe}));return F._heartbeatsCache.lastSentHeartbeatDate=Te,bt.length>0?(F._heartbeatsCache.heartbeats=bt,yield F._storage.overwrite(F._heartbeatsCache)):(F._heartbeatsCache.heartbeats=[],F._storage.overwrite(F._heartbeatsCache)),Mt})()}}function Me(){return(new Date).toISOString().substring(0,10)}class Ze{constructor(F){this.app=F,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Ge.hl)()&&(0,Ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var F=this;return(0,D.Z)(function*(){return(yield F._canUseIndexedDBPromise)&&(yield function I(H){return E.apply(this,arguments)}(F.app))||{heartbeats:[]}})()}overwrite(F){var Te=this;return(0,D.Z)(function*(){var qe;if(yield Te._canUseIndexedDBPromise){const Mt=yield Te.read();return M(Te.app,{lastSentHeartbeatDate:null!==(qe=F.lastSentHeartbeatDate)&&void 0!==qe?qe:Mt.lastSentHeartbeatDate,heartbeats:F.heartbeats})}})()}add(F){var Te=this;return(0,D.Z)(function*(){var qe;if(yield Te._canUseIndexedDBPromise){const Mt=yield Te.read();return M(Te.app,{lastSentHeartbeatDate:null!==(qe=F.lastSentHeartbeatDate)&&void 0!==qe?qe:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...F.heartbeats]})}})()}}function Li(H){return(0,Ge.L)(JSON.stringify({version:2,heartbeats:H})).length}!function il(H){yn(new ee.wA("platform-logger",F=>new Kn(F),"PRIVATE")),yn(new ee.wA("heartbeat",F=>new _n(F),"PRIVATE")),lo(ro,"0.9.22",H),lo(ro,"0.9.22","esm2017"),lo("fire-js","")}("")},537:($r,hi,et)=>{et.d(hi,{H0:()=>Tn,wA:()=>U,zt:()=>yt});var D=et(861),ee=et(58);class U{constructor(ce,Ee,He){this.name=ce,this.instanceFactory=Ee,this.type=He,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const Ge="[DEFAULT]";class yt{constructor(ce,Ee){this.name=ce,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const Ee=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(Ee)){const He=new ee.BH;if(this.instancesDeferred.set(Ee,He),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const ft=this.getOrInitializeService({instanceIdentifier:Ee});ft&&He.resolve(ft)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(ce){var Ee;const He=this.normalizeInstanceIdentifier(ce?.identifier),ft=null!==(Ee=ce?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(He)&&!this.shouldAutoInitialize()){if(ft)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:He})}catch(en){if(ft)return null;throw en}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function ri(Gt){return"EAGER"===Gt.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch{}for(const[Ee,He]of this.instancesDeferred.entries()){const ft=this.normalizeInstanceIdentifier(Ee);try{const en=this.getOrInitializeService({instanceIdentifier:ft});He.resolve(en)}catch{}}}}clearInstance(ce=Ge){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,D.Z)(function*(){const Ee=Array.from(ce.instances.values());yield Promise.all([...Ee.filter(He=>"INTERNAL"in He).map(He=>He.INTERNAL.delete()),...Ee.filter(He=>"_delete"in He).map(He=>He._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=Ge){return this.instances.has(ce)}getOptions(ce=Ge){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:Ee={}}=ce,He=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(He))throw Error(`${this.name}(${He}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ft=this.getOrInitializeService({instanceIdentifier:He,options:Ee});for(const[en,Hn]of this.instancesDeferred.entries())He===this.normalizeInstanceIdentifier(en)&&Hn.resolve(ft);return ft}onInit(ce,Ee){var He;const ft=this.normalizeInstanceIdentifier(Ee),en=null!==(He=this.onInitCallbacks.get(ft))&&void 0!==He?He:new Set;en.add(ce),this.onInitCallbacks.set(ft,en);const Hn=this.instances.get(ft);return Hn&&ce(Hn,ft),()=>{en.delete(ce)}}invokeOnInitCallbacks(ce,Ee){const He=this.onInitCallbacks.get(Ee);if(He)for(const ft of He)try{ft(ce,Ee)}catch{}}getOrInitializeService({instanceIdentifier:ce,options:Ee={}}){let He=this.instances.get(ce);if(!He&&this.component&&(He=this.component.instanceFactory(this.container,{instanceIdentifier:(Gt=ce,Gt===Ge?void 0:Gt),options:Ee}),this.instances.set(ce,He),this.instancesOptions.set(ce,Ee),this.invokeOnInitCallbacks(He,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,He)}catch{}var Gt;return He||null}normalizeInstanceIdentifier(ce=Ge){return this.component?this.component.multipleInstances?ce:Ge:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Tn{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const Ee=this.getProvider(ce.name);if(Ee.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);Ee.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const Ee=new yt(ce,this);return this.providers.set(ce,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},879:($r,hi,et)=>{et.d(hi,{Am:()=>Gt,Ub:()=>Tn,Yd:()=>ri,in:()=>ee});const D=[];var ee=function(ce){return ce[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",ce}(ee||{});const U={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Ge=ee.INFO,yt={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},jn=(ce,Ee,...He)=>{if(Ee<ce.logLevel)return;const ft=(new Date).toISOString(),en=yt[Ee];if(!en)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[en](`[${ft}]  ${ce.name}:`,...He)};class ri{constructor(Ee){this.name=Ee,this._logLevel=Ge,this._logHandler=jn,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in ee))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?U[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...Ee),this._logHandler(this,ee.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...Ee),this._logHandler(this,ee.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...Ee),this._logHandler(this,ee.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...Ee),this._logHandler(this,ee.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...Ee),this._logHandler(this,ee.ERROR,...Ee)}}function Tn(ce){D.forEach(Ee=>{Ee.setLogLevel(ce)})}function Gt(ce,Ee){for(const He of D){let ft=null;Ee&&Ee.level&&(ft=U[Ee.level]),He.userLogHandler=null===ce?null:(en,Hn,...Pt)=>{const ct=Pt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");Hn>=(ft??en.logLevel)&&ce({level:ee[Hn].toLowerCase(),message:ct,args:Pt,type:en.name})}}}},365:($r,hi,et)=>{et.r(hi);var D=et(861),ee=et(106),U=et(560),Ge=et(58),ri=(et(534),et(879),et(537));function Tn(){return window}function Ee(){return Ee=(0,D.Z)(function*(w,I,E){var M;const{BuildInfo:oe}=Tn();(0,U.at)(I.sessionId,"AuthEvent did not contain a session ID");const Fe=yield function ut(w){return fi.apply(this,arguments)}(I.sessionId),Le={};return(0,U.au)()?Le.ibi=oe.packageName:(0,U.av)()?Le.apn=oe.packageName:(0,U.aw)(w,"operation-not-supported-in-this-environment"),oe.displayName&&(Le.appDisplayName=oe.displayName),Le.sessionId=Fe,(0,U.ax)(w,E,I.type,void 0,null!==(M=I.eventId)&&void 0!==M?M:void 0,Le)}),Ee.apply(this,arguments)}function ft(){return(ft=(0,D.Z)(function*(w){const{BuildInfo:I}=Tn(),E={};(0,U.au)()?E.iosBundleId=I.packageName:(0,U.av)()?E.androidPackageName=I.packageName:(0,U.aw)(w,"operation-not-supported-in-this-environment"),yield(0,U.ay)(w,E)})).apply(this,arguments)}function Pt(){return(Pt=(0,D.Z)(function*(w,I,E){const{cordova:M}=Tn();let oe=()=>{};try{yield new Promise((Fe,Le)=>{let dt=null;function _n(){var Ze;Fe();const Li=null===(Ze=M.plugins.browsertab)||void 0===Ze?void 0:Ze.close;"function"==typeof Li&&Li(),"function"==typeof E?.close&&E.close()}function Me(){dt||(dt=window.setTimeout(()=>{Le((0,U.aA)(w,"redirect-cancelled-by-user"))},2e3))}function Dn(){"visible"===document?.visibilityState&&Me()}I.addPassiveListener(_n),document.addEventListener("resume",Me,!1),(0,U.av)()&&document.addEventListener("visibilitychange",Dn,!1),oe=()=>{I.removePassiveListener(_n),document.removeEventListener("resume",Me,!1),document.removeEventListener("visibilitychange",Dn,!1),dt&&window.clearTimeout(dt)}})}finally{oe()}})).apply(this,arguments)}function fi(){return(fi=(0,D.Z)(function*(w){const I=function $n(w){if((0,U.at)(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const I=new ArrayBuffer(w.length),E=new Uint8Array(I);for(let M=0;M<w.length;M++)E[M]=w.charCodeAt(M);return E}(w),E=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(E)).map(oe=>oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ft extends U.aC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(I)),super.onEvent(I)}initialized(){var I=this;return(0,D.Z)(function*(){yield I.initPromise})()}}function _t(w){return ve.apply(this,arguments)}function ve(){return(ve=(0,D.Z)(function*(w){const I=yield Kn()._get(zn(w));return I&&(yield Kn()._remove(zn(w))),I})).apply(this,arguments)}function Cn(){const w=[];for(let E=0;E<20;E++){const M=Math.floor(62*Math.random());w.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(M))}return w.join("")}function Kn(){return(0,U.aD)(U.b)}function zn(w){return(0,U.aE)("authEvent",w.config.apiKey,w.name)}function it(w){if(!w?.includes("?"))return{};const[I,...E]=w.split("?");return(0,Ge.zd)(E.join("?"))}const q=class so{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aF,this._overrideRedirectResult=U.aG}_initialize(I){var E=this;return(0,D.Z)(function*(){const M=I._key();let oe=E.eventManagers.get(M);return oe||(oe=new Ft(I),E.eventManagers.set(M,oe),E.attachCallbackListeners(I,oe)),oe})()}_openPopup(I){(0,U.aw)(I,"operation-not-supported-in-this-environment")}_openRedirect(I,E,M,oe){var Fe=this;return(0,D.Z)(function*(){!function ct(w){var I,E,M,oe,Fe,Le,dt,_n,Me,Dn;const Ze=Tn();(0,U.aB)("function"==typeof(null===(I=Ze?.universalLinks)||void 0===I?void 0:I.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.aB)(typeof(null===(E=Ze?.BuildInfo)||void 0===E?void 0:E.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.aB)("function"==typeof(null===(Fe=null===(oe=null===(M=Ze?.cordova)||void 0===M?void 0:M.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Fe?void 0:Fe.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aB)("function"==typeof(null===(_n=null===(dt=null===(Le=Ze?.cordova)||void 0===Le?void 0:Le.plugins)||void 0===dt?void 0:dt.browsertab)||void 0===_n?void 0:_n.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aB)("function"==typeof(null===(Dn=null===(Me=Ze?.cordova)||void 0===Me?void 0:Me.InAppBrowser)||void 0===Dn?void 0:Dn.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const Le=yield Fe._initialize(I);yield Le.initialized(),Le.resetRedirect(),(0,U.aH)(),yield Fe._originValidation(I);const dt=function ur(w,I,E=null){return{type:I,eventId:E,urlResponse:null,sessionId:Cn(),postBody:null,tenantId:w.tenantId,error:(0,U.aA)(w,"no-auth-event")}}(I,M,oe);yield function pi(w,I){return Kn()._set(zn(w),I)}(I,dt);const _n=yield function ce(w,I,E){return Ee.apply(this,arguments)}(I,dt,E),Me=yield function en(w){const{cordova:I}=Tn();return new Promise(E=>{I.plugins.browsertab.isAvailable(M=>{let oe=null;M?I.plugins.browsertab.openUrl(w):oe=I.InAppBrowser.open(w,(0,U.az)()?"_blank":"_system","location=yes"),E(oe)})})}(_n);return function Hn(w,I,E){return Pt.apply(this,arguments)}(I,Le,Me)})()}_isIframeWebStorageSupported(I,E){throw new Error("Method not implemented.")}_originValidation(I){const E=I._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function He(w){return ft.apply(this,arguments)}(I)),this.originValidationPromises[E]}attachCallbackListeners(I,E){const{universalLinks:M,handleOpenURL:oe,BuildInfo:Fe}=Tn(),Le=setTimeout((0,D.Z)(function*(){yield _t(I),E.onEvent(X())}),500),dt=function(){var Dn=(0,D.Z)(function*(Ze){clearTimeout(Le);const Li=yield _t(I);let il=null;Li&&Ze?.url&&(il=function Vt(w,I){var E,M;const oe=function oo(w){const I=it(w),E=I.link?decodeURIComponent(I.link):void 0,M=it(E).link,oe=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return it(oe).link||oe||M||E||w}(I);if(oe.includes("/__/auth/callback")){const Fe=it(oe),Le=Fe.firebaseError?function ro(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(Fe.firebaseError)):null,dt=null===(M=null===(E=Le?.code)||void 0===E?void 0:E.split("auth/"))||void 0===M?void 0:M[1],_n=dt?(0,U.aA)(dt):null;return _n?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:_n,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:oe,postBody:null}}return null}(Li,Ze.url)),E.onEvent(il||X())});return function(Li){return Dn.apply(this,arguments)}}();typeof M<"u"&&"function"==typeof M.subscribe&&M.subscribe(null,dt);const _n=oe,Me=`${Fe.packageName.toLowerCase()}://`;Tn().handleOpenURL=function(){var Dn=(0,D.Z)(function*(Ze){if(Ze.toLowerCase().startsWith(Me)&&dt({url:Ze}),"function"==typeof _n)try{_n(Ze)}catch(Li){console.error(Li)}});return function(Ze){return Dn.apply(this,arguments)}}()}};function X(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.aA)("no-auth-event")}}function De(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Ce(w=(0,Ge.z$)()){return!("file:"!==De()&&"ionic:"!==De()&&"capacitor:"!==De()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ln(){try{const w=self.localStorage,I=U.aM();if(w)return w.setItem(I,"1"),w.removeItem(I),!function pn(w=(0,Ge.z$)()){return function Wt(){return(0,Ge.w1)()&&11===document?.documentMode}()||function Fn(w=(0,Ge.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Ge.hl)()}catch{return oi()&&(0,Ge.hl)()}return!1}function oi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function j(){return(function Dt(){return"http:"===De()||"https:"===De()}()||(0,Ge.ru)()||Ce())&&!function Ke(){return(0,Ge.b$)()||(0,Ge.UG)()}()&&Ln()&&!oi()}function B(){return Ce()&&typeof document<"u"}function ue(){return(ue=(0,D.Z)(function*(){return!!B()&&new Promise(w=>{const I=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(I),w(!0)})})})).apply(this,arguments)}const ye={LOCAL:"local",NONE:"none",SESSION:"session"},In=U.aB,Bt="persistence";function xn(w){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,D.Z)(function*(w){yield w._initializationPromise;const I=zi(),E=U.aE(Bt,w.config.apiKey,w.name);I&&I.setItem(E,w._getPersistence())})).apply(this,arguments)}function zi(){var w;try{return(null===(w=function Ae(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const Ji=U.aB;class yn{constructor(){this.browserResolver=U.aD(U.k),this.cordovaResolver=U.aD(q),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aF,this._overrideRedirectResult=U.aG}_initialize(I){var E=this;return(0,D.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,E,M,oe){var Fe=this;return(0,D.Z)(function*(){return yield Fe.selectUnderlyingResolver(),Fe.assertedUnderlyingResolver._openPopup(I,E,M,oe)})()}_openRedirect(I,E,M,oe){var Fe=this;return(0,D.Z)(function*(){return yield Fe.selectUnderlyingResolver(),Fe.assertedUnderlyingResolver._openRedirect(I,E,M,oe)})()}_isIframeWebStorageSupported(I,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,E)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return B()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ji(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,D.Z)(function*(){if(I.underlyingResolver)return;const E=yield function Q(){return ue.apply(this,arguments)}();I.underlyingResolver=E?I.cordovaResolver:I.browserResolver})()}}function qt(w){return w.unwrap()}function mn(w){return Vn(w)}function Vn(w){const{_tokenResponse:I}=w instanceof Ge.ZR?w.customData:w;if(!I)return null;if(!(w instanceof Ge.ZR)&&"temporaryProof"in I&&"phoneNumber"in I)return U.P.credentialFromResult(w);const E=I.providerId;if(!E||E===U.p.PASSWORD)return null;let M;switch(E){case U.p.GOOGLE:M=U.W;break;case U.p.FACEBOOK:M=U.V;break;case U.p.GITHUB:M=U.X;break;case U.p.TWITTER:M=U._;break;default:const{oauthIdToken:oe,oauthAccessToken:Fe,oauthTokenSecret:Le,pendingToken:dt,nonce:_n}=I;return Fe||Le||oe||dt?dt?E.startsWith("saml.")?U.aP._create(E,dt):U.M._fromParams({providerId:E,signInMethod:E,pendingToken:dt,idToken:oe,accessToken:Fe}):new U.Y(E).credential({idToken:oe,accessToken:Fe,rawNonce:_n}):null}return w instanceof Ge.ZR?M.credentialFromError(w):M.credentialFromResult(w)}function Gn(w,I){return I.catch(E=>{throw E instanceof Ge.ZR&&function tl(w,I){var E;const M=null===(E=I.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===I?.code)I.resolver=new Ko(w,U.ar(w,I));else if(M){const oe=Vn(I),Fe=I;oe&&(Fe.credential=oe,Fe.tenantId=M.tenantId||void 0,Fe.email=M.email||void 0,Fe.phoneNumber=M.phoneNumber||void 0)}}(w,E),E}).then(E=>{const oe=E.user;return{operationType:E.operationType,credential:mn(E),additionalUserInfo:U.ap(E),user:Fi.getOrCreate(oe)}})}function qo(w,I){return ao.apply(this,arguments)}function ao(){return(ao=(0,D.Z)(function*(w,I){const E=yield I;return{verificationId:E.verificationId,confirm:M=>Gn(w,E.confirm(M))}})).apply(this,arguments)}class Ko{constructor(I,E){this.resolver=E,this.auth=function an(w){return w.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return Gn(qt(this.auth),this.resolver.resolveSignIn(I))}}class Fi{constructor(I){this._delegate=I,this.multiFactor=U.as(I)}static getOrCreate(I){return Fi.USER_MAP.has(I)||Fi.USER_MAP.set(I,new Fi(I)),Fi.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var E=this;return(0,D.Z)(function*(){return Gn(E.auth,U.a1(E._delegate,I))})()}linkWithPhoneNumber(I,E){var M=this;return(0,D.Z)(function*(){return qo(M.auth,U.l(M._delegate,I,E))})()}linkWithPopup(I){var E=this;return(0,D.Z)(function*(){return Gn(E.auth,U.d(E._delegate,I,yn))})()}linkWithRedirect(I){var E=this;return(0,D.Z)(function*(){return yield xn(U.aI(E.auth)),U.g(E._delegate,I,yn)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var E=this;return(0,D.Z)(function*(){return Gn(E.auth,U.a2(E._delegate,I))})()}reauthenticateWithPhoneNumber(I,E){return qo(this.auth,U.r(this._delegate,I,E))}reauthenticateWithPopup(I){return Gn(this.auth,U.e(this._delegate,I,yn))}reauthenticateWithRedirect(I){var E=this;return(0,D.Z)(function*(){return yield xn(U.aI(E.auth)),U.h(E._delegate,I,yn)})()}sendEmailVerification(I){return U.af(this._delegate,I)}unlink(I){var E=this;return(0,D.Z)(function*(){return yield U.ao(E._delegate,I),E})()}updateEmail(I){return U.ak(this._delegate,I)}updatePassword(I){return U.al(this._delegate,I)}updatePhoneNumber(I){return U.u(this._delegate,I)}updateProfile(I){return U.aj(this._delegate,I)}verifyBeforeUpdateEmail(I,E){return U.ag(this._delegate,I,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fi.USER_MAP=new WeakMap;const xi=U.aB;let hr=(()=>{class w{constructor(E,M){if(this.app=E,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:oe}=E.options;xi(oe,"invalid-api-key",{appName:E.name}),xi(oe,"invalid-api-key",{appName:E.name});const Fe=typeof window<"u"?yn:void 0;this._delegate=M.initialize({options:{persistence:Gl(oe,E.name),popupRedirectResolver:Fe}}),this._delegate._updateErrorMap(U.E),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,M){U.J(this._delegate,E,M)}applyActionCode(E){return U.a6(this._delegate,E)}checkActionCode(E){return U.a7(this._delegate,E)}confirmPasswordReset(E,M){return U.a5(this._delegate,E,M)}createUserWithEmailAndPassword(E,M){var oe=this;return(0,D.Z)(function*(){return Gn(oe._delegate,U.a9(oe._delegate,E,M))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return U.ae(this._delegate,E)}isSignInWithEmailLink(E){return U.ac(this._delegate,E)}getRedirectResult(){var E=this;return(0,D.Z)(function*(){xi(j(),E._delegate,"operation-not-supported-in-this-environment");const M=yield U.j(E._delegate,yn);return M?Gn(E._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function $(w,I){(0,U.aI)(w)._logFramework(I)}(this._delegate,E)}onAuthStateChanged(E,M,oe){const{next:Fe,error:Le,complete:dt}=lo(E,M,oe);return this._delegate.onAuthStateChanged(Fe,Le,dt)}onIdTokenChanged(E,M,oe){const{next:Fe,error:Le,complete:dt}=lo(E,M,oe);return this._delegate.onIdTokenChanged(Fe,Le,dt)}sendSignInLinkToEmail(E,M){return U.ab(this._delegate,E,M)}sendPasswordResetEmail(E,M){return U.a4(this._delegate,E,M||void 0)}setPersistence(E){var M=this;return(0,D.Z)(function*(){let oe;switch(function Nt(w,I){In(Object.values(ye).includes(I),w,"invalid-persistence-type"),(0,Ge.b$)()?In(I!==ye.SESSION,w,"unsupported-persistence-type"):(0,Ge.UG)()?In(I===ye.NONE,w,"unsupported-persistence-type"):oi()?In(I===ye.NONE||I===ye.LOCAL&&(0,Ge.hl)(),w,"unsupported-persistence-type"):In(I===ye.NONE||Ln(),w,"unsupported-persistence-type")}(M._delegate,E),E){case ye.SESSION:oe=U.a;break;case ye.LOCAL:oe=(yield U.aD(U.i)._isAvailable())?U.i:U.b;break;case ye.NONE:oe=U.Q;break;default:return U.aw("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(oe)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return Gn(this._delegate,U.$(this._delegate))}signInWithCredential(E){return Gn(this._delegate,U.a0(this._delegate,E))}signInWithCustomToken(E){return Gn(this._delegate,U.a3(this._delegate,E))}signInWithEmailAndPassword(E,M){return Gn(this._delegate,U.aa(this._delegate,E,M))}signInWithEmailLink(E,M){return Gn(this._delegate,U.ad(this._delegate,E,M))}signInWithPhoneNumber(E,M){return qo(this._delegate,U.s(this._delegate,E,M))}signInWithPopup(E){var M=this;return(0,D.Z)(function*(){return xi(j(),M._delegate,"operation-not-supported-in-this-environment"),Gn(M._delegate,U.c(M._delegate,E,yn))})()}signInWithRedirect(E){var M=this;return(0,D.Z)(function*(){return xi(j(),M._delegate,"operation-not-supported-in-this-environment"),yield xn(M._delegate),U.f(M._delegate,E,yn)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return U.a8(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=ye,w})();function lo(w,I,E){let M=w;"function"!=typeof w&&({next:M,error:I,complete:E}=w);const oe=M;return{next:Le=>oe(Le&&Fi.getOrCreate(Le)),error:I,complete:E}}function Gl(w,I){const E=function Pi(w,I){const E=zi();if(!E)return[];const M=U.aE(Bt,w,I);switch(E.getItem(M)){case ye.NONE:return[U.Q];case ye.LOCAL:return[U.i,U.a];case ye.SESSION:return[U.a];default:return[]}}(w,I);if(typeof self<"u"&&!E.includes(U.i)&&E.push(U.i),typeof window<"u")for(const M of[U.b,U.a])E.includes(M)||E.push(M);return E.includes(U.Q)||E.push(U.Q),E}class pa{constructor(){this.providerId="phone",this._delegate=new U.P(qt(ee.Z.auth()))}static credential(I,E){return U.P.credential(I,E)}verifyPhoneNumber(I,E){return this._delegate.verifyPhoneNumber(I,E)}unwrap(){return this._delegate}}pa.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,pa.PROVIDER_ID=U.P.PROVIDER_ID;const nl=U.aB;class vs{constructor(I,E,M=ee.Z.app()){var oe;nl(null===(oe=M.options)||void 0===oe?void 0:oe.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new U.R(M.auth(),I,E),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function R(w){w.INTERNAL.registerComponent(new ri.wA("auth-compat",I=>{const E=I.getProvider("app-compat").getImmediate(),M=I.getProvider("auth");return new hr(E,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.U,FacebookAuthProvider:U.V,GithubAuthProvider:U.X,GoogleAuthProvider:U.W,OAuthProvider:U.Y,SAMLAuthProvider:U.Z,PhoneAuthProvider:pa,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:vs,TwitterAuthProvider:U._,Auth:hr,AuthCredential:U.K,Error:Ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.4.8")}(ee.Z)},861:($r,hi,et)=>{function D(U,Ge,yt,jn,ri,Tn,Gt){try{var ce=U[Tn](Gt),Ee=ce.value}catch(He){return void yt(He)}ce.done?Ge(Ee):Promise.resolve(Ee).then(jn,ri)}function ee(U){return function(){var Ge=this,yt=arguments;return new Promise(function(jn,ri){var Tn=U.apply(Ge,yt);function Gt(Ee){D(Tn,jn,ri,Gt,ce,"next",Ee)}function ce(Ee){D(Tn,jn,ri,Gt,ce,"throw",Ee)}Gt(void 0)})}}et.d(hi,{Z:()=>ee})},582:($r,hi,et)=>{function Ge(q,X){var $={};for(var K in q)Object.prototype.hasOwnProperty.call(q,K)&&X.indexOf(K)<0&&($[K]=q[K]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(K=Object.getOwnPropertySymbols(q);pe<K.length;pe++)X.indexOf(K[pe])<0&&Object.prototype.propertyIsEnumerable.call(q,K[pe])&&($[K[pe]]=q[K[pe]])}return $}function He(q,X,$,K){return new($||($=Promise))(function(se,De){function Dt(Wt){try{Ke(K.next(Wt))}catch(Fn){De(Fn)}}function Ce(Wt){try{Ke(K.throw(Wt))}catch(Fn){De(Fn)}}function Ke(Wt){Wt.done?se(Wt.value):function pe(se){return se instanceof $?se:new $(function(De){De(se)})}(Wt.value).then(Dt,Ce)}Ke((K=K.apply(q,X||[])).next())})}function xt(q){return this instanceof xt?(this.v=q,this):new xt(q)}function Ft(q,X,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,K=$.apply(q,X||[]),se=[];return pe={},De("next"),De("throw"),De("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function De(pn){K[pn]&&(pe[pn]=function(Ln){return new Promise(function(oi,j){se.push([pn,Ln,oi,j])>1||Dt(pn,Ln)})})}function Dt(pn,Ln){try{!function Ce(pn){pn.value instanceof xt?Promise.resolve(pn.value.v).then(Ke,Wt):Fn(se[0][2],pn)}(K[pn](Ln))}catch(oi){Fn(se[0][3],oi)}}function Ke(pn){Dt("next",pn)}function Wt(pn){Dt("throw",pn)}function Fn(pn,Ln){pn(Ln),se.shift(),se.length&&Dt(se[0][0],se[0][1])}}function pi(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $,X=q[Symbol.asyncIterator];return X?X.call(q):(q=function Pt(q){var X="function"==typeof Symbol&&Symbol.iterator,$=X&&q[X],K=0;if($)return $.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&K>=q.length&&(q=void 0),{value:q&&q[K++],done:!q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),$={},K("next"),K("throw"),K("return"),$[Symbol.asyncIterator]=function(){return this},$);function K(se){$[se]=q[se]&&function(De){return new Promise(function(Dt,Ce){!function pe(se,De,Dt,Ce){Promise.resolve(Ce).then(function(Ke){se({value:Ke,done:Dt})},De)}(Dt,Ce,(De=q[se](De)).done,De.value)})}}}et.d(hi,{FC:()=>Ft,KL:()=>pi,_T:()=>Ge,mG:()=>He,qq:()=>xt}),"function"==typeof SuppressedError&&SuppressedError}},$r=>{var hi=D=>$r($r.s=D);hi(614),hi(682)}]);